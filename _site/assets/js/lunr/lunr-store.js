var store = [{
        "title": "Django Setting",
        "excerpt":"Pipenv ë¥¼ ì´ìš©í•˜ì—¬ ê°€ìƒí™˜ê²½ Setting   pipenv ë€?   â†’ python ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°€ìƒí™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ë°©ì‹ ì¤‘ í•˜ë‚˜.   pipenv ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ    â†’ í”„ë¡œì íŠ¸ë³„ë¡œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë©°, ê°™ì€ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ë²„ì „ì´ ë‹¤ë¥¸ ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì— pipenv ë¡œ ê°€ìƒí™˜ê²½ì„ ë§Œë“ ë‹¤.   ì„¤ì¹˜ë°©ë²•   â†’ pipenv ë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— python ì„ ì„¤ì¹˜ í•´ì•¼ í•¨.   ì•„ë˜ ë¶€í„°ëŠ” osì— ë”°ë¼ ì„¤ì¹˜ ë°©ë²•ì´ ë‹¤ë¦…ë‹ˆë‹¤.           window       python ì´ ì„¤ì¹˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸                       cmd ì°½ì—ì„œ python ì„ ê²€ìƒ‰                              ìœ„ì˜ ì‚¬ì§„ê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤ë©´ pipenv ë¥¼ ì„¤ì¹˜í•  ì¤€ë¹„ ë!       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  # í”„ë¡œì íŠ¸ ìƒì„± ë° í”„ë¡œì íŠ¸ë¡œ ì§„ì…  mkdir project  cd project   # pip ìœ¼ë¡œ pipenv ì„¤ì¹˜  pip install pipenv   # python ë²„ì „ í™•ì¸  python --version   # python 3.6.8 ì— í•´ë‹¹í•˜ëŠ” pipenv ì„¤ì¹˜  # ìœ„ì—ì„œ ë‚˜ì˜¨ ë²„ì „ì„ ì•„ë˜ì— ì¨ì¤ë‹ˆë‹¤.  pipenv --python 3.6.8   # pipenv ê°€ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸  pipenv   # ê°€ìƒí™˜ê²½ìœ¼ë¡œ ë“¤ì–´ê°  pipenv shell   # ê°€ìƒí™˜ê²½ì—ì„œ ë‚˜ì˜´  exit                mac       ë§¥ì€ ê¸°ë³¸ì ìœ¼ë¡œ python ì´ ì„¤ì¹˜ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ê³¼ì •ì€ skip í•©ë‹ˆë‹¤.       1 2 3 4 5 6 7  brew install pipenv   pipenv   pipenv â€”three   pipenv shell                Django ì„¤ì¹˜   ì´ì œ ì¥ê³ ë¥¼ ì„¤ì¹˜í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.   pipenv install django    ì¥ê³ ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸   â†’ django-admin    ì´ì œ ì„œë²„ ì‹¤í–‰í•©ë‹ˆë‹¤!   ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•˜ë©´ ê¸°ë³¸ í¬íŠ¸ 8000ìœ¼ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•´ì£¼ê³    python manage.py runserver    ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ë©´ í¬íŠ¸ë¥¼ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   python manage.py runserver 8888    ë‹¤ìŒê³¼ ê°™ì´ í™”ë©´ì´ ë‚˜ì˜¨ë‹¤ë©´ ì¥ê³  ê¸°ë³¸ ì…‹íŒ…ì€ ëë‚¬ìŠµë‹ˆë‹¤     ","categories": ["Django"],
        "tags": ["Django","Python"],
        "url": "/django/Django-Setting/",
        "teaser": ""
      },{
        "title": "Django, Nginx, Gunicorn Setting (CentOS)",
        "excerpt":"Python3 ì„¤ì¹˜   yum ìœ¼ë¡œ python3 ì„¤ì¹˜  1 yum install python3 -y   yum ìœ¼ë¡œ python3 ì„ ì„¤ì¹˜í•˜ë©´ pip3 ë„ ê°™ì´ ì„¤ì¹˜ë¨   python3 ë¥¼ ì…ë ¥. ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„¤ì¹˜ ì™„ë£Œ      ì„¤ì¹˜í•˜ê³ ì í•˜ëŠ” í”„ë¡œì íŠ¸ ê²½ë¡œì— ê°€ìƒí™˜ê²½ ì„¤ì¹˜   1 2 3 /usr/local/thriller/thriller pip3 install virtualenv virtualenv venv   ê°€ìƒí™˜ê²½ì— ì ‘ì†   1 source venv/bin/activate      ê°€ìƒí™˜ê²½ì—ì„œ ë¹ ì ¸ë‚˜ì˜´   1 deactivate          MySQL DataBase, ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬   mysql ì— ì ‘ì†      ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±   1 mysql&gt; CREATE DATABASE ë°ì´í„°ë² ì´ìŠ¤ëª… default CHARACTER SET UTF8;   ì‚¬ìš©ì ìƒì„±, ê¶Œí•œ ë¶€ì—¬   1 2 3 4 5 mysql&gt; CREATE USER 'ì‚¬ìš©ìëª…'@'localhost' IDENTIFIED BY 'ë¹„ë°€ë²ˆí˜¸';  mysql&gt; GRANT ALL PRIVILEGES on ë°ì´í„°ë² ì´ìŠ¤ëª….* TO 'ì‚¬ìš©ìëª…'@'localhost' identified by 'ë¹„ë°€ë²ˆí˜¸'; mysql&gt; GRANT ALL PRIVILEGES on ë°ì´í„°ë² ì´ìŠ¤ëª….* TO 'ì‚¬ìš©ìëª…'@'127.0.0.1' identified by 'ë¹„ë°€ë²ˆí˜¸'; mysql&gt; FLUSH PRIVILEGES;      ë°ì´í„°ë² ì´ìŠ¤, ì‚¬ìš©ì ì‚­ì œ   1 2 mysql&gt; DROP DATABASE ë°ì´í„°ë² ì´ìŠ¤ëª…; mysql&gt; DROP USER ì‚¬ìš©ìëª…@SERVERëª…;   ì‚¬ìš©ì ì¡°íšŒ   1 2 3 4 5 6 7 8 9 10 11 12 13 mysql&gt; use mysql; Database changed mysql&gt; select host, user from user; +---------------+-----------+ | host          | user      | +---------------+-----------+ | 127.0.0.1     | thriller  | | 59.15.244.217 | thriller  | | localhost     | mysql.sys | | localhost     | root      | | localhost     | thriller  | +---------------+-----------+ 5 rows in set (0.00 sec)   ë‹¤ìŒ ê³¼ì •ë¶€í„°ëŠ” í”„ë¡œì íŠ¸ ê²½ë¡œì— gitìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ë°›ì•„ì™”ë‹¤ê³  ê°€ì •í•˜ê³  ì§„í–‰í•©ë‹ˆë‹¤.        gunicorn ì„¤ì •   gunicorn ì„¤ì¹˜ (ê°€ìƒí™˜ê²½ ìƒíƒœì—ì„œ)   1 (venv) &gt; pip3 install gunicorn   mysql ì—°ê²°   1 2 3 4 5 yum install mysql-devel  yum install python3-devel  (venv) pip install mysqlclient   í…ŒìŠ¤íŠ¸ êµ¬ë™   1 2 3 4 5 6 &gt; python manage.py runserver 0.0.0.0:8000 &gt; gunicorn --bind 0.0.0.0:8000 thriller.wsgi:application [2021-04-06 16:27:23 +0900] [9674] [INFO] Starting gunicorn 20.1.0 [2021-04-06 16:27:23 +0900] [9674] [INFO] Listening at: http://0.0.0.0:8000 (9674) [2021-04-06 16:27:23 +0900] [9674] [INFO] Using worker: sync [2021-04-06 16:27:23 +0900] [9677] [INFO] Booting worker with pid: 9677   êµ¬ë™ì´ ì˜ë˜ë©´ ê°€ìƒí™˜ê²½ ë¹ ì ¸ë‚˜ì˜¨ë‹¤   1 &gt; deactivate   1 2 3 4 5 6 &gt; mkdir /run/gunicorn  &gt; sudo chown youurUserName.yourGroup /run/gunicorn  # youurUserName =&gt; &gt; whoami # yourGroup =&gt; &gt; groups   vi /etc/systemd/system/gunicorn.service   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 [Unit] Description=gunicorn daemon After=network.target  [Service] PIDFile=/run/gunicorn/pid User=root Group=root WorkingDirectory=/usr/local/thriller/thriller ExecStart=/usr/local/thriller/thriller/venv/bin/gunicorn \\         --pid /run/gunicorn/pid \\         --workers 2 \\         --bind unix:/run/gunicorn/gunicorn.sock \\         thriller.wsgi:application  ExecReload=/bin/kill -s HUP $MAINPID ExecStop=/bin/kill -s TERM $MAINPID  [Install] WantedBy=multi-user.target   ìˆ˜ì • í›„ ì ìš©ì‹œ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥   1 &gt; systemctl daemon-reload   1 2 3 systemctl start gunicorn # ì„œë²„ ì¬ë¶€íŒ… ì‹œì—ë„ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ê²Œ systemctl enable gunicorn            Nginx ì„¤ì •   /etc/nginx/conf.d ì•„ë˜ì— í”„ë¡œì íŠ¸ ëª…ì— í•´ë‹¹í•˜ëŠ” config íŒŒì¼ ìƒì„±   vi /etc/nginx/conf.d/thriller.conf   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 server {     listen 80;     server_name 112.175.88.124;      location /static {         alias /usr/local/thriller/staticfiles;     }      location / {         proxy_set_header Host $host;         proxy_set_header X-Real-IP $remote_addr;         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;         proxy_set_header X-Forwarded-Proto $scheme;         proxy_pass http://unix:/run/gunicorn/gunicorn.sock;     } }   nginx ì¬ì‹œì‘   1 nginx -s reload    ì„¤ì • ì™„ë£Œ!ğŸ˜  ","categories": ["Django"],
        "tags": ["Django","Python","Nginx","Gunicorn","CentOS"],
        "url": "/django/Django-Nginx-Gunicorn/",
        "teaser": ""
      },{
        "title": "Django Forms",
        "excerpt":"Django Form   ì¥ê³ ì—ëŠ” Model í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ Form ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.   ì¥ê³ ì˜ í¼ì—ëŠ” is_valid() ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤   is_valid() ë€?   â‡’ ì…ë ¥ë°›ì€ í¼ì— ëŒ€í•œ ìœ íš¨ì„±ì„ ê²€ì‚¬   views.py  1 2 3 4 5 6 7 8 9 10 11 12 13 14 from django.views import View from django.shortcuts import render from . import forms  class LoginView(View):     def get(self, request):         form = forms.LoginForm(initial={\"email\": \"\"})         return render(request, \"users/login.html\", {\"form\": form})      def post(self, request):         form = forms.LoginForm(request.POST)         if form.is_valid():             print(form.cleaned_data)         return render(request, \"users/login.html\", {\"form\": form})       cleaned_data ë€?   is_valid() ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ìœ íš¨ì„± ê²€ì‚¬ê°€ ëë‚˜ê³  ê·¸ ê°’ì´ true ì¼ë•Œ ê° ê°’ë“¤ì€ cleaned_data ì— ì €ì¥ëœë‹¤.   clean ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë©”ì„œë“œ ë“¤ì€ ê°ê°ì˜ ê°’ë“¤ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.   forms.py  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 from django import forms from . import models  class LoginForm(forms.Form):      email = forms.EmailField()     password = forms.CharField(widget=forms.PasswordInput)      def clean_email(self):         email = self.cleaned_data.get(\"email\")         try:             models.User.objects.get(username=email)             return email         except models.User.DoesNotExist:             raise forms.ValidationError(\"User does not exist\")      def clean_password(self):         return \"lalal\"       django ì—ì„œ post ë¡œ ì „ì†¡ ì‹œ csrf_token ì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤   login.html  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  {% extends 'base.html' %}  {% block page_title %}     Log In {% endblock page_title %}  {% block search-bar %} {% endblock search-bar %}  {% block content %}     &lt;form method=\"POST\" action=\"{% url 'users:login' %}\"&gt;         {% csrf_token %}         {{form.as_p}}         &lt;button&gt;Login&lt;/button&gt;     &lt;/form&gt; {% endblock content %}   ","categories": ["Django"],
        "tags": ["Django","Python"],
        "url": "/django/Django-Forms/",
        "teaser": ""
      },{
        "title": "Django User Settings",
        "excerpt":"AUTH_USER_MODEL ì„¤ì •   ì¥ê³ ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ì¥ë˜ì–´ìˆëŠ” AbstractUser ì´ ìˆë‹¤.   ë‚´ì¥ëœ AbstractUser ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ ë³´í†µì€ ìƒˆë¡­ê²Œ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—   ì•„ë˜ ì„¤ì •ì„ settings.py íŒŒì¼ì—ì„œ í•´ì¤€ë‹¤.   â†’ ì•„ë˜ ì„¤ì •ì„ ìƒëµí•˜ë©´ ì¥ê³ ì˜ ê¸°ë³¸ì ìœ¼ë¡œ ì„¸íŒ…ë˜ì–´ìˆëŠ” user ëª¨ë¸ê³¼ í˜¼ë™ì´ ì˜¬ ìˆ˜ ìˆìŒ   1 AUTH_USER_MODEL = 'users.User'       LOGIN_URL, LOGIN_REDIRECT_URL ì„¤ì •   Django ì˜  Login, Logout ë©”ì»¤ë‹ˆì¦˜ì€           next ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë¨¼ì € ì°¾ìŒ. ì—†ë‹¤ë©´,            login_redirect_url ì„ ì°¾ëŠ”ë‹¤. ì—†ë‹¤ë©´,            default ë¡œ ê°„ë‹¤.       settings.py   1 2 LOGIN_URL = reverse_lazy('account:login') LOGIN_REDIRECT_URL = reverse_lazy('main:index')   next ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° login_redirect_url ë¥¼ ì„¤ì •í•  í•„ìš”ê°€ ìˆì„ê¹Œ?   â†’ yes!! ì£¼ì†Œì°½ì—ì„œ ì§ì ‘ ë“¤ì–´ê°€ê²Œ ë˜ë©´ next ë³€ìˆ˜ê°€ ì—†ì–´ì„œ default ë¡œ ê°€ê²Œ ë¨. ë”°ë¼ì„œ ì˜¤ë¥˜ ë°œìƒ  ","categories": ["Django"],
        "tags": ["Django","Python"],
        "url": "/django/Django-User-Settings/",
        "teaser": ""
      },{
        "title": "jekyll ë¡œ fork í•´ì˜¨ git blog í…Œë§ˆ, ì”ë””ë°­ ì•ˆì‹¬ì–´ì§ˆ ë•Œ",
        "excerpt":"í˜„ì¬ìƒíƒœ   git blog ë¥¼ ìƒì„±í•˜ë©´ì„œ jekyll í…Œë§ˆë¥¼ fork í•´ì„œ ë‚´ repository ì— ìƒì„±ì„ í–ˆì—ˆëŠ”ë°  ì”ë””ë°­ì´ ì•ˆì‹¬ì–´ì§€ëŠ” í˜„ìƒì„ ë°œê²¬! (ì´ì™•ì´ë©´ ì‹¬ì–´ì§€ë©´ ì¢‹ìœ¼ë‹ˆê¹Œ..)   ì•„ë§ˆ ë‚´ repository ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì‚¬ëŒì˜ repository ì— push ë˜ê³  ìˆëŠ”ê²Œ ì•„ë‹ê¹Œ ìƒê°..       í•´ê²°ë°©ì•ˆ      github ì— ìƒˆë¡œìš´ repository ë¥¼ ìƒì„± (new_blog)        ê¸°ì¡´ì— ìˆëŠ” repository ë¥¼ bare clone í•œë‹¤       1  git clone --bare https://github.com/user/old_blog.git                ìƒˆë¡œìš´ ë ˆíŒŒì§€í† ë¦¬ë¡œ mirror-push       1 2  cd old_blog.git  git push --mirror https://github.com/user/new_blog.git               git clone ì˜µì…˜   â€“normal: commit ì´ë ¥ ëª¨ë‘ ë‹´ê³  ìˆê³ , ê¸°ë³¸ branch ë¡œ ì„¤ì •ëœ ì†ŒìŠ¤ì½”ë“œê°€ working tree ì— ì¡´ì¬   â€“bare: commit ì´ë ¥ë§Œ ë‹´ê³  ìˆë‹¤   â€“mirror: ì¼ë°˜ì ì¸ commit ì´ë ¥ë¿ë§Œ ì•„ë‹ˆë¼ ìˆ¨ì–´ìˆëŠ” ëª¨ë“  ì´ë ¥ë“¤ì„ ë‹´ê³  ìˆë‹¤  ","categories": ["Git"],
        "tags": ["Git","GitBlog","GitHub"],
        "url": "/git/Git-fork-gitblog/",
        "teaser": ""
      },{
        "title": "python3, pip3 Symbolic Link ì„¤ì •",
        "excerpt":"í˜„ì¬ìƒíƒœ   Linux ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Python2 ë²„ì „ì´ ì„¤ì¹˜ëœë‹¤.   CentOS ì—ì„œ Python3 ë²„ì „ì„ ì„¤ì¹˜í–ˆëŠ”ë° python ì„ ì…ë ¥í•  ê²½ìš° 2.x  ë²„ì „ìœ¼ë¡œ ì¸ì‹í•œë‹¤.   ë§¤ë²ˆ python3 ìœ¼ë¡œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ëŠ”ê²Œ ë¶ˆí¸í•˜ì—¬ êµ¬ê¸€ë§ í•´ë³´ë‹ˆ Symbolic Link ë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.       í•´ê²°ë°©ì•ˆ   python3 ì„¤ì •  1 2 3 4 5 6 7 8 9 # í˜„ì¬ ì‹¬ë³¼ë¦­ ë§í¬ í™•ì¸ ls -l /bin/python*  # lrwxrwxrwx. 1 root root     7 Mar 25 22:45 /bin/python -&gt; python2 # lrwxrwxrwx. 1 root root     9 Mar 25 22:45 /bin/python2 -&gt; python2.7 # -rwxr-xr-x. 1 root root  7216 Aug  7  2019 /bin/python2.7 # lrwxrwxrwx. 1 root root     9 Jul  7 18:13 /bin/python3 -&gt; python3.6 # -rwxr-xr-x. 2 root root 11328 Nov 17  2020 /bin/python3.6 # -rwxr-xr-x. 2 root root 11328 Nov 17  2020 /bin/python3.6m   1 2 3 4 5 6 7 8 # ê¸°ì¡´ì˜ ì‹¬ë³¼ë¦­ ë§í¬ ì‚­ì œ sudo unlink /bin/python  # ì•„ë˜ì™€ ê°™ì´ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ê±¸ì–´ì¤€ë‹¤ sudo ln -s /bin/python3.6 /bin/python  # í™•ì¸ ls -l /bin/python*       pip3 ì„¤ì •  1 2 3 4 5 6 7 8 ls -l /bin/pip*  -rwxr-xr-x. 1 root root 407 Oct 14  2020 /bin/pip3 lrwxrwxrwx. 1 root root   9 Jul  7 18:13 /bin/pip-3 -&gt; ./pip-3.6 lrwxrwxrwx. 1 root root   8 Jul  7 18:13 /bin/pip-3.6 -&gt; ./pip3.6 -rwxr-xr-x. 1 root root 407 Oct 14  2020 /bin/pip3.6  ln -s /bin/pip3.6 /bin/pip      ì„¤ì • í›„ python, pip ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ 3 ë²„ì „ì„ ê°€ë¦¬í‚¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  ","categories": ["Python"],
        "tags": ["Python","Linux"],
        "url": "/python/python3-pip3-symbolic-link/",
        "teaser": ""
      },{
        "title": "Optional ì´ë€",
        "excerpt":"1. ê¸°ì¡´ì˜ null ì²˜ë¦¬   ì•„ë˜ ì½”ë“œëŠ” ê°’(ì£¼ì†Œ) ì´ ìˆë‹¤ë©´ ë¬¸ì œê°€ ì—†ëŠ” ì½”ë“œì´ë‹¤.   1 System.out.println(house.getAddress());       í•˜ì§€ë§Œ, ê°’(ì£¼ì†Œ) ì´ ì—†ë‹¤ë©´ NPE ê°€ ë°œìƒ í•œë‹¤.   ë”°ë¼ì„œ, null ì²˜ë¦¬ë¥¼ ìœ„í•´ì„  ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.   1 2 3 if (house.getAddress() != null) { \t\tSystem.out.println(house.getAddress()); }   if ë¬¸ì„ ì‚¬ìš©í•˜ë©´ null ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.       ìœ„ì˜ ì½”ë“œëŠ” ê°„ë‹¨í•˜ì—¬ ë³´ê¸°ì— ì¢‹ì§€ë§Œ ìˆ˜ ë§ì€ null ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê²Œ ë˜ë©´ ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§„ë‹¤.   ì´ëŸ´ë•Œ ì‚¬ìš©í•˜ëŠ”ê²Œ Optional í´ë˜ìŠ¤ë‹¤. (java8 ë¶€í„° ì§€ì›)       2. Optional í´ë˜ìŠ¤   Optional í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë³´ë‹¤ ë‚˜ì€ null ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆê³  NPE(Null Point Exception) ë¥¼ ë°©ì§€ í•  ìˆ˜ ìˆë‹¤.       3. Optional ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œ   3.1 Optional ê°ì²´ ìƒì„±           Optional.of()       â†’ value ê°€ null ì¸ ê²½ìš° NPE ì˜ˆì™¸ ë°œìƒ. ê°’ì´ ë°˜ë“œì‹œ ìˆì–´ì•¼ í•  ê²½ìš°ì— ì‚¬ìš©       1 2 3  // public static &lt;T&gt; Optional&lt;T&gt; of(T value);   Optional&lt;String&gt; result = Optional.of(value);                Optional.ofNullable()       â†’ value ê°€ null ì¸ ê²½ìš° ë¹„ì–´ìˆëŠ” Optional ë°˜í™˜. ê°’ì´ null ì¼ ìˆ˜ë„ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©       1 2 3  // public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value);   Optional&lt;String&gt; result = Optional.ofNullable(null);                Optional.empty()       â†’ ë¹„ì–´ìˆëŠ” Optional ê°ì²´ ìƒì„±       1 2 3  // public static&lt;T&gt; Optional&lt;T&gt; empty();   Optional&lt;String&gt; result = Optional.empty();               3.2 Optional ì¤‘ê°„ ì²˜ë¦¬           filter()       â†’ predicate ê°’ì´ ì°¸ì´ë©´ í•´ë‹¹ í•„í„°ë¥¼ í†µê³¼ì‹œí‚¤ê³  ê±°ì§“ì´ë©´ í†µê³¼ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.       1 2 3 4  // public Optional&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate);   Optional.of(\"1\").filter((val) -&gt; \"1\".eqauls(val)).orElse(\"NO DATA\"); // \"1\"  Optional.of(\"0\").filter((val) -&gt; \"1\".eqauls(val)).orElse(\"NO DATA\"); // \"NO DATA\"                map()       1 2 3 4  // public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper);   // string to integer  Integer test = Optional.of(\"1\").map(Integer::valueOf).orElseThrow(NoSuchElementException::new);               3.3 Optional ì¢…ë‹¨ ì²˜ë¦¬           ifPresent()       1 2 3 4 5 6 7 8 9 10  // public void ifPresent(Consumer&lt;? super T&gt; consumer);   // ex1.  Optional.of(\"test\").ifPresent((value) -&gt; {  \t// something to do  });  // ex2. (ifPresent ë¯¸ìˆ˜í–‰)  Optional.ofNullable(null).ifPresent((value) -&gt; {  \t// nothing to do  });                isPresent()       â†’ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ íŒë³„       1 2 3 4  // public boolean isPresent();   Optional.ofNullable(\"1\").isPresent(); // true  Optional.ofNullable(\"1\").filter((val) -&gt; \"0\".eqauls(val)).isPresent(); // false                get()       â†’ ê°ì²´ë¥¼ êº¼ëƒ„ (ë¹„ì–´ìˆëŠ” ê°ì²´ì´ë©´ ì˜ˆì™¸ ë°œìƒ)       1 2 3 4  // public T get();   Optional.of(\"test\").get(); // 'test'  Optional.ofNullable(null).get(); // Exception!!!                Optional.orElse()       â†’ ê°ì²´ê°€ ë¹„ì–´ìˆë‹¤ë©´ ê¸°ë³¸ê°’ ì œê³µ       1 2 3  // public T orElse(T other);   Optional.ofNullable(null).orElse(\"default\"); // 'default'                Optional.orElseGet()       â†’ ê°ì²´ê°€ ë¹„ì–´ìˆë‹¤ë©´ ê¸°ë³¸ê°’ ì œê³µ       1 2 3  // public T orElseGet(Supplier&lt;? extends T&gt; other);   Optional.ofNullable(\"input\").filter(\"test\"::equals).orElseGet(() -&gt; \"default\"); // 'default'                Optional.orElseThrow()       1 2 3  // public &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) throws X;   Optional.ofNullable(\"input\").filter(\"test\"::equals).orElseThrow(NoSuchElementException::new);               ë§Œì•½ ë¹ˆ Optional ê°ì²´ì— get() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ê²½ìš° NoSuchElementException ë°œìƒ   ë”°ë¼ì„œ, Optional ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê¸° ì „ì— ê°’ì´ ìˆëŠ”ì§€ í™•ì¸ í•´ì•¼ í•¨   ë‘ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë° ì•„ë˜ ë°©ë²•ì„ ê¶Œì¥í•œë‹¤.      isPresent()-get()   orElse(), orElseGet(), orElseThrow() (ê¶Œì¥)       4. Optional ì„ ì˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•           isPresent()-get() ëŒ€ì‹  orElse()/orElseGet()/orElseThrow()       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  // ì•ˆ ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  if (member.isPresent()) {      return member.get();  } else {      return null;  }       // ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  return member.orElse(null);       // ì•ˆ ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  if (member.isPresent()) {      return member.get();  } else {      throw new NoSuchElementException();  }       // ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  return member.orElseThrow(() -&gt; new NoSuchElementException());                orElse(new â€¦) ëŒ€ì‹  orElseGet(() -&gt; new â€¦)       1 2 3 4 5 6 7 8 9 10 11 12 13  // ì•ˆ ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  return member.orElse(new Member());  // memberì— ê°’ì´ ìˆë“  ì—†ë“  new Member()ëŠ” ë¬´ì¡°ê±´ ì‹¤í–‰ë¨       // ì¢‹ìŒ  Optional&lt;Member&gt; member = ...;  return member.orElseGet(Member::new);  // memberì— ê°’ì´ ì—†ì„ ë•Œë§Œ new Member()ê°€ ì‹¤í–‰ë¨       // ì¢‹ìŒ  Member EMPTY_MEMBER = new Member();  ...  Optional&lt;Member&gt; member = ...;  return member.orElse(EMPTY_MEMBER);  // ì´ë¯¸ ìƒì„±ëê±°ë‚˜ ê³„ì‚°ëœ ê°’ì€ orElse()ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©           ë‹¨ì§€ ê°’ì„ ì–»ì„ ëª©ì ì´ë¼ë©´ Optional ëŒ€ì‹  null   Optional ëŒ€ì‹  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ ë°˜í™˜   Optional ì„ í•„ë“œë¡œ ì‚¬ìš© ê¸ˆì§€   Optional ì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš© ê¸ˆì§€        Optional ì„ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš© ê¸ˆì§€       1 2  ex.   Map&lt;String, Optional&lt;String&gt;&gt; sports = new HashMap&lt;&gt;();                Optional ëŒ€ì‹  OptionalInt, OptionalLong, OptionalDouble       â†’ Type ì´ Int, Long, Double ì´ë©´ OptionalInt, OptionalLong, OptionalDouble ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŒ      ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-Optional/",
        "teaser": ""
      },{
        "title": "í…ŒìŠ¤íŠ¸ ì½”ë“œ",
        "excerpt":"í…ŒìŠ¤íŠ¸ ì½”ë“œ   í…ŒìŠ¤íŠ¸ ì½”ë“œë€   í”„ë¡œê·¸ë¨ ì‘ì„± ì‹œ ë¬¸ì œê°€ ì—†ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©       í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì´ìœ       ë¹ ë¥¸ í”¼ë“œë°±   ìë™ê²€ì¦ì´ ê°€ëŠ¥   ê°œë°œìê°€ ë§Œë“  ê¸°ëŠ¥ì„ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•´ ì¤€ë‹¤.       í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ë°©ë²•   â†’ ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ê³  ê·¸ ìœ„ì— @Test ë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.   â†’ í…ŒìŠ¤íŠ¸ì½”ë“œëŠ” ì§ê´€ì ìœ¼ë¡œ ë³´ê¸° ìœ„í•´ ë©”ì†Œë“œë¥¼ í•œê¸€ë¡œ ì‘ì„±í•˜ê¸°ë„ í•œë‹¤   â†’ í…ŒìŠ¤íŠ¸ì½”ë“œëŠ” ë¹Œë“œ ì‹œ í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë”°ë¼ì„œ, í•œê¸€ë¡œ ì‘ì„±í•´ë„ ëœë‹¤)       í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„± ì‹œ ì•„ë˜ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©´ ì¢‹ë‹¤.   1 2 3 4 5 6 7 8 @Test void íšŒì›ê°€ì…() {     // given      // when      // then }       í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ (TDD)   ê¸°ëŠ¥ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³  ê¸°ëŠ¥ êµ¬í˜„í•˜ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ (TDD) ì´ë¼ê³  í•œë‹¤.       í…ŒìŠ¤íŠ¸ ì½”ë“œ ê¼­ í•´ì•¼í• ê¹Œ ì— ëŒ€í•œ ì˜ë¬¸?   ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ì˜ ê²½ìš° í•„ìš”ê°€ ì—†ì„ ìˆ˜ë„ ìˆê³  ì¶œë ¥ë¬¸ì„ í†µí•´ ì§„í–‰ í•  ìˆ˜ë„ ìˆê² ë‹¤.   í•˜ì§€ë§Œ, ëª‡ë§Œ ë¼ì¸ ë„˜ì–´ê°€ëŠ” í”„ë¡œì íŠ¸ ê°™ì€ ê²½ìš° í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì—†ì´ ê°œë°œì‹œ ë¬¸ì œê°€ ë§ì´ ìƒê¹€   â†’ ë”°ë¼ì„œ, í…ŒìŠ¤íŠ¸ ì½”ë“œ ê´€ë ¨í•´ì„œëŠ” ê¹Šì´ ìˆëŠ” ê³µë¶€ê°€ í•„ìš”í•¨       JUnit ê³¼ AssertJ   java ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì‹œ JUnit ê³¼ assertj ë¥¼ ì£¼ë¡œ ì‚¬ìš©       JUnitì´ë€?  ìë°”ë¥¼ ìœ„í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬       JUnitì˜ assert ë©”ì†Œë“œë“¤   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import static org.junit.jupiter.api.Assertions;  Assertions.assertEquals(result, member); Assertions.assertNotEquals(result, member);  Assertions.assertTrue(result); Assertions.assertFalse(result);  Assertions.assertNull(result); Assertions.assertNotNull(result);  Assertions.assertSame(result); Assertions.assertNotSame(result);  Assertions.assertArrayEquals();  Assertions.assertThrows();       JUnitì˜ ì–´ë…¸í…Œì´ì…˜   @Test   â†’ ë©”ì†Œë“œ ìœ„ì— í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸, í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ë©”ì„œë„ì„ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ   @BeforeEach   â†’ ê³µí†µì ì¸ Param ë° ì„¤ì •ì„ í• ë•Œ í˜¸ì¶œë˜ë©´ ì¢‹ì„ ë¶€ë¶„ì´ë‹¤.   â†’ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ê³  ì‹¶ì„ ë•Œ   @AfterEach   â†’ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ì´ ëë‚˜ê³  ì‹¤í–‰ ëœë‹¤.   â†’ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì—¬ëŸ¬ ê°œì¼ ê²½ìš° ê°ê°ì˜ ì½”ë“œ ì‹¤í–‰ì´ ëë‚  ë•Œë§ˆë‹¤ ì‹¤í–‰   ì‚¬ìš©ì´ìœ !   ì—¬ëŸ¬ê°œì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ ì‹œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ìˆœì„œëŠ” ëœë¤ì´ë‹¤.   ì´ë•Œ ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ë°œìƒ í•  ìˆ˜ ìˆë‹¤.   ì¦‰, ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤  ì‹¤í–‰ì´ í•„ìš”í•˜ë‹¤   1 2 3 4 5 6 7 8 9 10 // MemberRepository public void clearStore(){     store.clear(); }  // MemberRepositoryTest @AfterEach public void afterEach() {     repository.clearStore(); }       AssertJë€?  ìë°” JUnitì˜ í…ŒìŠ¤íŠ¸ì½”ë“œì— ì‚¬ìš©ë˜ì–´, í…ŒìŠ¤íŠ¸ì½”ë“œì˜ ê°€ë…ì„±ê³¼ í¸ì˜ì„±ì„ ë†’ì—¬ ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬       AssertJì˜ assert ë©”ì†Œë“œ   AssertJì—ì„œ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” assertThat()ìœ¼ë¡œ ì‹œì‘í•¨.   assertThat(í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ).ë©”ì†Œë“œ1().ë©”ì†Œë“œ2().ë©”ì†Œë“œ3()â€™ ì´ëŸ° í¬ë§·ìœ¼ë¡œ AssertJì˜ ì—¬ëŸ¬ ë©”ì†Œë“œë“¤ì„ ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œí•´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. (ë©”ì„œë“œ ì²´ì´ë‹)   1 2 3 4 import static org.assertj.core.api.Assertions;  // ëª…í™•í•œ ê°’ ë¹„êµë¥¼ ìœ„í•´ ì‚¬ìš© Assertions.assertThat(a, b);       isNotEmpty(), contains(e), doesNotContain(e), startsWith(e), endsWith(e), isEqualTo(e)       ì˜ˆì œ - ë¬¸ìì—´ í…ŒìŠ¤íŠ¸   1 2 3 4 5 6 7 8 assertThat(\"Hello, world! Nice to meet you.\") // ì£¼ì–´ì§„ \"Hello, world! Nice to meet you.\"ë¼ëŠ” ë¬¸ìì—´ì€     .isNotEmpty() // ë¹„ì–´ìˆì§€ ì•Šê³      .contains(\"Nice\") // \"Nice\"ë¥¼ í¬í•¨í•˜ê³      .contains(\"world\") // \"world\"ë„ í¬í•¨í•˜ê³      .doesNotContain(\"ZZZ\") // \"ZZZ\"ëŠ” í¬í•¨í•˜ì§€ ì•Šìœ¼ë©°     .startsWith(\"Hell\") // \"Hell\"ë¡œ ì‹œì‘í•˜ê³      .endsWith(\"u.\") // \"u.\"ë¡œ ëë‚˜ë©°     .isEqualTo(\"Hello, world! Nice to meet you.\"); // \"Hello, world! Nice to meet you.\"ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.   ì˜ˆì œ - ìˆ«ì í…ŒìŠ¤íŠ¸   1 2 3 4 5 6 7 assertThat(3.14d) // ì£¼ì–´ì§„ 3.14ë¼ëŠ” ìˆ«ìëŠ”     .isPositive() // ì–‘ìˆ˜ì´ê³      .isGreaterThan(3) // 3ë³´ë‹¤ í¬ë©°     .isLessThan(4) // 4ë³´ë‹¤ ì‘ìŠµë‹ˆë‹¤     .isEqualTo(3, offset(1d)) // ì˜¤í”„ì…‹ 1 ê¸°ì¤€ìœ¼ë¡œ 3ê³¼ ê°™ê³      .isEqualTo(3.1, offset(0.1d)) // ì˜¤í”„ì…‹ 0.1 ê¸°ì¤€ìœ¼ë¡œ 3.1ê³¼ ê°™ìœ¼ë©°     .isEqualTo(3.14); // ì˜¤í”„ì…‹ ì—†ì´ëŠ” 3.14ì™€ ê°™ìŠµë‹ˆë‹¤      junit Assertions ì™€ assertj Assertions ì˜ ì‚¬ìš©ë²• ì˜ˆì‹œ   1 2 3 4 5 import static org.junit.jupiter.api.Assertions.assertEquals; assertEquals(result, member);  import static org.assertj.core.api.Assertions.assertThat; assertThat(result).isEqualTo(member);  ","categories": ["Spring"],
        "tags": ["Spring","Java","TEST CODE"],
        "url": "/spring/Java-TESTCODE/",
        "teaser": ""
      },{
        "title": "Transactional ì´ë€",
        "excerpt":"íŠ¸ëœì­ì…˜ì´ë€?      ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…   í•œë²ˆì— ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì—°ì‚°ë“¤ì„ ì˜ë¯¸   begin, commit ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰   ì˜ˆì™¸ ë°œìƒ ì‹œ  rollback ì²˜ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜í–‰       íŠ¸ëœì­ì…˜ì˜ 4ê°€ì§€ ì„±ì§ˆ           ì›ìì„±       â†’ í•œ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì‹¤í–‰í•œ ì‘ì—…ë“¤ì€ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•¨. ì¦‰, ëª¨ë‘ ì„±ê³µ ë˜ëŠ” ëª¨ë‘ ì‹¤íŒ¨            ì¼ê´€ì„±       â†’ ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë¥¼ ìœ ì§€            ê²©ë¦¬ì„±       â†’ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” íŠ¸ëœì­ì…˜ë“¤ì´ ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ ê²©ë¦¬            ì˜ì†ì„±       â†’ íŠ¸ëœì­ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì¹˜ë©´ ê²°ê³¼ê°€ í•­ìƒ ì €ì¥ë˜ì–´ì•¼ í•¨           íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë°©ë²•   ìŠ¤í”„ë§ì—ì„œëŠ” ì–´ë…¸í…Œì´ì…˜ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©   @Transactional ì„ ë©”ì†Œë“œ, í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ ìœ„ì— ì¶”ê°€í•˜ì—¬ ì‚¬ìš© (ì„ ì–¸ì  íŠ¸ëœì­ì…˜)   ì ìš©ëœ ë²”ìœ„ì—ì„œëŠ” íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ì´ í¬í•¨ëœ í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ë˜ì–´ ìë™ìœ¼ë¡œ commit í˜¹ì€ rollback ì„ ì§„í–‰ í•´ì¤€ë‹¤.   1 2 @Transactional public class MemberService { }       @Transactional ì˜µì…˜   1. isolation   2. propagation   3. noRollbackFor (ì˜ˆì™¸ë¬´ì‹œ)   íŠ¹ì • ì˜ˆì™¸ ë°œìƒ ì‹œ Rollback ì²˜ë¦¬ í•˜ì§€ ì•ŠìŒ.   1 2 @Transactional(noRollbackFor=Exception.class) public void addMember(Member member) throws Exception { }   4. rollbackFor (ì˜ˆì™¸ì¶”ê°€)   íŠ¹ì • ì˜ˆì™¸ ë°œìƒ ì‹œ ê°•ì œë¡œ Rollback   1 2 @Transactional(rollbackFor=Exception.class) public void addMember(Member member) throws Exception { }   5. timeout (ì‹œê°„ì§€ì •)   ì§€ì •í•œ ì‹œê°„ ë‚´ì— í•´ë‹¹ ë©”ì†Œë“œ ìˆ˜í–‰ì´ ì™„ë£Œë˜ì§€ ì•Šì„ ê²½ìš° rollback ìˆ˜í–‰ (default=-1)   1 2 @Transactional(timeout=10) public void addMember(Member member) throws Exception { }   6. readOnly (ì½ê¸°ì „ìš©)   true ì‹œ insert, update, delete ì‹¤í–‰ ì‹œ ì˜ˆì™¸ ë°œìƒ (default=false)   1 2 @Transactional(readonly=true) public void addMember(Member member) throws Exception { }       @Transactional ë§Œ ë¶™ì´ë©´ ë¡¤ë°±ì´ ì•ˆë˜ëŠ” ì´ìœ ?   @Transactional ì€ ê¸°ë³¸ì ìœ¼ë¡œ unchecked Exception, Error ë§Œì„ ë¡¤ë°±í•œë‹¤   ë”°ë¼ì„œ, ëª¨ë“  ì˜ˆì™¸ì— ëŒ€í•´ ë¡¤ë°±ì„ ì§„í–‰í•˜ê³  ì‹¶ì„ ê²½ìš° @Transactional(rollbackFor = Exception.class) ë¥¼ ì¨ì•¼í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Java","Spring","DB"],
        "url": "/spring/Spring-Transactional/",
        "teaser": ""
      },{
        "title": "SpringBoot Settings",
        "excerpt":"1. SpringBoot Settings   â†’ spring boot ê¸°ë°˜ìœ¼ë¡œ ì…‹íŒ…   Spring Initializr   ìœ„ì˜ ì‚¬ì´íŠ¸ì—ì„œ ê¸°ë³¸ì ì¸ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ì…‹íŒ…ì„ í•  ìˆ˜ ìˆë‹¤   ì„¤ì • ì‹œ Dependencies ì—ì„œ      spring web   Thymeleaf   spring data jpa   h2 database   lombok   ë¥¼ ì„ íƒ í›„ GENERATE!      ìœ„ì—ì„œ GENERATE í•œ íŒŒì¼ì„ IntelliJ ì—ì„œ Open!   â†’ build.gradle íŒŒì¼ì„ Open         2. IntelliJ Gradle ëŒ€ì‹ ì— ìë°” ì§ì ‘ ì‹¤í–‰   IntelliJ ë²„ì „ì€ Gradle ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ ì„¤ì •ì´ì§€ë§Œ, ì´ë ‡ê²Œ í•˜ë©´ ì‹¤í–‰ì†ë„ê°€ ëŠë¦¼. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•˜ë©´ ìë°”ë¡œ ë°”ë¡œ ì‹¤í–‰í•´ì„œ ì†ë„ê°€ ë¹ ë¥´ë‹¤.   Preferences ì—ì„œ Gradle ì„ ê²€ìƒ‰í•˜ì—¬      build and run using   Run tests using   ì„ IntelliJ IDEA ë¡œ ë°”ê¿”ì¤€ë‹¤         3. Lombok ì„¤ì •   lombok ì„ ì„¤ì •í•˜ê³  ë‚˜ì„œ preferences ì—ì„œ annotation processors ë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤.   enable annotation processing ì— ì²´í¬!         4. H2 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±      h2 ì½˜ì†”ì— ì ‘ì†        ì½˜ì†”ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì…ë ¥ í›„ ì—°ê²°ì„ ëˆ„ë¥´ë©´ jpapractice ë¼ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ë¨                jpapractice.mv.db íŒŒì¼ì´ ìƒì„±ë¨                   h2 ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†       ì•„ë˜ì™€ ê°™ì´ jdbc url ì„ ë³€ê²½í•œë‹¤.                  ì°¸ê³ ) H2 Database ì„¤ì¹˜, ì„œë²„ ì‹¤í–‰, ì ‘ì† ë°©ë²• (Windows, MacOS)         5. application.yml ì‘ì„±   ê¸°ì¡´ì— ìˆë˜ application.properties ëŒ€ì‹  application.yml ì„ ì‚¬ìš©   (ë‘˜ ì¤‘ í•˜ë‚˜ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ë° ë³µì¡í•´ì§ˆ ê²½ìš° yml ì´ ë³´ê¸°ê°€ ì¢‹ìŒ)   application.yml   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 spring:   datasource:     url: jdbc:h2:tcp://localhost/~/jpashop     username: sa     password:     driver-class-name: org.h2.Driver    jpa:     hibernate:       ddl-auto: create     properties:       hibernate: #        show_sql: true         format_sql: true  logging:   level:     org.hibernate.SQL: debug #    org.hibernate.type: trace           show_sql ê³¼ org.hibernate.SQL ì°¨ì´ì        ê³µí†µì : ë‘ê°€ì§€ ì˜µì…˜ ë‹¤ hibernate ì‹¤í–‰ sql ë¡œê·¸ë¥¼ ì°ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤.       ì°¨ì´ì : show_sql ì€ system.out ì— ì¶œë ¥í•˜ëŠ”ê²ƒì´ê³  org.hibernate.SQL ì€ logger ë¥¼ í†µí•´ì„œ ì¶œë ¥       â†’ ìš´ì˜í™˜ê²½ì—ì„œëŠ” show_sql ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.       â†’ ëª¨ë“  ë¡œê·¸ ì¶œë ¥ì€ ê°€ê¸‰ì  logger ë¥¼ í†µí•´ ë‚¨ê¸°ëŠ”ê²Œ ì¢‹ë‹¤            spring.jpa.hibernate.ddl-auto: create       ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± ì‹œì ì— í…Œì´ë¸”ì„ drop í•˜ê³  ë‹¤ì‹œ ìƒì„±!             6. console ì— Query íŒŒë¼ë¯¸í„° ë¡œê·¸ ë‚¨ê¸°ê¸°   ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ê°€ì ¸ì™€ ì‚¬ìš©   build.gradle ì— ì¶”ê°€   1 implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.5.6'   â†’ ê°œë°œë‹¨ê³„ì—ì„œëŠ” í¸í•˜ì§€ë§Œ ìš´ì˜ì‹œìŠ¤í…œì— ì ìš©í•˜ë ¤ë©´ ì„±ëŠ¥í…ŒìŠ¤íŠ¸ê°€ í•„ìš”!  ","categories": ["Spring"],
        "tags": ["Java","Spring"],
        "url": "/spring/Java-SpringBoot-Settings/",
        "teaser": ""
      },{
        "title": "JPA Intro",
        "excerpt":"JPA   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 package jpabook.start;  import javax.persistence.*; import java.util.List;   public class JpaMain {      public static void main(String[] args) {          //ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±         EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"jpabook\");         EntityManager em = emf.createEntityManager(); //ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±          EntityTransaction tx = em.getTransaction(); //íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ íšë“          try {              tx.begin(); //íŠ¸ëœì­ì…˜ ì‹œì‘             logic(em);  //ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§             tx.commit();//íŠ¸ëœì­ì…˜ ì»¤ë°‹          } catch (Exception e) {             e.printStackTrace();             tx.rollback(); //íŠ¸ëœì­ì…˜ ë¡¤ë°±         } finally {             em.close(); //ì—”í‹°í‹° ë§¤ë‹ˆì € ì¢…ë£Œ         }          emf.close(); //ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ì¢…ë£Œ     }      // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§     public static void logic(EntityManager em) {          String id = \"id1\";         Member member = new Member();         member.setId(id);         member.setUsername(\"ì§€í•œ\");         member.setAge(2);          //ë“±ë¡         em.persist(member);          //ìˆ˜ì •         member.setAge(20);          //í•œ ê±´ ì¡°íšŒ         Member findMember = em.find(Member.class, id);         System.out.println(\"findMember=\" + findMember.getUsername() + \", age=\" + findMember.getAge());          //ëª©ë¡ ì¡°íšŒ         List&lt;Member&gt; members = em.createQuery(\"select m from Member m\", Member.class).getResultList();         System.out.println(\"members.size=\" + members.size());          //ì‚­ì œ         em.remove(member);      } }   ì½”ë“œëŠ” í¬ê²Œ 3ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰˜ì–´ ìˆë‹¤.      ì—”í‹°í‹° ë§¤ë‹ˆì € ì„¤ì •   íŠ¸ëœì­ì…˜ ê´€ë¦¬   ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§         ì—”í‹°í‹° ë§¤ë‹ˆì € ì„¤ì •           ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±       â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ë”± í•œ ë²ˆë§Œ ìƒì„±í•˜ê³  ê³µìœ í•´ì„œ ì‚¬ìš©            ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±       â†’ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ì—ì„œ ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±       â†’ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•´ì„œ ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë“±ë¡/ìˆ˜ì •/ì‚­ì œ/ì¡°íšŒ í•  ìˆ˜ ìˆë‹¤.       â†’ ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” db ì»¤ë„¥ì…˜ê³¼ ë°€ì ‘í•œ ê´€ê³„ê°€ ìˆìœ¼ë¯€ë¡œ ìŠ¤ë ˆë“œê°„ì— ê³µìœ í•˜ê±°ë‚˜ ì¬ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.            ì¢…ë£Œ       â†’ ì—”í‹°í‹° ë§¤ë‹ˆì € ì¢…ë£Œ       â†’ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ì¢…ë£Œ             íŠ¸ëœì­ì…˜ ê´€ë¦¬   JPA ë¥¼ ì‚¬ìš©í•˜ë©´ í•­ìƒ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.   íŠ¸ëœì­ì…˜ ì—†ì´ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ë©´ ì˜ˆì™¸ ë°œìƒ   íŠ¸ëœì­ì…˜ API ë¥¼ ì‚¬ìš©í•´ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì •ìƒë™ì‘í•˜ë©´ íŠ¸ëœì­ì…˜ì„ commit í•˜ê³  ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ rollback í•œë‹¤.         ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§   JPQL   ì‚¬ìš©ì´ìœ ?   â†’ JPA ëŠ” ì—”í‹°í‹° ê°ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œí•˜ë¯€ë¡œ ê²€ìƒ‰ì„ í•  ë•Œë„ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤.   â†’ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰í•˜ë ¤ë©´ db ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ì„œ ì—”í‹°í‹° ê°ì²´ë¡œ ë³€ê²½í•œ ë‹¤ìŒ ê²€ìƒ‰í•´ì•¼í•˜ëŠ”ë° ì´ëŠ” ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥   â†’ ë”°ë¼ì„œ, ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ JPA ëŠ” JPQL ì´ë¼ëŠ” ì¿¼ë¦¬ ì–¸ì–´ ì‚¬ìš©   JPQL vs SQL           JPQL: ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤            SQL: DB í…Œì´ë¸”ì„ ëŒ€ìƒ       1 2 3 4 5 6 7 ...  //ëª©ë¡ ì¡°íšŒ List&lt;Member&gt; members = em.createQuery(\"select m from Member m\", Member.class).getResultList(); System.out.println(\"members.size=\" + members.size());  ...   ìœ„ì˜ ì½”ë“œì˜ select m from Member m ì—ì„œ from Member ëŠ” í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ì˜ë¯¸  ","categories": ["JPA"],
        "tags": ["Java","JPA"],
        "url": "/jpa/Java-JPA-Intro/",
        "teaser": ""
      },{
        "title": "JPA Repository",
        "excerpt":"ItemRepository.java   1 2 3 4 5 6 7 8 package com.shop.shop.repository;  import com.shop.shop.entity.Item; import org.springframework.data.jpa.repository.JpaRepository;  public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {  }       JpaRepository   JpaReporitory ëŠ” 2ê°œì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ”ë° ì²«ë²ˆì§¸ì—ëŠ” ì—”í‹°í‹° íƒ€ì… í´ë˜ìŠ¤, ë‘ë²ˆì¬ëŠ” ê¸°ë³¸í‚¤ íƒ€ì…ì„ ë„£ì–´ì¤Œ   JpaReporitory ëŠ” ê¸°ë³¸ì ì¸ CRUD ë° í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ ë©”ì†Œë“œê°€ ì •ì˜ë¼ ìˆìŒ           JpaReporitory ì—ì„œ ì§€ì›í•˜ëŠ” ë©”ì†Œë“œ ì˜ˆì‹œ                  application-test.properties   1 2 3 4 5 6 7 # Datasource ì„¤ì • spring.datasource.driver-class-name=org.h2.Driver spring.datasource.url=jdbc:h2:mem:test spring.datasource.username=sa spring.datasource.password=  spring.jpa.database-platform=org.hibernate.dialect.H2Dialect       ItemRepositoryTest.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 package com.shop.shop.repository;  import com.shop.shop.entity.Item; import com.shop.shop.entity.ItemSellStatus; import org.junit.jupiter.api.DisplayName; import org.junit.jupiter.api.Test; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.test.context.TestPropertySource;  import java.time.LocalDateTime;  @SpringBootTest @TestPropertySource(locations = \"classpath:application-test.properties\") class ItemRepositoryTest {      @Autowired     ItemRepository itemRepository;      @Test     @DisplayName(\"ìƒí’ˆ ì €ì¥ í…ŒìŠ¤íŠ¸\")     public void createItemTest() {         Item item = new Item();         item.setItemNm(\"í…ŒìŠ¤íŠ¸ ìƒí’ˆ\");         item.setPrice(10000);         item.setItemDetail(\"í…ŒìŠ¤íŠ¸ ìƒí’ˆ ìƒì„¸ ì„¤ëª…\");         item.setItemSellStatus(ItemSellStatus.SELL);         item.setStockNumber(100);         item.setRegTime(LocalDateTime.now());         item.setUpdateTime(LocalDateTime.now());         Item savedItem = itemRepository.save(item);         System.out.println(savedItem.toString());     } }       @SpringBootTest   í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜   ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•  ë•Œì²˜ëŸ¼ ëª¨ë“  Bean ì„ IoC ì»¨í…Œì´ë„ˆì— ë“±ë¡   ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê·œëª¨ê°€ í¬ë©´ ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤.       @TestPropertySource(locations = â€œclasspath:application-test.propertiesâ€)   í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ì‹œ application.properties ì— ì„¤ì •í•´ë‘” ê°’ë³´ë‹¤ application-test.properties ì— ê°™ì€ ì„¤ì •ì´ ìˆë‹¤ë©´ ë” ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ë¶€ì—¬       @Autowired   ItemRepository ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ Bean ì„ ì£¼ì…       @Test   í…ŒìŠ¤íŠ¸í•  ë©”ì†Œë“œìœ„ì— ì„ ì–¸í•˜ì—¬ í…ŒìŠ¤íŠ¸ ëŒ€ìƒìœ¼ë¡œ ì§€ì •       @DisplayName(â€œìƒí’ˆ ì €ì¥ í…ŒìŠ¤íŠ¸â€)   í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ì‹œ ì§€ì •í•œ í…ŒìŠ¤íŠ¸ëª…ì´ ë…¸ì¶œë¨   Spring Data JPA ëŠ” JPA ì˜ êµ¬í˜„ì²´ì¸ Hibernate ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ API ë¥¼ ì œê³µ.   ê·¸ì¤‘ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ JpaRepository ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤         JpaRepository ì˜ˆì œ   MemoRepository.java   1 2 3 4 5 6 7 package org.zerock.ex2.repository;  import org.springframework.data.jpa.repository.JpaRepository; import org.zerock.ex2.entity.Memo;  public interface MemoRepository extends JpaRepository&lt;Memo, Long&gt; { }   ì‘ì„±ëœ MemoRepository ëŠ” ì¸í„°í˜ì´ìŠ¤ ìì²´, JpaRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì´ ë   JpaRepository ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì—”í‹°í‹°ì˜ íƒ€ì… ì •ë³´(Memo) ì™€ @Id ì˜ íƒ€ì…(Long) ì„ ì§€ì •.   Spring Data JPA ëŠ” ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸ë§Œìœ¼ë¡œ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ì˜ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¨       í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•œ CRUD ì—°ìŠµ      insert ì‘ì—…: save(ì—”í‹°í‹° ê°ì²´)   select ì‘ì—…: findById(í‚¤ íƒ€ì…), getOne(í‚¤ íƒ€ì…)   update ì‘ì—…: save(ì—”í‹°í‹° ê°ì²´)   delete ì‘ì—…: deleteById(í‚¤ íƒ€ì…), delete(ì—”í‹°í‹° ê°ì²´)       íŠ¹ì´í•˜ê²Œ insert ì™€ update ì‘ì—…ì— ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œê°€ ë™ì¼í•˜ê²Œ save() ë¥¼ ì´ìš©í•˜ëŠ”ë° ì´ëŠ” JPA ì˜ êµ¬í˜„ì²´ê°€ ë©”ëª¨ë¦¬ìƒ(Entity Manager) ì—ì„œ ê°ì²´ë¥¼ ë¹„êµí•˜ê³  ì—†ë‹¤ë©´ insert, ì¡´ì¬í•œë‹¤ë©´ update ë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸   MemoRepositoryTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 package org.zerock.ex2.repository;  import org.junit.jupiter.api.DisplayName; import org.junit.jupiter.api.Test; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.transaction.annotation.Transactional; import org.zerock.ex2.entity.Memo;  import java.util.Optional; import java.util.stream.IntStream;  @SpringBootTest class MemoRepositoryTests {      @Autowired     MemoRepository memoRepository;      @Test     public void testClass() {         System.out.println(memoRepository.getClass().getName());     }      @Test     @DisplayName(\"ë“±ë¡ ì‘ì—… í…ŒìŠ¤íŠ¸\")     public void testInsertDummies() {         IntStream.rangeClosed(1, 100).forEach(i -&gt; {             Memo memo = Memo.builder().memoText(\"Sample...\" + i).build();             memoRepository.save(memo);         });     }      @Test     @DisplayName(\"ì¡°íšŒ ì‘ì—… í…ŒìŠ¤íŠ¸\")     public void testSelect() {         Long mno = 100L;         Optional&lt;Memo&gt; result = memoRepository.findById(mno);          System.out.println(\"=====================================\");          if (result.isPresent()) {             Memo memo = result.get();             System.out.println(memo);         }     }      @Transactional     @Test     @DisplayName(\"ì¡°íšŒ ì‘ì—… í…ŒìŠ¤íŠ¸2\")     public void testSelect2() {         Long mno = 100L;          Memo memo = memoRepository.getOne(mno);          System.out.println(\"=====================================\");          System.out.println(memo);     }      @Test     @DisplayName(\"ìˆ˜ì • ì‘ì—… í…ŒìŠ¤íŠ¸\")     public void testUpdate() {         Memo memo = Memo.builder().mno(100L).memoText(\"Update Text\").build();          System.out.println(memoRepository.save(memo));     }      @Test     @DisplayName(\"ì‚­ì œ ì‘ì—… í…ŒìŠ¤íŠ¸\")     public void testDelete() {         Long mno = 100L;          memoRepository.deleteById(mno);     } }           testClass       â†’ ë³¸ê²©ì ì¸ í…ŒìŠ¤íŠ¸ì— ì•ì„œ ì‹¤ì œë¡œ MemoRepository ê°€ ì •ìƒì ìœ¼ë¡œ ìŠ¤í”„ë§ì—ì„œ ì²˜ë¦¬ë˜ê³ , ì˜ì¡´ì„± ì£¼ì…ì— ë¬¸ì œê°€ ì—†ëŠ”ì§€ë¥¼ ë¨¼ì € í™•ì¸            ë“±ë¡ ì‘ì—… í…ŒìŠ¤íŠ¸       â†’ í•œ ë²ˆì— ì—¬ëŸ¬ ê°œì˜ ì—”í‹°í‹° ê°ì²´ë¥¼ ì €ì¥í•˜ë„ë¡ ì‘ì„±            ì¡°íšŒ ì‘ì—… í…ŒìŠ¤íŠ¸       â†’ findById(): Optional íƒ€ì…ìœ¼ë¡œ ë°˜í™˜       â†’ findById() ë¥¼ ì‹¤í–‰í•˜ëŠ” ìˆœê°„ì— ì´ë¯¸ SQL ì€ ì²˜ë¦¬ê°€ ë¨            ì¡°íšŒ ì‘ì—… í…ŒìŠ¤íŠ¸2       â†’ getOne(): Transactional ì–´ë…¸í…Œì´ì…˜ì´ ì¶”ê°€ë¡œ í•„ìš”       â†’ getOne() ì˜ ë¦¬í„´ ê°’ì€ í•´ë‹¹ ê°ì²´ì´ì§€ë§Œ, ì‹¤ì œ ê°ì²´ê°€ í•„ìš”í•œ ìˆœê°„ê¹Œì§€ SQL ì„ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ            ìˆ˜ì • ì‘ì—… í…ŒìŠ¤íŠ¸       â†’ ë‚´ë¶€ì ìœ¼ë¡œ í•´ë‹¹ ì—”í‹°í‹°ì˜ @Id ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ì„œ insert or update ì‘ì—…ì„ ì²˜ë¦¬            ì‚­ì œ ì‘ì—… í…ŒìŠ¤íŠ¸       â†’ ì‚­ì œí•˜ë ¤ëŠ” ë²ˆí˜¸ì˜ ì—”í‹°í‹° ê°ì²´ê°€ ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì´ë¥¼ ì‚­ì œ       â†’ deleteById() ì˜ ë¦¬í„´ íƒ€ì…ì€ void, ë§Œì¼ í•´ë‹¹ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì˜ˆì™¸ë¥¼ ë°œìƒ      ","categories": ["JPA"],
        "tags": ["Java","Spring","JPA"],
        "url": "/jpa/Java-JPARepository/",
        "teaser": ""
      },{
        "title": "Nginx ë¥¼ ì´ìš©í•˜ì—¬ SpringBoot ë¬´ì¤‘ë‹¨ ë°°í¬í•˜ê¸°",
        "excerpt":"ì°¸ê³ ) ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤   [SpringBoot] ì›¹ì„œë¹„ìŠ¤ ì¶œì‹œí•˜ê¸° - 5. Nginxë¥¼ í™œìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬ì¶•í•˜ê¸°         1. êµ¬ì¡°      Nginx 1ëŒ€, ìŠ¤í”„ë§ë¶€íŠ¸ jar 2ëŒ€   Nginxì—ëŠ” 80(http), 443(https) í¬íŠ¸ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.   ìŠ¤í”„ë§ë¶€íŠ¸ jar1ì—ëŠ” 8081í¬íŠ¸ë¡œ , ìŠ¤í”„ë§ë¶€íŠ¸ jar2ì—ëŠ” 8082í¬íŠ¸ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.(í¬íŠ¸ëŠ” ì›í•˜ì‹œëŠ” í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.)   êµ¬ì¡°ëŠ” ì•„ë˜ì˜ ê·¸ë¦¼ê°™ì´ í˜•ì„±      ìœ„ ê·¸ë¦¼ì˜ ë™ì‘ ê³¼ì •      ì‚¬ìš©ìëŠ” 80, 443 í¬íŠ¸ë¡œ ì„œë¹„ìŠ¤ì— ì ‘ì†   Nginx ëŠ” í•´ë‹¹ ìš”ì²­ì„ ë°›ì•„ í˜„ì¬ ë™ì‘ì¤‘ì¸ ìŠ¤í”„ë§ë¶€íŠ¸ Jar1(Port: 8081) ìœ¼ë¡œ ì „ë‹¬í•¨   ìŠ¤í”„ë§ë¶€íŠ¸ Jar2(Port: 8082) ëŠ” í˜„ì¬ ë™ì‘ì¤‘ì´ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°›ì§€ ëª»í•¨          ìœ„ ê·¸ë¦¼ì˜ ì‹ ê·œ ë²„ì „ ë°°í¬ì‹œ ë™ì‘ ê³¼ì •      2.0 ë²„ì „ìœ¼ë¡œ ì‹ ê·œ ë°°í¬ê°€ ì§„í–‰ë˜ë©´ í˜„ì¬ ë™ì‘ì¤‘ì´ì§€ ì•Šì€ ìŠ¤í”„ë§ë¶€íŠ¸ Jar2(8082) ë¡œ ë°°í¬   ë°°í¬í•˜ëŠ” ë™ì•ˆì—ëŠ” ì‚¬ìš©ìëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ Jar1(8081)ë¥¼ ê³„ì†í•´ì„œ ë°”ë¼ë³´ê³  ìˆëŠ” ì¤‘   ë°°í¬ê°€ ì •ìƒì ìœ¼ë¡œ ëë‚œë‹¤ë©´, ìŠ¤í”„ë§ë¶€íŠ¸ Jar2(8082)ì˜ êµ¬ë™ ì—¬ë¶€ë¥¼ í™•ì¸   ì •ìƒ êµ¬ë™ ì¤‘ì´ë¼ë©´ nginx ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ Jar2(8082)ë¥¼ ë°”ë¼ë³´ë„ë¡ ì„¤ì •   ë°°í¬ì— ë¬¸ì œê°€ ìƒê¸¸ ì‹œì—ëŠ” ì •ìƒ êµ¬ë™ ì¤‘ì¸ ìŠ¤í”„ë§ë¶€íŠ¸ Jarë¡œ ëŒì•„ê°          ìœ„ ê·¸ë¦¼ ë™ì‘ ê³¼ì •      2.1 ë²„ì „ìœ¼ë¡œ ì‹ ê·œ ë°°í¬ê°€ ì§„í–‰ë˜ë©´ í˜„ì¬ ë™ì‘ì¤‘ì´ì§€ ì•Šì€ ìŠ¤í”„ë§ë¶€íŠ¸ Jar1(8081)ë¡œ ë°°í¬   ë°°í¬í•˜ëŠ” ë™ì•ˆì—ëŠ” ì‚¬ìš©ìëŠ” ìŠ¤í”„ë§ë¶€í„° Jar2(8082)ë¥¼ ê³„ì†í•´ì„œ ë°”ë¼ë³´ê³  ìˆëŠ” ì¤‘   ë°°í¬ ë„ì¤‘ ë¬¸ì œê°€ ìƒê²¼ë‹¤ë©´, nignx ëŠ” ê·¸ëŒ€ë¡œ ìŠ¤í”„ë§ë¶€íŠ¸ Jar2(8082)ë¥¼ ë°”ë¼ë³´ë„ë¡ í•¨   ë°°í¬ì˜ ë¬¸ì œë¥¼ í™•ì¸í•˜ê³  ë‹¤ì‹œ ë°°í¬ë¥¼ ì§„í–‰         2. í”„ë¡œì íŠ¸ ê²½ë¡œ   1 2 3 4 5 6 7 8 9 10 # /usr/local/web . â”œâ”€â”€ config                    - ë¬´ì¤‘ë‹¨ë°°í¬ í¬íŠ¸ê´€ë ¨ ì„¤ì •íŒŒì¼ â”œâ”€â”€ cutelovelycat             - í”„ë¡œì íŠ¸ ê²½ë¡œ (git) â”‚   â”œâ”€â”€ build â”‚   â”œâ”€â”€ gradle â”‚   â””â”€â”€ src â””â”€â”€ nonstop                   - ë¬´ì¤‘ë‹¨ë°°í¬     â”œâ”€â”€ cutelovelycat     â””â”€â”€ jar                   - ë°°í¬ì‹œ ì‹¤ì œ ì ìš©ë˜ëŠ” jar íŒŒì¼         3. í”„ë¡œì íŠ¸ settings       1) nginx ì„¤ì¹˜   1. nginx ì €ì¥ì†Œ ì¶”ê°€   yum ì €ì¥ì†Œì—ëŠ” nginx ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ê¸° ë•Œë¬¸ì— ì €ì¥ì†Œë¥¼ ì„ì˜ë¡œ ì¶”ê°€   1 vi /etc/yum.repos.d/nginx.repo   nginx.repo íŒŒì¼ ë§Œë“¤ê³  ì•„ë˜ ë‚´ìš© ì¶”ê°€   1 2 3 4 5 [nginx] name=nginx repo baseurl=http://nginx.org/packages/centos/7/$basearch/ gpgcheck=0 enabled=1       2. nginx ì„¤ì¹˜   1 yum install -y nginx       3. nginx ì„œë¹„ìŠ¤ ë“±ë¡ ë° ì‹œì‘   1 2 3 4 5 6 # ì„œë¹„ìŠ¤ ë“±ë¡ systemctl enable nginx # ì„œë¹„ìŠ¤ ì‹œì‘ systemctl start nginx # ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ systemctl status nginx       4. nginx ì„¤ì •íŒŒì¼ ìˆ˜ì •   /etc/nginx/conf.d/*.conf   1 2 3 4 5 6 7 8 9 10 11 12 13 14 server {     listen 80;     listen [::]:80;     server_name localhost;      include /etc/nginx/conf.d/service-url.inc;      location / {         proxy_pass $service_url;         proxy_set_header X-Real-IP $remote_addr;         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;         proxy_set_header Host $http_host;     } }   service-url.inc   1 set $service_url http://127.0.0.1:8081;       nginx ì¬ì‹œì‘   1 systemctl restart nginx       ì°¸ê³ ) Nginx ë™ì  í”„ë¡ì‹œ ì„¤ì •   nginx ê°€ set1(port: 8081) ê³¼ set2(port: 8082) ë¥¼ ë²ˆê°ˆì•„ê°€ë©´ì„œ ë°”ë¼ë³´ë„ë¡ í•˜ëŠ” í”„ë¡ì‹œ ì„¤ì •   1 2 3 4 5 6 7 location / { \t\t# ë™ì ìœ¼ë¡œ Proxy Pass ë¥¼ ë³€ê²½ \t\tproxy_pass $service_url;     proxy_set_header X-Real-IP $remote_addr;     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;     proxy_set_header Host $http_host; }         2) github repository ì—°ê²°   1. SSH key íŒŒì¼ í™•ì¸ ë° public key ë“±ë¡   1 2 cd ~/.ssh ls      ìœ„ì˜ ì‚¬ì§„ì²˜ëŸ¼ í‚¤íŒŒì¼ì´ ìˆë‹¤ë©´ github settings ì—ì„œ ssh key ë¥¼ ë“±ë¡í•´ì£¼ë©´ ëœë‹¤.   ì£¼ì˜! ë°˜ë“œì‹œ í¼ë¸”ë¦­í‚¤ë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤ (*.pub)   ì°¸ê³ )   [Git (7)] Github ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì—†ì´ pull/push í•˜ê¸°(github ssh key ì„¤ì •)       2. git clone ssh ì£¼ì†Œ   í”„ë¡œì íŠ¸ ê²½ë¡œì— clone ì„ í• ë•Œ ssh ì£¼ì†Œë¡œ ê°€ì ¸ì˜´   1 git clone git@github.com:nnyang0110/cat.git         3) í”„ë¡œì íŠ¸ ì„¤ì •   í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸ ê²½ë¡œëŠ” /usr/local/web ì´ë‹¤   1 cd /usr/local/web       ì‹¤ì œ ìš´ì˜í™˜ê²½ ì„¤ì •íŒŒì¼   1 vi ./cutelovelycat/src/main/resources/application.yml   application.yml   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 spring:   devtools:     livereload:       enabled: true     restart:       enabled: true     thymeleaf:       cache: false   datasource:     url: jdbc:mysql://127.0.0.1:3306/dbname?useUnicode=true&amp;characterEncoding=utf8&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=Asia/Seoul     username:      password:      driver-class-name: com.mysql.cj.jdbc.Driver    security:     oauth2:       client:         registration:           kakao:             client-id:              redirectUri: \"{baseUrl}/{action}/oauth2/code/{registrationId}\"             client-authentication-method: POST             authorization-grant-type: authorization_code             scope: profile_nickname, account_email             client-name: Kakao         provider:           kakao:             authorization_uri: https://kauth.kakao.com/oauth/authorize             token_uri: https://kauth.kakao.com/oauth/token             user-info-uri: https://kapi.kakao.com/v2/user/me             user_name_attribute: kakao_account    jpa:     hibernate:       ddl-auto: none     properties:       hibernate:         format_sql: true  logging:   level:     org.hibernate.SQL: debug       ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ ìœ„í•œ ì„¤ì •íŒŒì¼   â†’ profiles ì— ë”°ë¼ í¬íŠ¸ë¥¼ ë‹¤ë¥´ê²Œ ì¤Œ   1 vi ./config/real-application.yml   real-application.yml   1 2 3 4 5 6 7 8 9 10 11 12 --- spring:   profiles: set1 server:   port: 8081  --- spring:   profiles: set2  server:   port: 8082         4) ë¬´ì¤‘ë‹¨ ë°°í¬ ì„¤ì •   ê¸°ë³¸ ê²½ë¡œëŠ” /usr/local/web/nonstop ì´ë‹¤   1 cd /usr/local/web/nonstop   1 2 3 4 5 6 7 8 9 10 11 12 . â”œâ”€â”€ cutelovelycat â”‚   â””â”€â”€ build â”‚       â””â”€â”€ libs â”‚           â””â”€â”€ cat-0.0.1-SNAPSHOT.jar â”œâ”€â”€ deploy.sh â”œâ”€â”€ jar â”‚   â”œâ”€â”€ cat-0.0.1-SNAPSHOT.jar â”‚   â”œâ”€â”€ set1-cat.jar -&gt; /usr/local/web/nonstop/jar/cat-0.0.1-SNAPSHOT.jar â”‚   â””â”€â”€ set2-cat.jar -&gt; /usr/local/web/nonstop/jar/cat-0.0.1-SNAPSHOT.jar â”œâ”€â”€ nohup.out â””â”€â”€ switch.sh         ìë™ ë°°í¬, ë¬´ì¤‘ë‹¨ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸   deploy.sh   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 #!/bin/bash  REPOSITORY=/usr/local/web DEPLOY_PATH=$REPOSITORY/nonstop/cutelovelycat/build/libs/  cd $REPOSITORY/cutelovelycat/  echo \"&gt; Git Pull\" git pull  echo \"&gt; í”„ë¡œì íŠ¸ Build ì‹œì‘\" ./gradlew build  echo \"&gt; ë°°í¬ ê²½ë¡œì— ë³µì‚¬\" JAR_NAME=$(ls $REPOSITORY/cutelovelycat/build/libs/ |grep 'cat' |grep 'SNAPSHOT.jar' | tail -n 1)  echo \"&gt; JAR Name: $JAR_NAME\"  cp ./build/libs/$JAR_NAME $DEPLOY_PATH  BASE_PATH=/usr/local/web/nonstop BUILD_PATH=$(ls $BASE_PATH/cutelovelycat/build/libs/*.jar) JAR_NAME=$(basename $BUILD_PATH) echo \"&gt; build íŒŒì¼ëª…: $JAR_NAME\"  echo \"&gt; build íŒŒì¼ ë³µì‚¬\" DEPLOY_PATH=$BASE_PATH/jar/ cp $BUILD_PATH $DEPLOY_PATH  echo \"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ Set í™•ì¸\" CURRENT_PROFILE=$(curl -s http://localhost/profile) echo \"&gt; $CURRENT_PROFILE\"  # ì‰¬ê³  ìˆëŠ” set ì°¾ê¸°: set1ì´ ì‚¬ìš©ì¤‘ì´ë©´ set2ê°€ ì‰¬ê³  ìˆê³ , ë°˜ëŒ€ë©´ set1ì´ ì‰¬ê³  ìˆìŒ # Nginx ì— ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì€ Profile ì°¾ê¸° # set1 ì´ êµ¬ë™ì¤‘ì´ë©´ set2 ë¥¼ ì—°ê²° # set2 ì´ êµ¬ë™ì¤‘ì´ë©´ set1 ë¥¼ ì—°ê²° if [ $CURRENT_PROFILE == set1 ] then   IDLE_PROFILE=set2   IDLE_PORT=8082 elif [ $CURRENT_PROFILE == set2 ] then   IDLE_PROFILE=set1   IDLE_PORT=8081 else   echo \"&gt; ì¼ì¹˜í•˜ëŠ” Profileì´ ì—†ìŠµë‹ˆë‹¤. Profile: $CURRENT_PROFILE\"   echo \"&gt; set1ì„ í• ë‹¹í•©ë‹ˆë‹¤. IDLE_PROFILE: set1\"   IDLE_PROFILE=set1   IDLE_PORT=8081 fi  # ë¯¸ì—°ê²°ëœ Jar ë¡œ ì‹ ê·œ Jar ì‹¬ë³¼ë¦­ ë§í¬ (ln) echo \"&gt; application.jar êµì²´\" IDLE_APPLICATION=$IDLE_PROFILE-cat.jar IDLE_APPLICATION_PATH=$DEPLOY_PATH$IDLE_APPLICATION  ln -Tfs $DEPLOY_PATH$JAR_NAME $IDLE_APPLICATION_PATH  # Nginx ì™€ ì—°ê²°ë˜ì§€ ì•Šì€ Profile ì¢…ë£Œ echo \"&gt; $IDLE_PROFILE ì—ì„œ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ pid í™•ì¸\" IDLE_PID=$(pgrep -f $IDLE_APPLICATION)  if [ -z $IDLE_PID ] then   echo \"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—†ìœ¼ë¯€ë¡œ ì¢…ë£Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\" else   echo \"&gt; kill -15 $IDLE_PID\"   kill -15 $IDLE_PID   sleep 5 fi  # Nginx ì™€ ì—°ê²°ëœ Profile Jar ë¡œ ì‹¤í–‰ echo \"&gt; $IDLE_PROFILE ë°°í¬\" nohup java -jar -Dspring.profiles.active=$IDLE_PROFILE $IDLE_APPLICATION_PATH &amp;  # í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸ echo \"&gt; $IDLE_PROFILE 10ì´ˆ í›„ Health check ì‹œì‘\" echo \"&gt; curl -s http://localhost:$IDLE_PORT/profile\" sleep 10  for retry_count in {1..10} do   response=$(curl -s http://localhost:$IDLE_PORT/profile)   up_count=$(echo $response | grep 'set' | wc -l)    if [ $up_count -ge 1 ]   then # $up_count &gt;= 1 (\"set\" ë¬¸ìì—´ì´ ìˆëŠ”ì§€ ê²€ì¦)       echo \"&gt; Health check ì„±ê³µ\"       break   else       echo \"&gt; Health checkì˜ ì‘ë‹µì„ ì•Œ ìˆ˜ ì—†ê±°ë‚˜ í˜¹ì€ statusê°€ UPì´ ì•„ë‹™ë‹ˆë‹¤.\"       echo \"&gt; Health check: ${response}\"   fi    if [ $retry_count -eq 10 ]   then     echo \"&gt; Health check ì‹¤íŒ¨. \"     echo \"&gt; Nginxì— ì—°ê²°í•˜ì§€ ì•Šê³  ë°°í¬ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.\"     exit 1   fi    echo \"&gt; Health check ì—°ê²° ì‹¤íŒ¨. ì¬ì‹œë„...\"   sleep 10 done  # ì•„ë˜ ì¶”ê°€ echo \"&gt; ìŠ¤ìœ„ì¹­\" sleep 10 /usr/local/web/nonstop/switch.sh       ë™ì  í”„ë¡ì‹œ í™˜ê²½ì´ êµ¬ì¶•ëœ Nginx ê°€ ë°°í¬ ì‹œì ì— ë°”ë¼ë³´ëŠ” Profile ì„ ìë™ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” switch ìŠ¤í¬ë¦½íŠ¸ ìƒì„±   switch.sh   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #!/bin/bash echo \"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ Port í™•ì¸\" CURRENT_PROFILE=$(curl -s http://localhost/profile)  # ì‰¬ê³  ìˆëŠ” set ì°¾ê¸°: set1ì´ ì‚¬ìš©ì¤‘ì´ë©´ set2ê°€ ì‰¬ê³  ìˆê³ , ë°˜ëŒ€ë©´ set1ì´ ì‰¬ê³  ìˆìŒ if [ $CURRENT_PROFILE == set1 ] then   IDLE_PORT=8082 elif [ $CURRENT_PROFILE == set2 ] then   IDLE_PORT=8081 else   echo \"&gt; ì¼ì¹˜í•˜ëŠ” Profileì´ ì—†ìŠµë‹ˆë‹¤. Profile: $CURRENT_PROFILE\"   echo \"&gt; 8081ì„ í• ë‹¹í•©ë‹ˆë‹¤.\"   IDLE_PORT=8081 fi  echo \"&gt; ì „í™˜í•  Port: $IDLE_PORT\" echo \"&gt; Port ì „í™˜\" echo \"set \\$service_url http://127.0.0.1:${IDLE_PORT};\" |sudo tee /etc/nginx/conf.d/service-url.inc  PROXY_PORT=$(curl -s http://localhost/profile) echo \"&gt; Nginx Current Proxy Port: $PROXY_PORT\"  echo \"&gt; Nginx Reload\" sudo service nginx reload       ì°¸ê³ )   gradlew ì˜ ì‹¤í–‰ê¶Œí•œì´ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ê°€ ëœ¬ë‹¤ë©´   1 chmod +x ./gradlew   nginx proxy ì˜¤ë¥˜ (í¬íŠ¸ ì„¤ì •ì— ëŒ€í•œ ë¶€ë¶„)   â†’ SELinux ê°€ ì°¨ë‹¨í•˜ì—¬ ë°œìƒ   1 /usr/sbin/setsebool httpd_can_network_connect true         ê²°ê³¼ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ë‘ê°œì˜ jar íŒŒì¼ì´ ëŒê³  ìˆê³           í˜„ì¬ set2 ê°€ ì‹¤í–‰ ì¤‘ì´ë‹¤          ì½”ë“œê°€ ìˆ˜ì •ë˜ê³  ë°°í¬ë¥¼ í•˜ê²Œ ë˜ë©´ set1 ì´ ì‹¤í–‰ë˜ê²Œ ëœë‹¤.     ","categories": ["Spring"],
        "tags": ["Java","Spring","Nginx"],
        "url": "/spring/Java-Nginx-SpringBoot/",
        "teaser": ""
      },{
        "title": "Spring Profile ì´ë€?",
        "excerpt":"ê°œë°œí™˜ê²½ì— ë”°ë¼ ì„¤ì •íŒŒì¼ì„ ë‹¤ë¥´ê²Œ ë¡œë”©í•´ì•¼í•  í•„ìš”ê°€ ìˆë‹¤   ì´ì²˜ëŸ¼ Profile ì€ ì–´ë–¤ íŠ¹ì • í™˜ê²½ì˜ ì„¤ì • ê°’ì„ ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©   ì˜ˆë¥¼ ë“¤ì–´, í…ŒìŠ¤íŠ¸ í™˜ê²½ê³¼ ë°°í¬ í™˜ê²½ì„ ë‹¤ë¥´ê²Œ ë‘ê³  Profile ì„¤ì •       ê¸°ë³¸ì ì¸ profile ì •ë³´      application.properties   application.yml       ì—¬ê¸°ì„œ íŠ¹ì • ê·œì¹™ì— ë§Œì¡±í•˜ê²Œ ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ë©´ SpringBoot ê°€ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤.      application-{í”„ë¡œí•„ë„¤ì„í‚¤ì›Œë“œ}.properties            ex. application-dev.properties           application-{í”„ë¡œí•„ë„¤ì„í‚¤ì›Œë“œ}.yml            ex. application-prod.yml                 ì‹¤í–‰í•˜ê¸°   ì„¤ì • ì •ë³´ë¥¼ ë°”ê¿”ì„œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ í¬ê²Œ 2ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©      application.yml ì— profile.active ì§€ì •í•˜ê¸°   java -jar ì— ì˜µì…˜ì„ ì¤˜ì„œ íŠ¹ì • profile ë¡œë“œí•˜ê¸°       1. application.yml ì— profile.active ì§€ì •í•˜ê¸°   yml ì´ë‚˜ properties íŒŒì¼ì—ì„œ ì§ì ‘ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½, profile.active ë¥¼ ì§€ì •í•˜ë©´ ëœë‹¤.   1 2 3 4 5 6 7 8 9 --- spring:   profiles:     active: set1  --- spring:   profiles:     active: set2   ë§Œì•½, ì•„ë¬´ê²ƒë„ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ application.yml ë˜ëŠ” application.properties íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê²Œ ëœë‹¤.       2. java -jar ì— ì˜µì…˜ì„ ì¤˜ì„œ íŠ¹ì • profile ë¡œë“œí•˜ê¸°   java jar íŒŒì¼ë¡œ ë¹Œë“œë¥¼ í•˜ê³  jar íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ì‹œì ì— í™˜ê²½ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ profile ì„ ë³€ê²½ì‹œí‚¬ ìˆ˜ ìˆë‹¤.   1 2 3 java -jar -Dspring.profiles.active=set1 ./cat-0.0.1-SNAPSHOT.jar  java -jar -Dspring.profiles.active=set2 ./cat-0.0.1-SNAPSHOT.jar       í…ŒìŠ¤íŠ¸   application.yml   1 2 3 4 5 6 7 8 9 10 11 12 server:   port: 8080  spring:   application:     name: user-service    profiles:     active: test # ë§Œì•½ application-prod.yml íŒŒì¼ì„ ë¡œë”©í•˜ê³  ì‹¶ë‹¤ë©´, prod  greeting:   message: this is MAIN application.yml   application-test.yml   1 2 greeting:   message: this is TEST application.yml   application-prod.yml   1 2 greeting:   message: this is PRODUCTION application.yml   ProfileApplication.java   1 2 3 4 5 6 7 8 9 10 11 12 13 @SpringBootApplication @RestController public class UserServiceApplication {      public static void main(String[] args) {         SpringApplication.run(UserServiceApplication.class, args);     }      @GetMapping     public String string(@Value(\"${greeting.message}\") String message) {         return message;     } }       profiles.active=test ì¼ë•Œ, ì•„ë˜ ë©”ì‹œì§€ ì¶œë ¥   1 this is TEST application.yml   profiles.active=prod ì¼ë•Œ, ì•„ë˜ ë©”ì‹œì§€ ì¶œë ¥   1 this is PRODUCTION application.yml   profiles.active ê°€ ë¹ˆ ê°’ ì¼ë•Œ, ì•„ë˜ ë©”ì‹œì§€ ì¶œë ¥   1 this is MAIN application.yml       ì°¸ê³ )   java ì—ì„œ profile ì˜µì…˜ì„ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ë•Œ?   â†’ System.getProperty ë¥¼ ì´ìš©!   1 2 // java -Dspring.profiles.active=set1 -jar ProfileApplication.jar ì‹¤í–‰ì‹œ String profile = System.getProperty(\"spring.profiles.active\"); // set1  ","categories": ["Spring"],
        "tags": ["Java","Spring"],
        "url": "/spring/Java-SpringProfile/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ê°ì²´ì§€í–¥ì–¸ì–´, í´ë˜ìŠ¤ì™€ ê°ì²´)",
        "excerpt":"1. ê°ì²´ì§€í–¥ì–¸ì–´  1.1 ê°ì²´ì§€í–¥ì–¸ì–´ì˜ ì—­ì‚¬   80ë…„ ì´ˆ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ìœ„ê¸°(cì–¸ì–´, fortran, cobol ë“±) - ë¹ ë¥¸ ë³€í™”ë¥¼ ëª»ì«“ì•„ê°   í•´ê²°ì±…ìœ¼ë¡œ ê°ì²´ì§€í–¥ ì–¸ì–´ë¥¼ ë„ì…(ì ˆì°¨ì  â†’ ê°ì²´ì§€í–¥)   ì°¸ê³ ) cì–¸ì–´ + ê°ì²´ì§€í–¥ ê°œë… â‡’ c++ â‡’ java       1.2 ê°ì²´ì§€í–¥ì–¸ì–´   ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì´ ë†’ê³  ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´, ì¤‘ë³µ ì½”ë“œ ì œê±°   ê°ì²´ì§€í–¥ ì–¸ì–´ = í”„ë¡œê·¸ë˜ë° ì–¸ì–´ + ê°ì²´ì§€í–¥ê°œë…(ê·œì¹™)   OOP (Object-Oriented Programming, ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°)   ê°ì²´ì§€í–¥ì–¸ì–´ì˜ í•µì‹¬ ê°œë… (ìº¡ìƒì¶”ë‹¤)      ìº¡ìŠí™”   ìƒì†   ì¶”ìƒí™”   ë‹¤í˜•ì„± *** (ê°€ì¥ ì¤‘ìš”)   ì´ë¡ ì„œ     ë””ìì¸ íŒ¨í„´: ê°ì²´ì§€í–¥ê°œë…ì„ ì´ìš©í•´ì„œ í”„ë¡œê·¸ë˜ë°ì„ ìì£¼í•  ë•Œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì„ ëª¨ì•„ë†“ì€ ê²ƒ   ê°ì²´ì§€í–¥ê°œë…   ê°ì²´ì§€í–¥ì–¸ì–´ë€ ê²°êµ­ ì„¤ê³„ë¥¼ ì˜í•˜ëŠ” ê²ƒ! ì„¤ê³„ê°€ ì˜ ì•ˆëœë‹¤ê³  í•´ì„œ ì´ë¡ ì„œë¡œ ë°”ë¡œ ë¹ ì§€ë©´ ì•ˆëœë‹¤! jsp, spring ì„ ê³µë¶€í•œ í›„ ì´ë¡ ì„œ ê³µë¶€ë¥¼ í•˜ë˜ê°€ í•´ì•¼ì§€ ë°”ë¡œ ì´ë¡ ì„œë¡œ ê°€ì§€ ë§ ê²ƒ!   2. í´ë˜ìŠ¤ì™€ ê°ì²´   2.1 í´ë˜ìŠ¤ì™€ ê°ì²´ì˜ ì •ì˜ì™€ ìš©ë„   1 2 í´ë˜ìŠ¤ì˜ ì •ì˜: í´ë˜ìŠ¤ë€ ê°ì²´ë¥¼ ì •ì˜í•´ ë†“ì€ ê²ƒ, ê°ì²´ì˜ ì„¤ê³„ë„ ë˜ëŠ” í‹€ í´ë˜ìŠ¤ì˜ ìš©ë„: í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ë° ì‚¬ìš©   1 2 ê°ì²´ì˜ ì •ì˜: ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” ê²ƒ. ì‚¬ë¬¼ ë˜ëŠ” ê°œë… ê°ì²´ì˜ ìš©ë„: ê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” ê¸°ëŠ¥ê³¼ ì†ì„±ì— ë”°ë¼ ë‹¤ë¦„   í´ë˜ìŠ¤ëŠ” ë‹¨ì§€ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ë° ì‚¬ìš©ë  ë¿, ê°ì²´ ê·¸ ìì²´ëŠ” ì•„ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê¸°ëŠ¥ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € í´ë˜ìŠ¤ë¡œë¶€í„° ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì´ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤.   ì˜ˆë¥¼ë“¤ì–´, ìš°ë¦¬ê°€ TVë¥¼ ë³´ê¸° ìœ„í•´ì„œëŠ” TV(ê°ì²´)ê°€ í•„ìš”í•œ ê²ƒì´ì§€ TVì„¤ê³„ë„(í´ë˜ìŠ¤)ê°€ í•„ìš”í•œ ê²ƒì´ ì•„ë‹ˆë©°, TVì„¤ê³„ë„(í´ë˜ìŠ¤)ëŠ” ë‹¨ì§€ TVë¼ëŠ” ì œí’ˆ(ê°ì²´)ì„ ë§Œë“œëŠ” ë°ë§Œ ì‚¬ìš©ë  ë¿ì´ë‹¤.   TVì„¤ê³„ë„ë¥¼ í†µí•´ TVê°€ ë§Œë“¤ì–´ì§„ ê²ƒ ì²˜ëŸ¼ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œ ë‹¤ìŒ, í´ë˜ìŠ¤ë¡œë¶€í„° ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•œë‹¤.      ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì€ ê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” ì†ì„±(ë³€ìˆ˜)ê³¼ ê¸°ëŠ¥(ë©”ì„œë“œ)ì„ ì‚¬ìš©í•œë‹¤ëŠ” ëœ»     2.2 ê°ì²´ì™€ ì¸ìŠ¤í„´ìŠ¤   1 2 3 ê°ì²´: ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëŒ€í‘œí•˜ëŠ” ì¼ë°˜ì  ìš©ì–´ ì¸ìŠ¤í„´ìŠ¤: íŠ¹ì • í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì„±ëœ ê°ì²´(ì˜ˆ: TV í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì„±ëœ ê°ì²´ëŠ” Tv ì¸ìŠ¤í„´ìŠ¤) ì¸ìŠ¤í„´ìŠ¤í™”: í´ë˜ìŠ¤ë¡œë¶€í„° ê°ì²´ë¥¼ ë§Œë“œëŠ” ê³¼ì •      í´ë˜ìŠ¤(ì„¤ê³„ë„)      ì¸ìŠ¤í„´ìŠ¤,ê°ì²´(ì œí’ˆ)      2.3 ê°ì²´ì˜ êµ¬ì„±ìš”ì†Œ - ì†ì„±ê³¼ ê¸°ëŠ¥   ê°ì²´(ì‚¬ë¬¼) = ì†ì„±(ë³€ìˆ˜) + ê¸°ëŠ¥(ë©”ì„œë“œ)   TV ì¼ë•Œ      ì†ì„±: í¬ê¸°, ê¸¸ì´, ë†’ì´, ìƒ‰ìƒ, ë³¼ë¥¨, ì±„ë„ë“±   ê¸°ëŠ¥: ì¼œê¸°, ë„ê¸°, ë³¼ë¥¨ ë†’ì´ê¸°, ë³¼ë¥¨ ë‚®ì¶”ê¸°, ì±„ë„ ë³€ê²½í•˜ê¸° ë“±   Tv í´ë˜ìŠ¤ = Tv ì„¤ê³„ë„   1 2 3 4 5 6 7 8 9 10 11 12 13 class Tv{ \t// ë³€ìˆ˜ ì‹œì‘ \tStirng color; \tboolean power; \tint channel; \t// ë³€ìˆ˜ ë  \t// ë©”ì„œë“œ ì‹œì‘ \tvoid power() { power = !power; } \tvoid channelUp() { channel++; } \tvoid channelDown() { channel--; } \t// ë©”ì„œë“œ ë }  ë³€ìˆ˜ 3ê°œ + ë©”ì„œë“œ 3ê°œ â‡’ ë©¤ë²„ ë³€ìˆ˜ 6ê°œ   2.4 ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©   1. ê°ì²´ì˜ ìƒì„±   1 2 3 4 5 6 7 8 í´ë˜ìŠ¤ëª… ë³€ìˆ˜ëª…;           // í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì„ ì–¸ ë³€ìˆ˜ëª… = new í´ë˜ìŠ¤ëª…();   // í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„± í›„, ê°ì²´ì˜ ì£¼ì†Œë¥¼ ì°¸ì¡°ë³€ìˆ˜ì— ì €ì¥  Tv t;                  // Tv í´ë˜ìŠ¤ íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ të¥¼ ì„ ì–¸ t = new Tv();          // Tv ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„, ìƒì„±ëœ Tv ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œë¥¼ tì— ì €ì¥  // ìœ„ì˜ ë‘ì¤„ì„ ì•„ë˜ ì²˜ëŸ¼ ì‚¬ìš© ê°€ëŠ¥ Tv t = new Tv(); // Tv ê°ì²´ë¥¼ ìƒì„±           Tv t;       â†’ ë³€ìˆ˜ì„ ì–¸       t ëŠ” ì°¸ì¡°ë³€ìˆ˜ â†’ ë¦¬ëª¨ì½˜ì´ë¼ê³ ë„ í•œë‹¤.       Tv ëŠ” ê¸°ë³¸í˜•ì´ ì•„ë‹˜. ë”°ë¼ì„œ, ì°¸ì¡°í˜•.            t = new Tv();       â†’ Tv ê°ì²´ ìƒì„±       new ì—°ì‚°ìëŠ” ê°ì²´ë¥¼ ë§Œë“¤ê³  ê°ì²´ì˜ ì£¼ì†Œë¥¼ ë°˜í™˜í•œë‹¤(0x100)              ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë°˜ë“œì‹œ ì°¸ì¡°ë³€ìˆ˜(ë¦¬ëª¨ì½˜)ê°€ í•„ìš”í•˜ë‹¤.   ìƒì„±ëœ ê°ì²´ì™€ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì—°ê²°í•´ì¤˜ì•¼í•œë‹¤(â€˜=â€™(ëŒ€ì…ì—°ì‚°ì) ì‚¬ìš©)   ì°¸ì¡°ë³€ìˆ˜ të¥¼ í†µí•´ TVì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.   ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ì„œëŠ” ì°¸ì¡°ë³€ìˆ˜ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.   2. ê°ì²´ì˜ ì‚¬ìš©(ì‚¬ìš©ì´ë€ ë³€ìˆ˜, ë©”ì„œë“œ ì‚¬ìš©)   1 2 3 t.channel = 7;     // Tv ì¸ìŠ¤í„´ìŠ¤ì˜ ë©¤ë²„ë³€ìˆ˜ channel ì˜ ê°’ì„ 7ë¡œ í•œë‹¤. =&gt; ë³€ìˆ˜ì‚¬ìš© t.channelDown();   // Tv ì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ì„œë“œ channelDown()ì„ í˜¸ì¶œí•œë‹¤.  =&gt; ë©”ì„œë“œì‚¬ìš©(ë©”ì„œë“œí˜¸ì¶œ) System.out.println(\"í˜„ì¬ ì±„ë„ì€ \" + t.channel + \" ì…ë‹ˆë‹¤.\");   ê³¼ì •     í´ë˜ìŠ¤ ì‘ì„±(ì„¤ê³„ë„ ì‘ì„±)   ê°ì²´ ìƒì„±(ì œí’ˆ ìƒì„±)   ê°ì²´ ì‚¬ìš©(ì œí’ˆ ì‚¬ìš©)   ì¸ìŠ¤í„´ìŠ¤ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ í†µí•´ì„œë§Œ ë‹¤ë£° ìˆ˜ ìˆìœ¼ë©°, ì°¸ì¡°ë³€ìˆ˜ì˜ íƒ€ì…ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ê³¼ ì¼ì¹˜í•´ì•¼í•œë‹¤.   TvTest.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Tv {       // Tvì˜ ì†ì„±(ë©¤ë²„ë³€ìˆ˜)       String color;           \t// ìƒ‰ìƒ       boolean power;         \t// ì „ì›ìƒíƒœ(on/off)       int channel;           \t// ì±„ë„        // Tvì˜ ê¸°ëŠ¥(ë©”ì„œë“œ)       void power()   { power = !power; }  // TVë¥¼ ì¼œê±°ë‚˜ ë„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ        void channelUp()   {  ++channel; }  // TVì˜ ì±„ë„ì„ ë†’ì´ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ       void channelDown() { --channel; }   // TVì˜ ì±„ë„ì„ ë‚®ì¶”ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ   }  class TvTest {        public static void main(String args[]) {              Tv t;                  // Tvì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ë³€ìˆ˜ të¥¼ ì„ ì–¸                    t = new Tv();          // Tvì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.              t.channel = 7;         // Tvì¸ìŠ¤í„´ìŠ¤ì˜ ë©¤ë²„ë³€ìˆ˜ channelì˜ ê°’ì„ 7ë¡œ í•œë‹¤.              t.channelDown();       // Tvì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ì„œë“œ channelDown()ì„ í˜¸ì¶œí•œë‹¤.              System.out.println(\"í˜„ì¬ ì±„ë„ì€ \" + t.channel + \" ì…ë‹ˆë‹¤.\");        }  }       TvTest3.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class Tv {       // Tvì˜ ì†ì„±(ë©¤ë²„ë³€ìˆ˜)       String color;           // ìƒ‰ìƒ       boolean power;          // ì „ì›ìƒíƒœ(on/off)       int channel;          \t // ì±„ë„        // Tvì˜ ê¸°ëŠ¥(ë©”ì„œë“œ)       void power()   { power = !power; }  // TVë¥¼ ì¼œê±°ë‚˜ ë„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ       void channelUp()   {  ++channel; }  // TVì˜ ì±„ë„ì„ ë†’ì´ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ       void channelDown() {  --channel; }  // TVì˜ ì±„ë„ì„ ë‚®ì¶”ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ë©”ì„œë“œ   }  class TvTest3 { \tpublic static void main(String args[]) { \t\tTv t1 = new Tv(); \t\tTv t2 = new Tv(); \t\tSystem.out.println(\"t1ì˜ channelê°’ì€ \" + t1.channel + \"ì…ë‹ˆë‹¤.\"); \t\tSystem.out.println(\"t2ì˜ channelê°’ì€ \" + t2.channel + \"ì…ë‹ˆë‹¤.\");  \t\tt2 = t1;\t\t// t1ì´ ì €ì¥í•˜ê³  ìˆëŠ” ê°’(ì£¼ì†Œ)ì„ t2ì— ì €ì¥í•œë‹¤. \t\tt1.channel = 7;\t// channel ê°’ì„ 7ë¡œ í•œë‹¤. \t\tSystem.out.println(\"t1ì˜ channelê°’ì„ 7ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.\");  \t\tSystem.out.println(\"t1ì˜ channelê°’ì€ \" + t1.channel + \"ì…ë‹ˆë‹¤.\"); \t\tSystem.out.println(\"t2ì˜ channelê°’ì€ \" + t2.channel + \"ì…ë‹ˆë‹¤.\"); \t} }           Tv t1 = new Tv();       Tv t2 = new Tv();       â†’ ê°ì²´ë§ˆë‹¤ ë³„ë„ì˜ ì €ì¥ê³µê°„ì´ ìƒê¸´ë‹¤ (ì£¼ì†Œê°€ ë‹¤ë¦„)            t2 = t1;       â†’ t1 ì´ ì €ì¥í•˜ê³  ìˆëŠ” ê°ì²´ì˜ ì£¼ì†Œë¥¼ t2 ì— ì €ì¥          ìœ„ì˜ ì˜ˆì œì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, ì°¸ì¡°ë³€ìˆ˜ì—ëŠ” í•˜ë‚˜ì˜ ê°’(ì£¼ì†Œ)ë§Œì´ ì €ì¥ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‘˜ ì´ìƒì˜ ì°¸ì¡°ë³€ìˆ˜ê°€ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ”(ì°¸ì¡°í•˜ëŠ”) ê²ƒì€ ê°€ëŠ¥í•˜ì§€ë§Œ í•˜ë‚˜ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ì—¬ëŸ¬ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.    2.5 ê°ì²´ë°°ì—´   ê°ì²´ë„ ë°°ì—´ë¡œ ë‹¤ë£¨ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ë¥¼ â€˜ê°ì²´ ë°°ì—´â€™ ì´ë¼ê³  í•œë‹¤. ê·¸ë ‡ë‹¤ê³  ê°ì²´ ë°°ì—´ ì•ˆì— ê°ì²´ê°€ ì €ì¥ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , ê°ì²´ì˜ ì£¼ì†Œê°€ ì €ì¥ëœë‹¤. ê°ì²´ ë°°ì—´ì€ ì°¸ì¡°ë³€ìˆ˜ë“¤ì„ í•˜ë‚˜ë¡œ ë¬¶ì€ ì°¸ì¡°ë³€ìˆ˜ ë°°ì—´ì¸ ê²ƒì´ë‹¤.   ê°ì²´ ë°°ì—´ == ì°¸ì¡°ë³€ìˆ˜ ë°°ì—´   1 2 3 4 Tv tv1, tv2, tv3;  // Tv íƒ€ì… ì°¸ì¡°ë³€ìˆ˜ * 3 Tv[] tvArr = new Tv[3]; // ê¸¸ì´ê°€ 3ì¸ Tvíƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ ë°°ì—´   1 2 3 4 5 6 7 // tvArr // 0x100  tvArr[0] = new Tv(); // 0x200 tvArr[1] = new Tv(); // 0x300 tvArr[2] = new Tv(); // 0x400  Tv[] tvArr = { new Tv(), new Tv(), new Tv() };   ê°ì²´ ìƒì„±   1 2 3 Tv t1 = new Tv(); // 0x100 Tv t2 = new Tv(); // 0x200 Tv t3 = new Tv(); // 0x300      ê°ì²´ ë°°ì—´ ìƒì„±   1 2 3 4 Tv tvArr = new Tv[3]; tvArr[0] = new Tv(); tvArr[1] = new Tv(); tvArr[2] = new Tv();      ê°ì²´ë°°ì—´ì„ ë§Œë“¤ì—ˆë‹¤ê³  í•´ì„œ ê·¸ ì•ˆì— ê°ì²´ë“¤ì´ ìë™ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ”ê²Œ ì•„ë‹ˆë‹¤. ë”°ë¡œ ë„£ì–´ì¤˜ì•¼í•¨   ê°ì²´ë°°ì—´ì„ ë§Œë“œëŠ” ê²ƒê³¼ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì„ í˜¼ë™í•˜ì§€ ë§ ê²ƒ!   2.6 í´ë˜ìŠ¤ì˜ ë˜ ë‹¤ë¥¸ ì •ì˜   í´ë˜ìŠ¤ì˜ ì •ì˜(1) - ë°ì´í„°ì™€ í•¨ìˆ˜ì˜ ê²°í•©      ì„¤ê³„ë„   ë°ì´í„°ì™€ í•¨ìˆ˜ì˜ ê²°í•©   ì‚¬ìš©ìì •ì˜ íƒ€ì…      ë³€ìˆ˜: í•˜ë‚˜ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„   ë°°ì—´: ê°™ì€ ì¢…ë¥˜(ê°™ì€ íƒ€ì…)ì˜ ì—¬ëŸ¬ ë°ì´í„°ë¥¼ í•˜ë‚˜ë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„   êµ¬ì¡°ì²´: ì„œë¡œ ê´€ë ¨ëœ ì—¬ëŸ¬ ë°ì´í„°(ì¢…ë¥˜ ê´€ê³„x, ë‹¤ë¥¸ íƒ€ì…ë„ ok)ë¥¼ í•˜ë‚˜ë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„   í´ë˜ìŠ¤: ë°ì´í„°ì™€ í•¨ìˆ˜ì˜ ê²°í•©(êµ¬ì¡°ì²´(ë³€ìˆ˜(ë°ì´í„°))+í•¨ìˆ˜(ë©”ì„œë“œ))      í´ë˜ìŠ¤ì˜ ì •ì˜(2) - ì‚¬ìš©ìì •ì˜ íƒ€ì…   ì‚¬ìš©ì ì •ì˜ íƒ€ì… - ì›í•˜ëŠ” íƒ€ì…ì„ ì§ì ‘ ë§Œë“¤ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 class Time { \tint hour; \tint minute; \tint second; }      ì™¼ìª½ì€ ë¹„ê°ì²´ì§€í–¥ì  ì½”ë“œ, ì˜¤ë¥¸ìª½ì€ ê°ì²´ì§€í–¥ì  ì½”ë“œ   ê°ì²´ì§€í–¥ì  ì½”ë“œëŠ” ì„œë¡œ ê´€ë ¨ëœ ê°’ì„ ê°•í•˜ê²Œ ë¬¶ì„ ìˆ˜ ìˆë‹¤      ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP/",
        "teaser": ""
      },{
        "title": "Spring Security",
        "excerpt":"ìŠ¤í”„ë§ ì‹œíë¦¬í‹°   â†’ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µ      ì„¸ì…˜(HttpSession) ê¸°ë°˜: ì‚¬ìš©ì ì •ë³´ëŠ” ì„œë²„ì—ì„œ ë³´ê´€, í•„ìš”ì‹œ ì„¤ì •ì„ í†µí•´ì„œ ì œì–´       1. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´ìš©í•˜ëŠ” í”„ë¡œì íŠ¸   build.gradle   1 implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity5'   application.yml   1 2 3 4 5 6 7 8 9 logging:   level:     com:       springframework:         security:           web:             trace       project:         debug   security ê´€ë ¨ ë¶€ë¶„ì€ ë¡œê·¸ ë ˆë²¨ì„ ë‚®ê²Œ ì„¤ì •í•´ì„œ ìì„¸í•œ ë¡œê·¸ í™•ì¸   ìœ„ì˜ ì„¤ì •ì„ ì™„ë£Œí•˜ë©´ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰ ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì¤‘ê°„ì— íŒ¨ìŠ¤ì›Œë“œ í•˜ë‚˜ê°€ ì¶œë ¥ë¨      ìƒì„±ëœ íŒ¨ìŠ¤ì›Œë“œëŠ” user ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œ (ì„ì‹œ íŒ¨ìŠ¤ì›Œë“œ ì—­í™œì„ í•¨)   localhost:8080/login ì˜ ê²½ë¡œë¡œ ì ‘ê·¼ í–ˆì„ ë•Œ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë³´ì¸ë‹¤.          ì°¸ê³ ) ë¸Œë¼ìš°ì €ì—ì„œ ê°•ì œë¡œ ë¡œê·¸ì•„ì›ƒí•˜ê³  ì‹¶ì„ ë•, ê°œë°œì ë„êµ¬ì˜ Applicationíƒ­ì—ì„œ Cookies ì˜ JSESSIONID ë¥¼ ê°•ì œ ì‚­ì œí•œë‹¤   ì¿ í‚¤ë“¤ ì¤‘ì— í†°ìº£ì€ JSESSIONID ë¼ëŠ” ì´ë¦„ì˜ ì¿ í‚¤ë¥¼ ì‚¬ìš©       1.1 ì‹œíë¦¬í‹° ì„¤ì • í´ë˜ìŠ¤ ì‘ì„±   SecurityConfig í´ë˜ìŠ¤ ì¶”ê°€   í•´ë‹¹ í´ë˜ìŠ¤ì—ëŠ” ì‹œíë¦¬í‹° ê´€ë ¨ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì„¤ì •í•˜ê¸° ìœ„í•´ WebSecurityConfigurerAdapter ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì†ìœ¼ë¡œ ì²˜ë¦¬. WebSecurityConfigurerAdapter í´ë˜ìŠ¤ëŠ” ì£¼ë¡œ override ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ ì„¤ì • ì¡°ì •   config/SecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 package com.project.netflix.config;  import lombok.extern.log4j.Log4j2; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder;  @Configuration @Log4j2 public class SecurityConfig extends WebSecurityConfigurerAdapter {  }        1.2 í™•ì¸ì„ ìœ„í•œ SampleController   SampleController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 package com.project.netflix.controller;  import lombok.extern.log4j.Log4j2; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping;  @Controller @Log4j2 @RequestMapping(\"/sample\") public class SampleController {      // ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìë„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”     @GetMapping(\"/all\")     public void exAll() {         log.info(\"all..............\");     }      // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”     @GetMapping(\"/member\")     public void exMember() {         log.info(\"member..............\");     }      // ê´€ë¦¬ì ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”     @GetMapping(\"/admin\")     public void exAdmin() {         log.info(\"admin..............\");     } }    templates ë„ ì‘ì„±       1.3 ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ìš©ì–´ì™€ íë¦„   Filter1,2,3â€¦N â†’ Authentication Manager â†’ AuthenticationProvider â†’ UserDetailsService   Authentication Manager(ì¸ì¦ ë§¤ë‹ˆì €): í•µì‹¬ ì—­í•    AuthenticationProvider: ì¸ì¦ ë§¤ë‹ˆì €ê°€ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ê²°ì •   UserDetailsService: ì‹¤ì œ ì¸ì¦   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ í•µì‹¬ ê°œë…ì€ ì¸ì¦(Authentication)ê³¼ ì¸ê°€(Authorization)   ì˜ˆì‹œ) ì€í–‰ì— ê¸ˆê³ ê°€ í•˜ë‚˜ ìˆê³ , ì‚¬ìš©ìê°€ ê¸ˆê³ ì˜ ë‚´ìš©ì„ ì—´ì–´ë³¸ë‹¤ ê°€ì •í•˜ì˜€ì„ ë•Œ      ì‚¬ìš©ìëŠ” ì€í–‰ì— ê°€ì„œ ìì‹ ì´ ì–´ë–¤ ì‚¬ëŒì¸ì§€ ìì‹ ì˜ ì‹ ë¶„ì¦ìœ¼ë¡œ ìì‹ ì„ ì¦ëª…   ì€í–‰ì—ì„œëŠ” ì‚¬ìš©ìì˜ ì‹ ë¶„ì„ í™•ì¸   ì€í–‰ì—ì„œ ì‚¬ìš©ìê°€ ê¸ˆê³ ë¥¼ ì—´ì–´ ë³¼ ìˆ˜ ìˆëŠ” ì‚¬ëŒì¸ì§€ë¥¼ íŒë‹¨   ë§Œì¼ ì ì ˆí•œ ê¶Œë¦¬ë‚˜ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìì˜ ê²½ìš° ê¸ˆê³ ë¥¼ ì—´ì–´ì¤Œ   1ì€ ì¸ì¦(ìì‹ ì„ ì¦ëª…), 3ì€ ì¸ê°€(ì‚¬ìš©ìì—ê²Œ ì¼ì¢…ì˜ í—ˆê°€ë¥¼ í•´ ì£¼ëŠ” ê³¼ì •)       í•„í„°ì™€ í•„í„° ì²´ì´ë‹   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ í•„í„°ëŠ” ìŠ¤í”„ë§ì˜ ë¹ˆê³¼ ì—°ë™í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„ë¨   ì—¬ëŸ¬ ê°œì˜ í•„í„°ê°€ Filter Chain ì´ë¼ëŠ” êµ¬ì¡°ë¡œ Request ë¥¼ ì²˜ë¦¬í•˜ê²Œ ë¨. ê°œë°œ ì‹œì— í•„í„°ë¥¼ í™•ì¥í•˜ê³  ì„¤ì •í•˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´ìš©í•´ì„œ ë‹¤ì–‘í•œ í˜•íƒœì˜ ë¡œê·¸ì¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ê²Œ ë¨       ì¸ì¦ì„ ìœ„í•œ AuthenticationManager(AM)   í•„í„°ì˜ í•µì‹¬ì ì¸ ë™ì‘ì€ AuthenticationManagerì„ í†µí•´ì„œ ì¸ì¦ì´ë¼ëŠ” íƒ€ì…ì˜ ê°ì²´ë¡œ ì‘ì—…   AuthenticationManagerê°€ ê°€ì§„ ì¸ì¦ ì²˜ë¦¬ ë©”ì„œë“œëŠ” íŒŒë¼ë¯¸í„°,ë¦¬í„´ íƒ€ì… ëª¨ë‘ Authentication.   ì¸ì¦: ìŠ¤ìŠ¤ë¡œ ì¦ëª…í•˜ë‹¤ (= ì£¼ë¯¼ë“±ë¡ì¦)   ì˜ˆì‹œ) ë¡œê·¸ì¸ í•˜ëŠ” ê³¼ì •ì—ì„œëŠ” ì‚¬ìš©ìì˜ ì•„ì´ë””/íŒ¨ìŠ¤ì›Œë“œë¡œ ìì‹ ì´ ì–´ë–¤ ì‚¬ëŒì¸ì§€ ì „ë‹¬. ê²€ì¦í•˜ëŠ” í–‰ìœ„ëŠ” AuthenticationManagerë¥¼ í†µí•´ ì´ë£¨ì–´ì§   ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„°ì˜ ì£¼ìš” ì—­í• ì€ ì¸ì¦ ê´€ë ¨ëœ ì •ë³´ë¥¼ í† í°ì´ë¼ëŠ” ê°ì²´ë¡œ ë§Œë“¤ì–´ì„œ ì „ë‹¬. UsernamePasswordAuthenticationToken ì˜ ë™ì‘      request ë¥¼ ì´ìš©í•´ ì‚¬ìš©ìì˜ ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œ ë°›ìŒ   ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œë¡œ UsernamePasswordAuthenticationToken ë¼ëŠ” ê°ì²´ ìƒì„±   ê°ì²´ë¥¼ AuthenticationManager ì˜ authenticate() ì— ì „ë‹¬   AuthenticationManager ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì¸ì¦ì²˜ë¦¬ ë°©ë²•ì„ ì œê³µ      ë°ì´í„°ë² ì´ìŠ¤ ì´ìš©   ë©”ëª¨ë¦¬ìƒì— ìˆëŠ” ì •ë³´ë¥¼ í™œìš©   AuthenticationProvider ëŠ” ì „ë‹¬ë˜ëŠ” í† í°ì˜ íƒ€ì…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì¡´ì¬ì¸ì§€ë¥¼ í™•ì¸í•˜ê³  authenticate() ë¥¼ ìˆ˜í–‰   AuthenticationProvider ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ UserDetailsService ë¥¼ ì´ìš©. UserDetailsServiceëŠ” ì‹¤ì œë¡œ ì¸ì¦ì„ ìœ„í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í•        ì¸ê°€ì™€ ê¶Œí•œ/ì ‘ê·¼ ì œí•œ   ì¸ì¦ì²˜ë¦¬ ë‹¨ê³„ê°€ ëë‚˜ë©´ ì‚¬ìš©ìì˜ ê¶Œí•œì´ ì ì ˆí•œì§€ í™•ì¸   ì¸ì¦: ì‚¬ìš©ìê°€ ìŠ¤ìŠ¤ë¡œ ìì‹ ì„ ì¦ëª…í•˜ëŠ” ê²ƒ   ì¸ê°€: í—ˆê°€ì˜ ì˜ë¯¸   AuthenticationManager ì˜ authenticate() ë©”ì„œë“œì˜ ë¦¬í„´ê°’ì€ Authentication(ì¸ì¦)   ì´ ì¸ì¦ ì •ë³´ì—ëŠ” Roles ë¼ëŠ” ê¶Œí•œì— ëŒ€í•œ ì •ë³´ê°€ ìˆìŒ. ì´ ì •ë³´ë¡œ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì‘ì—…ì„ í•  ìˆ˜ ìˆëŠ”ì§€ í—ˆê°€í•˜ê²Œ ë˜ëŠ”ë° ì´ëŸ¬í•œ í–‰ìœ„ë¥¼ Access-Control(ì ‘ê·¼ ì œí•œ)ì´ë¼ê³  í•¨   ë‹¨ê³„1. ì‚¬ìš©ìëŠ” ì›í•˜ëŠ” URL ì„ ì…ë ¥   ë‹¨ê³„2. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œëŠ” ì¸ì¦/ì¸ê°€ê°€ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨í•˜ê³ (í•„í„°ì—ì„œ íŒë‹¨) ì‚¬ìš©ìê°€ ì¸ì¦í•˜ë„ë¡ ë¡œê·¸ì¸ í™”ë©´ ë³´ì—¬ì¤Œ      ì˜¬ë°”ë¥¸ ì‚¬ìš©ìë¼ê³  ì¸ì¦ë˜ë©´ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ Authentication íƒ€ì…ìœ¼ë¡œ ì „ë‹¬(ì¸ì¦)   ì „ë‹¬ëœ ê°ì²´ë¡œ ì‚¬ìš©ìê°€ ì ì ˆí•œ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸(ì¸ê°€)   ë‹¨ê³„3. ì •ë³´ê°€ ì „ë‹¬ëœë‹¤ë©´ AuthenticationManagerê°€ ì ì ˆí•œ AuthenticationProviderë¥¼ ì°¾ì•„ì„œ ì¸ì¦ì„ ì‹œë„         2. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì»¤ìŠ¤í„°ë§ˆì´ì§•       2.1 ë°˜ë“œì‹œ í•„ìš”í•œ PasswordEncoder   íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”   BCryptPasswordEncoder ëŠ” bcrypt ë¼ëŠ” í•´ì‹œ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•˜ëŠ” ëª©ì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤. BCryptPasswordEncoder ë¡œ ì•”í˜¸í™”ëœ íŒ¨ìŠ¤ì›Œë“œëŠ” ë³µí˜¸í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ê³  ë§¤ë²ˆ ì•”í˜¸í™”ëœ ê°’ë„ ë‹¤ë¦„.   SecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 package com.project.netflix.config;  import lombok.extern.log4j.Log4j2; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder;  @Configuration @Log4j2 public class SecurityConfig extends WebSecurityConfigurerAdapter {      @Bean     PasswordEncoder passwordEncoder() {         return new BCryptPasswordEncoder();     } }        2.2 AuthenticationManager ì„¤ì •   SecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 package com.project.netflix.config;  import lombok.extern.log4j.Log4j2; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder;  @Configuration @Log4j2 public class SecurityConfig extends WebSecurityConfigurerAdapter {      @Bean     PasswordEncoder passwordEncoder() {         return new BCryptPasswordEncoder();     }      @Override     protected void configure(AuthenticationManagerBuilder auth) throws Exception {          // ì‚¬ìš©ì ê³„ì •ì€ user1         auth.inMemoryAuthentication().withUser(\"user1\")                 // 1111 íŒ¨ìŠ¤ì›Œë“œ ì¸ì½”ë”© ê²°ê³¼                 .password(\"$2a$10$yfgSY/2154i6Tf9/s83PCeCB/xo1L1/7dtGv1XG2mN4l3Qwlz05Ze\")                 .roles(\"USER\");     } }        2.3 ì¸ê°€ê°€ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ì„¤ì •   SecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package com.project.netflix.config;  import lombok.extern.log4j.Log4j2; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder;  @Configuration @Log4j2 public class SecurityConfig extends WebSecurityConfigurerAdapter {      ...      @Override     protected void configure(HttpSecurity http) throws Exception {         http.authorizeRequests()                 .antMatchers(\"/sample/all\").permitAll()                 .antMatchers(\"/sample/member\").hasRole(\"USER\");          http.formLogin();     }      ... }    http.authorizeRequests()   ì¸ì¦ì´ í•„ìš”í•œ ìì›ë“¤ì„ ì„¤ì •   antMatchers(â€œ/*â€)**   ì•¤íŠ¸ ìŠ¤íƒ€ì¼ì˜ íŒ¨í„´ìœ¼ë¡œ ì›í•˜ëŠ” ìì›ì„ ì„ íƒ   permitAll()   ëª¨ë“  ì‚¬ìš©ìì—ê²Œ í—ˆë½   http.formLogin();   ì¸ê°€/ì¸ì¦ì— ì‹¤íŒ¨ì‹œ ë¡œê·¸ì¸ í™”ë©´       2.4 CSRF ì„¤ì •   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” CSRF ë¼ëŠ” ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•´ ì„ì˜ì˜ ê°’ì„ ë§Œë“¤ì–´ ì´ë¥¼ GET ë°©ì‹ì„ ì œì™¸í•œ ëª¨ë“  ìš”ì²­ ë°©ì‹(POST,PUT,DELETE)ì— í¬í•¨ì‹œì¼œì•¼ë§Œ ì •ìƒì ì¸ ë™ì‘ì„ í•¨   CSRF(Cross Site Request Forgery)ê³µê²©: ì‚¬ì´íŠ¸ê°„ ìš”ì²­ ìœ„ì¡°   form íƒœê·¸ë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì—ì„œ CSRF í† í°ì´ ë³´ì•ˆìƒìœ¼ë¡œ ê¶Œì¥ë¨. RESTë°©ì‹ì—ì„œëŠ” ë§¤ë²ˆ CSRF í† í°ì˜ ê°’ì„ ì•Œì•„ë‚´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆê¸° ë•Œë¬¸ì— ê²½ìš°ì— ë”°ë¼ CSRF í† í°ì˜ ë°œí–‰ì„ í•˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ìˆìŒ       csrfí† í° ë¹„í™œì„±í™”   SecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 package com.project.netflix.config;  import lombok.extern.log4j.Log4j2; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder;  @Configuration @Log4j2 public class SecurityConfig extends WebSecurityConfigurerAdapter {      ...      @Override     protected void configure(HttpSecurity http) throws Exception {         http.authorizeRequests()                 .antMatchers(\"/sample/all\").permitAll()                 .antMatchers(\"/sample/member\").hasRole(\"USER\");          http.formLogin();         http.csrf().disable();         http.logout();     }      ... }    http.csrf().disable();   ì˜ˆì œì—ì„œëŠ” RESTë°©ì‹ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ì„¤ì •ì„ ë‹¤ë£¨ê¸° ìœ„í•´ CSRF í† í°ì„ ë°©í–‰í•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •       2.5 logout ì„¤ì •   http.logout();   logout() ì—ì„œ ì£¼ì˜í•´ì•¼ í•  ì ì€ CSRF í† í°ì„ ì‚¬ìš©í•  ë•Œ POST ë°©ì‹ìœ¼ë¡œë§Œ ë¡œê·¸ì•„ì›ƒ   CSRF í† í°ì„ disable() ë¡œ ë¹„í™œì„±í™” ì‹œí‚¤ë©´ GET ë°©ì‹ìœ¼ë¡œë„ ë¡œê·¸ì•„ì›ƒ í•  ìˆ˜ ìˆìŒ         3. í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ JPA ì²˜ë¦¬   Member.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 package com.project.netflix.entity;  import lombok.*;  import javax.persistence.*; import java.util.HashSet; import java.util.Set;  @Entity @AllArgsConstructor @NoArgsConstructor @Builder @Getter @ToString public class Member extends baseEntity {  \t@Id     private String email;      private String password;      private String name;      private Boolean fromSocial;      @ElementCollection(fetch = FetchType.LAZY)     @Builder.Default     private Set&lt;MemberRole&gt; roleSet = new HashSet&lt;&gt;();      public void addMemberRole(MemberRole memberRole) {         roleSet.add(memberRole);     }  }   MemberRole.java   1 2 3 4 5 package com.project.netflix.entity;  public enum MemberRole {     USER, MANAGER, ADMIN }       3.1 Repository ì™€ ë”ë¯¸ë°ì´í„° ì¶”ê°€í•˜ê¸°   ë”ë¯¸ë°ì´í„° ì¶”ê°€ì‹œ íšŒì›ì€ ì—¬ëŸ¬ ê°œì˜ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆì–´ì•¼ í•¨ì„ ìœ ì˜í•˜ë©° ì‘ì„±   MemberRepository.java   1 2 3 4 5 6 7 package com.project.netflix.repository;  import com.project.netflix.entity.Member; import org.springframework.data.jpa.repository.JpaRepository;  public interface MemberRepository extends JpaRepository&lt;Member, String&gt; { }   security/MemberTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 package com.project.netflix.security;  import com.project.netflix.entity.Member; import com.project.netflix.entity.MemberRole; import com.project.netflix.repository.MemberRepository; import org.junit.jupiter.api.Test; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.security.crypto.password.PasswordEncoder;  import java.util.stream.IntStream;  @SpringBootTest public class MemberTests {      @Autowired     private MemberRepository memberRepository;      @Autowired     private PasswordEncoder passwordEncoder;      @Test     public void insertDummies() {  \t\t// 1~80: USER         // 81~90: USER, MANAGER         // 91~100: USER, MANAGER, ADMIN          IntStream.rangeClosed(1, 100).forEach(i -&gt; {             Member member = Member.builder()                     .email(\"user\" + i + \"@gmail.com\")                     .name(\"user\" + i)                     .fromSocial(false)                     .password(passwordEncoder.encode(\"1111\"))                     .build();              member.addMemberRole(MemberRole.USER);             if (i &gt; 80) {                 member.addMemberRole(MemberRole.MANAGER);             }             if (i &gt; 90) {                 member.addMemberRole(MemberRole.ADMIN);             }             memberRepository.save(member);         });     } }       3.2 íšŒì› ë°ì´í„° ì¡°íšŒ í…ŒìŠ¤íŠ¸   MemberRepository.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 package com.project.netflix.repository;  import com.project.netflix.entity.Member; import org.springframework.data.jpa.repository.EntityGraph; import org.springframework.data.jpa.repository.JpaRepository; import org.springframework.data.jpa.repository.Query;  import java.util.Optional;  public interface MemberRepository extends JpaRepository&lt;Member, String&gt; {      @EntityGraph(attributePaths = {\"roleSet\"}, type = EntityGraph.EntityGraphType.LOAD)     @Query(\"select m from Member m where m.fromSocial = :social and m.email = :email\")     Optional&lt;Member&gt; findByEmail(String email, boolean social); }   ì°¸ê³ ) @EntityGraph   JPA ë¥¼ ì“°ë‹¤ê°€ ë³´ë©´ LAZY íŒ¨ì¹˜íƒ€ì…ìœ¼ë¡œ relation ì´ ë‹¬ë ¤ ìˆëŠ” entity ë¥¼ n+1 ë¬¸ì œ ì—†ì´ í•œë²ˆì— ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ë•Œê°€ ìˆë‹¤. í‰ì†Œì—ëŠ” LAZY ë¥¼ ì“°ì§€ë§Œ íŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” í•œë²ˆì— íŒ¨ì¹˜í•˜ëŠ”ê²Œ í•„ìš”í•˜ê¸°ë„ í•˜ë‹¤. ì´ëŸ´ë•Œ repository ë©”ì†Œë“œì— @EntityGraphë§Œ ë¶™ì´ë©´ ì†ì‰½ê²Œ join í•´ì„œ í•œ ë²ˆì— íŒ¨ì¹˜í•´ ì˜´   @EntityGraphì˜ typeì€Â EntityGraph.EntityGraphType.FETCHì™€Â EntityGraph.EntityGraphType.LOADÂ 2ê°€ì§€ê°€ ìˆë‹¤.      FETCH: entity graphì— ëª…ì‹œí•œ attributeëŠ”Â EAGERë¡œ íŒ¨ì¹˜í•˜ê³ , ë‚˜ë¨¸ì§€ attributeëŠ”Â LAZYë¡œ íŒ¨ì¹˜   LOAD: entity graphì— ëª…ì‹œí•œ attributeëŠ”Â EAGERë¡œ íŒ¨ì¹˜í•˜ê³ , ë‚˜ë¨¸ì§€ attributeëŠ” entityì— ëª…ì‹œí•œ fetch typeì´ë‚˜ ë””í´íŠ¸ FetchTypeìœ¼ë¡œ íŒ¨ì¹˜ (e.g.Â @OneToManyëŠ”Â LAZY,Â @ManyToOneì€Â EAGERÂ ë“±ì´ ë””í´íŠ¸ì´ë‹¤.)         4. ì‹œíë¦¬í‹°ë¥¼ ìœ„í•œ UserDetailsService   ì¼ë°˜ì ì¸ ì•„ì´ë””/íŒ¨ìŠ¤ì›Œë“œì™€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì°¨ì´ì       ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œëŠ” íšŒì›ì´ë‚˜ ê³„ì •ì— ëŒ€í•´ User ë¼ëŠ” ìš©ì–´ ì‚¬ìš©   username ì‚¬ìš©            ë‹¨ì–´ ìì²´ê°€ íšŒì›ì„ êµ¬ë³„í•  ìˆ˜ ìˆëŠ” ì‹ë³„ ë°ì´í„°ë¥¼ ì˜ë¯¸           username ê³¼ password ë™ì‹œì— ì‚¬ìš©í•˜ì§€ ì•ŠìŒ            ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” UserDetailsService ë¥¼ ì´ìš©í•´ì„œ íšŒì›ì˜ ì¡´ì¬ë§Œì„ ìš°ì„ ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³ , ì´í›„ì— password ê°€ í‹€ë¦¬ë©´ Bad Cridential(ì˜ëª»ëœ ìê²©ì¦ëª…) ì´ë¼ëŠ” ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ëƒ„(ì¸ì¦)           username, password ì¸ì¦ ê³¼ì •ì´ ëë‚˜ë©´ ì›í•˜ëŠ” ìì›(URL)ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¸ê°€ ê³¼ì •ì„ ì‹¤í–‰(Access Denied ê³¼ ê°™ì€ ê²°ê³¼ ìƒì„±ë¨)   ìœ„ì˜ ê³¼ì •ì—ì„œ ê°€ì¥ í•µì‹¬ì€ UserDetailsService       4.1 UserDetails ì¸í„°í˜ì´ìŠ¤   loadUserByUsername()   â†’ username ì´ë¼ëŠ” íšŒì› ì•„ì´ë””ì™€ ê°™ì€ ì‹ë³„ ê°’ìœ¼ë¡œ íšŒì› ì •ë³´ë¥¼ ê°€ì ¸ì˜´   â†’ ë¦¬í„´ íƒ€ì…: UserDetails íƒ€ì…      getAuthorities(): ì‚¬ìš©ìê°€ ê°€ì§€ëŠ” ê¶Œí•œì— ëŒ€í•œ ì •ë³´   getPassword(): ì¸ì¦ì„ ë§ˆë¬´ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨ìŠ¤ì›Œë“œ ì •ë³´   getUsername(): ì¸ì¦ì— í•„ìš”í•œ ì•„ì´ë””ì™€ ê°™ì€ ì •ë³´   ê³„ì • ë§Œë£Œ ì—¬ë¶€: ì‚¬ìš© ë¶ˆê°€ëŠ¥ ê³„ì •ì¸ì§€ ì•Œ ìˆ˜ ìˆëŠ” ì •ë³´   ê³„ì • ì ê¹€ ì—¬ë¶€: í˜„ì¬ ê³„ì •ì˜ ì ê¹€ ì—¬ë¶€   Member ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•      ê¸°ì¡´ DTO í´ë˜ìŠ¤ì— UserDetails ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•   DTO ì™€ ê°™ì€ ê°œë…ìœ¼ë¡œ ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ êµ¬ì„±í•˜ê³  ì´ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²• (ì„ í˜¸!)   security/dto/AuthMemberDTO.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 package com.project.netflix.security.dto;  import lombok.Getter; import lombok.Setter; import lombok.ToString; import lombok.extern.log4j.Log4j2; import org.springframework.security.core.GrantedAuthority; import org.springframework.security.core.userdetails.User;  import java.util.Collection;  @Log4j2 @Getter @Setter @ToString public class AuthMemberDTO extends User {      private String email;      private String name;      private boolean fromSocial;      public AuthMemberDTO(             String username,             String password,             boolean fromSocial,             Collection&lt;? extends GrantedAuthority&gt; authorities) {         super(username, password, authorities);         this.email = username;         this.fromSocial = fromSocial;     }  }   User í´ë˜ìŠ¤ë¥¼ ìƒì†, ë¶€ëª¨ í´ë˜ìŠ¤ì¸ User í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì½”ë“œ ìƒì„±   AuthMemberDTO ëŠ” DTO ì—­í• ë„ ìˆ˜í–‰í•˜ê³  ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì¸ê°€/ì¸ì¦ ì‘ì—…ì— ì‚¬ìš© (password ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì§€ ì•ŠìŒ)       4.2 UserDetailsService êµ¬í˜„   Member ê°€ AuthMemberDTO ë¼ëŠ” íƒ€ì…ìœ¼ë¡œ ì²˜ë¦¬ëœ ê°€ì¥ í° ì´ìœ ëŠ” ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•µì‹¬ì ì¸ ì—­í• ì„ í•˜ëŠ” UserDetailsService ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ ë•Œë¬¸   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ êµ¬ì¡°ì—ì„œ ì¸ì¦ì„ ë‹´ë‹¹í•˜ëŠ” AuthenticationManager ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ UserDetailsService ë¥¼ í˜¸ì¶œí•´ì„œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜´   JPA ë¡œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ UserDetailsServiceê°€ ì´ìš©í•˜ëŠ” êµ¬ì¡°ë¡œ ì‘ì„±   SecurityUserDetailsService.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 package com.project.netflix.security.service;  import com.project.netflix.entity.Member; import com.project.netflix.repository.MemberRepository; import com.project.netflix.security.dto.AuthMemberDTO; import lombok.RequiredArgsConstructor; import lombok.extern.log4j.Log4j2; import org.springframework.security.core.authority.SimpleGrantedAuthority; import org.springframework.security.core.userdetails.UserDetails; import org.springframework.security.core.userdetails.UserDetailsService; import org.springframework.security.core.userdetails.UsernameNotFoundException; import org.springframework.stereotype.Service;  import java.util.Optional; import java.util.stream.Collectors;  @Log4j2 @Service @RequiredArgsConstructor public class SecurityUserDetailsService implements UserDetailsService {      private final MemberRepository memberRepository;      @Override     public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {          log.info(\"SecurityUserDetailsService loadUserByUsername: \" + username);          Optional&lt;Member&gt; result = memberRepository.findByEmail(username, false);          if (!result.isPresent()) {             throw new UsernameNotFoundException(\"Check Email or Social\");         }          Member member = result.get();          log.info(\"-------------------------\");         log.info(member);          AuthMemberDTO authMember = new AuthMemberDTO(                 member.getEmail(),                 member.getPassword(),                 member.isFromSocial(),                 member.getRoleSet().stream()                         .map(role -&gt; new SimpleGrantedAuthority(\"ROLE_\"+role.name()))                         .collect(Collectors.toSet())         );          authMember.setName(member.getName());          return authMember;     } }   @Service ë¥¼ ì‚¬ìš©í•´ì„œ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ì—ì„œ ë¹ˆìœ¼ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆê²Œ í–ˆë‹¤.      MemberRepository ë¥¼ ì£¼ì…ë°›ì„ ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ë³€ê²½, @RequiredArgsConstructor ì²˜ë¦¬   username ì´ ì‹¤ì œë¡œëŠ” email ì„ ì˜ë¯¸   ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ UsernameNotFoundExceptionìœ¼ë¡œ ì²˜ë¦¬   Member ë¥¼ UserDetails íƒ€ì…ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ AuthMemberDTO íƒ€ì…ìœ¼ë¡œ ë³€í™˜   MemberRole ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” SimpleGrantedAuthority ë¡œ ë³€í™˜  ","categories": ["Spring"],
        "tags": ["Java","Spring","JPA"],
        "url": "/spring/Java-SpringSecurity/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ë³€ìˆ˜ì™€ ë©”ì„œë“œ)",
        "excerpt":"3. ë³€ìˆ˜ì™€ ë©”ì„œë“œ   3.1 ì„ ì–¸ìœ„ì¹˜ì— ë”°ë¥¸ ë³€ìˆ˜ì˜ ì¢…ë¥˜   ì˜ì—­ì—” ë‘ê°€ì§€ê°€ ìˆë‹¤.      í´ë˜ìŠ¤ ì˜ì—­: ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv), í´ë˜ìŠ¤ ë³€ìˆ˜(cv = static + iv)   ë©”ì„œë“œ ì˜ì—­: ì§€ì—­ ë³€ìˆ˜(lv)   1 2 3 4 5 6 7 8 9 10 11 12 class Variables { \t// ë³€ìˆ˜ì„ ì–¸ ì‹œì‘ \tint iv;               // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ \tstatic int cv;        // í´ë˜ìŠ¤ ë³€ìˆ˜(staticë³€ìˆ˜, ê³µìœ ë³€ìˆ˜) \t// ë³€ìˆ˜ ì„ ì–¸ ë  \t// ë©”ì„œë“œ ì„ ì–¸ ì‹œì‘ \tvoid method() { \t\tint lv = 0;         // ì§€ì—­ë³€ìˆ˜ \t} \t// ë©”ì„œë“œ ì„ ì–¸ ë }   lv ëŠ” ë³€ìˆ˜ ì„ ì–¸ ì‹œì ë¶€í„° ë©”ì„œë“œ ì¢…ë£Œë˜ëŠ” ì‹œì ê¹Œì§€ ìœ íš¨í•˜ë‹¤   iv ì˜ ìƒì„±ì‹œê¸°***  ì¤‘ìš”í•˜ë‹¤!   ê°ì²´ëŠ” iv ë¥¼ ì—¬ëŸ¬ê°œ ë¬¶ì–´ ë†“ì€ ê²ƒ(hour, minute, second ëª¨ë‘ iv ì´ë‹¤)      í´ë˜ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°ˆ ë•Œ â†’ í´ë˜ìŠ¤ê°€ í•„ìš”í•  ë•Œ â†’ ì„¤ê³„ë„ê°€ í•„ìš”í•  ë•Œ â†’ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ì „ì—!       3.2 í´ë˜ìŠ¤ ë³€ìˆ˜ì™€ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜   ì„ ì–¸ìœ„ì¹˜ ì˜ì—­      í´ë˜ìŠ¤ ì˜ì—­: ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv), í´ë˜ìŠ¤ ë³€ìˆ˜(cv = static + iv)   ë©”ì„œë“œ ì˜ì—­: ì§€ì—­ ë³€ìˆ˜(lv)       ì¹´ë“œ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„  ì¹´ë“œì˜ ì†ì„±ê³¼ ê¸°ëŠ¥ì„ ì•Œì•„ì•¼ í•¨   ì¹´ë“œì˜ ì†ì„±: ìˆ«ì, ë¬´ëŠ¬, ë†’ì´, í­      ìˆ«ì, ë¬´ëŠ¬: ê°œë³„ (ê°ì²´ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ìœ ì§€ë˜ì–´ì•¼ í•¨)   í­, ë†’ì´: ëª¨ë“  ê°ì²´ ê³µí†µ       ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv): ê°ê¸° ë‹¤ë¥¸ ê°’ì„ ìœ ì§€, ê°œë³„ì  (ìˆ«ì, ë¬´ëŠ¬)   í´ë˜ìŠ¤ ë³€ìˆ˜(cv): ê³µí†µëœ ê°’ì„ ê°€ì§, ê³µí†µì  (í­, ë†’ì´)       iv ëŠ” ê°ì²´ë§ˆë‹¤ ë§Œë“¤ì–´ì§€ê³  cv ëŠ” ê³µí†µìœ¼ë¡œ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§„ë‹¤.   1 2 3 4 5 6 7 8 9 class Card { \t// ê°œë³„ \tString kind; \tint number;  \t// ê³µí†µ \tstatic int width = 100; \tstatic int height = 250; }       Ex6_3.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 class Ex6_3 { \tpublic static void main(String args[]) { \t\t// ê°ì²´ ìƒì„± ì—†ì´ ì‚¬ìš© ê°€ëŠ¥ (í´ë˜ìŠ¤ ë³€ìˆ˜ëŠ” ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§) \t\tSystem.out.println(\"Card.width = \" + Card.width); \t\tSystem.out.println(\"Card.height = \" + Card.height);  \t\tCard c1 = new Card(); \t\tc1.kind = \"Heart\"; \t\tc1.number = 7;  \t\tCard c2 = new Card(); \t\tc2.kind = \"Spade\"; \t\tc2.number = 4;  \t\tSystem.out.println(\"c1ì€ \" + c1.kind + \", \" + c1.number + \"ì´ë©°, í¬ê¸°ëŠ” (\" + c1.width + \", \" + c1.height + \")\"); \t\tSystem.out.println(\"c2ëŠ” \" + c2.kind + \", \" + c2.number + \"ì´ë©°, í¬ê¸°ëŠ” (\" + c2.width + \", \" + c2.height + \")\"); \t\tSystem.out.println(\"c1ì˜ widthì™€ heightë¥¼ ê°ê° 50, 80ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.\"); \t\tc1.width = 50;    // ì½”ë“œë¥¼ ë´¤ì„ ë• iv ê°™ì•„ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡  cv ì´ë¯€ë¡œ c1, c2 ëª¨ë‘ ë°”ë€œ! \t\tc1.height = 80; \t\t// ì•„ë˜ì™€ ê°™ì´ ì ëŠ”ê²Œ ì¢‹ì€ ì½”ë“œ!! \t\t// Card.width = 50; \t\t// Card.height = 80;  \t\tSystem.out.println(\"c1ì€ \" + c1.kind + \", \" + c1.number + \"ì´ë©°, í¬ê¸°ëŠ” (\" + c1.width + \", \" + c1.height + \")\"); \t\tSystem.out.println(\"c2ëŠ” \" + c2.kind + \", \" + c2.number + \"ì´ë©°, í¬ê¸°ëŠ” (\" + c2.width + \", \" + c2.height + \")\"); \t} }  class Card { \tString kind; \tint number; \tstatic int width = 100; \tstatic int height = 250; }       í´ë˜ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” í´ë˜ìŠ¤ì´ë¦„.í´ë˜ìŠ¤ë³€ìˆ˜(Card.width) ì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤   1 2 3 4 5 6 7 8 9 10 11 12 13 // ê°ì²´ ìƒì„± Card c = new Card();  // ê°ì²´ ì‚¬ìš© c.kind = \"HEART\"; c.number = 5;  // í‹€ë¦°ê±´ ì•„ë‹ˆì§€ë§Œ ê¶Œì¥í•˜ì§€ ì•ŠìŒ // c.width = 100; // c.height = 250; // ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ì“°ëŠ”ê²Œ ì¢‹ì€ ì½”ë“œ (í´ë˜ìŠ¤ ë³€ìˆ˜ì¸ì§€ ì•Œì•„ë³´ê¸° í¸í•¨!) Card.width = 100; Card.height = 250;       3.3 ë©”ì„œë“œ   ì •ì˜      ë¬¸ì¥ë“¤ì„ ë¬¶ì–´ë†“ì€ ê²ƒ.            ì‘ì—…ë‹¨ìœ„ë¡œ ë¬¸ì¥ë“¤ì„ ë¬¶ì–´ì„œ ì´ë¦„ ë¶™ì¸ ê²ƒ       ë³„ë„ì˜ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ê³  ë©”ì„œë“œë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ì¤‘ë³µì„ ì‚­ì œ í•  ìˆ˜ ìˆìŒ           1 2 3 4 5  static void printArr(int[] numArr) {       }       printArr(numArr); // ë©”ì„œë“œ í˜¸ì¶œ(ì‚¬ìš©)           ê°’(ì…ë ¥)ì„ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ê³ , ê²°ê³¼ë¥¼ ë°˜í™˜(ì¶œë ¥)            í•¨ìˆ˜ = ë©”ì„œë“œ(ê°ì²´ì§€í–¥ê°œë…ì—ì„œ í•¨ìˆ˜ë¥¼ ë©”ì„œë“œë¼ í•¨)       í•¨ìˆ˜ì™€ ë©”ì„œë“œì˜ ì°¨ì´ì ? â†’ ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ í´ë˜ìŠ¤ ì•ˆì— ìˆì–´ì•¼ í•¨, í•¨ìˆ˜ëŠ” í´ë˜ìŠ¤ì— ë…ë¦½ì            1 2 3 4 5 6  // ì°¨ë¡€ëŒ€ë¡œ  // ë°˜í™˜íƒ€ì…(ì¶œë ¥), ë©”ì„œë“œ ì´ë¦„, ë§¤ê°œë³€ìˆ˜ì„ ì–¸(ì…ë ¥)  int add (int x, int y) {  \tint result = x + y;  \treturn result;  }           ë©”ì„œë“œëŠ” ë©”ì„œë“œì— ë„£ì„ ê°’(ì…ë ¥)ê³¼ ë°˜í™˜í•˜ëŠ” ê²°ê³¼(ì¶œë ¥)ë§Œ ì•Œë©´ ë˜ê³  ë©”ì„œë“œ ë‚´ë¶€ë¥¼ ì•Œ í•„ìš”ê°€ ì—†ë‹¤.   ë©”ì„œë“œë¥¼ ë‚´ë¶€ê°€ ë³´ì´ì§€ ì•ŠëŠ” ë¸”ë™ë°•ìŠ¤ë¼ê³ ë„ í•œë‹¤.       ë©”ì„œë“œì˜ ì‘ì„±      ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ì—¬ëŸ¬ ë¬¸ì¥ì„ ë©”ì„œë“œë¡œ ì‘ì„± (ì—¬ëŸ¬ ë¬¸ì¥ìœ¼ë¡œ êµ¬ì„±ëœ í•˜ë‚˜ì˜ ì‘ì—…ì„ ë©”ì„œë“œë¡œ ë§Œë“œëŠ” ê²ƒë„ ì¢‹ë‹¤)   í•˜ë‚˜ì˜ ë©”ì„œë“œëŠ” í•œ ê°€ì§€ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ì‘ì„± (ì½”ë“œë¥¼ í•˜ë‚˜ì˜ ì˜ë¯¸ìˆëŠ” ì‘ì—…ìœ¼ë¡œ ë§Œë“œëŠ”ê²Œ ì¢‹ë‹¤)       ë©”ì„œë“œì˜ ì¥ì       ì½”ë“œì˜ ì¤‘ë³µì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤   ì½”ë“œì˜ ê´€ë¦¬ê°€ ì‰½ë‹¤   ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤   ì½”ë“œê°€ ê°„ê²°í•´ì„œ ì´í•´í•˜ê¸° ì‰¬ì›Œì§„ë‹¤       3.4 ë©”ì„œë“œì˜ ì„ ì–¸ê³¼ êµ¬í˜„   ë©”ì„œë“œ = ì„ ì–¸ë¶€ + êµ¬í˜„ë¶€         ë¦¬í„´ íƒ€ì…: ì‘ì—…ê²°ê³¼ íƒ€ì…(ì¶œë ¥)   íƒ€ì… ë³€ìˆ˜ëª…: ë§¤ê°œë³€ìˆ˜ (ì…ë ¥)       ì—¬ëŸ¬ê°œì˜ ë§¤ê°œë³€ìˆ˜(íŒŒë¼ë¯¸í„°)ë¥¼ ì „ë‹¬í•  ë•Œ ê°ì²´ë¡œ í•˜ë©´ ì¢‹ë‹¤   â†’ ê°ì²´ê°€ ì—¬ëŸ¬ê°œì˜ ê°’ì„ ê°€ì§€ê³  ìˆìœ¼ë‹ˆê¹Œ!       ë©”ì„œë“œ ì„ ì–¸ë¶€   ë©”ì„œë“œì˜ ì´ë¦„ + ë§¤ê°œë³€ìˆ˜ ì„ ì–¸ + ë°˜í™˜íƒ€ì… ìœ¼ë¡œ êµ¬ì„±ë¨       ë§¤ê°œë³€ìˆ˜ ì„ ì–¸   ë§¤ê°œë³€ìˆ˜ëŠ” ë©”ì„œë“œê°€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê°’ë“¤(ì…ë ¥)ì„ ì œê³µ. ì…ë ¥í•  ê°’ì˜ ê°œìˆ˜ê°€ ë§ë‹¤ë©´ ë°°ì—´ì´ë‚˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì‚¬ìš©   ë§¤ê°œë³€ìˆ˜ë„ ì§€ì—­ë³€ìˆ˜! (ë§¤ê°œë³€ìˆ˜ë„ ë©”ì„œë“œ ë‚´ì— ì„ ì–¸ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ë©° ì§€ì—­ë³€ìˆ˜ì´ë‹¤)       ë°˜í™˜íƒ€ì…   ë©”ì„œë“œì˜ ì‘ì—…ìˆ˜í–‰ ê²°ê³¼(ì¶œë ¥)ì¸ ë°˜í™˜ê°’ì˜ íƒ€ì…ì„ ì ëŠ”ë‹¤. ë°˜í™˜ê°’ì´ ì—†ì„ ê²½ìš°ì—” void.       ë©”ì„œë“œì˜ êµ¬í˜„ë¶€   ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ìˆ˜í–‰ë  ë¬¸ì¥ë“¤ì„ ë„£ìŒ       returnë¬¸   returnë¬¸ì˜ íƒ€ì…ì€ ë°˜í™˜íƒ€ì…ê³¼ ì¼ì¹˜í•˜ê±°ë‚˜ ì ì–´ë„ ìë™ í˜•ë³€í™˜ì´ ê°€ëŠ¥í•œ ê²ƒì´ì–´ì•¼ í•¨       ì§€ì—­ë³€ìˆ˜   ì§€ì—­ë³€ìˆ˜(lv): ë©”ì„œë“œ ë‚´ì— ì„ ì–¸ëœ ë³€ìˆ˜   1 2 3 4 5 6 7 8 9 10 // ì§€ì—­ë³€ìˆ˜: x, y, result int add (int x, int y) { \tint result = x + y; \treturn result; }  int multiply(int x, int y) { \tint result = x * y; \treturn result; }   ê° ë©”ì„œë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ì˜ ì´ë¦„ì€ ê°™ì§€ë§Œ ì„œë¡œ ë‹¤ë¥¸ ë³€ìˆ˜ì´ë‹¤.       3.5 ë©”ì„œë“œì˜ í˜¸ì¶œ   ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤   ë©”ì„œë“œ í˜¸ì¶œí•˜ëŠ” ë°©ë²•: ë©”ì„œë“œì´ë¦„(ê°’1, ê°’2, â€¦);   1 2 3 4 print99danAll(); // void print99danAll()ì„ í˜¸ì¶œ  int result = add(3, 5); // int add(int x, int y)ë¥¼ í˜¸ì¶œí•˜ê³ , ê²°ê³¼ë¥¼ result ì— ì €ì¥ // int: ì¶œë ¥ / 3, 5: ì…ë ¥       ì¸ì(ì¸ìˆ˜)ì™€ ë§¤ê°œë³€ìˆ˜(íŒŒë¼ë¯¸í„°)      ì¸ì: ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ê´„í˜¸ ì•ˆì— ì§€ì •í•´ì¤€ ê°’ë“¤   ì¸ìì˜ ê°œìˆ˜ì™€ ìˆœì„œëŠ” í˜¸ì¶œëœ ë©”ì„œë“œì— ì„ ì–¸ëœ ë§¤ê°œë³€ìˆ˜ì™€ ì¼ì¹˜í•´ì•¼ í•¨       ë©”ì„œë“œì˜ ì‹¤í–‰íë¦„   ê°™ì€ í´ë˜ìŠ¤ ë‚´ì˜ ë©”ì„œë“œë¼ë¦¬ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ì„œë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ì§€ë§Œ staticë©”ì„œë“œëŠ” ê°™ì€ í´ë˜ìŠ¤ ë‚´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 class MyMathTest { \tpublic static void main(String args[]) {  \t\tMyMath mm = new MyMath();  // ë¨¼ì € ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.  \t\tlong result1 = mm.add(5L, 3L); // ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. \t\tlong result2 = mm.subtract(5L, 3L); \t\tlong result3 = mm.multiply(5L, 3L); \t\tdouble result4 = mm.divide(5L, 3L);  \t\tSystem.out.println(\"add(5L, 3L) = \"      + result1); \t\tSystem.out.println(\"subtract(5L, 3L) = \" + result2); \t\tSystem.out.println(\"multiply(5L, 3L) = \" + result3); \t\tSystem.out.println(\"divide(5L, 3L) = \"   + result4); \t} }  class MyMath {  \tlong add(long a, long b) { \t\tlong result = a+b; \t\treturn result; \t//\treturn a + b;\t// ìœ„ì˜ ë‘ ì¤„ì„ ì´ì™€ ê°™ì´ í•œ ì¤„ë¡œ ê°„ë‹¨íˆ í•  ìˆ˜ ìˆë‹¤. \t}  \tlong subtract(long a, long b) { \t\treturn a - b; \t}  \tlong multiply(long a, long b) { \t\treturn a * b; \t}  \tdouble divide(double a, double b) { \t\treturn a / b; \t}  }   ë©”ì„œë“œì˜ ì‹¤í–‰ íë¦„ì€ ê°ì²´ë¥¼ ë¨¼ì € ìƒì„±í•˜ê³  ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤   ë”°ë¼ì„œ, add(long a, long b) ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ì„  MyMath mm = new MyMath(); ì™€ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ ë‹¤ìŒ ì°¸ì¡°ë³€ìˆ˜ mmì„ í†µí•´ì•¼í•œë‹¤.       3.6 returnë¬¸   ì‹¤í–‰ ì¤‘ì¸ ë©”ì„œë“œë¥¼ ì¢…ë£Œí•˜ê³  í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ë˜ëŒì•„ê°   1 2 3 4 5 6 7 8 9 10 void printGugudan(int dan) { \tif(!(2 &lt;= dan &amp;&amp; dan &lt;= 9)) { \t\treturn; // í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ê·¸ëƒ¥ ë˜ëŒì•„ê°„ë‹¤. \t}  \tfor(int i=1; i&lt;= 9; i++) { \t\tSystem.out.printf(\"%d * %d = %d%n\", dan, i, dan * i); \t} \t// ë°˜í™˜íƒ€ì…ì´ void ì´ë¯€ë¡œ ìƒëµê°€ëŠ¥. ì»´íŒŒì¼ëŸ¬ê°€ ìë™ì¶”ê°€ }       ë°˜í™˜íƒ€ì…ì´ voidê°€ ì•„ë‹Œ ê²½ìš°, ë°˜ë“œì‹œ returnë¬¸ í•„ìš”   1 2 3 4 5 6 7 8 9 10 11 int multiply(int x, int y) { \tint result = x * y; \treturn result; }  int max(int a, int b) { \tif(a &gt; b) { \t\treturn a; // ì¡°ê±´ì‹ì´ ì°¸ì¼ ë•Œë§Œ ì‹¤í–‰ë¨. ë”°ë¼ì„œ, ì—ëŸ¬ ë°œìƒ! \t} \t// else { return b; } }       ë°˜í™˜ê°’(return value)   returnë¬¸ì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì£¼ë¡œ ë³€ìˆ˜ê°€ ì˜¤ì§€ë§Œ í•­ìƒ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆë‹¤.   1 2 3 4 5 6 7 8 int add(int x, int y) { \tint result = x + y; \treturn result; // ë³€ìˆ˜ë¥¼ ë°˜í™˜ }  int add(int x, int y) { \treturn x + y; // ìˆ˜ì‹ì´ ë°˜í™˜ }       ë§¤ê°œë³€ìˆ˜ì˜ ìœ íš¨ì„± ê²€ì‚¬   ë©”ì„œë“œì˜ êµ¬í˜„ë¶€ë¥¼ ì‘ì„±í•  ë•Œ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì´ ì ì ˆí•œ ê²ƒì¸ì§€ í™•ì¸í•´ì•¼ í•¨   ë§¤ê°œë³€ìˆ˜ì˜ ìœ íš¨ì„± ê²€ì‚¬ëŠ” ë©”ì„œë“œì˜ ì‘ì„±ì— ìˆì–´ì„œ ê°„ê³¼í•˜ê¸° ì‰¬ìš´ ì¤‘ìš”í•œ ë¶€ë¶„   1 2 3 4 5 6 7 8 float divide(int x, int y) { \t// ì‘ì—…ì„ í•˜ê¸° ì „ì— ë‚˜ëˆ„ëŠ” ìˆ˜(y)ê°€ 0ì¸ì§€ í™•ì¸ \tif(y == 0) { \t\tSystem.out.println(\"0ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"); \t\treturn 0; // ë§¤ê°œë³€ìˆ˜ê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë©”ì„œë“œë¥¼ ì¢…ë£Œ \t} \treturn x / (float)y; }  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP2/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(í˜¸ì¶œìŠ¤íƒ, ê¸°ë³¸í˜•/ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜, ì°¸ì¡°í˜• ë°˜í™˜íƒ€ì…, í´ë˜ìŠ¤/ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ)",
        "excerpt":"3.7 JVMì˜ ë©”ëª¨ë¦¬ êµ¬ì¡°   JVMì€ ë©”ëª¨ë¦¬ë¥¼ ìš©ë„ì— ë”°ë¼ ì—¬ëŸ¬ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•œë‹¤. ì£¼ìš” 3ê°€ì§€ ì˜ì—­ì€ ë©”ì„œë“œì˜ì—­, í˜¸ì¶œìŠ¤íƒ, í™ì´ ìˆë‹¤. ê·¸ ì¤‘ í˜¸ì¶œ ìŠ¤íƒì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤          ìŠ¤íƒ(stack): ë°‘ì´ ë§‰íŒ ìƒì. ìœ„ì— ì°¨ê³¡ì°¨ê³¡ ìŒ“ì¸ë‹¤.       í˜¸ì¶œìŠ¤íƒ(call stack)ì´ë€?(ì¤‘ìš”)      ë©”ì„œë“œ ìˆ˜í–‰ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ê°€ ì œê³µë˜ëŠ” ê³µê°„   ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ í˜¸ì¶œìŠ¤íƒì— ë©”ëª¨ë¦¬ í• ë‹¹, ë©”ì„œë“œê°€ ì‘ì—…ì„ ì¢…ë£Œí•˜ë©´ í• ë‹¹ë˜ì—ˆë˜ ë©”ëª¨ë¦¬ ê³µê°„ í•´ì œ       í˜¸ì¶œìŠ¤íƒ íŠ¹ì§•      ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ ìˆ˜í–‰ì— í•„ìš”í•œ ë§Œí¼ì˜ ë©”ëª¨ë¦¬ë¥¼ ìŠ¤íƒì— í• ë‹¹ë°›ëŠ”ë‹¤.   ë©”ì„œë“œê°€ ìˆ˜í–‰ì„ ë§ˆì¹˜ê³ ë‚˜ë©´ ì‚¬ìš©í–ˆë˜ ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜í•˜ê³  ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.   í˜¸ì¶œìŠ¤íƒì˜ ì œì¼ ìœ„ì— ìˆëŠ” ë©”ì„œë“œê°€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ë©”ì„œë“œì´ë‹¤.        ì•„ë˜ì— ìˆëŠ” ë©”ì„œë“œê°€ ë°”ë¡œ ìœ„ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ë©”ì„œë“œì´ë‹¤.                  main ë©”ì„œë“œê°€ firstMethod ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ë‹¤         main()ì´ ì‹¤í–‰, firstMethod() ë¥¼ í˜¸ì¶œ   main()ì€ ëŒ€ê¸° ìƒíƒœ, firstMethod()ê°€ ì‹¤í–‰   ì´í›„, firstMedthod() ê°€ ì¢…ë£Œë˜ë©´ main()ì´ ëŒ€ê¸° ìƒíƒœì—ì„œ ì‹¤í–‰ ìƒíƒœë¡œ ë°”ë€œ   â†’ ì•„ë˜ ìˆëŠ” ë©”ì„œë“œê°€ ìœ„ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê²ƒ. ë§¨ ìœ„ì˜ ë©”ì„œë“œ í•˜ë‚˜ë§Œ ì‹¤í–‰ ì¤‘, ë‚˜ë¨¸ì§€ëŠ” ëŒ€ê¸°ì¤‘       í˜¸ì¶œìŠ¤íƒì— ëŒ€í•œ ì˜ˆì œ   1 2 3 4 5 class Ex6_5 { \tpublic static void main(String[] args){ \t\tSystem.out.println(\"Hello\"); \t} }      ìŠ¤íƒì´ ë¹„ì–´ìˆìŒ   main()ì´ ì‹¤í–‰ë¨   main()ì´ println()ì„ í˜¸ì¶œ, main()ì€ ëŒ€ê¸° println() ì‹¤í–‰í•˜ê³  ì‹¤í–‰ì´ ëë‚˜ë©´ ìì‹ ì´ ì‚¬ìš©í•˜ë˜ ë©”ëª¨ë¦¬ ë°˜í™˜í•˜ê³  ì¢…ë£Œë¨   main() ì‹¤í–‰ìƒíƒœ   main() ì¢…ë£Œë˜ê³  ë©”ëª¨ë¦¬ ë°˜í™˜, ìŠ¤íƒì´ ë¹„ì–´ì§       3.8 ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜ì™€ ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜(ë§¤ìš° ì¤‘ìš”)   1 2 ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜ - ë³€ìˆ˜ì˜ ê°’ì„ ì½ê¸°ë§Œ í•  ìˆ˜ ìˆë‹¤(read only) ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜ - ë³€ìˆ˜ì˜ ê°’ì„ ì½ê³  ë³€ê²½í•  ìˆ˜ ìˆë‹¤(read &amp; write)       ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Data { int x; }  class Ex6_6 { \tpublic static void main(String[] args){ \t\tData d = new Data(); // ê°ì²´ ìƒì„± \t\td.x = 10; \t\tSystem.out.println(\"main() : x = \" + d.x); \t\t \t\tchange(d.x); // change() í˜¸ì¶œë¨ \t\tSystem.out.println(\"After change(d.x)\"); \t\tSystem.out.println(\"main() : x = \" + d.x); \t}  \tstatic void change(int x) { // ê¸°ë³¸í˜• ë§¤ê°œë³€ìˆ˜ (ì½ê¸°ë§Œ ê°€ëŠ¥) \t\tx = 1000; // xëŠ” ì§€ì—­ë³€ìˆ˜(ë©”ì¸ë©”ì„œë“œì˜ xì™€ ë³€ìˆ˜ëª…ì€ ê°™ì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ ë³€ìˆ˜ì´ë‹¤) \t\tSystem.out.println(\"change() : x = \" + x); \t} }   ì‹¤í–‰ê²°ê³¼   1 2 3 4 main() : x = 10 change() : x = 1000 After change(d.x) main() : x = 10      ìŠ¤íƒì— main ìŒ“ì„, main() ì‹¤í–‰   ì°¸ì¡°ë³€ìˆ˜ d ìƒì„± í›„ Data() ê°ì²´ ìƒì„±, Data ê°ì²´ì˜ ë©¤ë²„ë³€ìˆ˜ê°€ x í•˜ë‚˜ë§Œ ì¡´ì¬   ë©¤ë²„ë³€ìˆ˜ x ì˜ ì£¼ì†Œê°€ 0x100ì´ë¼ê³  í•˜ë©´ ì°¸ì¡°ë³€ìˆ˜ dì— ë©¤ë²„ë³€ìˆ˜ì˜ ì£¼ì†Œê°€ ì €ì¥ë¨. ê·¸ëŸ¼ ì°¸ì¡°ë³€ìˆ˜ê°€ xë¥¼ ê°€ë¦¬í‚¤ê²Œ ë¨   ì°¸ì¡°ë³€ìˆ˜ dê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ x ê°’ì´ 10ì´ ë¨   println() ì‹¤í–‰   change() ì‹¤í–‰, ì§€ì—­ë³€ìˆ˜ xê°€ 10ì´ ë¨   main()ê³¼ change()ì˜ xëŠ” ë³€ìˆ˜ëª…ì€ ê°™ì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ ë³€ìˆ˜   x = 1000ì´ ë¨. println() ì‹¤í–‰   after change, println() ì‹¤í–‰ d.xëŠ” 10   main() ì¢…ë£Œ, ìŠ¤íƒì—ì„œ ì œê±°ë¨       ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Data2 { int x; }  class Ex6_7 { \tpublic static void main(String[] args){ \t\tData2 d = new Data2(); // ê°ì²´ ìƒì„± \t\td.x = 10; \t\tSystem.out.println(\"main() : x = \" + d.x); \t\t \t\tchange(d); // change() í˜¸ì¶œë¨ \t\tSystem.out.println(\"After change(d)\"); \t\tSystem.out.println(\"main() : x = \" + d.x); \t}  \tstatic void change(Data2 d) { // ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜ (ì½ê¸°&amp;ì“°ê¸° ê°€ëŠ¥) \t\td.x = 1000; // xëŠ” ì§€ì—­ë³€ìˆ˜(ë©”ì¸ë©”ì„œë“œì˜ xì™€ ë³€ìˆ˜ëª…ì€ ê°™ì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ ë³€ìˆ˜ì´ë‹¤) \t\tSystem.out.println(\"change() : x = \" + d.x); \t} }   ì‹¤í–‰ê²°ê³¼   1 2 3 4 main() : x = 10 change() : x = 1000 After change(d) main() : x = 1000      ìŠ¤íƒì— main ìŒ“ì„, main() ì‹¤í–‰   ì°¸ì¡°ë³€ìˆ˜ d ìƒì„± í›„ Data2() ê°ì²´ ìƒì„±, Data2 ê°ì²´ì˜ ë©¤ë²„ë³€ìˆ˜ê°€ x í•˜ë‚˜ë§Œ ì¡´ì¬   ë©¤ë²„ë³€ìˆ˜ x ì˜ ì£¼ì†Œê°€ 0x100ì´ë¼ê³  í•˜ë©´ ì°¸ì¡°ë³€ìˆ˜ dì— ë©¤ë²„ë³€ìˆ˜ì˜ ì£¼ì†Œê°€ ì €ì¥ë¨. ê·¸ëŸ¼ ì°¸ì¡°ë³€ìˆ˜ê°€ xë¥¼ ê°€ë¦¬í‚¤ê²Œ ë¨   ì°¸ì¡°ë³€ìˆ˜ dê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ x ê°’ì´ 10ì´ ë¨   println() ì‹¤í–‰   ìŠ¤íƒì— change ìŒ“ì„. change() ì‹¤í–‰, ì°¸ì¡°ë³€ìˆ˜ dë¥¼ changeì˜ ì§€ì—­ë³€ìˆ˜ì— ë³µì‚¬(ì£¼ì†Œê°’ì´ ë³µì‚¬ë˜ëŠ” ê²ƒ)   ì°¸ì¡°ë³€ìˆ˜ dê°€ ê°€ë¥´í‚¤ëŠ” xì˜ ê°’ì„ 1000ìœ¼ë¡œ ë°”ê¿ˆ. println() ì‹¤í–‰   after change, println() ì‹¤í–‰ d.xëŠ” 1000   main() ì¢…ë£Œ, ìŠ¤íƒì—ì„œ ì œê±°ë¨       3.9 ì°¸ì¡°í˜• ë°˜í™˜íƒ€ì…   ë°˜í™˜íƒ€ì…ì´ ì°¸ì¡°í˜•ì´ë¼ëŠ” ê²ƒì€ ë°˜í™˜í•˜ëŠ” ê°’ì˜ íƒ€ì…ì´ ì°¸ì¡°í˜•ì´ë¼ëŠ” ì–˜ê¸´ë°, ëª¨ë“  ì°¸ì¡°í˜• íƒ€ì…ì˜ ê°’ì€ ê°ì²´ì˜ ì£¼ì†Œ ì´ë¯€ë¡œ ì •ìˆ˜ê°’ì´ ë°˜í™˜ë˜ëŠ” ê²ƒì¼ ë¿ íŠ¹ë³„í•  ê²ƒì€ ì—†ë‹¤.   ì°¸ì¡°í˜• ë°˜í™˜íƒ€ì… ì˜ˆì‹œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Data3 { int x; }  class Ex6_8 { \tpublic static void main(String[] args){ \t\tData3 d = new Data3(); // ê°ì²´ ìƒì„± \t\td.x = 10;  \t\tData3 d2 = copy(d); \t\tSystem.out.println(\"d.x =\" + d.x); \t\tSystem.out.println(\"d2.x=\" + d2.x); \t}  \tstatic Data3 copy(Data3 d) { \t\tData3 tmp = new Data3(); // ìƒˆë¡œìš´ ê°ì²´ tmpë¥¼ ìƒì„±í•œë‹¤. \t\ttmp.x = d.x; // d.xì˜ ê°’ì„ tmp.xì— ë³µì‚¬í•œë‹¤. \t\treturn tmp; // ë³µì‚¬í•œ ê°ì²´ì˜ ì£¼ì†Œë¥¼ ë°˜í™˜í•œë‹¤. \t} }   ì‹¤í–‰ê²°ê³¼   1 2 d.x =10 d2.x=10      ìŠ¤íƒì— main ìŒ“ì„, main() ì‹¤í–‰   ì°¸ì¡°ë³€ìˆ˜ d ìƒì„± í›„ Data3() ê°ì²´ ìƒì„±, Data3 ê°ì²´ì˜ ë©¤ë²„ë³€ìˆ˜ê°€ x í•˜ë‚˜ë§Œ ì¡´ì¬   ë©¤ë²„ë³€ìˆ˜ x ì˜ ì£¼ì†Œê°€ 0x100ì´ë¼ê³  í•˜ë©´ ì°¸ì¡°ë³€ìˆ˜ dì— ë©¤ë²„ë³€ìˆ˜ì˜ ì£¼ì†Œê°€ ì €ì¥ë¨. ê·¸ëŸ¼ ì°¸ì¡°ë³€ìˆ˜ê°€ xë¥¼ ê°€ë¦¬í‚¤ê²Œ ë¨   ì°¸ì¡°ë³€ìˆ˜ dê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ x ê°’ì´ 10ì´ ë¨   ì°¸ì¡°ë³€ìˆ˜ d2 ìƒì„±   copy() ì‹¤í–‰. main()ì˜ ì°¸ì¡°ë³€ìˆ˜ dê°€ copy()ì˜ ì§€ì—­ë³€ìˆ˜ dì— ì €ì¥ë¨(ì£¼ì†Œê°’ì´ ë³µì‚¬)   ì°¸ì¡°ë³€ìˆ˜ tmpì— ê°ì²´ ì£¼ì†Œ ì €ì¥ë¨(0x200)   0x100ì— ì €ì¥ëœ ê°’ì´ 0x200ì— ì €ì¥ë¨   ë°˜í™˜íƒ€ì…ì´ ì°¸ì¡°í˜•   println() ì‹¤í–‰   main() ì¢…ë£Œ, ìŠ¤íƒì—ì„œ ì œê±°ë¨          ì°¸ì¡°í˜• ë°˜í™˜íƒ€ì…ì€ ë©”ì„œë“œê°€ 'ê°ì²´ì˜ ì£¼ì†Œ(ì •ìˆ˜)'ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.       ì°¸ê³ )   ê°™ì€ í´ë˜ìŠ¤ì— ìˆëŠ” main()ê³¼ copy()   Data3 d2 = copy(d);   ì™œ ì°¸ì¡°ë³€ìˆ˜ ì—†ì´ í•  ìˆ˜ ìˆëŠ”ê°€? (Data3 d2 = e.copy(d); ì²˜ëŸ¼)      ê°™ì€ í´ë˜ìŠ¤ì— ìˆê¸° ë•Œë¬¸   staticìœ¼ë¡œ ì •ì˜í–ˆê¸° ë•Œë¬¸   static ì€ ê°ì²´ ìƒì„± ì—†ì´ í˜¸ì¶œ ê°€ëŠ¥!       3.10       3.11 í´ë˜ìŠ¤ ë©”ì„œë“œ(staticë©”ì„œë“œ)ì™€ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ   ë³€ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë©”ì„œë“œ ì•ì— static ì´ ë¶™ìœ¼ë©´ static ë©”ì„œë“œ, í´ë˜ìŠ¤ ë©”ì„œë“œë¼ í•˜ê³  ë©”ì„œë“œ ì•ì— static ì´ ì—†ìœ¼ë©´ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 class MyMath2 { \tlong a, b; \t \tlong add() { // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ \t\treturn a + b; \t}  \tstatic long add(long a, long b) { // í´ë˜ìŠ¤ ë©”ì„œë“œ(static ë©”ì„œë“œ) \t\treturn a + b; \t} }          ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ            ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ â€˜ì°¸ì¡°ë³€ìˆ˜.ë©”ì„œë“œì´ë¦„()â€™ ìœ¼ë¡œ í˜¸ì¶œ                ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„(iv, im)ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•˜ëŠ” ë©”ì„œë“œ           â†’ iv: ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜, im: ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ               ë©”ì„œë“œ ë‚´ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv) ì‚¬ìš©ê°€ëŠ¥           static ë©”ì„œë“œ(í´ë˜ìŠ¤ ë©”ì„œë“œ)                     ê°ì²´ ìƒì„± ì—†ì´ â€˜í´ë˜ìŠ¤ì´ë¦„.ë©”ì„œë“œì´ë¦„()â€™ ìœ¼ë¡œ í˜¸ì¶œ           â†’ Math.random() ê°ì²´ ìƒì„± ì•ˆí•¨           â†’ ê°ì²´ ìƒì„± ì•ˆí•˜ë‹ˆê¹Œ ì°¸ì¡°ë³€ìˆ˜ ì—†ì–´ì„œ í´ë˜ìŠ¤ì´ë¦„ ì“´ë‹¤.               ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„(iv, im)ì™€ ê´€ë ¨ì—†ëŠ” ì‘ì—…ì„ í•˜ëŠ” ë©”ì„œë“œ       ë©”ì„œë“œ ë‚´ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv) ì‚¬ìš©ë¶ˆê°€               ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì™€ ìŠ¤íƒœí‹± ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ë³€ìˆ˜ì˜ ì‚¬ìš©ì—¬ë¶€ì— ë”°ë¼ êµ¬ë¶„ëœë‹¤   â†’ ì‚¬ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ, ì‚¬ìš©ì•ˆí•˜ë©´ í´ë˜ìŠ¤(ìŠ¤íƒœí‹±) ë©”ì„œë“œ       1 2 3 4 5 6 7 8 9 10 11 12 class MyMath2 { \tlong a, b; //ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(iv) \t \tlong add() { // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ (iv ì‚¬ìš©, ivë¥¼ ì‚¬ìš©í•˜ë‹ˆê¹Œ ë§¤ê°œë³€ìˆ˜ í•„ìš”ì—†ìŒ) \t\treturn a + b; \t}  \t\t\t\t\t// ì§€ì—­ ë³€ìˆ˜(lv) \tstatic long add(long a, long b) { // í´ë˜ìŠ¤ ë©”ì„œë“œ(static ë©”ì„œë“œ) (lv ì‚¬ìš©) \t\treturn a + b; \t} }   ìœ„ì˜ ì½”ë“œì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì™€ í´ë˜ìŠ¤ ë©”ì„œë“œì˜ ì°¨ì´ì       static ì˜ ì—¬ë¶€   ë§¤ê°œë³€ìˆ˜ ì—¬ë¶€   1 2 3 4 5 6 7 8 9 10 class MyMathTest2 { \tpublic static void main(String[] args) { \t\tSystem.out.println(MyMath2.add(200L,100L)); // í´ë˜ìŠ¤ë©”ì„œë“œ í˜¸ì¶œ  \t\tMyMath2 mm = new MyMath2(); // ì¸ìŠ¤í„´ìŠ¤ ìƒì„± \t\tmm.a = 200L; \t\tmm.b = 100L; \t\tSystem.out.println(mm.add()); // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ í˜¸ì¶œ, mm: ì°¸ì¡°ë³€ìˆ˜ \t} }       í´ë˜ìŠ¤ ë©”ì„œë“œë„ í´ë˜ìŠ¤ ë³€ìˆ˜ì²˜ëŸ¼, ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  â€˜í´ë˜ìŠ¤ì´ë¦„.ë©”ì„œë“œì´ë¦„â€™ì™€ ê°™ì€ ì‹ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë‹¤.   ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” ê°ì²´ ìƒì„±í•´ì•¼ë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.      í´ë˜ìŠ¤ë©”ì„œë“œ: ê°ì²´ ìƒì„± ì—†ì´ í˜¸ì¶œ ê°€ëŠ¥!   ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ: ê°ì²´ ë§Œë“¤ê³  ì°¸ì¡°ë³€ìˆ˜ê°’ ì…‹íŒ…í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ í˜¸ì¶œ       staticë©”ì„œë“œëŠ” ì–¸ì œì“°ë‚˜ìš”?   â†’ ì¸ìŠ¤í„´ìŠ¤ì™€ ê´€ê³„ì—†ëŠ” ì‘ì—…ì„ í•  ë•Œ í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ ì •ì˜í•œë‹¤.   â†’ ì¦‰, ivë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ë•Œ       ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš©ì—¬ë¶€ì— ë”°ë¼ ì‚¬ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ë©”ì„œë“œ, ì‚¬ìš©ì•ˆí•˜ë©´ ìŠ¤íƒœí‹±(í´ë˜ìŠ¤)ë©”ì„œë“œ               í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ, ë©¤ë²„ë³€ìˆ˜ ì¤‘ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì— staticì„ ë¶™ì¸ë‹¤.       â†’ ì†ì„±(ë©¤ë²„ ë³€ìˆ˜) ì¤‘ì„œ ê³µí†µ ì†ì„±ì— static ì„ ë¶™ì¸ë‹¤.(ì¹´ë“œ ì˜ˆì œ ì°¸ê³ )       í´ë˜ìŠ¤ ë³€ìˆ˜(staticë³€ìˆ˜)ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   í´ë˜ìŠ¤ ë©”ì„œë“œ(staticë©”ì„œë“œ)ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.        ë©”ì„œë“œ ë‚´ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, staticì„ ë¶™ì´ëŠ” ê²ƒì„ ê³ ë ¤í•œë‹¤.       â†’ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„(iv, im)ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì— staticì„ ë¶™ì¸ë‹¤       1 2 3 4 5 6  class MyMath2 {  \tlong a, b;     \t  \tlong add() { return a + b; }                      // a, bëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜  \tstatic long add(long a, long b) { return a + b; } // a, bëŠ” ì§€ì—­ ë³€ìˆ˜   }               ê°ì²´ëŠ” ivì˜ ë¬¶ìŒ! (ì´í•´í•˜ê³  ë§ê³  í•  í•„ìš” ì—†ë‹¤)   ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì€ ivìƒì„±ì´ë‹¤   ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” ivë¡œ ì‘ì—…í•œë‹¤       ë©”ì„œë“œ ê°„ì˜ í˜¸ì¶œê³¼ ì°¸ì¡°   static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 class TestClass2 { \tint iv; // ê°ì²´ ìƒì„± í›„ ì‚¬ìš©ê°€ëŠ¥ \tstatic int cv; // ì–¸ì œë‚˜ ì‚¬ìš©ê°€ëŠ¥  \tvoid instanceMethod() { // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ(ê°ì²´ ìƒì„± í›„ í˜¸ì¶œ ê°€ëŠ¥) \t\tSystem.out.println(iv); // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ \t\tSystem.out.println(cv); // í´ë˜ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ \t}  \tstatic void staticMethod() { // static ë©”ì„œë“œ(ê°ì²´ ìƒì„± ì—†ì´ í˜¸ì¶œ ê°€ëŠ¥) \t\tSystem.out.println(iv); // ì—ëŸ¬!!! ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤(ê°ì²´ ìƒì„± í›„ì— í˜¸ì¶œ ê°€ëŠ¥) \t\tSystem.out.println(cv); // í´ë˜ìŠ¤ ë³€ìˆ˜ëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ \t} }       static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 class TestClass { \tvoid instanceMethod() {} // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ \tstatic void staticMethod() {} // static ë©”ì„œë“œ  \tvoid instanceMethod2() { // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ \t\tinstanceMethod(); // ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤ \t\tstaticMethod(); // static ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤ \t}  \tstatic void staticMethod2() { // static ë©”ì„œë“œ \t\tinstanceMethod(); // ì—ëŸ¬!!! ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤(ê°ì²´ ìƒì„± í›„ì— ì‚¬ìš© ê°€ëŠ¥) \t\tstaticMethod(); // static ë©”ì„œë“œëŠ” í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ \t} }   ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ ìƒì„± ì—†ì´ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤   static ë©”ì„œë“œê°€ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤!       Q. static ë©”ì„œë“œëŠ” static ë©”ì„œë“œ í˜¸ì¶œê°€ëŠ¥? ë„¤   Q. static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš©ê°€ëŠ¥? ì•„ë‹ˆìš”   Q. static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ í˜¸ì¶œê°€ëŠ¥? ì•„ë‹ˆìš”   Q. ì™œ? static ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„(iv, im)ë¥¼ ì“¸ ìˆ˜ ì—†ë‚˜?   â†’ static ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ê°ì²´(ivë¬¶ìŒ)ê°€ ì—†ì„ ìˆ˜ë„ ìˆì–´ì„œ  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP3/",
        "teaser": ""
      },{
        "title": "Git ìì£¼ì“°ëŠ” ëª…ë ¹ì–´",
        "excerpt":"ì„¤ì • ì •ë³´ (Config)   ì‚¬ìš©ì ì •ë³´ ì„¤ì •   1 2 3 4 5 6 7 # repository ë§ˆë‹¤ ì‚¬ìš©ì ì •ë³´ ì„¤ì • git config --local user.email \"yessm621@gmail.com\" git config --local user.name \"yessm621\"  # ì „ì—­(Global)ìœ¼ë¡œ ì„¤ì • git config --global user.email \"yessm621@gmail.com\" git config --global user.name \"yessm621\"   Remote ì €ì¥ì†Œ   ì €ì¥ì†Œ ì—°ê²°/ì‚­ì œ   1 2 3 4 5 6 7 8 # ì €ì¥ì†Œ ì—°ê²° ìƒíƒœ í™•ì¸ git remote -v  # ì €ì¥ì†Œ ì—°ê²° git remote add origin https://github.com/yessm621/yessm621.github.io  # ì €ì¥ì†Œ ì‚­ì œ git remote remove origin   Clone   ì €ì¥ì†Œ clone   1 git clone ê¹ƒí—™ì£¼ì†Œ í”„ë¡œì íŠ¸í´ë”ëª…(ìƒëµê°€ëŠ¥)   ì €ì¥ì†Œì˜ íŠ¹ì • ë¸Œëœì¹˜ clone   1 git clone ê¹ƒí—™ì£¼ì†Œ --branch ë¸Œëœì¹˜ëª… --single-branch í”„ë¡œì íŠ¸í´ë”ëª…   ë¸Œëœì¹˜   ë¸Œëœì¹˜ ì¡°íšŒ   1 2 # ìƒì„±ëœ ëª¨ë“  ë¸Œëœì¹˜ ì¡°íšŒ git branch -a   ë¸Œëœì¹˜ ìƒì„±ê³¼ ì‚­ì œ   1 2 3 4 5 6 7 8 # ë¡œì»¬ ë¸Œëœì¹˜ ìƒì„±í•˜ê³  ë°”ë¡œ checkout git checkout -b issue1  # ë¸Œëœì¹˜ ì‚­ì œ git branch -d issue1  # ë¸Œëœì¹˜ ì‚­ì œ(ê°•ì œ) git branch -D issue1   ë¸Œëœì¹˜ëª… ë³€ê²½   1 git branch -m old_branch new_branch   ì›ê²© ë¸Œëœì¹˜ ìƒì„±ê³¼ ì‚­ì œ   1 2 3 4 5 6 # ë¡œì»¬ì— ë¸Œëœì¹˜ ìƒì„±ëœ ìƒíƒœì—ì„œ ì§„í–‰ # ì›ê²© ë¸Œëœì¹˜ ìƒì„± git push origin issue1  # ì›ê²© ë¸Œëœì¹˜ ì‚­ì œ git push origin --delete issue1   ì›ê²© ë¸Œëœì¹˜ ë™ê¸°í™”   1 2 # ëª¨ë“  ë¸Œëœì¹˜ ë™ê¸°í™” git remote prune origin   Commit   commit ëª… ë³€ê²½   ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥í•˜ê³  ìˆ˜ì •í•œ ë‹¤ìŒ :wq ë¡œ ì €ì¥   1 git commit --amend   commit ë‚ ì§œ ë³€ê²½   1 2 3 4 5 # ë§ˆì§€ë§‰ Commit ë‚ ì§œë¥¼ í˜„ì¬ ë‚ ì§œë¡œ ì„¤ì • git commit --amend --no-edit --date \"$(date)\"  # ë§ˆì§€ë§‰ Commit ë‚ ì§œë¥¼ ì„ì˜ì˜ ë‚ ì§œë¡œ ì„¤ì • git commit --amend --no-edit --date \"Mon 20 Aug 2018 20:19:19 KST\"   commit author ë³€ê²½   1 git commit --amend --author=\"yessm621 &lt;yessm621@gmail.com&gt;\"   commit ë‚´ìš© í•©ì¹˜ê¸°   1 2 # HEADì—ì„œ 2ê°œê¹Œì§€ ì»¤ë°‹ì„ í•©ì¹¨ git rebase -i HEAD~2   commit ì•ˆí•œ ë³€ê²½ì‚¬í•­ ì´ˆê¸°í™” í•˜ê¸°   1 2 3 4 5 6 # ê°œë³„ ì´ˆê¸°í™” git restore íŒŒì¼ëª…  # ëª¨ë“  íŒŒì¼ ì´ˆê¸°í™” git restore . git checkout .   commit ì·¨ì†Œ   1 git reset HEAD^   unstaging   add ì·¨ì†Œ (stage â†’ unstage)   1 2 3 4 5 git reset HEAD íŒŒì¼ëª…  git restore --staged {file_name}  git checkout -- íŒŒì¼ëª…   ë‹¤ë¥¸ ë¸Œëœì¹˜ë¥¼ masterë¡œ ìµœì‹ í™”   1 2 git checkout dev git rebase master   íŠ¹ì • commit ë§Œ masterì— ì¶”ê°€   1 2 git checkout master git cherry-pick commitëª…   íŠ¹ì • branchë¥¼ masterì— merge   1 2 git checkout master git merge branchëª…   history   ëª…ë ¹ì–´ íˆìŠ¤í† ë¦¬ ì¡°íšŒ   1 git reflog  ","categories": ["Git"],
        "tags": ["Git"],
        "url": "/git/Git-Command/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ì˜¤ë²„ë¡œë”©, ìƒì„±ì, ìƒì„±ì this(), ì°¸ì¡°ë³€ìˆ˜ this, ë³€ìˆ˜ì˜ ì´ˆê¸°í™”)",
        "excerpt":"4. ë©”ì„œë“œ ì˜¤ë²„ë¡œë”©   4.1 ë©”ì„œë“œ ì˜¤ë²„ë¡œë”©ì´ë€?   í•œ í´ë˜ìŠ¤ ì•ˆì— ê°™ì€ ì´ë¦„ì˜ ë©”ì„œë“œ ì—¬ëŸ¬ ê°œ ì •ì˜í•˜ëŠ” ê²ƒ       ëŒ€í‘œì ì¸ ê²ƒ: println()   íŒŒë¼ë¯¸í„°(ë§¤ê°œë³€ìˆ˜)ë§Œ ë‹¤ë¥´ë‹¤   1 2 3 4 5 6 7 8 9 10 void println() void println(boolean x) void println(char x) void println(char[] x) void println(double x) void println(float x) void println(int x) void println(long x) void println(Object x) void println(String x)       4.2 ì˜¤ë²„ë¡œë”©ì˜ ì¡°ê±´      ë©”ì„œë“œ ì´ë¦„ì´ ê°™ì•„ì•¼ í•œë‹¤   ë§¤ê°œë³€ìˆ˜ì˜ ê°œìˆ˜ ë˜ëŠ” íƒ€ì…ì´ ë‹¬ë¼ì•¼ í•œë‹¤   ë°˜í™˜ íƒ€ì…ì€ ì˜í–¥ì—†ë‹¤(ë§¤ê°œë³€ìˆ˜ëŠ” ê°™ê³  ë°˜í™˜íƒ€ì…ì´ ë‹¤ë¥¸ ê²½ìš°ëŠ” ì˜¤ë²„ë¡œë”©ì´ ì„±ë¦½ë˜ì§€ ì•ŠëŠ”ë‹¤)   ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ì§€ ëª»í•˜ëŠ” ë©”ì„œë“œëŠ” ì¤‘ë³µì •ì˜ ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ì–´ ì»´íŒŒì¼ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•¨       4.3 ì˜¤ë²„ë¡œë”©ì˜ ì˜ˆ   ì˜ˆì œ1. ì˜¤ë²„ë¡œë”© ì•„ë‹˜, ë©”ì„œë“œ ì¤‘ë³µ ì •ì˜   â†’ ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ë§Œ ë‹¤ë¥¼ ë¿ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ ê°™ê¸° ë•Œë¬¸ì— ì˜¤ë²„ë¡œë”© ì„±ë¦½í•˜ì§€ ì•ŠìŒ   1 2 int add(int a, int b) { return a+b; } int add(int x, int y) { return x+y; }       ì˜ˆì œ2. ì˜¤ë²„ë¡œë”© ì•„ë‹˜, ì¤‘ë³µ ì •ì˜   â†’ ë¦¬í„´íƒ€ì…ë§Œ ë‹¤ë¥¸ ê²½ìš°. ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ê³¼ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ê¸° ë•Œë¬¸ì— add(3, 3)ê³¼ ê°™ì´ í˜¸ì¶œí•˜ì˜€ì„ ë•Œ ì–´ë˜ ë©”ì„œë“œê°€ í˜¸ì¶œëœ ê²ƒì¸ì§€ ê²°ì •í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì˜¤ë²„ë¡œë”©ìœ¼ë¡œ ê°„ì£¼ë˜ì§€ ì•ŠëŠ”ë‹¤.   1 2 int add(int a, int b) { return a+b; } long add(int a, int b) { return (long)(a+b); }       ì˜ˆì œ3. ì˜¤ë²„ë¡œë”© ì„±ë¦½, ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì´ ë‹¤ë¦„   1 2 3 4 5 long add(int a, long b) { return a+b; } long add(long a, int b) { return a+b; }  add(3,3L); // ì‹¤í–‰ add(3,3); // ì˜¤ë¥˜ ë°œìƒ (ì–´ë–¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ ëª¨í˜¸í•˜ë‹¤)       ì˜ˆì œ4. ì˜¤ë²„ë¡œë”©ì˜ ì˜¬ë°”ë¥¸ ì˜ˆ - ë§¤ê°œë³€ìˆ˜ëŠ” ë‹¤ë¥´ì§€ë§Œ ê°™ì€ ì˜ë¯¸ì˜ ê¸°ëŠ¥ìˆ˜í–‰   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // ë©”ì„œë“œ ì´ë¦„ì´ ê°™ë‹¤ = í•˜ëŠ” ì‘ì—…ì´ ê°™ë‹¤  class MyMath3 { \tint add(int a, int b) { \t\tSystem.out.print(\"int add(int a, int b) - \"); \t\treturn a + b; \t}  \tlong add(long a, long b) { \t\tSystem.out.print(\"long add(long a, long b) - \"); \t\treturn a + b; \t}  \tint add(int[] a) { \t\tSystem.out.print(\"int add(int[] a) - \"); \t\tint result = 0; \t\tfor(int i=0; i&lt; a.length; i++) { \t\t\tresult += a[i]; \t\t} \t\treturn result; \t} }       4.4 ì˜¤ë²„ë¡œë”©ì˜ ì¥ì       ê°€ë…ì„±ì´ ì¦ê°€í•œë‹¤.   í•˜ë‚˜ì˜ ì´ë¦„ë§Œ ê¸°ì–µí•˜ë©´ ë˜ë¯€ë¡œ ì˜¤ë¥˜ì˜ ê°€ëŠ¥ì„±ì„ ë§ì´ ì¤„ì¼ ìˆ˜ ìˆë‹¤.   ë©”ì„œë“œì˜ ì´ë¦„ë§Œ ë³´ê³  ì´ë¦„ì´ ê°™ìœ¼ë‹ˆ, ê°™ì€ ê¸°ëŠ¥ì´ë¼ê³  ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤.   ë©”ì„œë“œ ì´ë¦„ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.       5. ìƒì„±ì   5.1 ìƒì„±ìë€?      ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ ë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë©”ì„œë“œ   ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ìˆ˜í–‰í•  ì‘ì—…(iv ì´ˆê¸°í™”)ì— ì‚¬ìš©       ì¸ìŠ¤í„´ìŠ¤ = ê°ì²´(iv ë¬¶ìŒ)   ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” = iv ì´ˆê¸°í™”       1 2 3 4 5 6 7 8 Time t = new Time(); // iv ì´ˆê¸°í™” ì‹œì‘ t.hour = 12; t.minute = 34; t.second = 56; // iv ì´ˆê¸°í™” ë  Time t = new Time(12, 34, 56); // ìƒì„±ì       ìƒì„±ì íŠ¹ì§•      ìƒì„±ìì˜ ì´ë¦„ì´ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ê°™ì•„ì•¼ í•œë‹¤.   ë¦¬í„´ê°’ì´ ì—†ë‹¤ (void ì•ˆë¶™ì„)   ëª¨ë“  í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ ìƒì„±ìë¥¼ ê°€ì ¸ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 class Card { \t// ìƒì„±ì1, ì˜¤ë²„ë¡œë”© \tCard() { // ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ì \t\t// ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ì‘ì—… \t}  \t// ìƒì„±ì2, ì˜¤ë²„ë¡œë”© \tCard(String kind, int number) { // ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì \t\t// ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ì‘ì—…\t \t} }       ì—°ì‚°ì new ê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ì§€ ìƒì„±ìê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.   ìƒì„±ìëŠ” ë‹¨ìˆœíˆ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ì˜ ì´ˆê¸°í™”ì— ì‚¬ìš©ë˜ëŠ” ì¡°ê¸ˆ íŠ¹ë³„í•œ ë©”ì„œë“œì¼ ë¿ì´ë‹¤       1 Card c = new Card(); // ìƒì„±ì í˜¸ì¶œ      ì—°ì‚°ì new ì— ì˜í•´ì„œ ë©”ëª¨ë¦¬ì— Card í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë¨   ìƒì„±ì Card() ê°€ í˜¸ì¶œë˜ì–´ ìˆ˜í–‰ë¨   ì—°ì‚°ì newì˜ ê²°ê³¼ë¡œ, ìƒì„±ëœ Card ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œê°€ ë°˜í™˜ë˜ì–´ ì°¸ì¡°ë³€ìˆ˜ c ì— ì €ì¥ë¨       5.2 ê¸°ë³¸ ìƒì„±ì      ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ì   ìƒì„±ìê°€ í•˜ë‚˜ë„ ì—†ì„ ë•Œë§Œ, ì»´íŒŒì¼ëŸ¬ê°€ ê¸°ë³¸ ìƒì„±ì ìë™ ì¶”ê°€   1 2 í´ë˜ìŠ¤ì´ë¦„() {} // ê¸°ë³¸ ìƒì„±ì Point() {} // Pointí´ë˜ìŠ¤ì˜ ê¸°ë³¸ ìƒì„±ì   ëª¨ë“  í´ë˜ìŠ¤ì—ëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ ì´ìƒì˜ ìƒì„±ìê°€ ì •ì˜ë˜ì–´ì•¼ í•œë‹¤. ë§Œì•½, ìƒì„±ìê°€ í•˜ë‚˜ë„ ì—†ë‹¤ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ê¸°ë³¸ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤. ê¸°ë³¸ ìƒì„±ìëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì—†ë‹¤.       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class Data_1 { \tint value; }  class Data_2 { \tint value; \t \tData_2(int x) { // ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì \t\tvalue = x; \t} }  class Ex6_11 { \tpublic static void main(String args[]) { \t\tData_1 d1 = new Data_1(); \t\t\t\t\t\t// Data_2(); ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ \t\tData_2 d2 = new Data_2(); // compile error ë°œìƒ  \t\t\t\t\t\t\t\t  // -&gt; ê¸°ë³¸ìƒì„±ì ì¶”ê°€í•´ì£¼ë©´ ì˜¤ë¥˜ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. \t} }   í´ë˜ìŠ¤ Data_1 ì—ë„ ìƒì„±ìê°€ ì—†ëŠ”ë° ì™œ í´ë˜ìŠ¤ Data_2 ì—ì„œë§Œ ì—ëŸ¬ê°€ ë‚ ê¹Œ?   â†’ í´ë˜ìŠ¤ Data_1 ì—ëŠ” ìƒì„±ìê°€ í•˜ë‚˜ë„ ì—†ì–´ì„œ ì»´íŒŒì¼ëŸ¬ê°€ ê¸°ë³¸ ìƒì„±ìë¥¼ ìë™ ì¶”ê°€í•´ì¤€ë‹¤   ê·¸ëŸ¬ë‚˜, í´ë˜ìŠ¤ Data_2 ì²˜ëŸ¼ ìƒì„±ìê°€ í•˜ë‚˜ë¼ë„ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ ìƒì„±ìê°€ ì—†ì–´ì„œ ì˜¤ë¥˜ê°€ ë‚œë‹¤.       í´ë˜ìŠ¤ ë§Œë“¤ë•Œ ê¸°ë³¸ ìƒì„±ìë¥¼ í•­ìƒ ì¶”ê°€í•˜ëŠ” ìŠµê´€       5.3 ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì   ìƒì„±ìë„ ë©”ì„œë“œì²˜ëŸ¼ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ í˜¸ì¶œ ì‹œ ê°’ì„ ë„˜ê²¨ë°›ì•„ì„œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ˆê¸°í™” ì‘ì—…ì— ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ê°ê¸° ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œ ì´ˆê¸°í™”ëŠ” ë§¤ìš° ìœ ìš©í•¨   1 2 3 4 5 6 7 8 9 10 11 12 13 class Car { \t// ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ \tString color; // ìƒ‰ìƒ \tString gearType; // ë³€ì†ê¸° ì¢…ë¥˜ - auto(ìë™), manual(ìˆ˜ë™) \tint door; // ë¬¸ì˜ ê°œìˆ˜  \tCar() {} // ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì \tCar(String c, String g, int d) { // ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì \t\tcolor = c; \t\tgearType = g; \t\tdoor = d; \t} }   Carì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ìƒì„±ì Car()ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ì„ ë”°ë¡œ ì´ˆê¸°í™”í•´ì£¼ì–´ì•¼ í•¨. í•˜ì§€ë§Œ, ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ì Car(ë§¤ê°œë³€ìˆ˜ë“¤..)ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë™ì‹œì— ì´ˆê¸°í™”ë„ ê°€ëŠ¥       1 2 3 4 5 6 Car c = new Car(); // iv ì´ˆê¸°í™” ì‹œì‘ c.color = \"white\"; c.gearType = \"auto\"; c.door = 4; // iv ì´ˆê¸°í™” ë       ìƒì„±ìë¥¼ ì“°ë©´ ìœ„ì˜ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ í•œì¤„ë¡œ ê°„ë‹¨íˆ ì“¸ ìˆ˜ ìˆë‹¤.   1 Car c = new Car(\"white\", \"auto\", 4);   ì½”ë“œë¥¼ ë³´ë‹¤ ì§ê´€ì ì´ê³  ê°„ê²°í•˜ê²Œ ë§Œë“ ë‹¤.          ì°¸ì¡°ë³€ìˆ˜ c ê°€ ë§Œë“¤ì–´ì§   new ì—°ì‚°ìê°€ ê°ì²´ë¥¼ ë§Œë“¦ (color, gearType, door)   ìƒì„±ìê°€ ê°ì²´ ì´ˆê¸°í™”í•˜ê³  ìƒì„±ì í˜¸ì¶œ   ëŒ€ì…(ì°¸ì¡°ë³€ìˆ˜ cê°€ ê°ì²´ì˜ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ê²Œ ë¨)       5.4 ìƒì„±ìì—ì„œ ë‹¤ë¥¸ ìƒì„±ì í˜¸ì¶œí•˜ê¸° - this(), this   ë‹¤ìŒ ë‘ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ìƒì„±ì ê°„ì—ë„ ì„œë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤      ìƒì„±ìì˜ ì´ë¦„ìœ¼ë¡œ í´ë˜ìŠ¤ì´ë¦„ ëŒ€ì‹  thisë¥¼ ì‚¬ìš©í•œë‹¤.   í•œ ìƒì„±ìì—ì„œ ë‹¤ë¥¸ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ë°˜ë“œì‹œ ì²« ì¤„ì—ì„œë§Œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.       5.4.1 ìƒì„±ì this()      ìƒì„±ìì—ì„œ ë‹¤ë¥¸ ìƒì„±ì í˜¸ì¶œ í•  ë•Œ ì‚¬ìš©   ë‹¤ë¥¸ ìƒì„±ì í˜¸ì¶œì‹œ ì²« ì¤„ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Car2 { \tString color; \tString gearType; \tint door;  \tCar2() { \t\tthis(\"white\", \"auto\", 4); // ìƒì„±ì Car2(String color, String gearType, int door) {} í˜¸ì¶œ \t}  \tCar2(String color) { \t\tthis(color, \"auto\", 4); // ìƒì„±ì Car2(String color, String gearType, int door) {} í˜¸ì¶œ \t}  \tCar2(String color, String gearType, int door) { \t\tthis.color = color; \t\tthis.gearType = gearType; \t\tthis.door = door; \t} }       ìƒì„±ìê°€ í•˜ëŠ”ì¼: iv ì´ˆê¸°í™”       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class Car { \tString color; \tString gearType; \tint door;  \tCar() { \t\tcolor = \"white\"; \t\tgearType = \"auto\"; \t\tdoor = 4; \t}  \tCar(String color) { \t\tthis(color, \"auto\", 4); \t}  \tCar(String color, String gearType, int door) { \t\tthis.color = color; \t\tthis.gearType = gearType; \t\tthis.door = door; \t} }  class CarTest { \tpublic static void main(String[] args) { \t\tCar c1 = new Car(); \t\tCar c2 = new Car(\"blue\");  \t\tSystem.out.println(\"c1ì˜ color=\"+c1.color+\", gearType=\"+c1.gearType+\", door=\"+c1.door); \t\tSystem.out.println(\"c2ì˜ color=\"+c2.color+\", gearType=\"+c2.gearType+\", door=\"+c2.door); \t} }   1 2 c1ì˜ color=white, gearType=auto, door=4 c2ì˜ color=blue, gearType=auto, door=4       ë‘ ì½”ë“œëŠ” ê°™ì€ ì¼ì„ í•˜ì§€ë§Œ ì•„ë˜ ì½”ë“œëŠ” ìƒì„±ìë¥¼ í™œìš©í•˜ì—¬ ë” ê°„ëµíˆ í•¨. ìœ ì§€ë³´ìˆ˜ ì‰½ë‹¤.   1 2 3 4 5 6 7 8 9 Car() { \tcolor = \"white\"; \tgearType = \"auto\"; \tdoor = 4; }  Car() { \tthis(\"white\", \"auto\", 4); }       Bad Code   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Car { \tString color; \tString gearType; \tint door;  \t// ìœ„ì˜ ìƒì„±ìì™€ ì•„ë˜ ìƒì„±ì ê±°ì˜ ë¹„ìŠ· -&gt; ì½”ë“œ ì¤‘ë³µ \tCar() { \t\tcolor = \"white\"; \t\tgearType = \"auto\"; \t\tdoor = 4; \t}  \tCar(String c, String g, int d) { \t\tcolor = c; \t\tgearType = g; \t\tdoor = d; \t} }       Good Code   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Car { \tString color; \tString gearType; \tint door;  \tCar() { \t\tthis(\"white\", \"auto\", 4); \t}  \tCar(String c, String g, int d)  \t\tcolor = c; \t\tgearType = g; \t\tdoor = d; \t} }       5.4.2 ì°¸ì¡°ë³€ìˆ˜ this      ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡°ë³€ìˆ˜   ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ(ìƒì„±ì í¬í•¨)ì—ì„œ ì‚¬ìš©ê°€ëŠ¥   ì§€ì—­ë³€ìˆ˜(lv)ì™€ ì¸ìŠ¤í„´ìŠ¤ë³€ìˆ˜(iv)ë¥¼ êµ¬ë³„í•  ë•Œ ì‚¬ìš©       ì°¸ê³ )   this() â†’ ìƒì„±ì   ì°¸ì¡°ë³€ìˆ˜ this ì™€ ì „í˜€ ë‹¤ë¦„       1 2 3 4 5 6 7 8 9 10 11 12 13 Car(String c, String g, int d) { \t(this.)color = c; // ì§€ì—­ë³€ìˆ˜ cì˜ ê°’ì„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ colorì— ì €ì¥ \t(this.)gearType = g; \t(this.)door = d; \t//(this.) ìƒëµê°€ëŠ¥(ê°™ì€ í´ë˜ìŠ¤ë‚´ì—ì„œ) }  Car(String color, String gearType, int door) { \tthis.color = color; // ì§€ì—­ë³€ìˆ˜ colorì™€ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ colorì˜ ë³€ìˆ˜ëª…ì´ ë˜‘ê°™ì•„ êµ¬ë³„ì´ ì•ˆë¨ \tthis.gearType = gearType; \tthis.door = door; \t//(this.) ì›ë˜ëŠ” ìƒëµê°€ëŠ¥í•œë° ë³€ìˆ˜ëª…ì´ ê°™ì•„ êµ¬ë³„í•˜ê¸° ìœ„í•´ ë¶™ì„ }   this.color ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì´ê³  color ëŠ” ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ì˜ëœ ì§€ì—­ë³€ìˆ˜       this ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ê°€ë¦¬í‚´. ì°¸ì¡°ë³€ìˆ˜ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ thisë¡œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.       í´ë˜ìŠ¤ ë©”ì„œë“œ(staticë©”ì„œë“œ)ëŠ” ê°ì²´ ìƒì„±ì´ ì—†ê¸° ë•Œë¬¸ì—  iv ì‚¬ìš© ë¶ˆê°€. ë”°ë¼ì„œ, this ì‚¬ìš© ë¶ˆê°€ (why? thisëŠ” ê°ì²´ ìì‹ ì´ê¸° ë•Œë¬¸)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class MyMath2 { \tlong a, b; // this.a, this.b  \tMyMath2(int a, int b) { // ìƒì„±ì \t\tthis.a = a; \t\tthis.b = b; // this ìƒëµ ë¶ˆê°€ëŠ¥ (lvì™€ iv ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´) \t}  \tlong add() { // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ \t\treturn a + b; // return this.a + this.b; (ìƒëµê°€ëŠ¥) \t} \tstatic long add(long a, long b) { // í´ë˜ìŠ¤ ë©”ì„œë“œ(staticë©”ì„œë“œ) \t\treturn a + b; \t} }   long a, b; â†’ iv   this.a, this.b â†’ iv ì˜ ì§„ì§œ ì´ë¦„   this ì„ ì–¸ ì•ˆí•´ë„ ì„ ì–¸ ê°€ëŠ¥í•˜ë‹¤(ìƒëµì´ ê°€ëŠ¥)       ì°¸ê³ ) this ì™€ this() ëŠ” ë¹„ìŠ·í•˜ê²Œ ìƒê²¼ì„ ë¿ ì™„ì „íˆ ë‹¤ë¥¸ ê²ƒ. thisëŠ” ì°¸ì¡°ë³€ìˆ˜, this()ëŠ” ìƒì„±ìì´ë‹¤   1 2 3 this   ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡°ë³€ìˆ˜, ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œê°€ ì €ì¥ë˜ì–´ ìˆë‹¤.        ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë©”ì„œë“œì— ì§€ì—­ë³€ìˆ˜ë¡œ ìˆ¨ê²¨ì§„ ì±„ë¡œ ì¡´ì¬í•œë‹¤. this(), this(ë§¤ê°œë³€ìˆ˜) ìƒì„±ì, ê°™ì€ í´ë˜ìŠ¤ì˜ ë‹¤ë¥¸ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.       5.5 ìƒì„±ìë¥¼ ì´ìš©í•œ ì¸ìŠ¤í„´ìŠ¤ ë³µì‚¬   1 2 3 4 5 Car(Car c) { \tcolor = c.color; \tgearType = c.gearType; \tdoor = c.door; }   Car í´ë˜ìŠ¤ì˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì„ ì–¸í•œ ìƒì„±ì.       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 class Car { \tString color; \tString gearType; \tint door;  \tCar() { \t\tthis(\"white\", \"auto\", 4); \t}  \tCar(Car c) { // ì¸ìŠ¤í„´ìŠ¤ì˜ ë³µì‚¬ë¥¼ ìœ„í•œ ìƒì„±ì \t\tcolor = c.color; \t\tgearType = c.gearType; \t\tdoor = c.door; \t}  \tCar(String color, String gearType, int door) { \t\tthis.color = color; \t\tthis.gearType = gearType; \t\tthis.door = door; \t} }  class CarTest { \tpublic static void main(String[] args) { \t\tCar c1 = new Car(); \t\tCar c2 = new Car(c1); // c1ì˜ ë³µì‚¬ë³¸ c2ë¥¼ ìƒì„±  \t\tSystem.out.println(\"c1ì˜ color=\"+c1.color+\", gearType=\"+c1.gearType+\", door=\"+c1.door); \t\tSystem.out.println(\"c2ì˜ color=\"+c2.color+\", gearType=\"+c2.gearType+\", door=\"+c2.door); \t\tc1.door = 100; \t\tSystem.out.println(\"c1ì˜ color=\"+c1.color+\", gearType=\"+c1.gearType+\", door=\"+c1.door); \t\tSystem.out.println(\"c2ì˜ color=\"+c2.color+\", gearType=\"+c2.gearType+\", door=\"+c2.door); \t} }   1 2 3 4 5 c1ì˜ color=white, gearType=auto, door=4 c2ì˜ color=blue, gearType=auto, door=4  c1ì˜ color=white, gearType=auto, door=100 c2ì˜ color=blue, gearType=auto, door=4   ì¸ìŠ¤í„´ìŠ¤ c2 ëŠ” c1ì„ ë³µì‚¬í•˜ì—¬ ìƒì„±ëœ ê²ƒì´ë¯€ë¡œ ì„œë¡œ ê°™ì€ ìƒíƒœë¥¼ ê°–ì§€ë§Œ, ì„œë¡œ ë³„ë„ì˜ ë©”ëª¨ë¦¬ê³µê°„ì— ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì´ë¯€ë¡œ c1ì´ ë³€ê²½ë˜ì–´ë„ c2ëŠ” ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤       6. ë³€ìˆ˜ì˜ ì´ˆê¸°í™”   6.1 ë³€ìˆ˜ì˜ ì´ˆê¸°í™”      ì§€ì—­ë³€ìˆ˜(lv)ëŠ” ìˆ˜ë™ ì´ˆê¸°í™” í•´ì•¼í•¨ (ì§ì ‘ ì´ˆê¸°í™” í•´ì•¼í•¨)   ë©¤ë²„ë³€ìˆ˜(iv, cv)ëŠ” ìë™ ì´ˆê¸°í™” ëœë‹¤   1 2 3 4 5 6 7 8 9 class InitTest { \tint x;       // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ \tint y = x;   // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜  \tvoid method1() { \t\tint i;     //ì§€ì—­ë³€ìˆ˜ \t\tint j = i; // ì—ëŸ¬. ì§€ì—­ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™” í•˜ì§€ ì•Šê³  ì‚¬ìš© \t} }              ë©¤ë²„ë³€ìˆ˜(í´ë˜ìŠ¤ë³€ìˆ˜, ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)ì™€ ë°°ì—´ì˜ ì´ˆê¸°í™”ëŠ” ì„ íƒì ì´ì§€ë§Œ, ì§€ì—­ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ ì‚¬ìš©í•˜ê¸° ì „ì— ì´ˆê¸°í™” í•´ì£¼ì–´ì•¼ í•œë‹¤.       ë©¤ë²„ë³€ìˆ˜(iv, cv)ì˜ ì´ˆê¸°í™”           ëª…ì‹œì  ì´ˆê¸°í™”: ëŒ€ì…ì—°ì‚°ì(=), ê°„ë‹¨ì´ˆê¸°í™”       1 2 3 4  class Car {  \tint door = 4;             // ê¸°ë³¸í˜• ë³€ìˆ˜ì˜ ì´ˆê¸°í™”  \tEngine e = new Engine();  // ì°¸ì¡°í˜• ë³€ìˆ˜ì˜ ì´ˆê¸°í™”  }           ì´ˆê¸°í™” ë¸”ëŸ­: ë³µì¡ì´ˆê¸°í™”            ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­: {}       í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­: static {}                ìƒì„±ì: iv ì´ˆê¸°í™”, ë³µì¡í•œ ì´ˆê¸°í™”ì— ì‚¬ìš©       1 2 3 4 5  Car(String color, String gearType, int door) { // ë§¤ê°œë³€ìˆ˜ ìˆëŠ” ìƒì„±ì  \tthis.color = color;  \tthis.gearType = gearType;  \tthis.door = door;  }               cv, iv ì´ˆê¸°í™”ì—” 3ê°€ì§€ê°€ ìˆë‹¤.      ìë™ì´ˆê¸°í™”: 0ìœ¼ë¡œ ì´ˆê¸°í™”   ê°„ë‹¨ì´ˆê¸°í™”: =(ëŒ€ì…ì—°ì‚°ì)   ë³µì¡ì´ˆê¸°í™”            {}: ê±°ì˜ ì•ˆì”€       static {}: cv ì´ˆê¸°í™”       ìƒì„±ì: iv ì´ˆê¸°í™”               6.2 ëª…ì‹œì  ì´ˆê¸°í™”   ë³€ìˆ˜ ì„ ì–¸ê³¼ ë™ì‹œì— ì´ˆê¸°í™”í•˜ëŠ” ê²ƒ   1 2 3 4 5 6 class Car { \tint door = 4; // ê¸°ë³¸í˜• ë³€ìˆ˜ì˜ ì´ˆê¸°í™” \tEngine e = new Engine(); // ì°¸ì¡°í˜• ë³€ìˆ˜ì˜ ì´ˆê¸°í™” \t \t// ... }       6.3 ì´ˆê¸°í™” ë¸”ëŸ­      í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­: í´ë˜ìŠ¤ ë³€ìˆ˜ì˜ ë³µì¡í•œ ì´ˆê¸°í™”ì— ì‚¬ìš©   ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­: ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ë³µì¡í•œ ì´ˆê¸°í™”ì— ì‚¬ìš©   1 2 3 4 5 class InitBlock { \tstatic { /* í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ */}  \t{ /* ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ */ } }       í´ë˜ìŠ¤ ë³€ìˆ˜ ì´ˆê¸°í™” ì‹œì : í´ë˜ìŠ¤ê°€ ì²˜ìŒ ë¡œë”© ë  ë•Œ ë‹¨ í•œë²ˆ   ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì´ˆê¸°í™” ì‹œì : ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ ë§ˆë‹¤ ì‹¤í–‰ (ìƒì„±ìë³´ë‹¤ iv ì´ˆê¸°í™”ê°€ ë¨¼ì € ì‹¤í–‰ë¨)   ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì´ˆê¸°í™”ëŠ” ì£¼ë¡œ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ì€ ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 class BlockTest { \t \tstatic { \t\tSystem.out.println(\"static { }\"); \t}  \t{ \t\tSystem.out.println(\"{ }\"); \t}  \tpublic BlockTest() { \t\tSystem.out.println(\"ìƒì„±ì\"); \t}  \tpublic static void main(String[] args) { \t\tSystem.out.println(\"BlockTest bt = new BlockTest(); \"); \t\tBlockTest bt = new BlockTest();  \t\tSystem.out.println(\"BlockTest bt2 = new BlockTest(); \"); \t\tBlockTest bt2 = new BlockTest(); \t} }   1 2 3 4 5 6 7 static { } BlockTest bt = new BlockTest(); { } ìƒì„±ì BlockTest bt2 = new BlockTest(); { } ìƒì„±ì       1 2 3 4 5 6 7 8 9 10 class StaticBolokTest { \t// cv \tstatic int[] arr = new int[10]; // ëª…ì‹œì  ì´ˆê¸°í™” \t \tstatic { // í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ - ë°°ì—´ arrì„ ë‚œìˆ˜ë¡œ ì±„ìš´ë‹¤ \t\tfor (int i = 0; i &lt; arr.length; i++) { \t\t\tarr[i] = (int)(Math.random()*10) + 1; \t\t} \t} }       6.4 ë©¤ë²„ë³€ìˆ˜ì˜ ì´ˆê¸°í™” ì‹œê¸°ì™€ ìˆœì„œ   1 2 3 4 5 í´ë˜ìŠ¤ ë³€ìˆ˜ì˜ ì´ˆê¸°í™” ì‹œì : í´ë˜ìŠ¤ê°€ ì²˜ìŒ ë¡œë”©ë  ë•Œ ë‹¨ í•œë²ˆ ì´ˆê¸°í™” ëœë‹¤ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì´ˆê¸°í™” ì‹œì : ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œë§ˆë‹¤ ê° ì¸ìŠ¤í„´ìŠ¤ë³„ë¡œ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§„ë‹¤.  í´ë˜ìŠ¤ ë³€ìˆ˜ì˜ ì´ˆê¸°í™” ìˆœì„œ: ê¸°ë³¸ê°’ -&gt; ëª…ì‹œì ì´ˆê¸°í™” -&gt; í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì´ˆê¸°í™” ìˆœì„œ: ê¸°ë³¸ê°’ -&gt; ëª…ì‹œì ì´ˆê¸°í™” -&gt; ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ -&gt; ìƒì„±ì      InitTest it = new InitTest(); ë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ ìœ„ì˜ í‘œì²˜ëŸ¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ëœë‹¤.   ë‹¤ì‹œí•œë²ˆ ê°ì²´ê°€ ìƒì„±ë˜ë©´ í´ë˜ìŠ¤ì´ˆê¸°í™”ëŠ” í•˜ì§€ ì•Šê³  ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”ë§Œ ì‹¤í–‰í•¨       ì´ˆê¸°í™” ìˆœì„œ   cv ì´ˆê¸°í™” â†’ iv ì´ˆê¸°í™”   ìë™(0) â†’ ê°„ë‹¨(=) â†’ ë³µì¡(static{}, ìƒì„±ì)  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP4/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ìƒì†, í´ë˜ìŠ¤ê°„ì˜ ê´€ê³„, í¬í•¨, ë‹¨ì¼ìƒì†, Objectí´ë˜ìŠ¤, ì˜¤ë²„ë¼ì´ë”©, super)",
        "excerpt":"1. ìƒì†   1.1 ìƒì†ì˜ ì •ì˜ì™€ ì¥ì            ìƒì†ì´ë€, ê¸°ì¡´ì˜ í´ë˜ìŠ¤ë¡œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒ       â†’ ì ì€ ì–‘ì˜ ì½”ë“œë¡œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê³  ì½”ë“œë¥¼ ê³µí†µì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ì¶”ê°€ ë° ë³€ê²½ì´ ë§¤ìš° ìš©ì´(ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±, ìœ ì§€ë³´ìˆ˜ ìš©ì´)       â†’ class Child extends Parent { }            ë‘ í´ë˜ìŠ¤ë¥¼ ë¶€ëª¨ì™€ ìì‹ìœ¼ë¡œ ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ê²ƒ       1 2   **ì¡°ìƒ í´ë˜ìŠ¤**  ë¶€ëª¨í´ë˜ìŠ¤, ìƒìœ„í´ë˜ìŠ¤, ê¸°ë°˜í´ë˜ìŠ¤   **ìì† í´ë˜ìŠ¤**  ìì‹í´ë˜ìŠ¤, í•˜ìœ„í´ë˜ìŠ¤, íŒŒìƒëœ í´ë˜ìŠ¤           1 2 3 4 5 6 7 8 9   class ìì‹í´ë˜ìŠ¤ extends ë¶€ëª¨í´ë˜ìŠ¤ {   \t// ...   }        class Parent { }   //     ìì‹           ë¶€ëª¨   class Child extends Parent {   \t// ...   }           ìì†ì€ ì¡°ìƒ(ë¶€ëª¨ì˜ ë¶€ëª¨)ì˜ ëª¨ë“  ë©¤ë²„ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.(ìƒì„±ì, ì´ˆê¸°í™”ë¸”ëŸ­ ì œì™¸)        ìì†ì˜ ë©¤ë²„ ê°œìˆ˜ëŠ” ì¡°ìƒë³´ë‹¤ ì ì„ ìˆ˜ ì—†ë‹¤.(ê°™ê±°ë‚˜ ë§ë‹¤)       1 2 3 4 5   class Parent {   \tint age;   }        class Child extends Parent {}                ìì†ì˜ ë³€ê²½ì€ ì¡°ìƒì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤       1 2 3 4 5 6 7 8 9 10   class Parent {   \tint age;   }        class Child extends Parent {   \tvoid play() {   \t\tSystem.out.println(\"ë†€ì\");   \t}   }   // ìì‹ë©¤ë²„ 1ê°œ, ìƒì†ë°›ì€ ë©¤ë²„ 1ê°œ               ì˜ˆì œ   1 2 3 4 class Point { \tint x; \tint y; }   Point í´ë˜ìŠ¤ì™€ ìƒê´€ì—†ìŒ   1 2 3 4 5 class Point3D { \tint x; \tint y; \tint z; }   Point í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ìŒ, Point í´ë˜ìŠ¤ì— ë³€ê²½ì´ ìˆìœ¼ë©´ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.   1 2 3 class Point3D extends Point { \tint z; }       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Tv { \tboolean power; // ì „ì›ìƒíƒœ(on/off) \tint channel;\t// ì±„ë„  \tvoid power()       {   power = !power; } \tvoid channelUp()   {   ++channel;      } \tvoid channelDown() {   --channel;      } }  class SmartTv extends Tv {  // CaptionTvëŠ” Tvì— ìº¡ì…˜(ìë§‰)ì„ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€ \tboolean caption;     // ìº¡ì…˜ìƒíƒœ(on/off) \tvoid displayCaption(String text) { \t\tif (caption) {   // ìº¡ì…˜ ìƒíƒœê°€ on(true)ì¼ ë•Œë§Œ textë¥¼ ë³´ì—¬ ì¤€ë‹¤. \t\t\tSystem.out.println(text); \t\t} \t} }  class Ex7_1 { \tpublic static void main(String args[]) { \t\tSmartTv stv = new SmartTv(); \t\tstv.channel = 10;\t\t\t// ì¡°ìƒ í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì†ë°›ì€ ë©¤ë²„ \t\tstv.channelUp();\t\t\t// ì¡°ìƒ í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì†ë°›ì€ ë©¤ë²„ \t\tSystem.out.println(stv.channel); \t\tstv.displayCaption(\"Hello, World\"); \t\tstv.caption = true;\t// ìº¡ì…˜(ìë§‰) ê¸°ëŠ¥ì„ ì¼ ë‹¤.\t        \t\tstv.displayCaption(\"Hello, World\"); \t} }   ìì‹ ë©¤ë²„ 2ê°œ + ë¶€ëª¨ ë©¤ë²„ 5ê°œ â†’ 7ê°œ       1.2 í´ë˜ìŠ¤ê°„ì˜ ê´€ê³„ - í¬í•¨ê´€ê³„   í´ë˜ìŠ¤ì˜ ê´€ê³„      ìƒì†   í¬í•¨       í¬í•¨ì´ë€?      í´ë˜ìŠ¤ì˜ ë©¤ë²„ë¡œ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒ   ì‘ì€ ë‹¨ìœ„ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ì´ ë“¤ì„ ì¡°í•©í•´ì„œ í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.   ì˜ˆì œ1. í¬í•¨ ì—†ëŠ” ê²ƒ   1 2 3 4 5 class Circle { \tint x; \tint y; \tint r; }   ì˜ˆì œ2. Circle ì´ Point ë¥¼ í¬í•¨   1 2 3 4 5 6 7 8 9 class Circle { \tPoint p = new Point(); \tint r; }  class Point { \tint x; \tint y; }   ì˜ˆì œ3.   1 2 3 4 5 6 class Car { \t// ì•„ë˜ ë‘ ë¬¸ì¥ ëª¨ë‘ í¬í•¨ ì˜ˆì‹œ \t// ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ë³µì¡ë„ê°€ ì¤„ì–´ë“ ë‹¤ \tEngine e = new Engine(); // ì—”ì§„ \tDoor[] d = new Door[4]; // ë¬¸, ë¬¸ì˜ ê°œìˆ˜ë¥¼ ë„·ìœ¼ë¡œ ê°€ì •í•˜ê³  ë°°ì—´ë¡œ ì²˜ë¦¬í–ˆë‹¤. }   í¬í•¨ê´€ê³„ë¡œ ì‘ì„±í•˜ë©´ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒë„ ì‰½ê³  ì½”ë“œë„ ê°„ê²°í•´ì„œ ì´í•´í•˜ê¸° ì‰½ê³  ì½”ë“œ ê´€ë¦¬ë„ ìˆ˜ì›”í•˜ë‹¤.       1.3 í´ë˜ìŠ¤ ê°„ì˜ ê´€ê³„ ê²°ì •í•˜ê¸°   í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ëŠ”ë° ìˆì–´ì„œ ìƒì†ê´€ê³„ë¥¼ ë§ºì–´ ì¤„ê¹Œ? í¬í•¨ê´€ê³„ë¥¼ ë§ºì–´ì¤„ê¹Œ?   â†’ í¬í•¨ì´ 90%, ìƒì†ì€ ê¼­ í•„ìš”í• ë•Œë§Œ!   1 2 ìƒì†ê´€ê³„ '~ì€ ~ì´ë‹¤(is-a)' í¬í•¨ê´€ê³„ '~ì€ ~ì„ ê°€ì§€ê³  ìˆë‹¤(has-a)'   ì•„ë˜ì™€ ê°™ì´ ë§ì„ ë§Œë“¤ì–´ë³´ë©´ í¸í•˜ë‹¤      ì›(Circle)ì€ ì (Point)ì´ë‹¤   ì›(Circle)ì€ ì (Point)ì„ ê°€ì§€ê³  ìˆë‹¤   2ë²ˆì´ ìì—°ìŠ¤ëŸ½ê¸° ë•Œë¬¸ì— í¬í•¨ê´€ê³„ë¡œ ì‘ì„±í•˜ë©´ ëœë‹¤.       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Circle { // í¬í•¨ \tPoint p = new Point(); // ì°¸ì¡°ë³€ìˆ˜ì˜ ì´ˆê¸°í™” \t/* Circle() { \t\tp = new Point(); \t} */ // ìƒì„±ìë¥¼ ì´ìš©í•œ ì°¸ì¡°ë³€ìˆ˜ì˜ ì´ˆê¸°í™” \tint r; }  class Circle extends Point { // ìƒì† \tint r; }  class Point { \tint x; \tint y; }       1.4 ë‹¨ì¼ ìƒì†      JavaëŠ” ë‹¨ì¼ìƒì†ë§Œì„ í—ˆìš©í•œë‹¤.(C++ì€ ë‹¤ì¤‘ìƒì† í—ˆìš©)   1 2 3 class TvDVD extends Tv, DVD { // ì—ëŸ¬ë°œìƒ! ì¡°ìƒì€ í•˜ë‚˜ë§Œ í—ˆìš©í•œë‹¤ \t// ... }   ì„œë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œë¶€í„° ìƒì†ë°›ì€ ë©¤ë²„ê°„ì˜ ì´ë¦„ì´ ê°™ì€ ê²½ìš° êµ¬ë³„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.       ë¹„ì¤‘ì´ ë†’ì€ í´ë˜ìŠ¤ í•˜ë‚˜ë§Œ ìƒì†ê´€ê³„ë¡œ, ë‚˜ë¨¸ì§€ëŠ” í¬í•¨ê´€ê³„ë¡œ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 class Tv { \tboolean power; \t// ì „ì›ìƒíƒœ(on/off) \tint channel;\t\t// ì±„ë„  \tvoid power()       { \tpower = !power; } \tvoid channelUp()   { \t++channel; } \tvoid channelDown() {\t--channel; } }  class VCR { \tboolean power; \t// ì „ì›ìƒíƒœ(on/off)    int counter = 0; \tvoid power() { \tpower = !power; } \tvoid play()  { /* ë‚´ìš©ìƒëµ*/ } \tvoid stop()  { /* ë‚´ìš©ìƒëµ*/ } \tvoid rew()   { /* ë‚´ìš©ìƒëµ*/ } \tvoid ff()    { /* ë‚´ìš©ìƒëµ*/ } }  class TVCR extends Tv { \tVCR vcr = new VCR(); \tint counter = vcr.counter;  \t// ê°ì²´ ì‚¬ìš© ì‹œì‘ \tvoid play() { \t\tvcr.play(); \t}  \tvoid stop() { \t\tvcr.stop();    }  \tvoid rew() { \t\tvcr.rew();    }  \tvoid ff() { \t\tvcr.ff();\t    } \t// ê°ì²´ ì‚¬ìš© ë }       1.5 Object í´ë˜ìŠ¤ - ëª¨ë“  í´ë˜ìŠ¤ì˜ ì¡°ìƒ      ë¶€ëª¨ê°€ ì—†ëŠ” í´ë˜ìŠ¤ëŠ” ìë™ì ìœ¼ë¡œ Object í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê²Œ ëœë‹¤.(ì»´íŒŒì¼ëŸ¬ê°€ ìë™ ì¶”ê°€ í•´ì¤€ë‹¤)   ëª¨ë“  í´ë˜ìŠ¤ëŠ” Object í´ë˜ìŠ¤ì— ì •ì˜ëœ 11ê°œì˜ ë©”ì„œë“œë¥¼ ìƒì†ë°›ëŠ”ë‹¤.            toString(), equals(Object obj), hashCode()â€¦           1 2 3 4 5 6 7 8 9 class Tv { \t// ... }  // ìœ„ì˜ ì½”ë“œì™€ ì•„ë˜ì˜ ì½”ë“œëŠ” ê°™ë‹¤. // ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— Objectí´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ìŒ class Tv extends Object { \t// ... }       1 2 3 4 5 6 7 8 9 10 11 12 class Circle extends Object { // í¬í•¨ \tMyPoint p = new MyPoint(); \tint r; }  public class InheritanceTest { \tpublic static void main(String[] args) { \t\t// ìœ„ì•„ë˜ ë‘ë¬¸ì¥ì´ ë˜‘ê°™ì€ ì¶œë ¥ì´ë‹¤. \t\tSystem.out.println(c.toString()); // Circle@15db9742 \t\tSystem.out.println(c); // Circle@15db9742 \t} }   2. ì˜¤ë²„ë¼ì´ë”©  2.1 ì˜¤ë²„ë¼ì´ë”©   ìƒì†ë°›ì€ ì¡°ìƒì˜ ë©”ì„œë“œë¥¼ ìì‹ ì— ë§ê²Œ ë³€ê²½í•˜ëŠ” ê²ƒ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Point { \tint x; \tint y;  \tString getLocation() { \t\treturn \"x :\" + x + \", y :\" + y; \t} }  class Point3D extends Point { \tint z;  \tString getLocation() { // ì˜¤ë²„ë¼ì´ë”©: êµ¬í˜„ë¶€{}ë§Œ ë³€ê²½ê°€ëŠ¥(ì„ ì–¸ë¶€ ë³€ê²½ë¶ˆê°€) \t\treturn \"x :\" + x + \", z :\" + z; \t} }       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class MyPoint3 { \tint x; \tint y; \tString getLocation() { \t\treturn \"x:\" + x + \", y:\" + y; \t} }  class MyPoint3D extends MyPoint3 { \tint z;  \t// ì¡°ìƒì˜ getLocation()ì„ ì˜¤ë²„ë¼ì´ë”© \tString getLocation() { \t\treturn \"x:\" + x + \", y:\" + y + \", z:\" + z; \t} }  public class OverrideTest { \tpublic static void main(String[] args) { \t\tMyPoint3D p = new MyPoint3D();  \t\tp.x = 3; \t\tp.y = 5; \t\tp.z = 7; \t\tSystem.out.println(p.getLocation()); \t} }   1 2 // ê²°ê³¼ x: 3, y: 5, z: 7       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class MyPoint3 { \tint x; \tint y;  \t// Objectí´ë˜ìŠ¤ì˜ toString()ì„ ì˜¤ë²„ë¼ì´ë”© \tpublic String toString() { \t\treturn \"x:\" + x + \", y:\" + y; \t} }  public class OverrideTest { \tpublic static void main(String[] args) { \t\tMyPoint3D p = new MyPoint3D();  \t\tp.x = 3; \t\tp.y = 5; \t\t \t\t// ì•„ë˜ì˜ ëª¨ë“  ê²°ê³¼ëŠ” ë™ì¼í•˜ë‹¤. \t\tSystem.out.println(p); \t\tSystem.out.println(p.toString()); \t\tSystem.out.println(\"x:\" + p.x + \"y:\" + p.y); \t} }  // ìœ„ì˜ ë©”ì„œë“œì™€ ì•„ë˜ ë©”ì„œë“œì˜ ê²°ê³¼ëŠ” ê°™ë‹¤ public class OverrideTest { \tpublic static void main(String[] args) { \t\tMyPoint3D p = new MyPoint3D(3, 5); \t\tSystem.out.println(p); \t} }   1 2 // ê²°ê³¼ x: 3, y: 5       2.2 ì˜¤ë²„ë¼ì´ë”©ì˜ ì¡°ê±´   ì˜¤ë²„ë¼ì´ë”©ì€ ë©”ì„œë“œì˜ ë‚´ìš©ë§Œ ìƒˆë¡œ ì‘ì„±í•˜ëŠ” ê²ƒ           ì„ ì–¸ë¶€ê°€ ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì™€ ì¼ì¹˜í•´ì•¼ í•œë‹¤.       1 2 3 4  ìì† í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë”©í•˜ëŠ” ë©”ì„œë“œëŠ” ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì™€  - ì´ë¦„ì´ ê°™ì•„ì•¼ í•œë‹¤.  - ë§¤ê°œë³€ìˆ˜ê°€ ê°™ì•„ì•¼ í•œë‹¤.  - ë¦¬í„´íƒ€ì…ì´ ê°™ì•„ì•¼ í•œë‹¤.           ìœ„ì˜ ë‚´ìš©ì„ ìš”ì•½í•˜ë©´ í•œë§ˆë””ë¡œ ì„ ì–¸ë¶€ê°€ ê°™ì•„ì•¼ í•œë‹¤.       ì ‘ê·¼ ì œì–´ìëŠ” ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë³´ë‹¤ ì¢ì€ ë²”ìœ„ë¡œ ë³€ê²½ í•  ìˆ˜ ì—†ë‹¤            ì ‘ê·¼ ì œì–´ì: public, protected, private, default(ì ‘ê·¼ì œì–´ì ì•ˆë¶™ì¸ ê²ƒ)           ì˜ˆì™¸ëŠ” ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë³´ë‹¤ ë§ì´ ì„ ì–¸í•  ìˆ˜ ì—†ë‹¤       2.3 ì˜¤ë²„ë¡œë”© vs ì˜¤ë²„ë¼ì´ë”©   ì˜¤ë²„ë¡œë”©: ê¸°ì¡´ì— ì—†ëŠ” ì´ë¦„ì´ ê°™ì€ë° ë§¤ê°œë³€ìˆ˜ê°€ ë‹¤ë¥¸ ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ê²ƒ(new)   ì˜¤ë²„ë¼ì´ë”©: ìƒì†ë°›ì€ ë©”ì„œë“œì˜ ë‚´ìš©ì„ ë³€ê²½í•˜ëŠ” ê²ƒ(change, modify)   1 2 3 4 5 6 7 8 9 10 11 12 class Parent { \tvoid parentMethod() {} }  class Child extends Parent { \tvoid parentMethod() {} // ì˜¤ë²„ë¼ì´ë”© \tvoid parentMethod(int i) {} // ì˜¤ë²„ë¡œë”©  \tvoid childMethod() {} // ë©”ì„œë“œ ì •ì˜ \tvoid childMethod(int i) {} // ì˜¤ë²„ë¡œë”© \tvoid childMethod() {} // ì—ëŸ¬, ì¤‘ë³µì •ì˜ }       2.4 super   ì°¸ì¡°ë³€ìˆ˜ super (thisì™€ ê±°ì˜ ë¹„ìŠ·)      ê°ì²´ ìì‹ ì„ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡°ë³€ìˆ˜. ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ(ìƒì„±ì) ë‚´ì—ì„œë§Œ ì¡´ì¬(static ë©”ì„œë“œì—ì„œ ì‚¬ìš© ë¶ˆê°€)   ì¡°ìƒì˜ ë©¤ë²„ë¥¼ ìì‹ ì˜ ë©¤ë²„ì™€ êµ¬ë³„í•  ë•Œ ì‚¬ìš©   1 2 this     lvì™€ iv êµ¬ë³„ì— ì‚¬ìš© super    ì¡°ìƒë©¤ë²„, ìì‹ë©¤ë²„ êµ¬ë³„ì— ì‚¬ìš©   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class SuperTest { \tpublic static void main(String[] args) { \t\tChild c = new Child(); \t\tc.method(); \t} }  class Parent { \tint x = 10; /* super.x */ }  class Child extends Parent { \tint x = 20; /* this.x */  \tvoid method() { \t\tSystem.out.println(\"x=\", x); \t\tSystem.out.println(\"this.x=\", this.x); \t\tSystem.out.println(\"super.x=\", super.x); \t} }   1 2 3 x=10 this.x=20 super.x=10   ìì‹í´ë˜ìŠ¤ì™€ ë¶€ëª¨í´ë˜ìŠ¤ì— ê°™ì€ ì´ë¦„ì˜ ë³€ìˆ˜ê°€ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤. ì´ ë‘˜ì˜ êµ¬ë¶„ì€ superë¡œ í•œë‹¤       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class SuperTest { \tpublic static void main(String[] args) { \t\tChild c = new Child(); \t\tc.method(); \t} }  class Parent { \tint x = 10; /* super.x, this.x ë‘˜ ë‹¤ ê°€ëŠ¥ */ }  class Child extends Parent { \tvoid method() { \t\tSystem.out.println(\"x=\", x); \t\tSystem.out.println(\"this.x=\", this.x); \t\tSystem.out.println(\"super.x=\", super.x); \t} }   1 2 3 x=10 this.x=10 super.x=10   ìì‹ (child)ì˜ xê°€ ì—†ê³  ì¡°ìƒ(parent)ì˜ xë¥¼ ìƒì†ë°›ì•˜ê¸° ë•Œë¬¸ì— ëª¨ë‘ 10 ì´ ë‚˜ì˜¨ë‹¤       super ì™€ thisëŠ” ë©¤ë²„ë¥¼ êµ¬ë¶„í• ë•Œ ë¹¼ê³ ëŠ” ê±°ì˜ ê°™ë‹¤ê³  ë³´ë©´ ëœë‹¤(ë‘˜ ë‹¤ ì°¸ì¡°ë³€ìˆ˜)       2.5 super() - ì¡°ìƒ í´ë˜ìŠ¤ì˜ ìƒì„±ì   super() â‰  super   super()ëŠ” this() ì²˜ëŸ¼ ìƒì„±ìë‹¤          ì¡°ìƒì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©   ì¡°ìƒì˜ ë©¤ë²„ëŠ” ì¡°ìƒì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì„œ ì´ˆê¸°í™”       ìƒì†ì—ì„œ ìƒì„±ìí•˜ê³  ì´ˆê¸°í™”ë¸”ëŸ­ì€ ìƒì†ì´ ì•ˆëœë‹¤ê³  ë°°ì›€. ë”°ë¼ì„œ, ì¡°ìƒì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí• ë• super()ë¥¼ ì‚¬ìš©       1 2 3 4 5 6 7 8 9 class Point { \tint x, y;  \t// ìƒì„±ì \tPoint(int x, int y) { \t\tthis.x = x; // iv ì´ˆê¸°í™” \t\tthis.y = y; // iv ì´ˆê¸°í™” \t} }   ì°¸ê³ ) ìƒì„±ìì˜ ì •ì˜ì™€ ì¡°ê±´   iv ì´ˆê¸°í™”ì— ì‚¬ìš©, ìƒì„±ìì˜ ì´ë¦„ì€ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ê°™ì•„ì•¼í•˜ê³  ë¦¬í„´ê°’ì´ ì—†ê³  ëª¨ë“  í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ ìƒì„±ìë¥¼ ê°€ì§„ë‹¤.       1 2 3 4 5 6 7 8 9 class Point3D extends Point { \tint z;  \tPoint3D(int x, int y, int z) { \t\tthis.x = x; // ì¡°ìƒì˜ ë©¤ë²„ ì´ˆê¸°í™” \t\tthis.y = y; // ì¡°ìƒì˜ ë©¤ë²„ ì´ˆê¸°í™” \t\tthis.z = z; // iv ì´ˆê¸°í™” \t} }   ì—¬ê¸°ì„œë„ iv ë¥¼ ì´ˆê¸°í™” í•˜ê³  ìˆëŠ”ë° x, y ëŠ” ì¡°ìƒì˜ ë©¤ë²„ì´ë‹¤. ê·¼ë° ìì†ì˜ ìƒì„±ìê°€ x, yë¥¼ ì´ˆê¸°í™” í•˜ê³  ìˆë‹¤. ìì†ì˜ ìƒì„±ìëŠ” ìê¸°ê°€ ì„ ì–¸í•œ ê²ƒë§Œ ì´ˆê¸°í™” í•´ì•¼í•œë‹¤. (ì—ëŸ¬ëŠ” ì•ˆë‚˜ì§€ë§Œ ì´ë ‡ê²Œ ì“°ë©´ ì•ˆëœë‹¤!)   ì¡°ìƒì˜ ë©¤ë²„ëŠ” ì¡°ìƒ ìƒì„±ìê°€ ì´ˆê¸°í™”í•´ì•¼í•œë‹¤   ìœ„ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ë°”ê¿”ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 class Point3D extends Point { \tint z;  \tPoint3D(int x, int y, int z) { \t\tsuper(x, y); // ì¡°ìƒì˜í´ë˜ìŠ¤ì˜ ìƒì„±ì Point(x, y)ë¥¼ í˜¸ì¶œ \t\tthis.z = z; // iv ì´ˆê¸°í™”(ìì‹ ì˜ ë©¤ë²„ë¥¼ ì´ˆê¸°í™”) \t} }       **ì¤‘ìš”!** ìƒì„±ìì˜ ì²« ì¤„ì— ë°˜ë“œì‹œ ìƒì„±ì(super() ë˜ëŠ” this())ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.   ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±ìì˜ ì²« ì¤„ì— super(); ë¥¼ ì‚½ì…   1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Point { \tint x; \tint y;  \tPoint() { \t\tthis(0, 0); // ìƒì„±ì í˜¸ì¶œí•¨ \t}  \tPoint(int x, int y) { \t\t// ìƒì„±ì í˜¸ì¶œ ì—†ìŒ! ì¡°ìƒì˜ ê¸°ë³¸ìƒì„±ìì¸ super(); í˜¸ì¶œ! \t\tthis.x = x; \t\tthis.y = y; \t} }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 class Point extends Object { \tint x; \tint y;  \tPoint() { \t\tthis(0, 0); // ìƒì„±ì í˜¸ì¶œí•¨ \t}  \tPoint(int x, int y) { \t\tsuper(); // Object(); í˜¸ì¶œ \t\tthis.x = x; \t\tthis.y = y; \t} }       ë§¤ìš° ì¤‘ìš”í•œ ì˜ˆì œ!   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 class PointTest { \tpublic static void main(String[] args) { \t\tPoint3D p3 = new Point3D(1, 2, 3); \t} }  class Point { \tint x; \tint y;  \tPoint(int x, int y) { \t\tthis.x = x; \t\tthis.y = y; \t}  \tString getLocation() { \t\treturn \"x: \" + x + \", y: \" + y; \t} }  class Point3D extends Point { \tint z; \t \tPoint3D(int x, int y, int z) { \t\tthis.x = x; \t\tthis.y = y; \t\tthis.z = z; \t}  \tString getLocation() { \t\treturn \"x: \" + x + \", y: \" + y + \", z: \" + z; \t} }   ìœ„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ Point ì˜ ìƒì„±ìê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬ ë°œìƒ   why? ëª¨ë“  ìƒì„±ìëŠ” ì²«ì¤„ì— ë‹¤ë¥¸ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼í•œë‹¤. ì—†ë‹¤ë©´ ì»´íŒŒì¼ëŸ¬ê°€ super()ë¥¼ ìë™ ì¶”ê°€ í•´ì¤€ë‹¤.       ìœ„ì˜ ì½”ë“œë¥¼ ì»´íŒŒì¼ëŸ¬ê°€ ì‹¤í–‰ì‹œ ì•„ë˜ ì²˜ëŸ¼ ë°”ë€ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 class PointTest { \tpublic static void main(String[] args) { \t\tPoint3D p3 = new Point3D(1, 2, 3); \t} }  class Point { \tint x; \tint y;  \tPoint(int x, int y) { \t\tsuper(); // Object();  \t\tthis.x = x; \t\tthis.y = y; \t}  \tString getLocation() { \t\treturn \"x: \" + x + \", y: \" + y; \t} }  class Point3D extends Point { \tint z; \t \tPoint3D(int x, int y, int z) { \t\tsuper(); // Point()ë¥¼ í˜¸ì¶œ  \t\tthis.x = x; \t\tthis.y = y; \t\tthis.z = z; \t}  \tString getLocation() { // ì˜¤ë²„ë¼ì´ë”© \t\treturn \"x: \" + x + \", y: \" + y + \", z: \" + z; \t} }          Point3D p3 = new Point3D(1, 2, 3); ë¥¼ í•˜ë©´   Point3D(int x, int y, int z) {} ë¡œ ê°€ê³    super()ê°€ ìë™ìƒì„±ë˜ê¸°ë•Œë¬¸ì—   Point() ë¥¼ í˜¸ì¶œí•œë‹¤   ê·¼ë° Point í´ë˜ìŠ¤ì— ê¸°ë³¸ ìƒì„±ìì¸ Point() {} ì—†ë‹¤. (ì»´íŒŒì¼ëŸ¬ì‹œ ìë™ ìƒì„± ì•ˆë¨, ì´ë¯¸ ìƒì„±ìê°€ í•˜ë‚˜ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—)   ê·¸ë˜ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤       ë”°ë¼ì„œ, í•­ìƒ í´ë˜ìŠ¤ ë§Œë“¤ë•Œ ê¸°ë³¸ ìƒì„±ì ì‘ì„±ì€ í•„ìˆ˜ì´ë‹¤.(ê·œì¹™! ê·œì¹™ì€ ì™¸ì›Œë¼)       ì—ëŸ¬ í•´ê²°ë°©ë²•1.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 class PointTest { \tpublic static void main(String[] args) { \t\tPoint3D p3 = new Point3D(1, 2, 3); \t} }  class Point { \tint x; \tint y;  \t// ê¸°ë³¸ìƒì„±ì ì‘ì„± \tPoint() {}  \tPoint(int x, int y) { \t\tsuper(); // Object(); : Pointì˜ ì¡°ìƒì¸ Object  \t\tthis.x = x; \t\tthis.y = y; \t}  \tString getLocation() { \t\treturn \"x: \" + x + \", y: \" + y; \t} }  class Point3D extends Point { \tint z; \t \tPoint3D(int x, int y, int z) { \t\tsuper(); // Point()ë¥¼ í˜¸ì¶œ  \t\tthis.x = x; \t\tthis.y = y; \t\tthis.z = z; \t}  \tString getLocation() { // ì˜¤ë²„ë¼ì´ë”© \t\treturn \"x: \" + x + \", y: \" + y + \", z: \" + z; \t} }       í•´ê²°ë°©ë²•2. ì´ ë°©ë²•ì´ ë” ì¢‹ì€ ë°©ë²• â†’ ì¡°ìƒì˜ ë©¤ë²„ëŠ” ì¡°ìƒì´ ì´ˆê¸°í™”í•˜ëŠ”ê²Œ ì¢‹ë‹¤   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 class PointTest { \tpublic static void main(String[] args) { \t\tPoint3D p3 = new Point3D(1, 2, 3); \t} }  class Point { \tint x; \tint y;  \t// ê¸°ë³¸ìƒì„±ì ì‘ì„± \tPoint() {}  \tPoint(int x, int y) { \t\tsuper(); // Object();  \t\tthis.x = x; \t\tthis.y = y; \t}  \tString getLocation() { \t\treturn \"x: \" + x + \", y: \" + y; \t} }  class Point3D extends Point { \tint z; \t \tPoint3D(int x, int y, int z) { \t\tsuper(x, y); // ì¡°ìƒì˜ ìƒì„±ì Point(int x, int y)ë¥¼ í˜¸ì¶œ \t\tthis.z = z; \t}  \tString getLocation() { // ì˜¤ë²„ë¼ì´ë”© \t\treturn \"x: \" + x + \", y: \" + y + \", z: \" + z; \t} }  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP5/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(package, import, ì œì–´ì, ì ‘ê·¼ì œì–´ì, ìº¡ìŠí™”)",
        "excerpt":"3. packageì™€ import   3.1 íŒ¨í‚¤ì§€(package)      ì„œë¡œ ê´€ë ¨ëœ í´ë˜ìŠ¤ì˜ ë¬¶ìŒ   í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ íŒŒì¼(*.class), íŒ¨í‚¤ì§€ëŠ” í´ë”. í•˜ìœ„ íŒ¨í‚¤ì§€ëŠ” í•˜ìœ„ í´ë”        í´ë˜ìŠ¤ì˜ ì‹¤ì œ ì´ë¦„ì€ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨(java.lang.String)       rt.jar ëŠ” í´ë˜ìŠ¤ë“¤ì„ ì••ì¶•í•œ íŒŒì¼       rt: runtime, jar: class íŒŒì¼ì„ ë¬¶ì–´ë†“ì€ ê²ƒ       rt.jar íŒŒì¼ì€ java9ë¶€í„° ì‚¬ë¼ì§           3.2 íŒ¨í‚¤ì§€ì˜ ì„ ì–¸   1 package íŒ¨í‚¤ì§€ëª…;      íŒ¨í‚¤ì§€ëŠ” ì†ŒìŠ¤íŒŒì¼ì˜ ì²« ë²ˆì§¸ ë¬¸ì¥ìœ¼ë¡œ ë‹¨ í•œë²ˆ ì„ ì–¸   ê°™ì€ ì†ŒìŠ¤ íŒŒì¼ì˜ í´ë˜ìŠ¤ë“¤ì€ ëª¨ë‘ ê°™ì€ íŒ¨í‚¤ì§€ì— ì†í•˜ê²Œ ëœë‹¤.   íŒ¨í‚¤ì§€ ì„ ì–¸ì´ ì—†ìœ¼ë©´ ì´ë¦„ì—†ëŠ”(unnamed) íŒ¨í‚¤ì§€ì— ì†í•˜ê²Œ ëœë‹¤.       í´ë˜ìŠ¤ íŒ¨ìŠ¤      í´ë˜ìŠ¤ íŒŒì¼(*.class)ì˜ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ê²½ë¡œ        í™˜ê²½ë³€ìˆ˜ classpathë¡œ ê´€ë¦¬í•˜ë©°, ê²½ë¡œê°„ì˜ êµ¬ë¶„ìëŠ” â€˜;â€™ë¥¼ ì‚¬ìš©       classpath(í™˜ê²½ë³€ìˆ˜)ì— íŒ¨í‚¤ì§€ì˜ ë£¨íŠ¸ë¥¼ ë“±ë¡í•´ì¤˜ì•¼ í•¨.           3.3 importë¬¸      í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œ íŒ¨í‚¤ì§€ ì´ë¦„ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.   ì»´íŒŒì¼ëŸ¬ì—ê²Œ í´ë˜ìŠ¤ê°€ ì†í•œ íŒ¨í‚¤ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.   java.lang íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ëŠ” import í•˜ì§€ ì•Šê³ ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤(ìƒëµê°€ëŠ¥)            java.lang íŒ¨í‚¤ì§€: String, Object, System, Threadâ€¦               3.4 importë¬¸ì˜ ì„ ì–¸   1 2 3 4 // ì¼ë°˜ì ì¸ ì†ŒìŠ¤íŒŒì¼(*.java)ì˜ êµ¬ì„± 1. packageë¬¸ 2. importë¬¸ 3. í´ë˜ìŠ¤ ì„ ì–¸           importë¬¸ì„ ì„ ì–¸í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤       1 2   import íŒ¨í‚¤ì§€ëª….í´ë˜ìŠ¤ëª…;   import íŒ¨í‚¤ì§€ëª….*;           importë¬¸ì€ íŒ¨í‚¤ì§€ë¬¸ê³¼ í´ë˜ìŠ¤ì„ ì–¸ì˜ ì‚¬ì´ì— ì„ ì–¸í•œë‹¤.   importë¬¸ì€ ì»´íŒŒì¼ ì‹œì— ì²˜ë¦¬ë˜ë¯€ë¡œ í”„ë¡œê·¸ë¨ì˜ ì„±ëŠ¥ì— ì˜í–¥ì—†ìŒ.   ì´ë¦„ì´ ê°™ì€ í´ë˜ìŠ¤ê°€ ì†í•œ ë‘ íŒ¨í‚¤ì§€ë¥¼ importí•  ë•ŒëŠ” í´ë˜ìŠ¤ ì•ì— íŒ¨í‚¤ì§€ëª…ì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.       static importë¬¸(ê¼­ í•„ìš”í• ë•Œë§Œ ì‚¬ìš©)      staticë©¤ë²„ë¥¼ ì‚¬ìš©í•  ë•Œ í´ë˜ìŠ¤ ì´ë¦„ì„ ìƒëµí•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 import static java.lang.System.out; import static java.lang.Math.*;  class Ex7_6 { \tpublic static void main(String[] args) { \t\t// System.out.println(Math.random()); \t\tout.println(random());  \t\t// System.out.println(Math.PI); \t\tout.println(PI); \t} }       4.ì œì–´ì(modifier)   4.1 ì œì–´ìë€?           í´ë˜ìŠ¤ì™€ í´ë˜ìŠ¤ì˜ ë©¤ë²„(ë©¤ë²„ ë³€ìˆ˜, ë©”ì„œë“œ)ì— ë¶€ê°€ì ì¸ ì˜ë¯¸ ë¶€ì—¬       1 2   ì ‘ê·¼ ì œì–´ì public, protected, (default), private // 4ê°œì¤‘ í•˜ë‚˜ ì‚¬ìš©ê°€ëŠ¥   ê·¸ ì™¸ static, final, abstract, (native, transient, synchronized, volatile, strictfp)                í•˜ë‚˜ì˜ ëŒ€ìƒì— ì—¬ëŸ¬ ì œì–´ìë¥¼ ê°™ì´ ì‚¬ìš©ê°€ëŠ¥(ë‹¨, ì ‘ê·¼ ì œì–´ìëŠ” í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œ ì‚¬ìš©ê°€ëŠ¥)       1 2 3 4 5 6 7   public class ModifierTest {   \tpublic static final int WIDTH = 200;        \tpublic static void main(String[] args) {   \t\t// ..   \t}   }           ì ‘ê·¼ì œì–´ìë¥¼ ê°€ì¥ ë¨¼ì € ì“´ë‹¤ (ê´€ë¡€ì ìœ¼ë¡œ)           4.2 static - í´ë˜ìŠ¤ì˜, ê³µí†µì ì¸           ì œì–´ì     ëŒ€ìƒ \tì˜ë¯¸           static \të©¤ë²„ë³€ìˆ˜ \t1. ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ ë³€ìˆ˜ê°€ ëœë‹¤.   2.  í´ë˜ìŠ¤ ë³€ìˆ˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.   3.  í´ë˜ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ë•Œ ìƒì„±ëœë‹¤.       \të©”ì„œë“œ \t1. ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•œ static ë©”ì„œë“œê°€ ëœë‹¤.  2. staticë©”ì„œë“œ ë‚´ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ë©¤ë²„ë“¤ì„ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.      1 2 3 4 5 6 7 8 9 10 11 12 class StaticTest { \tstatic int width = 200; // í´ë˜ìŠ¤ ë³€ìˆ˜(static ë³€ìˆ˜) \tstatic int height = 120; // í´ë˜ìŠ¤ ë³€ìˆ˜(static ë³€ìˆ˜)  \tstatic { // í´ë˜ìŠ¤ ì´ˆê¸°í™” ë¸”ëŸ­ \t\t// static ë³€ìˆ˜ì˜ ë³µì¡í•œ ì´ˆê¸°í™” ìˆ˜í–‰ \t}  \tstatic int max(int a, int b) { // í´ë˜ìŠ¤ ë©”ì„œë“œ(static ë©”ì„œë“œ) \t\treturn a &gt; b ? a : b; \t} }           static int width = 200;       â†’ ê°„ë‹¨ ì´ˆê¸°í™” (ëª…ì‹œì  ì´ˆê¸°í™”)            static ë©”ì„œë“œì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë“¤ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.       â†’ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ëŠ” iv(ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜), im(ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ) ì„ ì˜ë¯¸       â†’ ì™œ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ê¹Œ?       â‡’ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë“¤ì€ ê°ì²´ë¥¼ ìƒì„± í›„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—!            static ì€ ê°ì²´ìƒì„± ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•¨           4.3 final - ë§ˆì§€ë§‰ì˜, ë³€ê²½ë  ìˆ˜ ì—†ëŠ”           ì œì–´ì     ëŒ€ìƒ \tì˜ë¯¸           final \tí´ë˜ìŠ¤ \të³€ê²½ë  ìˆ˜ ì—†ëŠ” í´ë˜ìŠ¤, í™•ì¥ë  ìˆ˜ ì—†ëŠ” í´ë˜ìŠ¤ê°€ ëœë‹¤.  ê·¸ë˜ì„œ finalë¡œ ì§€ì •ëœ í´ë˜ìŠ¤ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ì¡°ìƒì´ ë  ìˆ˜ ì—†ë‹¤.       \të©”ì„œë“œ \të³€ê²½ë  ìˆ˜ ì—†ëŠ” ë©”ì„œë“œ, finalë¡œ ì§€ì •ëœ ë©”ì„œë“œëŠ” ì˜¤ë²„ë¼ì´ë”©ì„ í†µí•´ ì¬ì •ì˜ ë  ìˆ˜ ì—†ë‹¤.       \të©¤ë²„ë³€ìˆ˜, ì§€ì—­ë³€ìˆ˜ \të³€ìˆ˜ ì•ì— final ì´ ë¶™ìœ¼ë©´, ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ìƒìˆ˜ê°€ ëœë‹¤.      1 2 3 4 5 6 7 8 final class FinalTest { // ì¡°ìƒì´ ë  ìˆ˜ ì—†ëŠ” í´ë˜ìŠ¤ \tfinal int MAX_SIZE = 10; // ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë©¤ë²„ë³€ìˆ˜(ìƒìˆ˜)  \tfinal void getMaxSize() { // ì˜¤ë²„ë¼ì´ë”©í•  ìˆ˜ ì—†ëŠ” ë©”ì„œë“œ(ë³€ê²½ë¶ˆê°€) \t\tfinal int LV = MAX_SIZE; // ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ì§€ì—­ë³€ìˆ˜(ìƒìˆ˜) \t\treturn MAX_SIZE; \t} }      ì˜¤ë²„ë¼ì´ë”©: ì¡°ìƒë©”ì„œë“œë¥¼ ë®ì–´ì“°ëŠ” ê²ƒ       4.4 ìƒì„±ìë¥¼ ì´ìš©í•œ final ë©¤ë²„ë³€ìˆ˜ ì´ˆê¸°í™”   final ì´ ë¶™ì€ ë³€ìˆ˜ëŠ” ìƒìˆ˜ì´ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ì„ ì–¸ê³¼ ì´ˆê¸°í™”ë¥¼ ë™ì‹œì— í•˜ì§€ë§Œ, ì¸ìŠ¤í„´ìŠ¤ë³€ìˆ˜ì˜ ê²½ìš° ìƒì„±ìì—ì„œ ë‹¨ í•œë²ˆë§Œ ì´ˆê¸°í™” ë˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Card { \tfinal int NUMBER;\t\t// ìƒìˆ˜ì§€ë§Œ ì„ ì–¸ê³¼ í•¨ê»˜ ì´ˆê¸°í™” í•˜ì§€ ì•Šê³  \tfinal String KIND;\t\t// ìƒì„±ìì—ì„œ ë‹¨ í•œë²ˆë§Œ ì´ˆê¸°í™”í•  ìˆ˜ ìˆë‹¤. \tstatic int width  = 100;\t \tstatic int height = 250;  \tCard(String kind, int num) {\t \t\tKIND = kind; \t\tNUMBER = num; \t}  \tCard() { \t\tthis(\"HEART\", 1); \t}  \tpublic String toString() { \t\treturn KIND +\" \"+ NUMBER; \t} }  class FinalCardTest { \tpublic static void main(String args[]) { \t\tCard c = new Card(\"HEART\", 10); //\t\tc.NUMBER = 5; : ì—ëŸ¬ë°œìƒ! \t\tSystem.out.println(c.KIND); \t\tSystem.out.println(c.NUMBER); \t\tSystem.out.println(c); // System.out.println(c.toString()); \t} }       4.5 abstract - ì¶”ìƒì˜, ë¯¸ì™„ì„±ì˜           ì œì–´ì     ëŒ€ìƒ \tì˜ë¯¸           abstract \tí´ë˜ìŠ¤ \tí´ë˜ìŠ¤ ë‚´ì— ì¶”ìƒ ë©”ì„œë“œê°€ ì„ ì–¸ë˜ì–´ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.       \të©”ì„œë“œ \tì„ ì–¸ë¶€ë§Œ ì‘ì„±í•˜ê³  êµ¬í˜„ë¶€ëŠ” ì‘ì„±í•˜ì§€ ì•Šì€ ì¶”ìƒ ë©”ì„œë“œì„ì„ ì•Œë¦°ë‹¤.      1 2 3 abstract class AbstractTest { // ì¶”ìƒ í´ë˜ìŠ¤(ì¶”ìƒ ë©”ì„œë“œë¥¼ í¬í•¨í•œ í´ë˜ìŠ¤) \tabstract void move(); // ì¶”ìƒ ë©”ì„œë“œ(êµ¬í˜„ë¶€ê°€ ì—†ëŠ” ë©”ì„œë“œ) }   ëª¸í†µ(êµ¬í˜„ë¶€)ì´ ì—†ëŠ” ë©”ì„œë“œë¥¼ ì¶”ìƒë©”ì„œë“œë¼ í•˜ê³  ì¶”ìƒë©”ì„œë“œ ì•ì—ëŠ” abstract ë¥¼ ë¶™ì¸ë‹¤.   ì¶”ìƒë©”ì„œë“œëŠ” ë¯¸ì™„ì„± ë©”ì„œë“œ(ì„ ì–¸ë¶€ë§Œ ìˆìŒ), ì¶”ìƒë©”ì„œë“œë¥¼ í¬í•¨í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì¶”ìƒ í´ë˜ìŠ¤ë¼ í•¨       AbstractTest a = new AbstractTest();   â†’ ì—ëŸ¬. ì¶”ìƒí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¶ˆê°€   ì¶”ìƒí´ë˜ìŠ¤ëŠ” ë¯¸ì™„ì„± ì„¤ê³„ë„ ì´ê¸° ë•Œë¬¸ì— ê°ì²´ ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤!       ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ìƒì†ì„ í†µí•´ì„œ ì¶”ìƒë©”ì„œë“œë¥¼ ì™„ì„±í•´ì¤˜ì•¼í•¨(ëª¸í†µì„ ì‘ì„±í•´ì•¼ í•¨)   ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì„œ ì™„ì „í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“  í›„ì— ê°ì²´ ìƒì„± ê°€ëŠ¥       4.6 ì ‘ê·¼ ì œì–´ì(access modifier)   1 2 3 4 private   ê°™ì€ í´ë˜ìŠ¤ ë‚´ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. (default) ê°™ì€ íŒ¨í‚¤ì§€ ë‚´ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. protected ê°™ì€ íŒ¨í‚¤ì§€ ë‚´ì—ì„œ, ê·¸ë¦¬ê³  ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ìì†í´ë˜ìŠ¤ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. public    ì ‘ê·¼ ì œí•œì´ ì „í˜€ ì—†ë‹¤.   ì ‘ê·¼ ë²”ìœ„ê°€ ë„“ì€ ìª½ ìˆœìœ¼ë¡œ ë‚˜ì—´   1 public &gt; protected &gt; (default) &gt; private       í´ë˜ìŠ¤ ì•ì—ëŠ” public, (default) ë§Œ ê°€ëŠ¥   ë©¤ë²„ë“¤ì€ public, protected, (default), private ëª¨ë‘ ê°€ëŠ¥       ì‹¤ìŠµ   MyParent.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 package pkg1;  public class MyParent { // ì ‘ê·¼ì œì–´ìê°€ public \tprivate int prv;    // ê°™ì€ í´ë˜ìŠ¤ \tint dft;            // ê°™ì€ íŒ¨í‚¤ì§€ \tprotected int prt;  // ê°™ì€ íŒ¨í‚¤ì§€ + ìì†(ë‹¤ë¥¸ íŒ¨í‚¤ì§€) \tpublic int pub;     // ì ‘ê·¼ì œí•œ ì—†ìŒ  \tpublic void printMembers() { \t\tSystem.out.println(prv); // OK \t\tSystem.out.println(dft); // OK \t\tSystem.out.println(prt); // OK \t\tSystem.out.println(pub); // OK \t} }  class MyParentTest { // ì ‘ê·¼ì œì–´ìê°€ (default) \tpublic static void main(String[] args) { \t\tMyParent p = new MyParent(); \t\tSystem.out.println(p.prv); // ì—ëŸ¬. ê°™ì€ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— \t\tSystem.out.println(p.dft); // OK \t\tSystem.out.println(p.prt); // OK \t\tSystem.out.println(p.pub); // OK \t} }   MyParentTest2.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package pkg2;  import pkg1.MyParent;  class MyChild extends MyParent { \tpublic void printMembers() { \t\tSystem.out.println(prv); // ì—ëŸ¬. ê°™ì€ í´ë˜ìŠ¤, ê°™ì€ íŒ¨í‚¤ì§€ ì•„ë‹ˆ ë•Œë¬¸ì— \t\tSystem.out.println(dft); // ì—ëŸ¬. ê°™ì€ íŒ¨í‚¤ì§€ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— \t\tSystem.out.println(prt); // OK \t\tSystem.out.println(pub); // OK \t} }  public class MyParentTest2 { \tpublic static void main(String[] args) { \t\tMyParent p = new MyParent(); \t\tSystem.out.println(p.prv); // ì—ëŸ¬. \t\tSystem.out.println(p.dft); // ì—ëŸ¬. \t\tSystem.out.println(p.prt); // ì—ëŸ¬. ìì†ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— \t\tSystem.out.println(p.pub); // OK \t} }       4.7 ì ‘ê·¼ ì œì–´ìë¥¼ ì´ìš©í•œ ìº¡ìŠí™”   ì ‘ê·¼ ì œì–´ìë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ            ì™¸ë¶€ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ            ì™¸ë¶€ì—ëŠ” ë¶ˆí•„ìš”í•œ, ë‚´ë¶€ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ëŠ”, ë¶€ë¶„ì„ ê°ì¶”ê¸° ìœ„í•´ì„œ       1 2 3 4 5 6 7 8 public class Time { \tpublic int hour; // 0~23 \tpublic int minute; // 0~59 \tpublic int second; // 0~59 }  Time t = new Time(); t.hour = 25; // ë©¤ë²„ë³€ìˆ˜ì— ì§ì ‘ ì ‘ê·¼       1 2 3 4 5 6 7 8 9 10 11 12 public class Time { \tprivate int hour; // ì ‘ê·¼ ì œì–´ìë¥¼ privateìœ¼ë¡œ í•˜ì—¬ ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•œë‹¤. \tprivate int minute; \tprivate int second;  \tpublic int getHour() { return hour; }  \tpublic void setHour(int hour) { \t\tif (hour &lt; 0 || hour &gt; 23) return; \t\tthis.hour = hour; \t} }   ë³€ìˆ˜ì— ì§ì ‘ ì ‘ê·¼ì„ ë§‰ê³  ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.   ë©”ì„œë“œë¥¼ í†µí•œ ê°„ì ‘ ì ‘ê·¼ í—ˆìš©   â†’ ì ‘ê·¼ì œì–´ìë¥¼ ì´ìš©í•œ ìº¡ìŠí™”       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class Time { \tprivate int hour; // 0~23ì‚¬ì´ì˜ ê°’ì„ ê°€ì ¸ì•¼í•¨. \tprivate int minute; \tprivate int second;  \tpublic void setHour(int hour) { \t\tif(isNotValidHour(hour)) return; \t\tthis.hour = hour; \t}  \t// ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì§„ hourê°€ ìœ íš¨í•œì§€ í™•ì¸í•´ì„œ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ \t// ë‚´ë¶€ì—ì„œë§Œ ì“°ëŠ” ë©”ì„œë“œì´ê¸° ë•Œë¬¸ì— private ìœ¼ë¡œ ì‚¬ìš© \tprivate boolean isNotValidHour(int hour) { \t\treturn hour &lt; 0 || hour &gt; 23; \t}  \tpublic int getHour() { return hour; } }  public class TimeTest { \tpublic static void main(String[] args) { \t\tTime t = new Time(); \t\t// t.hour = 100; \t\t// System.out.println(t.hour); \t\tt.setHour(21); \t\tSystem.out.println(t.getHour()); // 21  \t\tt.setHour(100); \t\tSystem.out.println(t.getHour()); // 21, ê²°ê³¼ ì•ˆë°”ë€œ \t} }   ì ‘ê·¼ì˜ ë²”ìœ„ëŠ” ìµœëŒ€í•œ ì¢íˆëŠ”ê²Œ ì¢‹ë‹¤       4.8 ìƒì„±ìì˜ ì ‘ê·¼ ì œì–´ì       4.9 ì œì–´ì(modifier)ì˜ ì¡°í•©  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP6/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ë‹¤í˜•ì„±, ì°¸ì¡°ë³€ìˆ˜ì˜ í˜•ë³€í™˜, instanceofì—°ì‚°ì, ë§¤ê°œë³€ìˆ˜ ë‹¤í˜•ì„±)",
        "excerpt":"5.ë‹¤í˜•ì„±(polymorphism)   5.1 ë‹¤í˜•ì„±ì´ë€?      ì—¬ëŸ¬ê°€ì§€ í˜•íƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥   ì¡°ìƒ íƒ€ì… ì°¸ì¡° ë³€ìˆ˜ë¡œ ìì† íƒ€ì… ê°ì²´ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒ(ì¡°ìƒí´ë˜ìŠ¤ íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ìì†í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤)   1 2 3 4 5 6 7 8 9 10 11 12 13 class Tv { \tboolean power; \tint channel;  \tvoid power() { power = !power; } \tvoid channelUp() { ++channel; } \tvoid channelDown() { --channel; } }  class SmartTv extends Tv { \tString text; // ìº¡ì…˜(ìë§‰)ì„ ë³´ì—¬ ì£¼ê¸° ìœ„í•œ ë¬¸ìì—´ \tvoid caption() { /* ë‚´ìš©ìƒëµ */ } }   Tv: ë¶€ëª¨(ë©¤ë²„ë³€ìˆ˜ 5ê°œ), SmartTv: ìì‹(ë©¤ë²„ë³€ìˆ˜ 7ê°œ)       ì›ë˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í–ˆëŠ”ë°,   Tv t = new Tv();   SmartTv s = new SmartTv();       ë‹¤í˜•ì„±ì€ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©   Tv t = new SmartTv(); // íƒ€ì… ë¶ˆê·œì¹™, ì‚¬ìš© ê°€ëŠ¥!       ê°ì²´ì™€ ì°¸ì¡°ë³€ìˆ˜ì˜ íƒ€ì…ì´ ì¼ì¹˜í•  ë•Œì™€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ë•Œì˜ ì°¨ì´?   1 2 3 4 5 SmartTv s = new SmartTv(); // ì°¸ì¡° ë³€ìˆ˜ì™€ ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ì´ ì¼ì¹˜ // -&gt; ë©¤ë²„ê°€ 7ê°œì´ë¯€ë¡œ 7ê°œì˜ ê¸°ëŠ¥ì´ ìˆë‹¤ Tv t = new SmartTv(); // ì¡°ìƒ íƒ€ì… ì°¸ì¡°ë³€ìˆ˜ë¡œ ìì† íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° // -&gt; ë©¤ë²„ê°€ 5ê°œì´ë¯€ë¡œ 5ê°œì˜ ê¸°ëŠ¥ì„ ì“¸ ìˆ˜ ìˆë‹¤. // (ìì†ì— 7ê°œì˜ ê¸°ëŠ¥ì´ ìˆì§€ë§Œ ë²„íŠ¼ì´ 5ê°œë°–ì— ì—†ìœ¼ë¯€ë¡œ 5ê°œì˜ ê¸°ëŠ¥ë§Œ ì“¸ ìˆ˜ ìˆìŒ)   ë¶€ëª¨ëŠ” ìì‹ì— ë¹„í•´ ë©¤ë²„ê°€ ê°™ê±°ë‚˜ ì ì„ ìˆ˜ ë°–ì— ì—†ë‹¤       ì‰? ë©¤ë²„ë¥¼ 7ê°œ ì“¸ ìˆ˜ ìˆë‹¤ê°€ 5ê°œ ì“¸ ìˆ˜ ìˆëŠ”ê²Œ ì¥ì ì¸ê°€ìš”?   â†’ ì¥ì ì´ ë  ìˆ˜ ìˆë‹¤.               ìì† íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ì¡°ìƒ íƒ€ì…ì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ì—†ë‹¤.       1 2   Tv t = new SmartTv(); // í—ˆìš©   SmartTv s = new Tv(); // ì—ëŸ¬           ê¸°ëŠ¥ì´ 7ê°œì¸ë° 5ê°œë§Œ ì“°ëŠ”ê±´ ok       ê¸°ëŠ¥ì´ 5ê°œì¸ë° 7ê°œë¥¼ ì“¸ ìˆ˜ ì—†ìŒ error!           Q. ì°¸ì¡°ë³€ìˆ˜ì˜ íƒ€ì…ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ê³¼ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•˜ë‚˜ìš”?   â†’ ì•„ë‹ˆìš”. ì¼ì¹˜í•˜ëŠ” ê²ƒì´ ë³´í†µì´ì§€ë§Œ ì¼ì¹˜ í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŒ.   Q. ì°¸ì¡°ë³€ìˆ˜ê°€ ì¡°ìƒíƒ€ì…ì¼ ë•Œì™€ ìì†íƒ€ì…ì¼ ë•Œì˜ ì°¨ì´?   â†’ ì°¸ì¡°ë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©¤ë²„ì˜ ê°¯ìˆ˜ê°€ ë‹¬ë¼ì§   Q. ìì† íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ì¡°ìƒ íƒ€ì…ì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë‚˜ìš”?   â†’ ì•„ë‹ˆìš”. í—ˆìš©ë˜ì§€ ì•ŠìŒ       5.2 ì°¸ì¡°ë³€ìˆ˜ì˜ í˜•ë³€í™˜      ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©¤ë²„ì˜ ê°¯ìˆ˜ë¥¼ ì¡°ì ˆí•˜ëŠ” ê²ƒ   ì¡°ìƒ ìì† ê´€ê³„ì˜ ì°¸ì¡°ë³€ìˆ˜ëŠ” ì„œë¡œ í˜•ë³€í™˜ ê°€ëŠ¥   1 2 ìì†íƒ€ì… -&gt; ì¡°ìƒíƒ€ì… : í˜•ë³€í™˜ ìƒëµê°€ëŠ¥ ìì†íƒ€ì… &lt;- ì¡°ìƒíƒ€ì… : í˜•ë³€í™˜ ìƒëµë¶ˆê°€       1 2 3 class Car {} class FireEngine extends Car {} class Ambulance extends Car {}   Car ì™€ FireEngine ì€ ì„œë¡œ í˜•ë³€í™˜ ê°€ëŠ¥   Car ì™€ Ambulance ëŠ” ì„œë¡œ í˜•ë³€í™˜ ê°€ëŠ¥   FireEngineê³¼ AmbulanceëŠ” ì„œë¡œ í˜•ë³€í™˜ ë¶ˆê°€ëŠ¥! (ë‘˜ ë‹¤ ìì‹. ìƒì†ê´€ê³„ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—)       1 2 3 4 5 FireEngine f = new FireEngine();  Car c = (Car)f; // OK. ì¡°ìƒì¸ Caríƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜(ìƒëµê°€ëŠ¥) FireEngine f2 = (FireEngine)c; // OK. ìì†ì¸ FireEngineíƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜(ìƒëµë¶ˆê°€) Ambulance a = (Ambulance)f; // ì—ëŸ¬. ìƒì†ê´€ê³„ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ ê°„ì˜ í˜•ë³€í™˜ ë¶ˆê°€   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Car { \tString color; \tint door;  \tvoid drive() { \t\tSystem.out.println(\"drive, Brrrr~\"); \t}  \tvoid stop() { \t\tSystem.out.println(\"stop!\"); \t} }  class FireEngine extends Car { \tvoid water() { \t\tSystem.out.println(\"water!!\"); \t} }   ë¶€ëª¨ ë©¤ë²„ë³€ìˆ˜ 4ê°œ + ìì‹ ë©¤ë²„ë³€ìˆ˜ 1ê°œ â‡’ ì´ 5ê°œ!   f ëŠ” 5ê°œì˜ ë©¤ë²„ë³€ìˆ˜ì— ì ‘ê·¼ ê°€ëŠ¥   cëŠ” 4ê°œì˜ ë©¤ë²„ë³€ìˆ˜ì—ë§Œ ì ‘ê·¼ ê°€ëŠ¥(íƒ€ì…ì´ Carì´ê¸° ë•Œë¬¸ì— ë¦¬ëª¨ì»¨ ë²„íŠ¼ì´ 4ê°œ ë°–ì— ì—†ìŒ)   f2ëŠ” 5ê°œì˜ ë©¤ë²„ë³€ìˆ˜ì— ì ‘ê·¼ ê°€ëŠ¥   aì™€ fëŠ” ë‘˜ ë‹¤ ìì‹ì´ë¯€ë¡œ ì„œë¡œ í˜•ë³€í™˜ ë¶ˆê°€ëŠ¥í•¨ ë”°ë¼ì„œ, ì—ëŸ¬ ë°œìƒ!       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Car { \tString color; \tint door;  \tvoid drive() { \t\tSystem.out.println(\"drive, Brrrr~\"); \t}  \tvoid stop() { \t\tSystem.out.println(\"stop!\"); \t} }  class FireEngine extends Car { \tvoid water() { \t\tSystem.out.println(\"water!!\"); \t} }   1 2 3 4 5 6 7 8 9 10 11 12 13 class Ex7_7 { \tpublic static void main(String[] args) { \t\tCar car = null; \t\tFireEngine fe = new FireEngine(); \t\tFireEngine fe2 = null;  \t\tfe.water(); \t\tcar = fe; // car = (Car)fe;ì—ì„œ í˜•ë³€í™˜ì´ ìƒëµë¨ \t\t// car.water(); // ì»´íŒŒì¼ ì—ëŸ¬! Caríƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œëŠ” water()ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤. \t\tfe2 = (FireEngine)car; // ìì†íƒ€ì… &lt;- ì¡°ìƒíƒ€ì…. í˜•ë³€í™˜ ìƒëµ ë¶ˆê°€ \t\tfe2.water(); \t} }   CarëŠ” water()ë¼ëŠ” ë©¤ë²„ë³€ìˆ˜ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ì—ëŸ¬ ë°œìƒí•œë‹¤   5ê°œ â†’ 4ê°œ ê°ì†Œ ì•ˆì „. ìƒëµê°€ëŠ¥   4ê°œ â†’ 5ê°œ ì¦ê°€ ì•ˆì „í•˜ì§€ ì•ŠìŒ. ìƒëµë¶ˆê°€       ì˜ˆì œ1   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Ex7_7 { \tpublic static void main(String args[]) { \t\tCar car = null; \t\tFireEngine fe = new FireEngine(); \t\tFireEngine fe2 = null;  \t\tfe.water(); \t\tcar = fe;    // car = (Car)fe;ì—ì„œ í˜•ë³€í™˜ì´ ìƒëµë¨ //\t\tcar.water(); // ì—ëŸ¬. Caríƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ì¸ carë¡œëŠ” water()ë¥¼ ì‚¬ìš©ë¶ˆê°€. \t\tfe2 = (FireEngine)car; // ìì†íƒ€ì… â† ì¡°ìƒíƒ€ì…. í˜•ë³€í™˜ ìƒëµ ë¶ˆê°€ \t\tfe2.water(); \t} }  class Car { \tString color; \tint door;  \tvoid drive() { \t// ìš´ì „í•˜ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"drive, Brrrr~\"); \t}  \tvoid stop() {  \t// ë©ˆì¶”ëŠ” ê¸°ëŠ¥\t \t\tSystem.out.println(\"stop!!!\");\t \t} }  class FireEngine extends Car {\t// ì†Œë°©ì°¨ \tvoid water() {\t// ë¬¼ì„ ë¿Œë¦¬ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"water!!!\"); \t} }   car.water();   â†’ Car ì—ëŠ” water()ê°€ ì—†ì–´ì„œ ì˜¤ë¥˜ ë°œìƒí•¨       ì˜ˆì œ2   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 class Ex7_7 { \tpublic static void main(String args[]) { \t\tCar car = null; \t\tFireEngine fe = null;  \t\tFireEngine fe2 = (FireEngine)car; // ì¡°ìƒ -&gt; ìì†ìœ¼ë¡œ í˜•ë³€í™˜ \t\tCar car2 = (Car)fe2; // ìì† -&gt; ì¡°ìƒìœ¼ë¡œ í˜•ë³€í™˜  \t\tcar2.drive(); // ì—ëŸ¬. NullPointException ë°œìƒ. \t} }  class Car { \tString color; \tint door;  \tvoid drive() { \t// ìš´ì „í•˜ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"drive, Brrrr~\"); \t}  \tvoid stop() {  \t// ë©ˆì¶”ëŠ” ê¸°ëŠ¥\t \t\tSystem.out.println(\"stop!!!\");\t \t} }  class FireEngine extends Car {\t// ì†Œë°©ì°¨ \tvoid water() {\t// ë¬¼ì„ ë¿Œë¦¬ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"water!!!\"); \t} }   fe, car2 ëª¨ë‘ null!   í˜• ë³€í™˜ í• ë•Œ ì¤‘ìš”í•œê±´ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ê°€ ì¤‘ìš”í•˜ë‹¤.       ì˜ˆì œ3   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 class Ex7_7 { \tpublic static void main(String args[]) { \t\tCar car = new Car(); \t\tFireEngine fe = (FireEngine)c; // í˜•ë³€í™˜ ì‹¤í–‰ ì—ëŸ¬. java.lang.ClassCastException \t\tfe.water(); \t} }  class Car { \tString color; \tint door;  \tvoid drive() { \t// ìš´ì „í•˜ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"drive, Brrrr~\"); \t}  \tvoid stop() {  \t// ë©ˆì¶”ëŠ” ê¸°ëŠ¥\t \t\tSystem.out.println(\"stop!!!\");\t \t} }  class FireEngine extends Car {\t// ì†Œë°©ì°¨ \tvoid water() {\t// ë¬¼ì„ ë¿Œë¦¬ëŠ” ê¸°ëŠ¥ \t\tSystem.out.println(\"water!!!\"); \t} }   ì»´íŒŒì¼ì€ í†µê³¼, ê·¸ëŸ¬ë‚˜ ì‹¤í–‰ ì¤‘ í˜•ë³€í™˜ ì˜¤ë¥˜ ë°œìƒí•¨   â†’ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ëŠ” Car ì´ê³  Carì—ëŠ” water()ê°€ ì—†ìŒ. ë”°ë¼ì„œ, ì—ëŸ¬ ë°œìƒ!       ê²°ë¡    ì°¸ì¡°ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ëŠ” ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ê°€ ë­”ì§€ í™•ì¸í•˜ê³  ê·¸ ë©¤ë²„ì˜ ê°¯ìˆ˜ë¥¼ í™•ì¸!       5.3 instanceofì—°ì‚°ì      ì°¸ì¡°ë³€ìˆ˜ì˜ í˜•ë³€í™˜ ê°€ëŠ¥ì—¬ë¶€ í™•ì¸ì— ì‚¬ìš©. ê°€ëŠ¥í•˜ë©´ true ë°˜í™˜   í˜•ë³€í™˜ ì „ì— ë°˜ë“œì‹œ instanceofë¡œ í™•ì¸í•´ì•¼ í•¨            í™•ì¸. í˜•ë³€í™˜ í•´ë„ ë˜ëŠ”ì§€: instanceof       í˜•ë³€í™˜               1 2 3 4 5 6 7 8 9 10 11 void doWork(Car c) { \tif (c instanceof FireEngine) { // 1. í˜•ë³€í™˜ì´ ê°€ëŠ¥í•œì§€ í™•ì¸ \t\tFireEngine fe = (FireEngine)c; // 2. í˜•ë³€í™˜ \t\tfe.water(); \t\t// ... \t} else if (c instanceof Ambulance) { \t\tAmbulance a = (Ambulance)c; \t\ta.siren(); \t\t// ... \t} }   doWork(Car c)   â†’ doWork(new Car())   â†’ doWork(new  FireEngine())   â†’ doWork(new Ambulance())   ìœ„ì˜ 3ë¬¸ì¥ ëª¨ë‘ ê°€ëŠ¥       1 2 3 4 5 FireEngine fe = new FireEngine();  System.out.println(fe instanceof Object);    // true System.out.println(fe instanceof Car);       // true System.out.println(fe instanceof FireEngine);// true   ëª¨ë‘ trueë¥¼ ë°˜í™˜í•˜ëŠ” ì´ìœ ëŠ” FireEngineí´ë˜ìŠ¤ëŠ” Objectí´ë˜ìŠ¤ì™€ Carí´ë˜ìŠ¤ì˜ ìì† í´ë˜ìŠ¤ì´ë¯€ë¡œ ì¡°ìƒì˜ ë©¤ë²„ë“¤ì„ ìƒì†ë°›ì•˜ê¸° ë•Œë¬¸ì—!   1 ì–´ë–¤ íƒ€ì…ì— ëŒ€í•œ instanceofì—°ì‚°ì˜ ê²°ê³¼ê°€ trueë¼ëŠ” ê²ƒì€ ê²€ì‚¬í•œ íƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ëœ»í•œë‹¤.       Q. ì°¸ì¡°ë³€ìˆ˜ì˜ í˜•ë³€í™˜ì€ ì™œ í•˜ë‚˜ìš”?   ì°¸ì¡°ë³€ìˆ˜(ë¦¬ëª¨ì½˜)ì„ ë³€ê²½í•¨ìœ¼ë¡œì¨ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©¤ë²„ì˜ ê°¯ìˆ˜ë¥¼ ì¡°ì ˆí•˜ê¸° ìœ„í•´ì„œ   Q. instanceofì—°ì‚°ìëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?   ì°¸ì¡°ë³€ìˆ˜ë¥¼ í˜•ë³€í™˜í•˜ê¸° ì „ì— í˜•ë³€í™˜ ê°€ëŠ¥ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ       ë‹¤í˜•ì„±      Tv t = new SmartTv(); (ì¡°ìƒ â†” ìì†)   ì°¸ì¡°ë³€ìˆ˜ì˜ í˜•ë³€í™˜ - ë¦¬ëª¨ì½˜ ë°”ê¾¸ê¸°(ì‚¬ìš©ê°€ëŠ¥í•œ ë©¤ë²„ê°¯ìˆ˜ ì¡°ì ˆ)   instanceof ì—°ì‚°ì - í˜•ë³€í™˜ ê°€ëŠ¥ì—¬ë¶€ ì²´í¬       ë‹¤í˜•ì„± ì¥ì       ë‹¤í˜•ì  ë§¤ê°œë³€ìˆ˜   í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ì—¬ëŸ¬ì¢…ë¥˜ ê°ì²´ ë‹¤ë£¨ê¸°       5.5 ë§¤ê°œë³€ìˆ˜ì˜ ë‹¤í˜•ì„±      ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì‹œ, ìì‹ ê³¼ ê°™ì€ íƒ€ì… ë˜ëŠ” ìì†íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.   í•œ íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ì—¬ëŸ¬ íƒ€ì…ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Product { \tint price; \tint bonusPoint; }  class Tv extends Product {} class Computer extends Product {} class Audio extends Product {}  class Buyer { \tint money = 1000; \tint bonusPoint = 0;  \tvoid buy(Tv t) { \t\tmoney -= t.price; \t\tbonusPoint += t.bonusPoint; \t} \t \t// ì˜¤ë²„ë¡œë”©(ë©”ì„œë“œì´ë¦„ì€ ê°™ê³  ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì€ ë‹¤ë¦„) \tvoid buy(Computer c) { \t\tmoney -= c.price; \t\tbonusPoint += c.bonusPoint; \t} \t \tvoid buy(Audio a) { \t\tmoney -= a.price; \t\tbonusPoint += a.bonusPoint; \t}  \t//...  }   ì œí’ˆì´ ê³„ì† ì¶”ê°€ë˜ë©´ ì½”ë“œê°€ ë„ˆë¬´ ê¸¸ì–´ì§€ê³  ì¤‘ë³µì´ ë°œìƒí•¨   ë”°ë¼ì„œ, ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Product { \tint price; \tint bonusPoint; }  class Tv extends Product {} class Computer extends Product {} class Audio extends Product {}  class Buyer { \tint money = 1000; \tint bonusPoint = 0;  \t/* ë‹¤í˜•ì„± \t\tProduct p1 = new Tv(); \t\tProduct p2 = new Computer(); \t\tProduct p3 = new Audio(); \t*/ \tvoid buy(Product p) { \t\tmoney -= p.price; \t\tbonusPoint += p.bonusPoint; \t} }   1 2 3 4 5 6 7 Buyer b = new Buyer();  Tv tv = new Tv(); Computer com = new Computer();  b.buy(tv); b.buy(com);       ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 class Product { \tint price;\t\t\t// ì œí’ˆì˜ ê°€ê²© \tint bonusPoint;\t// ì œí’ˆêµ¬ë§¤ ì‹œ ì œê³µí•˜ëŠ” ë³´ë„ˆìŠ¤ì ìˆ˜  \tProduct(int price) { \t\tthis.price = price; \t\tbonusPoint = (int)(price/10.0);\t// ë³´ë„ˆìŠ¤ì ìˆ˜ëŠ” ì œí’ˆê°€ê²©ì˜ 10% \t} }  class Tv1 extends Product { \tTv1() { \t\t// ì¡°ìƒí´ë˜ìŠ¤ì˜ ìƒì„±ì Product(int price)ë¥¼ í˜¸ì¶œí•œë‹¤. \t\tsuper(100);\t\t// Tvì˜ ê°€ê²©ì„ 100ë§Œì›ìœ¼ë¡œ í•œë‹¤. \t}  \t// Objectí´ë˜ìŠ¤ì˜ toString()ì„ ì˜¤ë²„ë¼ì´ë”©í•œë‹¤. \tpublic String toString() { return \"Tv\"; } }  class Computer extends Product { \tComputer() { super(200); }  \tpublic String toString() { return \"Computer\"; } }  class Buyer {\t// ê³ ê°, ë¬¼ê±´ì„ ì‚¬ëŠ” ì‚¬ëŒ \tint money = 1000;\t  // ì†Œìœ ê¸ˆì•¡ \tint bonusPoint = 0; // ë³´ë„ˆìŠ¤ì ìˆ˜  \tvoid buy(Product p) { \t\tif(money &lt; p.price) { \t\t\tSystem.out.println(\"ì”ì•¡ì´ ë¶€ì¡±í•˜ì—¬ ë¬¼ê±´ì„ ì‚´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"); \t\t\treturn; \t\t}  \t\tmoney -= p.price;            // ê°€ì§„ ëˆì—ì„œ êµ¬ì…í•œ ì œí’ˆì˜ ê°€ê²©ì„ ëº€ë‹¤. \t\tbonusPoint += p.bonusPoint;  // ì œí’ˆì˜ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤. \t\tSystem.out.println(p + \"ì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤.\"); \t\tSystem.out.println(p.toString() + \"ì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤.\"); \t} }  class Ex7_8 { \tpublic static void main(String args[]) { \t\tBuyer b = new Buyer();  \t\tb.buy(new Tv1()); // buy(Product p) \t\tb.buy(new Computer()); // buy(Product p)  \t\tSystem.out.println(\"í˜„ì¬ ë‚¨ì€ ëˆì€ \" + b.money + \"ë§Œì›ì…ë‹ˆë‹¤.\"); \t\tSystem.out.println(\"í˜„ì¬ ë³´ë„ˆìŠ¤ì ìˆ˜ëŠ” \" + b.bonusPoint + \"ì ì…ë‹ˆë‹¤.\"); \t} }   1 2 3 4 Tvì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤. Computerì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤. í˜„ì¬ ë‚¨ì€ ëˆì€ 700ë§Œì›ì…ë‹ˆë‹¤. í˜„ì¬ ë³´ë„ˆìŠ¤ì ìˆ˜ëŠ” 30ì ì…ë‹ˆë‹¤.   System.out.println(p + â€œì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤.â€);   System.out.println(p.toString() + â€œì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤.â€);   â†’ ë™ì¼í•œ ì½”ë“œ       5.6 ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ê°ì²´ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ë‹¤ë£¨ê¸°      ì¡°ìƒíƒ€ì…ì˜ ë°°ì—´ì— ìì†ë“¤ì˜ ê°ì²´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤.      1 2 3 Product p1 = new Tv(); Product p2 = new Computer(); Product p3 = new Audio();          1 2 3 4 Product p[] = new Product[3]; p[0] = new Tv(); p[1] = new Computer(); p[2] = new Audio();       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Buyer { // ë¬¼ê±´ì‚¬ëŠ” ì‚¬ëŒ \tint money = 1000; \tint bonusPoint = 0;  \tProduct[] cart = new Product[10]; // êµ¬ì…í•œ ë¬¼ê±´ì„ ë‹´ì„ ë°°ì—´ \t \tint i = 0;  \tvoid buy(Product p) { \t\tif(money &lt; p.price) { \t\t\tSystem.out.println(\"ì”ì•¡ë¶€ì¡±\"); \t\t\treturn; \t\t}  \t\tmoney -= p.price; \t\tbonusPoint += p.bonusPoint; \t\tcart[i++] = p; \t} }      1 2 3 4 public class Vector extends AbstractList  \t\t\timplements List, Cloneable, java.io.Serializable { \tprotected Object elementData[]; }   Vector: ê°€ë³€ ë°°ì—´ ê¸°ëŠ¥   Vector í´ë˜ìŠ¤ì—ëŠ” ëª¨ë“  ì¢…ë¥˜ì˜ ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.       ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 class Product2 { \tint price;\t\t\t// ì œí’ˆì˜ ê°€ê²© \tint bonusPoint;\t// ì œí’ˆêµ¬ë§¤ ì‹œ ì œê³µí•˜ëŠ” ë³´ë„ˆìŠ¤ì ìˆ˜  \tProduct2(int price) { \t\tthis.price = price; \t\tbonusPoint = (int)(price/10.0); \t}  \tProduct2() {} // ê¸°ë³¸ ìƒì„±ì }  class Tv2 extends Product2 { \tTv2() {  super(100);\t }  \tpublic String toString() { return \"Tv\"; } }  class Computer2 extends Product2 { \tComputer2() { super(200); } \tpublic String toString() { return \"Computer\"; } }  class Audio2 extends Product2 { \tAudio2() { super(50); } \tpublic String toString() { return \"Audio\"; } }  class Buyer2 {\t\t\t  // ê³ ê°, ë¬¼ê±´ì„ ì‚¬ëŠ” ì‚¬ëŒ \tint money = 1000;\t  // ì†Œìœ ê¸ˆì•¡ \tint bonusPoint = 0; // ë³´ë„ˆìŠ¤ì ìˆ˜ \tProduct2[] cart = new Product2[10];   // êµ¬ì…í•œ ì œí’ˆì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë°°ì—´ \tint i =0;\t\t\t  // Productë°°ì—´ì— ì‚¬ìš©ë  ì¹´ìš´í„°  \tvoid buy(Product2 p) { \t\tif(money &lt; p.price) { \t\t\tSystem.out.println(\"ì”ì•¡ì´ ë¶€ì¡±í•˜ì—¬ ë¬¼ê±´ì„ ì‚´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"); \t\t\treturn; \t\t}  \t\tmoney -= p.price;             // ê°€ì§„ ëˆì—ì„œ êµ¬ì…í•œ ì œí’ˆì˜ ê°€ê²©ì„ ëº€ë‹¤. \t\tbonusPoint += p.bonusPoint;   // ì œí’ˆì˜ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¥¼ ì¶”ê°€í•œë‹¤. \t\tcart[i++] = p;                // ì œí’ˆì„ Product[] cartì— ì €ì¥í•œë‹¤. \t\tSystem.out.println(p + \"ì„/ë¥¼ êµ¬ì…í•˜ì…¨ìŠµë‹ˆë‹¤.\"); \t}  \tvoid summary() {\t              // êµ¬ë§¤í•œ ë¬¼í’ˆì— ëŒ€í•œ ì •ë³´ë¥¼ ìš”ì•½í•´ì„œ ë³´ì—¬ ì¤€ë‹¤. \t\tint sum = 0;                 // êµ¬ì…í•œ ë¬¼í’ˆì˜ ê°€ê²©í•©ê³„ \t\tString itemList =\"\";         // êµ¬ì…í•œ ë¬¼í’ˆëª©ë¡  \t\t// ë°˜ë³µë¬¸ì„ ì´ìš©í•´ì„œ êµ¬ì…í•œ ë¬¼í’ˆì˜ ì´ ê°€ê²©ê³¼ ëª©ë¡ì„ ë§Œë“ ë‹¤. \t\tfor(int i=0; i&lt;cart.length;i++) { \t\t\tif(cart[i]==null) break; \t\t\tsum += cart[i].price; \t\t\titemList += cart[i] + \", \"; \t\t} \t\tSystem.out.println(\"êµ¬ì…í•˜ì‹  ë¬¼í’ˆì˜ ì´ê¸ˆì•¡ì€ \" + sum + \"ë§Œì›ì…ë‹ˆë‹¤.\"); \t\tSystem.out.println(\"êµ¬ì…í•˜ì‹  ì œí’ˆì€ \" + itemList + \"ì…ë‹ˆë‹¤.\"); \t} }  class Ex7_9 { \tpublic static void main(String args[]) { \t\tBuyer2 b = new Buyer2();  \t\tb.buy(new Tv2()); \t\tb.buy(new Computer2()); \t\tb.buy(new Audio2()); \t\tb.summary(); \t} }     ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP7/",
        "teaser": ""
      },{
        "title": "REST API with SpringBoot(1)",
        "excerpt":"ë°±ê¸°ì„ ë‹˜ ê°•ì˜ ì •ë¦¬   REST API with SpringBoot(1)   REST API with SpringBoot(2)   REST API with SpringBoot(3)   REST API with SpringBoot(4)       REST      ì¸í„°ë„· ìƒì˜ ì‹œìŠ¤í…œ ê°„ì˜ ìƒí˜¸ ìš´ìš©ì„±ì„ ì œê³µí•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜   ì‹œìŠ¤í…œ ì œ ê°ê°ì˜ ë…ë¦½ì ì¸ ì§„í™”ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•œ ë°©ë²•       RESTì˜ ì¡°ê±´   1 2 3 4 5 6 Client-Server Stateless Cache Uniform Interface Layered System Code-on-Demand(optional)       ëŒ€ê°œ, REST APIê°€ ì•„ë‹Œ ì´ìœ ëŠ” Uniform Interface ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì´ë‹¤.       Uniform Interface ì¡°ê±´   1 2 3 4 Identification of resources Manipulation of resources through representations Self-descriptive messages Hypermedia as the engine of application state(HATEOAS)      Identification of resources            ë¦¬ì†ŒìŠ¤ê°€ URIë¡œ ì‹ë³„ì´ ë˜ëŠ”ì§€           Manipulation of resources through representations                     ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ëŠ”ì§€           â†’ jsoní˜•ì‹ìœ¼ë¡œ ì •ë³´ë¥¼ í‘œí˜„í•´ì„œ ì‘ë‹µí•˜ëŠ”ì§€                   Self-descriptive messages   Hypermedia as the engine of application state(HATEOAS)       ëŒ€ë¶€ë¶„ 3, 4ë²ˆì„ ë§Œì¡±í•˜ì§€ ëª»í•´ REST APIê°€ ì•„ë‹ˆë‹¤.       1. self-descriptive messages      ë©”ì‹œì§€ ìŠ¤ìŠ¤ë¡œ ë©”ì‹œì§€ì— ëŒ€í•œ ì„¤ëª…ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.   ì„œë²„ê°€ ë³€í•´ì„œ ë©”ì‹œì§€ê°€ ë³€í•´ë„ í´ë¼ì´ì–¸íŠ¸ëŠ” ê·¸ ë©”ì‹œì§€ë¥¼ ë³´ê³  í•´ì„ì´ ê°€ëŠ¥í•˜ë‹¤.   í™•ì¥ ê°€ëŠ¥í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜   ë°©ë²•1 - Media Typeì„ ì •ì˜í•˜ëŠ” ë°©ë²• (Content-typeìœ¼ë¡œ ì§€ì •)   1 2 3 HTTP/1.1 200 OK Content-Type: application/ecsimsw.subways+json {\"id\":1, \"name\":\"ì ì‹¤ì—­\"}   ë°©ë²•2 - link headerì— ëª…ì„¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë§í¬ë¥¼ ë„£ìŒ   1 2 3 4 HTTP/1.1 200 OK Content-Type: application/json Link: &lt;https://ecsimsw.com/docs/subway&gt;; rel=\"profile\" {\"id\":1, \"name\":\"ì ì‹¤ì—­\"}   â†’ ë¸Œë¼ìš°ì €ë“¤ì´ ì•„ì§ ìŠ¤íŒ©ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ, ëŒ€ì•ˆìœ¼ë¡œ HALì˜ ë§í¬ ë°ì´í„°ì— profile ë§í¬ ì¶”ê°€       2. HATEOAS      í•˜ì´í¼ë¯¸ë””ì–´(ë§í¬)ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ë³€í™”ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.   ë§í¬ ì •ë³´ë¥¼ ë™ì ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.   ë°©ë²•1 - ë°ì´í„°ì— ë§í¬ ì œê³µ (HAL)   HAL: Hypertext Application Language ìœ¼ë¡œ json,xmlì½”ë“œ ë‚´ì˜ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë§í¬ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•œ íŠ¹ë³„í•œ ë°ì´í„° íƒ€ì…      application/hal+json   application/hal+xml   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 {   \"data\": { // HAL JSONì˜ ë¦¬ì†ŒìŠ¤ í•„ë“œ     \"id\": 1000,     \"name\": \"ê²Œì‹œê¸€ 1\",     \"content\": \"HAL JSONì„ ì´ìš©í•œ ì˜ˆì‹œ JSON\"   },   \"_links\": { // HAL JSONì˜ ë§í¬ í•„ë“œ     \"self\": {       \"href\": \"http://localhost:8080/api/article/1000\" // í˜„ì¬ api ì£¼ì†Œ     },     \"profile\": {       \"href\": \"http://localhost:8080/docs#query-article\" // í•´ë‹¹ apiì˜ ë¬¸ì„œ     },     \"next\": {       \"href\": \"http://localhost:8080/api/article/1001\" // article ì˜ ë‹¤ìŒ api ì£¼ì†Œ     },     \"prev\": {       \"href\": \"http://localhost:8080/api/article/999\" // articleì˜ ì´ì „ api ì£¼ì†Œ     }   } }   ë°©ë²•2 - ë§í¬ í—¤ë”ë‚˜ Locationì„ ì œê³µ   1 2 3 4 5 6 HTTP/1.1 200 OK Content-Type: application/json Link:&lt;/subways/1/times&gt;; rel=\"times\",      &lt;/subways/1/detail&gt;; rel=\"detail\"  {\"id\":1,\"name\":\"ì ì‹¤ì—­\"}  ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API"],
        "url": "/spring/Java-REST-API(1)/",
        "teaser": ""
      },{
        "title": "REST API with SpringBoot(2)",
        "excerpt":"ë°±ê¸°ì„ ë‹˜ ê°•ì˜ ì •ë¦¬   REST API with SpringBoot(1)   REST API with SpringBoot(2)   REST API with SpringBoot(3)   REST API with SpringBoot(4)       project dependencies          Event ë„ë©”ì¸ êµ¬í˜„   events/Event.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 package me.whiteship.demoinflearnrestapi.events;  import lombok.*;  import javax.persistence.*; import java.time.LocalDateTime;  @Entity @Builder @AllArgsConstructor @NoArgsConstructor @Getter @Setter @EqualsAndHashCode(of = \"id\") public class Event {      @Id     @GeneratedValue     private Integer id;     private String name;     private String description;     private LocalDateTime beginEnrollmentDatetime;     private LocalDateTime closeEnrollmentDatetime;     private LocalDateTime beginEventDatetime;     private LocalDateTime endEventDatetime;     private String location;     private int basePrice;     private int maxPrice;     private int limitIfEnrollment;     private boolean offline;     private boolean free;      @Enumerated(EnumType.STRING)     private EventStatus eventStatus; }   events/EventStatus.java   1 2 3 4 5 6 package me.whiteship.demoinflearnrestapi.events;  public enum EventStatus {      DRAFT, PUBLISHED, BEGAN_ENROLLMENT }       ìƒì„±ìë¥¼ ìë™ ìƒì„±í•´ì£¼ëŠ” Lombok ì–´ë…¸í…Œì´ì…˜      @NoArgsConstructor: íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì   @AllArgsConstructor: ëª¨ë“  í•„ë“œ ê°’ì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ìƒì„±ì   @RequiredArgsConstructor: finalì´ë‚˜ @NonNull ì¸ í•„ë“œ ê°’ë§Œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ìƒì„±ì       @EqualsAndHashCode   equalsì™€ hashcodeë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜      equals: ë‘ ê°ì²´ì˜ ë‚´ìš©ì´ ê°™ì€ì§€, ë™ë“±ì„±ì„ ë¹„êµ   hashcode: ë‘ ê°ì²´ê°€ ê°™ì€ ê°ì²´ì¸ì§€, ë™ì¼ì„±ì„ ë¹„êµ   exclude: toStringì˜ excludeì™€ ë§ˆì°¬ê°€ì§€ë¡œ í¬í•¨ì‹œí‚¤ì§€ ì•Šìœ¼ë ¤ë©´ â€˜exclude={í•„ë“œëª…}â€™ ì‘ì„±   of: ì—°ê´€ê´€ê³„ê°€ ë³µì¡í•´ì§ˆ ë•Œ, stack overflowê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— id ê°’ë§Œ ì£¼ë¡œ ì‚¬ìš©       @Dataë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì    í•˜ë‚˜ì˜ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§ì€ ë©”ì†Œë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ë©´ í¸ë¦¬í•œ ê²ƒì´ ì‚¬ì‹¤ì´ì§€ë§Œ, ORM(Object Relational Mapping)ì—ì„œ ì£¼ì˜í•´ì•¼ í•¨   ì„œë¡œ ë¬´í•œ ë°˜ë³µ í˜¸ì¶œì´ ì§„í–‰ë˜ë©´ì„œ stack overflowë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ëª‡ë¼ì¸ ê¸¸ì–´ì§€ë”ë¼ë„ @Getter, @Setter, @ToString ë“± ë”°ë¡œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŒ       @Builderë¥¼ ì‚¬ìš©í•  ë•Œ @AllArgsConstructorê°€ í•„ìš”í•œ ì´ìœ ?   ë¹Œë”ëŠ” í•„ë“œì˜ ì´ˆê¸°í™” ì‘ì—…ì„ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ”ë° @NoArgsConstructor ì™€ ê°™ì´ ìƒì„±ìì— ë©¤ë²„ë³€ìˆ˜ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì˜ë¯¸ê°€ ì—†ë‹¤. ë”°ë¼ì„œ @Builderë¥¼ ì‚¬ìš©í•  ë•Œ @AllArgsConstructorë¥¼ ì •ì˜í•˜ê±°ë‚˜ ì „ì²´ ë©¤ë²„ë³€ìˆ˜ë¥¼ ê°–ëŠ” ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤.       Event í…ŒìŠ¤íŠ¸ êµ¬í˜„   events/EventControllerTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 package me.whiteship.demoinflearnrestapi.events;  import com.fasterxml.jackson.databind.ObjectMapper; import org.junit.Test; import org.junit.runner.RunWith; import org.mockito.Mockito; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest; import org.springframework.boot.test.mock.mockito.MockBean; import org.springframework.hateoas.MediaTypes; import org.springframework.http.HttpHeaders; import org.springframework.http.MediaType; import org.springframework.test.context.junit4.SpringRunner; import org.springframework.test.web.servlet.MockMvc;  import java.time.LocalDateTime;  import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post; import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print; import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;  @RunWith(SpringRunner.class) @WebMvcTest public class EventControllerTests {      @Autowired     MockMvc mockMvc;      @Autowired     ObjectMapper objectMapper;      @MockBean     EventRepository eventRepository;      @Test     public void createEvent() throws Exception {         Event event = Event.builder()                 .name(\"Spring\")                 .description(\"REST API development with Spring\")                 .beginEnrollmentDatetime(LocalDateTime.of(2022, 1, 18, 14, 21, 22))                 .closeEnrollmentDatetime(LocalDateTime.of(2022, 1, 19, 14, 21, 22))                 .beginEventDatetime(LocalDateTime.of(2022, 1, 25, 14, 21, 22))                 .endEventDatetime(LocalDateTime.of(2022, 1, 26, 14, 21, 22))                 .basePrice(100)                 .maxPrice(200)                 .limitIfEnrollment(100)                 .location(\"ê°•ë‚¨ì—­\")                 .build();          event.setId(10);         Mockito.when(eventRepository.save(event)).thenReturn(event);          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .accept(MediaTypes.HAL_JSON)                 .content(objectMapper.writeValueAsString(event)))                 .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ                 .andExpect(status().isCreated())                 .andExpect(jsonPath(\"id\").exists())                 .andExpect(header().exists(HttpHeaders.LOCATION))                 .andExpect(header().string(HttpHeaders.CONTENT_TYPE, MediaTypes.HAL_JSON_VALUE));     }  }        @WebMvcTest      MVCë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸, ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ëŠ” í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš©   @SpringBootTest ë³´ë‹¤ ê°€ë²¼ìš´ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥   MockBean, MockMVCë¥¼ ìë™ êµ¬ì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ í•¨   ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸       @Autowired MockMvc mockMvc;      ìŠ¤í”„ë§ MVC í…ŒìŠ¤íŠ¸ í•µì‹¬ í´ë˜ìŠ¤   ì›¹ ì„œë²„ë¥¼ ë„ìš°ì§€ ì•Šê³ ë„ ìŠ¤í”„ë§ MVC (DispatcherServlet)ê°€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ìì£¼ ì“°ì„       mockMvcì˜ ë©”ì†Œë“œ           perform()       ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ì—­í• . ê²°ê³¼ë¡œ ResultActions ê°ì²´ë¥¼ ë°›ìœ¼ë©°, ResultActions ê°ì²´ëŠ” ë¦¬í„´ ê°’ì„ ê²€ì¦í•˜ê³  í™•ì¸ í•  ìˆ˜ ìˆëŠ” andExpect() ë©”ì†Œë“œë¥¼ ì œê³µí•´ì¤Œ.            get(), post(), put(), delete()       HTTPë©”ì†Œë“œë¥¼ ê²°ì •í•  ìˆ˜ ìˆìŒ. ì¸ìë¡œëŠ” ê²½ë¡œë¥¼ ë³´ë‚´ì¤Œ            andExpect()       ì‘ë‹µì„ ê²€ì¦í•˜ëŠ” ì—­í•               ìƒíƒœì½”ë“œ(status())       ë·°(view()): ë¦¬í„´í•˜ëŠ” ë·° ì´ë¦„ì„ ê²€ì¦       ë¦¬ë‹¤ì´ë ‰íŠ¸(redirect()): ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‘ë‹µì„ ê²€ì¦       ëª¨ë¸ ì •ë³´(model()): ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì €ì¥í•œ ëª¨ë¸ë“¤ì˜ ì •ë³´ ê²€ì¦       ì‘ë‹µ ì •ë³´ ê²€ì¦(content()): ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ê²€ì¦í•´ì¤Œ                andDo(print())       ìš”ì²­/ì‘ë‹µ ì „ì²´ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ           ObjectMapper   Object â†’ Serialize(ì§ë ¬í™”) â†’ JSON   JSON â†’ Deserialize(ì—­ì§ë ¬í™”) â†’ Object       Mockito ë€?   ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Java mocking framework   Mockito.when().thenReturn(): ê²°ê³¼ì— ë”°ë¼ íŠ¹ì • ê°’ì„ ë°˜í™˜   Mockito.when().thenThrow(): ê²°ê³¼ì— ë”°ë¼ ì—ëŸ¬ ë°œìƒ ì‹œí‚´   1 2 3 4 5 // get(0)ì´ í˜¸ì¶œë˜ë©´ \"first\"ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. when(mockedList.get(0)).thenReturn(\"first\");  // get(1)ì´ í˜¸ì¶œë˜ë©´ RuntimeException ì—ëŸ¬ë¥¼ ë°œìƒí•©ë‹ˆë‹¤. when(mockedList.get(1)).thenThrow(new RuntimeException());       events/EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package me.whiteship.demoinflearnrestapi.events;  import lombok.RequiredArgsConstructor; import org.springframework.hateoas.MediaTypes; import org.springframework.http.ResponseEntity; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestBody; import org.springframework.web.bind.annotation.RequestMapping;  import java.net.URI;  import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.linkTo;  @Controller @RequestMapping(value = \"/api/events\", produces = MediaTypes.HAL_JSON_VALUE) @RequiredArgsConstructor public class EventController {      private final EventRepository eventRepository;      @PostMapping     public ResponseEntity createEvent(@RequestBody Event event) {         Event newEvent = this.eventRepository.save(event);         URI createdUri = linkTo(EventController.class).slash(newEvent.getId()).toUri();         event.setId(10);         return ResponseEntity.created(createdUri).body(event);     } }       HATEOAS ë€?      REST APIì˜ í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ ì¤‘ í•œê°€ì§€   íŠ¹ì • API ìš”ì²­ ì‹œ ë¦¬ì†ŒìŠ¤ ì •ë³´ë¥¼ ë°›ì•„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ë•Œ ë¦¬ì†ŒìŠ¤ ì •ë³´ ë¿ë§Œ ì•„ë‹ˆë¼ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë‹¤ì–‘í•œ ë§í¬ ì •ë³´ë¥¼ ë¦¬ì†ŒìŠ¤ ì •ë³´ì™€ í•¨ê»˜ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ì˜ë¯¸   HATEOASë¥¼ ì ìš©í•˜ë©´ API ìš”ì²­ ì‹œ, Resourceì™€ Linksë¥¼ í•¨ê»˜ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆìŒ   ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 import org.springframework.hateoas.MediaTypes; import org.springframework.hateoas.server.mvc.WebMvcLinkBuilder; import org.springframework.http.ResponseEntity; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestBody; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  import java.net.URI; import java.util.IdentityHashMap; import java.util.Map;  import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.linkTo;  @RestController @RequestMapping(value = \"/api/member\", produces = MediaTypes.HAL_JSON_VALUE) public class MemberController {      private Map&lt;Integer, Member&gt; db = new IdentityHashMap&lt;&gt;();     private Integer id = 1;      @PostMapping     public ResponseEntity createMember(@RequestBody Member member) {         member.setId(id++);          /*             /api/member         */         WebMvcLinkBuilder listLink= linkTo(MemberController.class);                  /*             /api/member/{id}         */         WebMvcLinkBuilder selfLink = listLink.slash(member.getId());          //hateoas model ê°ì²´ ìƒì„±         MemberModel memberModel = new MemberModel(member);          //list link         memberModel.add(listLink.withRel(\"list\"));          //self link         memberModel.add(selfLink.withSelfRel());          //update link         memberModel.add(selfLink.withRel(\"update\"));          return ResponseEntity.created(selfLink.toUri()).body(memberModel);     } }   POST /api/member ìš”ì²­ ì‹œ HAL_JSON ë°©ì‹ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜ (HALì´ë€ Hypertext Application Languageì˜ ì•½ìë¡œ JSON ë˜ëŠ” XML ì½”ë“œ ë‚´ì˜ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë§í¬ì™€ ê°™ì€ í•˜ì´í¼ ë¯¸ë””ì–´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ í‘œì¤€ ê·œì¹™)   ë°˜í™˜ ì •ë³´ëŠ” ìƒì„±ëœ Member ì •ë³´ì™€ Memberì™€ ê´€ë ¨ëœ ë§í¬ ì •ë³´ë¡œ êµ¬ì„±ë¨   ë§í¬ ì •ë³´ëŠ” list, self, update ì •ë³´ë¥¼ ë‹´ê³  ìˆìŒ       ê²°ê³¼     ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API"],
        "url": "/spring/JAVA-REST-API(2)/",
        "teaser": ""
      },{
        "title": "REST API with SpringBoot(3)",
        "excerpt":"ë°±ê¸°ì„ ë‹˜ ê°•ì˜ ì •ë¦¬   REST API with SpringBoot(1)   REST API with SpringBoot(2)   REST API with SpringBoot(3)   REST API with SpringBoot(4)       Event ìƒì„± API êµ¬í˜„: ì…ë ¥ê°’ ì œí•œí•˜ê¸°   dtoë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ê°’ì„ ì œí•œí•˜ê³  dto â†” entity ë¥¼ ë³€ê²½í•  ë• modelMapper ë¥¼ ì‚¬ìš©í•¨       ModelMapperë€?   ì–´ë–¤ Objectì— ìˆëŠ” í•„ë“œê°’ë“¤ì„ Objectë¡œ Mapping ì‹œì¼œì¤Œ   ì¦‰, dto to entityë¥¼ ì¼ì¼íˆ ì •ì˜í•  í•„ìš”ì—†ìŒ       ì£¼ì˜!   ModelMapperëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ê¸°ë³¸ ìƒì„±ìë¥¼ ì´ìš©í•´ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  setterë¥¼ ì´ìš©í•´ ë§¤í•‘ì„ í•œë‹¤. ë”°ë¼ì„œ, setter ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ì§€ ì•Šìœ¼ë©´ jsonìœ¼ë¡œ nullì´ ë°˜í™˜ëœë‹¤.       [ì°¸ê³ ]   ModelMapperë¥¼ ì‚¬ìš©í•˜ë©´ì„œ setterë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì£¼ë©´ ëœë‹¤   â†’ Access level ì´ publicì¸ë° ì´ë¥¼ Private levelë¡œ ë°”ê¾¸ë©´ setter ì—†ì´ë„ í•„ë“œëª…ì´ ê°™ì„ ë•Œ ìë™ ë§¤í•‘ ì²˜ë¦¬ í•  ìˆ˜ ìˆìŒ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 package me.yessm.airbnbjava.config;  import org.modelmapper.ModelMapper; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration;  @Configuration public class Config {     @Bean     public ModelMapper modelMapper() {         ModelMapper modelMapper = new ModelMapper();         modelMapper.getConfiguration()                 .setFieldAccessLevel(org.modelmapper.config.Configuration.AccessLevel.PRIVATE)                 .setFieldMatchingEnabled(true);         return modelMapper;     } }       pom.xml ì— ì¶”ê°€   1 2 3 4 5 6 &lt;!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --&gt; &lt;dependency&gt;     &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;     &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;     &lt;version&gt;2.4.5&lt;/version&gt; &lt;/dependency&gt;   EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 ...  private final ModelMapper modelMapper;  ...  \tEvent event = modelMapper.map(eventDto, Event.class);  \t/* ìœ„ì˜ ì½”ë“œì™€ ì•„ë˜ ì½”ë“œëŠ” ê°™ë‹¤. \tEvent event = Event.builder()                 .name(eventDto.getName())                 .description(eventDto.getDescription())                 ...                 .build();*/       ì…ë ¥ê°’ì„ ì œí•œí•˜ê¸° ìœ„í•´ entity ëŒ€ì‹  DTOë¥¼ ì‚¬ìš©   DTO ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?      ì—”í‹°í‹° ë‚´ë¶€ êµ¬í˜„ì„ ìº¡ìŠí™”í•  ìˆ˜ ìˆë‹¤   í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„ ë³„í•  ìˆ˜ ìˆë‹¤.   ìˆœí™˜ì°¸ì¡°ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.   validation ì½”ë“œì™€ ëª¨ë¸ë§ ì½”ë“œë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.       @WebMvcTestëŠ” ìŠ¬ë¼ì´ì‹± í…ŒìŠ¤íŠ¸   â†’ í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ ì „í™˜í•¨(@SpringBootTest)       EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 package me.whiteship.demoinflearnrestapi.events;  import lombok.RequiredArgsConstructor; import org.modelmapper.ModelMapper; import org.springframework.hateoas.MediaTypes; import org.springframework.http.ResponseEntity; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestBody; import org.springframework.web.bind.annotation.RequestMapping;  import java.net.URI;  import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.linkTo;  @Controller @RequestMapping(value = \"/api/events\", produces = MediaTypes.HAL_JSON_VALUE) @RequiredArgsConstructor public class EventController {      private final EventRepository eventRepository;      private final ModelMapper modelMapper;      @PostMapping     public ResponseEntity createEvent(@RequestBody EventDto eventDto) {         Event event = modelMapper.map(eventDto, Event.class);         Event newEvent = eventRepository.save(event);         URI createdUri =linkTo(EventController.class).slash(newEvent.getId()).toUri();         return ResponseEntity.created(createdUri).body(event);     } }    EventControllerTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 package me.whiteship.demoinflearnrestapi.events;  import com.fasterxml.jackson.databind.ObjectMapper; import org.hamcrest.Matchers; import org.junit.Test; import org.junit.runner.RunWith; import org.mockito.Mockito; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc; import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest; import org.springframework.boot.test.context.SpringBootTest; import org.springframework.boot.test.mock.mockito.MockBean; import org.springframework.hateoas.MediaTypes; import org.springframework.http.HttpHeaders; import org.springframework.http.MediaType; import org.springframework.test.context.junit4.SpringRunner; import org.springframework.test.web.servlet.MockMvc;  import java.time.LocalDateTime;  import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post; import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print; import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;  @RunWith(SpringRunner.class) @WebMvcTest public class EventControllerTests {      @Autowired     MockMvc mockMvc;      @Autowired     ObjectMapper objectMapper;      @MockBean     EventRepository eventRepository;      @Test     public void createEvent() throws Exception {         Event event = Event.builder()                 .id(100)                 .name(\"Spring\")                 .description(\"REST API development with Spring\")                 .beginEnrollmentDatetime(LocalDateTime.of(2022, 1, 18, 14, 21, 22))                 .closeEnrollmentDatetime(LocalDateTime.of(2022, 1, 19, 14, 21, 22))                 .beginEventDatetime(LocalDateTime.of(2022, 1, 25, 14, 21, 22))                 .endEventDatetime(LocalDateTime.of(2022, 1, 26, 14, 21, 22))                 .basePrice(100)                 .maxPrice(200)                 .limitIfEnrollment(100)                 .location(\"ê°•ë‚¨ì—­\")                 .free(true)                 .offline(false)                 .eventStatus(EventStatus.PUBLISHED)                 .build();          Mockito.when(eventRepository.save(event)).thenReturn(event);          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .accept(MediaTypes.HAL_JSON)                 .content(objectMapper.writeValueAsString(event)))                 .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ                 .andExpect(status().isCreated())                 .andExpect(jsonPath(\"id\").exists())                 .andExpect(header().exists(HttpHeaders.LOCATION))                 .andExpect(header().string(HttpHeaders.CONTENT_TYPE, MediaTypes.HAL_JSON_VALUE))                 .andExpect(jsonPath(\"id\").value(Matchers.not(100)))                 .andExpect(jsonPath(\"free\").value(Matchers.not(true)))                 .andExpect(jsonPath(\"eventStatus\").value(Matchers.not(EventStatus.DRAFT)));     }  }   ì´ë ‡ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ newEvent.getId() ë¶€ë¶„ì—ì„œ NullPointExceptionì´ ë°œìƒí•¨   â†’ why?   ëª¨í‚¤í† ì—ì„œ ì‘ì„±í•œ eventRepository.save(event)ê°€ í˜¸ì¶œë˜ë©´ event ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ì½”ë“œ   newEvent ê°ì²´ì™€ testì½”ë“œì—ì„œ ì‘ì„±í•œ event ê°ì²´ëŠ” ë‹¤ë¥¸ ê°ì²´ì´ê¸° ë•Œë¬¸ì— save()ë¥¼ í˜¸ì¶œí•´ë„ ë°˜í™˜ë˜ëŠ” ê°’ì´ null. ë”°ë¼ì„œ, ì˜¤ë¥˜ ë°œìƒ       Event ìƒì„± API êµ¬í˜„: Bad Request ì²˜ë¦¬í•˜ê¸°   ì…ë ¥ê°’ ì´ì™¸ì— ì—ëŸ¬ ë°œìƒ, ì…ë ¥ê°’ì´ ë¹„ì–´ìˆëŠ” ê²½ìš° ì—ëŸ¬ ë°œìƒ   ì…ë ¥ ê°’ì´ ì •í•´ì§„ ê°’ ì´ì™¸ì— ë‹¤ë¥¸ ê°’ì´ ë“¤ì–´ì™”ì„ ê²½ìš°      ë¬´ì‹œí•˜ëŠ” ë°©ë²•: ìœ ì—°í•œ ë°©ë²•   ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ë°©ë²•: Bad Request ë°œìƒ       application.properties ì„¤ì •   1 spring.jackson.deserialization.fail-on-unknown-properties=true   EventControllerTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 \t \t...  \t@Test     @DisplayName(\"ì…ë ¥ ë°›ì„ ìˆ˜ ì—†ëŠ” ê°’ì„ ì‚¬ìš©í•œ ê²½ìš°ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” í…ŒìŠ¤íŠ¸\")     public void createEvent_Bad_Request() throws Exception {         Event event = Event.builder()                 .id(100)                 .name(\"Spring\")                 .description(\"REST API development with Spring\")                 .beginEnrollmentDateTime(LocalDateTime.of(2022, 1, 18, 14, 21, 22))                 .closeEnrollmentDateTime(LocalDateTime.of(2022, 1, 19, 14, 21, 22))                 .beginEventDateTime(LocalDateTime.of(2022, 1, 25, 14, 21, 22))                 .endEventDateTime(LocalDateTime.of(2022, 1, 26, 14, 21, 22))                 .basePrice(100)                 .maxPrice(200)                 .limitIfEnrollment(100)                 .location(\"ê°•ë‚¨ì—­\")                 .free(true)                 .offline(false)                 .eventStatus(EventStatus.PUBLISHED)                 .build();          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .accept(MediaTypes.HAL_JSON)                 .content(objectMapper.writeValueAsString(event)))                 .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ                 .andExpect(status().isBadRequest());     }  \t\t@Test     @DisplayName(\"ì…ë ¥ ê°’ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” í…ŒìŠ¤íŠ¸\")     public void createEvent_Bad_Request_Empty_Input() throws Exception {         EventDto eventDto = EventDto.builder().build();          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .content(objectMapper.writeValueAsString(eventDto)))                 .andExpect(status().isBadRequest());     }  \t...   EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 package me.whiteship.demoinflearnrestapi.events;  ...  @Controller @RequestMapping(value = \"/api/events\", produces = MediaTypes.HAL_JSON_VALUE) @RequiredArgsConstructor public class EventController {      private final EventRepository eventRepository;      private final ModelMapper modelMapper;      private final EventValidator eventValidator;      @PostMapping     public ResponseEntity createEvent(@RequestBody @Validated EventDto eventDto, Errors errors) {         if (errors.hasErrors()) {             return ResponseEntity.badRequest().build();         }          ...     } }   @Valid ë˜ëŠ” @Validated ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€   â†’ ìœ íš¨ì„± ê²€ì¦ ì§„í–‰   @ValidëŠ” controller ì—ì„œë§Œ ë™ì‘, ë‹¤ë¥¸ ê³„ì¸µì—ì„œëŠ” ê²€ì¦ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤   ë‹¤ë¥¸ ê³„ì¸µì—ì„œ ê²€ì¦ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ì„  @Validated ë¥¼ ì‚¬ìš©   (ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ìœ íš¨ì„± ê²€ì¦ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ê³  ì„œë¹„ìŠ¤ë‚˜ ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µì—ì„œëŠ” ìœ íš¨ì„± ê²€ì¦ì„ í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë°”ëŒì§í•¨)       ì˜ì¡´ì„± ì¶”ê°€(gradle, maven)   build.gradle   1 implementation 'org.springframework.boot:spring-boot-starter-validation'   pom.xml   1 2 3 4 5 6 \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;             &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;             &lt;version&gt;2.6.2&lt;/version&gt;         &lt;/dependency&gt;       ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ Request ê°ì²´ ì•ì— @Validate(@Valid) ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê³ , Errors ë¥¼ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ ì í•© ì—¬ë¶€ë¥¼ í™•ì¸   ErrorsëŠ” ë°˜ë“œì‹œ Request ê°ì²´ ë°”ë¡œ ë’¤ì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤.   (ë‘ê°œì˜ ê°ì²´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•œë‹¤ë©´ ê°ê°ì˜ ê°ì²´ ë’¤ì— Errors ì¡´ì¬í•´ì•¼ í•¨)   hasErrors() ë©”ì„œë“œë¥¼ í†µí•´ ì—ëŸ¬ return       EventDto.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 package me.whiteship.demoinflearnrestapi.events;  import com.sun.istack.NotNull; import lombok.AllArgsConstructor; import lombok.Builder; import lombok.Data; import lombok.NoArgsConstructor;  import javax.validation.constraints.Min; import javax.validation.constraints.NotEmpty; import java.time.LocalDateTime;  @Builder @NoArgsConstructor @AllArgsConstructor @Data public class EventDto {      @NotEmpty     private String name;     @NotEmpty     private String description;     @NotNull     private LocalDateTime beginEnrollmentDateTime;     @NotNull     private LocalDateTime closeEnrollmentDateTime;     @NotNull     private LocalDateTime beginEventDateTime;     @NotNull     private LocalDateTime endEventDateTime;     private String location;     @Min(0)     private int basePrice;     @Min(0)     private int maxPrice;     @Min(0)     private int limitIfEnrollment;  }   JSR í‘œì¤€ ìŠ¤í™ì€ ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì„ ì œê³µí•˜ê³  ìˆëŠ”ë°, ëŒ€í‘œì ì¸ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆë‹¤.      @NotNull: í•´ë‹¹ ê°’ì´ nullì´ ì•„ë‹Œì§€ ê²€ì¦í•¨   @NotEmpty: í•´ë‹¹ ê°’ì´ nullì´ ì•„ë‹ˆê³ , ë¹ˆ ìŠ¤íŠ¸ë§(â€œâ€) ì•„ë‹Œì§€ ê²€ì¦í•¨(â€œ â€œì€ í—ˆìš©ë¨)   @NotBlank: í•´ë‹¹ ê°’ì´ nullì´ ì•„ë‹ˆê³ , ê³µë°±(â€œâ€œê³¼ â€œ â€œ ëª¨ë‘ í¬í•¨)ì´ ì•„ë‹Œì§€ ê²€ì¦í•¨   @AssertTrue: í•´ë‹¹ ê°’ì´ trueì¸ì§€ ê²€ì¦í•¨   @Size: í•´ë‹¹ ê°’ì´ ì£¼ì–´ì§„ ê°’ ì‚¬ì´ì— í•´ë‹¹í•˜ëŠ”ì§€ ê²€ì¦í•¨(String, Collection, Map, Arrayì—ë„ ì ìš© ê°€ëŠ¥)   @Min: í•´ë‹¹ ê°’ì´ ì£¼ì–´ì§„ ê°’ë³´ë‹¤ ì‘ì§€ ì•Šì€ì§€ ê²€ì¦í•¨   @Max: í•´ë‹¹ ê°’ì´ ì£¼ì–´ì§„ ê°’ë³´ë‹¤ í¬ì§€ ì•Šì€ì§€ ê²€ì¦í•¨       ì…ë ¥ê°’ì´ ì˜ëª»ëœ ê²½ìš° ì—ëŸ¬ ë°œìƒ   EventValidator.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package me.whiteship.demoinflearnrestapi.events;  import org.springframework.stereotype.Component; import org.springframework.validation.Errors;  import java.time.LocalDateTime;  @Component public class EventValidator {      public void validate(EventDto eventDto, Errors errors) {         if (eventDto.getBasePrice() &gt; eventDto.getMaxPrice() &amp;&amp; eventDto.getMaxPrice() &gt; 0) {             errors.rejectValue(\"basePrice\", \"wrongValue\", \"BasePrice is wrong.\");             errors.rejectValue(\"maxPrice\", \"wrongValue\", \"MaxPrice is wrong.\");         }          LocalDateTime endEventDateTime = eventDto.getEndEventDateTime();         if(endEventDateTime.isBefore(eventDto.getBeginEventDateTime()) ||                 endEventDateTime.isBefore(eventDto.getCloseEnrollmentDateTime()) ||                 endEventDateTime.isBefore(eventDto.getBeginEnrollmentDateTime())) {             errors.rejectValue(\"endEventDateTime\", \"wrongValue\", \"EndEventDateTime is wrong.\");         }          // TODO beginEventDateTime         // TODO CloseEndrollmentDateTime     } }   @Componentë¥¼ ì´ìš©í•´ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì£¼ê³  EventController ì—ì„œ ì˜ì¡´ì„± ì£¼ì…í•´ì„œ ì‚¬ìš©   EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Controller @RequestMapping(value = \"/api/events\", produces = MediaTypes.HAL_JSON_VALUE) @RequiredArgsConstructor public class EventController {      ...      private final EventValidator eventValidator;      @PostMapping     public ResponseEntity createEvent(@RequestBody @Validated EventDto eventDto, Errors errors) {         ...          eventValidator.validate(eventDto, errors);         if (errors.hasErrors()) {             return ResponseEntity.badRequest().build();         }  \t\t\t\t...  \t\t} }       í…ŒìŠ¤íŠ¸ ì„¤ëª…ìš© ì–´ë…¸í…Œì´ì…˜ ìƒì„±   TestDescription.java   1 2 3 4 5 6 7 8 9 10 11 12 13 package me.whiteship.demoinflearnrestapi.common;  import java.lang.annotation.ElementType; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; import java.lang.annotation.Target;  @Target(ElementType.METHOD) @Retention(RetentionPolicy.SOURCE) public @interface TestDescription {      String value(); }   EventControllerTests.java   1 2 3 4 5 6 ...  // ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ @TestDescription(\"ì •ìƒì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í…ŒìŠ¤íŠ¸\")  ...       @Target   Java compilerê°€ annotationì´ ì–´ë””ì— ì ìš©ë ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©   1 2 3 4 5 6 7 8 9 10 ElementType.PACKAGE : íŒ¨í‚¤ì§€ ì„ ì–¸ ElementType.TYPE : íƒ€ì… ì„ ì–¸ ElementType.ANNOTATION_TYPE : ì–´ë…¸í…Œì´ì…˜ íƒ€ì… ì„ ì–¸ ElementType.CONSTRUCTOR : ìƒì„±ì ì„ ì–¸ ElementType.FIELD : ë©¤ë²„ ë³€ìˆ˜ ì„ ì–¸ ElementType.LOCAL_VARIABLE : ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸ ElementType.METHOD : ë©”ì„œë“œ ì„ ì–¸ ElementType.PARAMETER : ì „ë‹¬ì¸ì ì„ ì–¸ ElementType.TYPE_PARAMETER : ì „ë‹¬ì¸ì íƒ€ì… ì„ ì–¸ ElementType.TYPE_USE : íƒ€ì… ì„ ì–¸   @Retention   ì‹¤ì œë¡œ ì ìš©ë˜ê³  ìœ ì§€ë˜ëŠ” ë²”ìœ„ë¥¼ ì˜ë¯¸   1 2 3 4 5 6 // ì»´íŒŒì¼ ì´í›„ì—ë„ JVMì— ì˜í•´ì„œ ê³„ì† ì°¸ì¡°ê°€ ê°€ëŠ¥. ë¦¬í”Œë ‰ì…˜, ë¡œê¹…ì— ë§ì´ ì‚¬ìš© RetentionPolicy.RUNTIME // ì»´íŒŒì¼ëŸ¬ê°€ í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•  ë•Œê¹Œì§€ ìœ íš¨ RetentionPolicy.CLASS // ì»´íŒŒì¼ ì „ê¹Œì§€ë§Œ ìœ íš¨. ì»´íŒŒì¼ ì´í›„ì—ëŠ” ì‚¬ë¼ì§ RetentionPolicy.SOURCE   ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ ìƒì„±í•´ë„ ë˜ì§€ë§Œ Junitì—ì„œ ì§€ì›í•´ì£¼ëŠ” @DisplayNameì„ ì‚¬ìš©í•´ë„ ëœë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API","TEST CODE"],
        "url": "/spring/Java-REST-API(3)/",
        "teaser": ""
      },{
        "title": "ìŠ¤í”„ë§ HATEOAS",
        "excerpt":"ë°±ê¸°ì„ ë‹˜ ê°•ì˜ ì •ë¦¬   REST API with SpringBoot(1)   REST API with SpringBoot(2)   REST API with SpringBoot(3)   REST API with SpringBoot(4)       RESTê°€ ì˜ ì ìš©ëœ APIë¼ë©´ ì‘ë‹µì— HATEOASë¥¼ ì§€ì¼œì•¼ í•œë‹¤       HATEOASë€?   REST APIì—ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë„˜ê²¨ì¤„ ë•Œ íŠ¹ì • ë¶€ê°€ì ì¸ ë¦¬ì†ŒìŠ¤ì˜ ë§í¬ ì •ë³´ë¥¼ ë„˜ê²¨ì¤Œ   links ìš”ì†Œë¥¼ í†µí•´ href ê°’ì˜ í˜•íƒœë¡œ ë³´ë‚´ì£¼ë©´ ìì› ìƒíƒœì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ë§í¬ì— ìˆëŠ” URLì„ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ëœë‹¤.       HATEOAS ë§í¬ì— ë“¤ì–´ê°€ëŠ” ì •ë³´ëŠ” í˜„ì¬ Resourceì˜ ê´€ê³„ì´ì ë§í¬ì˜ ë ˆí¼ëŸ°ìŠ¤ ì •ë³´ì¸ RELê³¼ í•˜ì´í¼ë§í¬ì¸ HREF ë‘ ì •ë³´ê°€ ë“¤ì–´ê°„ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 // ì˜ˆì‹œ \"_links\":{ \t\"self\":{ \t\t\"href\":\"http://localhost/api/events/1\" \t}, \t\"query-events\":{ \t\t\"href\":\"http://localhost/api/events\" \t}, \t\"update-event\":{ \t\t\"href\":\"http://localhost/api/events/1\" \t} }          ë§í¬ë¥¼ ë§Œë“œëŠ” ê¸°ëŠ¥            ë¬¸ìì—´ì„ ê°€ì§€ê³  ë§Œë“¤ê¸°       ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë©”ì†Œë“œë¡œ ë§Œë“¤ê¸°           ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“œëŠ” ê¸°ëŠ¥            ë¦¬ì†ŒìŠ¤: ë°ì´í„°(ì‘ë‹µë³¸ë¬¸) + ë§í¬           ë§í¬ ì°¾ì•„ì£¼ëŠ” ê¸°ëŠ¥            traverson       LinkDiscoverers           ë§í¬            HREF       REL(relation, ê´€ê³„)                    self           profile           update-event           query-events           â€¦                               ì°¸ê³ )      ResourceSupportÂ is nowÂ RepresentationModel   ResourceÂ is nowÂ EntityModel   ResourcesÂ is nowÂ CollectionModel   PagedResourcesÂ is nowÂ PagedModel       í…ŒìŠ¤íŠ¸ ì½”ë“œ   ë§í¬ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶”ê°€      self: ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë§í¬   query-events: ì´ë²¤íŠ¸ ëª©ë¡ì— ëŒ€í•œ ë§í¬   update-event: ì´ë²¤íŠ¸ ìˆ˜ì •ì— ëŒ€í•œ ë§í¬   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \t\t...  \t\t@Test     @DisplayName(\"ì •ìƒì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í…ŒìŠ¤íŠ¸\")     @TestDescription(\"ì •ìƒì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í…ŒìŠ¤íŠ¸\")     public void createEvent() throws Exception {         EventDto event = EventDto.builder()                 .name(\"Spring\")                 ...                 .build();          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .accept(MediaTypes.HAL_JSON)                 .content(objectMapper.writeValueAsString(event)))                 .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ                 ...                 .andExpect(jsonPath(\"_links.self\").exists()) // 3ê°€ì§€ì˜ ë§í¬ê°€ ì‘ë‹µìœ¼ë¡œ ì˜¤ê¸¸ ê¸°ë‹¤                 .andExpect(jsonPath(\"_links.query-events\").exists())                 .andExpect(jsonPath(\"_links.update-event\").exists());       EventResource   RepresentationModelë¥¼ ìƒì†ë°›ê³  Event ê°ì²´ë¥¼ ì£¼ì…ë°›ì•„ Getter ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ ì œê³µí•˜ëŠ” ë°©ë²•   EventResource.java - ì²«ë²ˆì§¸ ë°©ë²•   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 package me.whiteship.demoinflearnrestapi.events;  import com.fasterxml.jackson.annotation.JsonUnwrapped; import org.springframework.hateoas.EntityModel; import org.springframework.hateoas.Link; import org.springframework.hateoas.RepresentationModel;  public class EventResource extends RepresentationModel {      @JsonUnwrapped     private Event event;      public EventResource(Event event) {         this.event = event;     }      public Event getEvent() {         return event;     } }   @JsonUnwrapped ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?   ì‘ë‹µì„ ë³´ë‚¼ ë•Œ jackson(ObjectMapper)ì„ ì‚¬ìš©í•˜ì—¬ serializationì„ ì§„í–‰   ì¦‰, BeanSerializerë¥¼ ì‚¬ìš©í•˜ëŠ”ë° BeanSerializerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•„ë“œëª…ì„ ì‚¬ìš©. ë”°ë¼ì„œ, Test Assertionì¡°ê±´ì— ë§ì§€ì•ŠìŒ   ì‘ë‹µ ë‚´ë¶€ì— eventê°€ ì¡´ì¬í•˜ê³  eventì— ì •ë³´ê°€ ìˆëŠ” êµ¬ì¡°   â†’ @JsonUnwrappedëŠ” propertyë¥¼ serialize/deserialize ê³¼ì •ì—ì„œÂ í‰íƒ„í™”(flattened)í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /* ì˜ˆì‹œ */  /* @JsonUnwrapped ì ìš© ì „ */ {   \"id\" : 1,   \"name\" : {     \"firstName\" : \"seungmi\",     \"lastName\" : \"noh\"   } }  /* @JsonUnwrapped ì ìš© ì „ */ {   \"id\" : 1,   \"firstName\" : \"seungmi\",   \"lastName\" : \"noh\" }   EventResource.java - ë‘ë²ˆì§¸ ë°©ë²•   1 2 3 4 5 6 7 public class EventResource extends EntityModel&lt;Event&gt; {      public EventResource(Event event, Link... links) {         super(event, Arrays.asList(links));         add(linkTo(EventController.class).slash(event.getId()).withSelfRel());     } }   RepresentationModel í•˜ìœ„ í´ë˜ìŠ¤ì— EntityModel ë¼ëŠ” í´ë˜ìŠ¤ê°€ ì¡´ì¬   Tì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ê°€ contentë¡œ ë§¤í•‘ ë˜ëŠ”ë° getContent() ë©”ì†Œë“œì— @JsonUnwrappedê°€ ë¶™ì–´ìˆê¸° ë•Œë¬¸ì— unwrap ëœë‹¤.   ë”°ë¼ì„œ, ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ ë‘ë²ˆì§¸ ë°©ë²•ì„ ì‚¬ìš©í•´ë„ ëœë‹¤.       EventController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @PostMapping     public ResponseEntity createEvent(@RequestBody @Validated EventDto eventDto, Errors errors) {         if (errors.hasErrors()) {             return ResponseEntity.badRequest().body(errors);         }          eventValidator.validate(eventDto, errors);         if (errors.hasErrors()) {             return ResponseEntity.badRequest().body(errors);         }          Event event = modelMapper.map(eventDto, Event.class);         event.update();         Event newEvent = eventRepository.save(event);         WebMvcLinkBuilder selfLinkBuilder = linkTo(EventController.class).slash(newEvent.getId());         URI createdUri = selfLinkBuilder.toUri();         EventResource eventResource = new EventResource(event);         eventResource.add(linkTo(EventController.class).withRel(\"query-events\"));         eventResource.add(selfLinkBuilder.withRel(\"update-event\"));         return ResponseEntity.created(createdUri).body(eventResource);     }   withRel(): ì´ ë§í¬ê°€ ë¦¬ì†ŒìŠ¤ì™€ ì–´ë–¤ ê´€ê³„ì— ìˆëŠ”ì§€ ê´€ê³„ë¥¼ ì •ì˜ í•  ìˆ˜ ìˆë‹¤   withSelRel(): ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë§í¬ë¥¼ type-safeí•œ methodë¡œ ì œê³µí•œë‹¤  ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API","TEST CODE","HATEOAS"],
        "url": "/spring/Java-HATEOAS/",
        "teaser": ""
      },{
        "title": "REST API with SpringBoot(4)",
        "excerpt":"ë°±ê¸°ì„ ë‹˜ ê°•ì˜ ì •ë¦¬   REST API with SpringBoot(1)   REST API with SpringBoot(2)   REST API with SpringBoot(3)   REST API with SpringBoot(4)       Event ìƒì„± API êµ¬í˜„: Bad Request ì‘ë‹µ ë³¸ë¬¸ ë§Œë“¤ê¸°   serialization: â€˜ê°ì²´ â†’ jsonâ€™ ìœ¼ë¡œ ë³€í™˜   deserialization: â€˜json â†’ ê°ì²´â€™ ë¡œ ë³€í™˜       bodyì— Bad Requestì— ëŒ€í•œ ì‘ë‹µì„ ë„£ê³  ì‹¶ì€ë° ê´€ë ¨ ì—ëŸ¬ëŠ” Errorsì— ë‹´ê²¨ ìˆë‹¤   ê·¸ëŸ°ë°, bodyì— errorë¥¼ ë‹´ìœ¼ë ¤ê³  í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤!   ì›ì¸ì€ errorë¥¼ jsonìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—..   ê·¸ë ‡ë‹¤ë©´ ì™œ event ê°ì²´ëŠ” bodyì— ë‹´ì„ ìˆ˜ ìˆì—ˆì„ê¹Œ?   â†’ eventëŠ” objectMapperë¥¼ ì‚¬ìš©í•´ì„œ ê°ì²´ì—ì„œ jsonìœ¼ë¡œ ë³€í™˜í•˜ëŠ”ë° ì´ë•Œ bean serializationì„ ì‚¬ìš©í•´ì„œ ìë°”ë¹ˆ ìŠ¤íŒ©ì„ ì¤€ìˆ˜í–ˆê¸° ë•Œë¬¸ì— ë³€í™˜í• ìˆ˜ ìˆì—ˆë˜ê²ƒ..       ë”°ë¼ì„œ, ì•„ë˜ ì½”ë“œì™€ ê°™ì´ errorë¥¼ serialization í•´ì£¼ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤.       common/ErrorsSerializer.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 package me.whiteship.demoinflearnrestapi.common;  import com.fasterxml.jackson.core.JsonGenerator; import com.fasterxml.jackson.databind.JsonSerializer; import com.fasterxml.jackson.databind.SerializerProvider; import org.springframework.boot.jackson.JsonComponent; import org.springframework.validation.Errors;  import java.io.IOException;  @JsonComponent public class ErrorsSerializer extends JsonSerializer&lt;Errors&gt; {      @Override     public void serialize(Errors errors, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {         jsonGenerator.writeStartArray();         errors.getFieldErrors().forEach(e -&gt; {             try {                 jsonGenerator.writeStartObject();                 jsonGenerator.writeStringField(\"field\", e.getField());                 jsonGenerator.writeStringField(\"objectName\", e.getObjectName());                 jsonGenerator.writeStringField(\"code\", e.getCode());                 jsonGenerator.writeStringField(\"defaultMessage\", e.getDefaultMessage());                 Object rejectedValue = e.getRejectedValue();                 if (rejectedValue != null) {                     jsonGenerator.writeStringField(\"rejectedValue\", rejectedValue.toString());                 }                 jsonGenerator.writeEndObject();             } catch (IOException e1) {                 e1.printStackTrace();             }         });          errors.getGlobalErrors().forEach(e -&gt; {             try {                 jsonGenerator.writeStartObject();                 jsonGenerator.writeStringField(\"objectName\", e.getObjectName());                 jsonGenerator.writeStringField(\"code\", e.getCode());                 jsonGenerator.writeStringField(\"defaultMessage\", e.getDefaultMessage());                 jsonGenerator.writeEndObject();             } catch (IOException e1) {                 e1.printStackTrace();             }         });         jsonGenerator.writeEndArray();     } }       @JsonComponent   ObjectMapper ì— Custom Serializerë¥¼ ë“±ë¡í•´ ì£¼ì–´ì•¼í•˜ëŠ”ë° Spring Bootì—ì„œ ì œê³µí•˜ëŠ” @JsonComponentë¥¼ ì‚¬ìš©í•˜ë©´ ì†ì‰½ê²Œ ë“±ë¡ì´ ê°€ëŠ¥í•˜ë‹¤.   Json Parser Online       Event ìƒì„± API êµ¬í˜„: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì ìš©   event.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ...  public void update() {     // Update free     if (this.basePrice == 0 &amp;&amp; this.maxPrice == 0) {         this.free = true;     } else {         this.free = false;     }      // Update offline     if (this.location == null || this.location.isBlank()) {         this.offline = false;     } else {         this.offline = true;     } }  ...   entity test code ì‘ì„±   EventTest.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 \t...  \t@Test     public void testFree() {         // Given         Event event = Event.builder()                 .basePrice(0)                 .maxPrice(0)                 .build();          // When         event.update();          // Then         assertThat(event.isFree()).isTrue();          // Given         event = Event.builder()                 .basePrice(100)                 .maxPrice(0)                 .build();          // When         event.update();          // Then         assertThat(event.isFree()).isFalse();          // Given         event = Event.builder()                 .basePrice(0)                 .maxPrice(100)                 .build();          // When         event.update();          // Then         assertThat(event.isFree()).isFalse();     }  \t...   ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ ì‘ì„±í•´ë„ ë˜ì§€ë§Œ ì¤‘ë³µì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ë³´ê¸°ì— ì¢‹ì§€ ì•Šë‹¤   JUnitParams ë¥¼ ì´ìš©í•˜ì—¬ ì¤‘ë³µì½”ë“œë¥¼ ì¤„ì´ê³  í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.       Event ìƒì„± API êµ¬í˜„: ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸   dependency ì¶”ê°€   pom.xml   1 2 3 4 5 6 &lt;dependency&gt;     &lt;groupId&gt;pl.pragmatists&lt;/groupId&gt;     &lt;artifactId&gt;JUnitParams&lt;/artifactId&gt;     &lt;version&gt;1.1.1&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;   EventTest.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 package me.whiteship.demoinflearnrestapi.events;  import junitparams.JUnitParamsRunner;  import junitparams.Parameters;  import org.junit.Test; import org.junit.runner.RunWith;  import static org.assertj.core.api.Assertions.assertThat;  @RunWith(JUnitParamsRunner.class) public class EventTest {      ...      //parametersFor: ì»¨ë²¤ì…˜     private Object[] parametersForTestFree() {         return new Object[]{                 new Object[]{0, 0, true},                 new Object[]{100, 0, false},                 new Object[]{0, 100, false},                 new Object[]{100, 200, false}         };     }      @Test     @Parameters(method = \"parametersForTestFree\")     public void testFree(int basePrice, int maxPrice, boolean isFree) {         // Given         Event event = Event.builder()                 .basePrice(basePrice)                 .maxPrice(maxPrice)                 .build();          // When         event.update();          // Then         assertThat(event.isFree()).isEqualTo(isFree);     }      private Object[] parametersForTestOffline() {         return new Object[]{                 new Object[]{\"ê°•ë‚¨\", true},                 new Object[]{null, false},                 new Object[]{\"\", false}         };     }      @Test     @Parameters     public void testOffline(String location, boolean isOffline) {         // Given         Event event = Event.builder()                 .location(location)                 .build();          // When         event.update();          // Then         assertThat(event.isOffline()).isEqualTo(isOffline);     } }   parametersForí…ŒìŠ¤íŠ¸ì½”ë“œëª…   â†’ ì´ë ‡ê²Œ ì‘ì„±í•˜ë©´ ì•Œì•„ì„œ ë§µí•‘í•´ì¤€ë‹¤.(ì½”ë“œ ì»¨ë²¤ì…˜, ê·œì•½)  ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API","TEST CODE"],
        "url": "/spring/Java-REST-API(4)/",
        "teaser": ""
      },{
        "title": "ìŠ¤í”„ë§ REST Docs",
        "excerpt":"ìŠ¤í”„ë§ REST Docsë€?   ì§€ê¸ˆê¹Œì§€ ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ API ëª…ì„¸ì— ëŒ€í•œ ì •ë³´ ë¬¸ì„œí™” ë˜ëŠ” Swagger ì‚¬ìš©ì„ í•´ì™”ìŠµë‹ˆë‹¤.   ë§¤ë²ˆ API ê°œë°œì„ í•  ë•Œë§ˆë‹¤ ëª…ì„¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ë¬¸ì„œí™”ë¥¼ í•˜ì˜€ê³ ,   Swagger ì‚¬ìš©ì„ í•˜ë©´ ë§¤ë²ˆ Controller, DTO ë‹¨ì— Swagger ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì•¼ í•˜ë‹ˆ ì½”ë“œê°€ ë³´ê¸°ê°€ ì¢‹ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.   ê·¸ëŸ¬ë‹¤ê°€ API ëª…ì„¸ì„œë¥¼ ìë™í™”í•´ì£¼ëŠ” ê²ƒì„ ì°¾ë‹¤ê°€ Spring Rest Docs ì°¾ê²Œ ë˜ì–´, Spring Rest Docsë¥¼ ì ìš©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.       ìŠ¤í”„ë§ REST Docs ì¥ì    ì½”ë“œì— ì˜í–¥ì´ ì—†ë‹¤. ë”°ë¼ì„œ, ì½”ë“œê°€ ë°”ë€Œì–´ë„ ë¬¸ì„œë¥¼ ë”°ë¡œ ìˆ˜ì •í•  í•„ìš”ì—†ì´ ìë™ìœ¼ë¡œ ë³€ê²½ëœë‹¤.       plugin, dependency ì¶”ê°€   Maven - pom.xml   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 \t\t\t\t\t\t&lt;plugin&gt;                 &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;                 &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;                 &lt;version&gt;1.5.3&lt;/version&gt;                 &lt;executions&gt;                     &lt;execution&gt;                         &lt;id&gt;generate-docs&lt;/id&gt;                         &lt;phase&gt;prepare-package&lt;/phase&gt;                         &lt;goals&gt;                             &lt;goal&gt;process-asciidoc&lt;/goal&gt;                         &lt;/goals&gt;                         &lt;configuration&gt;                             &lt;backend&gt;html&lt;/backend&gt;                             &lt;doctype&gt;book&lt;/doctype&gt;                         &lt;/configuration&gt;                     &lt;/execution&gt;                 &lt;/executions&gt;                 &lt;dependencies&gt;                     &lt;dependency&gt;                         &lt;groupId&gt;org.springframework.restdocs&lt;/groupId&gt;                         &lt;artifactId&gt;spring-restdocs-asciidoctor&lt;/artifactId&gt;                         &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;                     &lt;/dependency&gt;                 &lt;/dependencies&gt;             &lt;/plugin&gt;             &lt;plugin&gt;                 &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;                 &lt;version&gt;2.7&lt;/version&gt;                 &lt;executions&gt;                     &lt;execution&gt;                         &lt;id&gt;copy-resources&lt;/id&gt;                         &lt;phase&gt;prepare-package&lt;/phase&gt;                         &lt;goals&gt;                             &lt;goal&gt;copy-resources&lt;/goal&gt;                         &lt;/goals&gt;                         &lt;configuration&gt;                             &lt;outputDirectory&gt;                                 ${project.build.outputDirectory}/static/docs                             &lt;/outputDirectory&gt;                             &lt;resources&gt;                                 &lt;resource&gt;                                     &lt;directory&gt;                                         ${project.build.directory}/generated-docs                                     &lt;/directory&gt;                                 &lt;/resource&gt;                             &lt;/resources&gt;                         &lt;/configuration&gt;                     &lt;/execution&gt;                 &lt;/executions&gt;             &lt;/plugin&gt;   docs ì¡°ê°: ./target/generated-snippets//.adoc   docs build: ./target/classes/static/docs/index.html       Gradle - build.gradle (7ë²„ì „)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 plugins { \tid 'org.springframework.boot' version '2.5.8' \tid 'io.spring.dependency-management' version '1.0.11.RELEASE' \tid \"com.ewerk.gradle.plugins.querydsl\" version \"1.0.10\" \t// Spring REST Docs \tid 'org.asciidoctor.jvm.convert' version '3.3.2' \tid 'java' }  group = 'com.debrains' version = '0.0.1-SNAPSHOT' sourceCompatibility = '11'  configurations { \tcompileOnly { \t\textendsFrom annotationProcessor \t} \t// Spring REST Docs \tasciidoctorExtensions }  repositories { \tmavenCentral() }  dependencies {  \t...  \t// Spring REST Docs \tasciidoctorExtensions 'org.springframework.restdocs:spring-restdocs-asciidoctor' \ttestImplementation 'org.springframework.restdocs:spring-restdocs-mockmvc'  \t...  }  test { \tuseJUnitPlatform() }  ...  // Spring REST Docs ext { \tsnippetsDir = file('build/generated-snippets') }  test { \toutputs.dir snippetsDir }  asciidoctor { \tconfigurations 'asciidoctorExtensions' \tinputs.dir snippetsDir \tdependsOn test }  bootJar { \tdependsOn asciidoctor \tfrom (\"${asciidoctor.outputDir}/html5\") { \t\tinto 'static/docs' \t} }   docs ì¡°ê°: ./build/generated-snippets//.adoc   docs build: ./build/docs/asciidoc/index.html       ìŠ¤í”„ë§ REST Docs ìš”ì²­/ì‘ë‹µ ë³¸ë¬¸ ë¬¸ì„œí™”   EventControllerTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 package me.whiteship.demoinflearnrestapi.events;  ...  import static org.springframework.restdocs.mockmvc.MockMvcRestDocumentation.document;  ...  @RunWith(SpringRunner.class) @SpringBootTest @AutoConfigureMockMvc @AutoConfigureRestDocs public class EventControllerTests {      @Autowired     MockMvc mockMvc;      @Autowired     ObjectMapper objectMapper;      @Test     @DisplayName(\"ì •ìƒì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í…ŒìŠ¤íŠ¸\")     public void createEvent() throws Exception {         EventDto event = EventDto.builder()                 ...                 .build();          mockMvc.perform(post(\"/api/events/\")                 .contentType(MediaType.APPLICATION_JSON)                 .accept(MediaTypes.HAL_JSON)                 .content(objectMapper.writeValueAsString(event)))                 .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ                 ...                 .andDo(document(\"create-event\"));     } \t... }   @AutoConfigureRestDocs ì–´ë…¸í…Œì´ì…˜, andDo(document(â€œcreate-eventâ€));   ë¬¸ì„œëŠ” ìƒì„±ë˜ì§€ë§Œ í¬ë§·íŒ…ì´ ì•ˆë˜ì–´ ë³´ê¸°ì— ì•ˆì¢‹ë‹¤   1 2 3 4 5 6 7 8 9 [source,http,options=\"nowrap\"] ---- HTTP/1.1 201 Created Location: http://localhost:8080/api/events/1 Content-Type: application/hal+json Content-Length: 565  {\"id\":1,\"name\":\"Spring\",\"description\":\"REST API development with Spring\",\"beginEnrollmentDateTime\":\"2022-01-18T14:21:22\",\"closeEnrollmentDateTime\":\"2022-01-19T14:21:22\",\"beginEventDateTime\":\"2022-01-25T14:21:22\",\"endEventDateTime\":\"2022-01-26T14:21:22\",\"location\":\"ê°•ë‚¨ì—­\",\"basePrice\":100,\"maxPrice\":200,\"limitIfEnrollment\":100,\"offline\":true,\"free\":false,\"eventStatus\":\"DRAFT\",\"_links\":{\"self\":{\"href\":\"http://localhost:8080/api/events/1\"},\"query-events\":{\"href\":\"http://localhost:8080/api/events\"},\"update-event\":{\"href\":\"http://localhost:8080/api/events/1\"}}} ----      ë”°ë¼ì„œ, ì•„ë˜ì™€ ê°™ì´ ë¹ˆí•˜ë‚˜ë¥¼ ë§Œë“¤ì–´ì£¼ê³  EventControllerTests.java ì— ë¹ˆì„ ë“±ë¡í•´ì¤Œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package me.whiteship.demoinflearnrestapi.common;  import org.springframework.boot.test.autoconfigure.restdocs.RestDocsMockMvcConfigurationCustomizer; import org.springframework.boot.test.context.TestConfiguration; import org.springframework.context.annotation.Bean;  import static org.springframework.restdocs.operation.preprocess.Preprocessors.prettyPrint;  @TestConfiguration public class RestDocsConfiguration {      @Bean     public RestDocsMockMvcConfigurationCustomizer restDocsMockMvcConfigurationCustomizer() {         return configurer -&gt; configurer.operationPreprocessors()                 .withRequestDefaults(prettyPrint())                 .withResponseDefaults(prettyPrint());     } }   EventControllerTests.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package me.whiteship.demoinflearnrestapi.events;  ...  import static org.springframework.restdocs.mockmvc.MockMvcRestDocumentation.document;  ...  @RunWith(SpringRunner.class) @SpringBootTest @AutoConfigureMockMvc @AutoConfigureRestDocs @Import(RestDocsConfiguration.class) public class EventControllerTests {  \t\t...  }   ê·¸ëŸ¼ í¬ë§·íŒ…ë˜ì–´ ì´ì˜ê²Œ ë‚˜ì˜´   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 [source,http,options=\"nowrap\"] ---- HTTP/1.1 201 Created Location: http://localhost:8080/api/events/1 Content-Type: application/hal+json Content-Length: 733  {   \"id\" : 1,   \"name\" : \"Spring\",   \"description\" : \"REST API development with Spring\",   \"beginEnrollmentDateTime\" : \"2022-01-18T14:21:22\",   \"closeEnrollmentDateTime\" : \"2022-01-19T14:21:22\",   \"beginEventDateTime\" : \"2022-01-25T14:21:22\",   \"endEventDateTime\" : \"2022-01-26T14:21:22\",   \"location\" : \"ê°•ë‚¨ì—­\",   \"basePrice\" : 100,   \"maxPrice\" : 200,   \"limitIfEnrollment\" : 100,   \"offline\" : true,   \"free\" : false,   \"eventStatus\" : \"DRAFT\",   \"_links\" : {     \"self\" : {       \"href\" : \"http://localhost:8080/api/events/1\"     },     \"query-events\" : {       \"href\" : \"http://localhost:8080/api/events\"     },     \"update-event\" : {       \"href\" : \"http://localhost:8080/api/events/1\"     }   } } ----       ìŠ¤í”„ë§ REST Docs ë§í¬ ë¬¸ì„œí™”, ìš”ì²­/ì‘ë‹µ í—¤ë”,í•„ë“œ ë¬¸ì„œí™”   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 \tmockMvc.perform(post(\"/api/events/\")         .contentType(MediaType.APPLICATION_JSON)         .accept(MediaTypes.HAL_JSON)         .content(objectMapper.writeValueAsString(event)))         .andDo(print()) // ì–´ë–¤ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ         .andExpect(status().isCreated())         .andExpect(jsonPath(\"id\").exists())         .andExpect(header().exists(HttpHeaders.LOCATION))         .andExpect(header().string(HttpHeaders.CONTENT_TYPE, MediaTypes.HAL_JSON_VALUE))         .andExpect(jsonPath(\"id\").value(Matchers.not(100)))         .andExpect(jsonPath(\"free\").value(false))         .andExpect(jsonPath(\"offline\").value(true))         .andExpect(jsonPath(\"eventStatus\").value(Matchers.not(EventStatus.DRAFT)))         .andDo(document(\"create-event\",                 links(                         linkWithRel(\"self\").description(\"link to self\"),                         linkWithRel(\"query-events\").description(\"link to query events\"),                         linkWithRel(\"update-event\").description(\"link to update an existing\")                 ),                 requestHeaders(                         headerWithName(HttpHeaders.ACCEPT).description(\"accept header\"),                         headerWithName(HttpHeaders.CONTENT_TYPE).description(\"content type\")                 ),                 requestFields(                         fieldWithPath(\"name\").description(\"Name of new event\"),                         fieldWithPath(\"description\").description(\"description of new event\"),                         fieldWithPath(\"beginEnrollmentDateTime\").description(\"date time of begin of new event\"),                         fieldWithPath(\"closeEnrollmentDateTime\").description(\"date time of close of new event\"),                         fieldWithPath(\"beginEventDateTime\").description(\"date time of begin of new event\"),                         fieldWithPath(\"endEventDateTime\").description(\"date time of end of new event\"),                         fieldWithPath(\"location\").description(\"location of new event\"),                         fieldWithPath(\"basePrice\").description(\"base price of new event\"),                         fieldWithPath(\"maxPrice\").description(\"max price of new event\"),                         fieldWithPath(\"limitIfEnrollment\").description(\"limit of enrollment\")                 ),                 responseHeaders(                         headerWithName(HttpHeaders.LOCATION).description(\"location header\"),                         headerWithName(HttpHeaders.CONTENT_TYPE).description(\"content type\")                 ), \t\t\t\t//relaxedResponseFields(                 responseFields(                         fieldWithPath(\"id\").description(\"identifier of new event\"),                         fieldWithPath(\"name\").description(\"Name of new event\"),                         fieldWithPath(\"description\").description(\"description of new event\"),                         fieldWithPath(\"beginEnrollmentDateTime\").description(\"date time of begin of new event\"),                         fieldWithPath(\"closeEnrollmentDateTime\").description(\"date time of close of new event\"),                         fieldWithPath(\"beginEventDateTime\").description(\"date time of begin of new event\"),                         fieldWithPath(\"endEventDateTime\").description(\"date time of end of new event\"),                         fieldWithPath(\"location\").description(\"location of new event\"),                         fieldWithPath(\"basePrice\").description(\"base price of new event\"),                         fieldWithPath(\"maxPrice\").description(\"max price of new event\"),                         fieldWithPath(\"limitIfEnrollment\").description(\"limit of enrollment\"),                         fieldWithPath(\"free\").description(\"it tells is this event is free or not\"),                         fieldWithPath(\"offline\").description(\"it tells is this offline is free or not\"),                         fieldWithPath(\"eventStatus\").description(\"event status\"), \t\t\t\t\t\tfieldWithPath(\"_links.self.href\").description(\"link to self\"),                         fieldWithPath(\"_links.query-events.href\").description(\"link to query events\"),                         fieldWithPath(\"_links.update-event.href\").description(\"link to update event\")                 )         ));       responseFields ë¥¼ ì“°ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤   ì‘ë‹µì—ëŠ” linksë„ í¬í•¨ëœë‹¤ê³  ìƒê°í•˜ëŠ”ë° linksì— ëŒ€í•œ ì •ì˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ ë°œìƒ   responseFields ëŒ€ì‹  relaxedResponseFields ë¥¼ ì¨ì¤„ìˆ˜ ìˆë‹¤.       relaxed prefix(ì ‘ë‘ì–´) ë¥¼ ì‚¬ìš©í•  ë•Œ      ì¥ì : ë¬¸ì„œ ì¼ë¶€ë¶„ë§Œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆë‹¤.   ë‹¨ì : ì •í™•í•œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ì§€ ëª»í•œë‹¤.       ì‘ë‹µ í•„ë“œì— links ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹¤ì‹œ ì¨ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì§€ë§Œ relaxed ëŠ” ê°€ê¸‰ì  ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¶Œì¥í•¨       src&gt;main&gt;asciidoc&gt;index.adoc ìƒì„±   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 = REST API Guide ë°±ê¸°ì„ ; :doctype: book :icons: font :source-highlighter: highlightjs :toc: left :toclevels: 4 :sectlinks: :operation-curl-request-title: Example request :operation-http-response-title: Example response  [[overview]] = ê°œìš”  [[overview-http-verbs]] == HTTP ë™ì‚¬  ë³¸ REST APIì—ì„œ ì‚¬ìš©í•˜ëŠ” HTTP ë™ì‚¬(verbs)ëŠ” ê°€ëŠ¥í•œí•œ í‘œì¤€ HTTPì™€ REST ê·œì•½ì„ ë”°ë¦…ë‹ˆë‹¤.  |=== | ë™ì‚¬ | ìš©ë¡€  | `GET` | ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©  | `POST` | ìƒˆ ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©  | `PUT` | ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©  | `PATCH` | ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ë¥¼ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©  | `DELETE` | ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•  ë•Œ ì‚¬ìš© |===  [[overview-http-status-codes]] == HTTP ìƒíƒœ ì½”ë“œ  ë³¸ REST APIì—ì„œ ì‚¬ìš©í•˜ëŠ” HTTP ìƒíƒœ ì½”ë“œëŠ” ê°€ëŠ¥í•œí•œ í‘œì¤€ HTTPì™€ REST ê·œì•½ì„ ë”°ë¦…ë‹ˆë‹¤.  |=== | ìƒíƒœ ì½”ë“œ | ìš©ë¡€  | `200 OK` | ìš”ì²­ì„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬í•¨  | `201 Created` | ìƒˆ ë¦¬ì†ŒìŠ¤ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í•¨. ì‘ë‹µì˜ `Location` í—¤ë”ì— í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ URIê°€ ë‹´ê²¨ìˆë‹¤.  | `204 No Content` | ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •í•¨.  | `400 Bad Request` | ì˜ëª»ëœ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°. ì‘ë‹µ ë³¸ë¬¸ì— ë” ì˜¤ë¥˜ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ìˆë‹¤.  | `404 Not Found` | ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ì—†ìŒ. |===  [[overview-errors]] == ì˜¤ë¥˜  ì—ëŸ¬ ì‘ë‹µì´ ë°œìƒí–ˆì„ ë•Œ (ìƒíƒœ ì½”ë“œ &gt;= 400), ë³¸ë¬¸ì— í•´ë‹¹ ë¬¸ì œë¥¼ ê¸°ìˆ í•œ JSON ê°ì²´ê°€ ë‹´ê²¨ìˆë‹¤. ì—ëŸ¬ ê°ì²´ëŠ” ë‹¤ìŒì˜ êµ¬ì¡°ë¥¼ ë”°ë¥¸ë‹¤.  include::{snippets}/errors/response-fields.adoc[]  ì˜ˆë¥¼ ë“¤ì–´, ì˜ëª»ëœ ìš”ì²­ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ë§Œë“¤ë ¤ê³  í–ˆì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ `400 Bad Request` ì‘ë‹µì„ ë°›ëŠ”ë‹¤.  include::{snippets}/errors/http-response.adoc[]  [[overview-hypermedia]] == í•˜ì´í¼ë¯¸ë””ì–´  ë³¸ REST APIëŠ” í•˜ì´í¼ë¯¸ë””ì–´ì™€ ì‚¬ìš©í•˜ë©° ì‘ë‹µì— ë‹´ê²¨ìˆëŠ” ë¦¬ì†ŒìŠ¤ëŠ” ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë§í¬ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ì‘ë‹µì€ http://stateless.co/hal_specification.html[Hypertext Application from resource to resource. Language (HAL)] í˜•ì‹ì„ ë”°ë¥¸ë‹¤. ë§í¬ëŠ” `_links`ë¼ëŠ” í‚¤ë¡œ ì œê³µí•œë‹¤. ë³¸ APIì˜ ì‚¬ìš©ì(í´ë¼ì´ì–¸íŠ¸)ëŠ” URIë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šì•„ì•¼ í•˜ë©°, ë¦¬ì†ŒìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ë§í¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.  [[resources]] = ë¦¬ì†ŒìŠ¤  [[resources-index]] == ì¸ë±ìŠ¤  ì¸ë±ìŠ¤ëŠ” ì„œë¹„ìŠ¤ ì§„ì…ì ì„ ì œê³µí•œë‹¤.  [[resources-index-access]] === ì¸ë±ìŠ¤ ì¡°íšŒ  `GET` ìš”ì²­ì„ ì‚¬ìš©í•˜ì—¬ ì¸ë±ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.  operation::index[snippets='response-body,http-response,links']  [[resources-events]] == ì´ë²¤íŠ¸  ì´ë²¤íŠ¸ ë¦¬ì†ŒìŠ¤ëŠ” ì´ë²¤íŠ¸ë¥¼ ë§Œë“¤ê±°ë‚˜ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•œë‹¤.  [[resources-events-list]] === ì´ë²¤íŠ¸ ëª©ë¡ ì¡°íšŒ  `GET` ìš”ì²­ì„ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ì˜ ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.  operation::get-events[snippets='response-fields,curl-request,http-response,links']  [[resources-events-create]] === ì´ë²¤íŠ¸ ìƒì„±  `POST` ìš”ì²­ì„ ì‚¬ìš©í•´ì„œ ìƒˆ ì´ë²¤íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.  operation::create-event[snippets='request-fields,curl-request,http-request,request-headers,http-response,response-headers,response-fields,links']  [[resources-events-get]] === ì´ë²¤íŠ¸ ì¡°íšŒ  `Get` ìš”ì²­ì„ ì‚¬ìš©í•´ì„œ ê¸°ì¡´ ì´ë²¤íŠ¸ í•˜ë‚˜ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.  operation::get-event[snippets='request-fields,curl-request,http-response,links']  [[resources-events-update]] === ì´ë²¤íŠ¸ ìˆ˜ì •  `PUT` ìš”ì²­ì„ ì‚¬ìš©í•´ì„œ ê¸°ì¡´ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.  operation::update-event[snippets='request-fields,curl-request,http-response,links']       EventController.java   profile ê´€ë ¨ ì½”ë“œ ì¶”ê°€ (í…ŒìŠ¤íŠ¸ ì½”ë“œì—ë„ ì¶”ê°€í•´ì£¼ê¸°)   1 eventResource.add(Link.of(\"/docs/index.html#resources-events-create\").withRel(\"profile\"));       maven&gt;Lifecycle&gt;package ì‹¤í–‰í•˜ë©´ target/classes/static/docs ì— index.html íŒŒì¼ì´ ìƒì„±ëœë‹¤.       http://localhost:8080/docs/index.html ë¡œ ì ‘ì†í•˜ë©´ REST ë¬¸ì„œ ì‘ì„± ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","Java","REST API","TEST CODE"],
        "url": "/spring/Java-Spring-REST-Docs/",
        "teaser": ""
      },{
        "title": "ê°ì²´ì§€í–¥ê°œë…(ì¶”ìƒí´ë˜ìŠ¤, ì¶”ìƒë©”ì„œë“œ, ì¶”ìƒí´ë˜ìŠ¤ì˜ ì‘ì„±, ì¸í„°í˜ì´ìŠ¤, ì¸í„°í˜ì´ìŠ¤ ì¥ì , ì¸í„°í˜ì´ìŠ¤ ì´í•´, ë””í´íŠ¸ ë©”ì„œë“œ)",
        "excerpt":"6. ì¶”ìƒ í´ë˜ìŠ¤(abstract class)   6.1 ì¶”ìƒí´ë˜ìŠ¤ë€?      ë¯¸ì™„ì„±(ë¶€ì¡±í•œ) ì„¤ê³„ë„. ë¯¸ì™„ì„± ë©”ì„œë“œë¥¼ ê°–ê³  ìˆëŠ” í´ë˜ìŠ¤   1 2 3 4 abstract class Player { // ì¶”ìƒí´ë˜ìŠ¤(ë¯¸ì™„ì„± í´ë˜ìŠ¤) \tabstract void play(int pos); // ì¶”ìƒë©”ì„œë“œ(ëª¸í†µ{}ì´ ì—†ëŠ” ë¯¸ì™„ì„± ë©”ì„œë“œ) \tabstract void stop(); // ì¶”ìƒë©”ì„œë“œ }       í´ë˜ìŠ¤ ë˜ëŠ” ë©”ì„œë“œ ì•ì— abstract ë¥¼ ë¶™ì´ë©´ ì¶”ìƒ í´ë˜ìŠ¤ ë˜ëŠ” ì¶”ìƒ ë©”ì„œë“œì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.          ë‹¤ë¥¸ í´ë˜ìŠ¤ ì‘ì„±ì— ë„ì›€ì„ ì£¼ê¸° ìœ„í•œ ê²ƒ. ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶ˆê°€.   1 Player p = new Player(); // ì—ëŸ¬. ì¶”ìƒ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶ˆê°€          ìƒì†ì„ í†µí•´ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì™„ì„±í•´ì•¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê°€ëŠ¥   1 2 3 4 5 6 7 class AudioPlayer extends Player { \tvoid play(int pos) { /* ë‚´ìš© ìƒëµ */ } // ì¶”ìƒ ë©”ì„œë“œ êµ¬í˜„ \tvoid stop() { /* ë‚´ìš© ìƒëµ */ } // ì¶”ìƒ ë©”ì„œë“œ êµ¬í˜„(êµ¬í˜„ì´ë€ ì¶”ìƒ ë©”ì„œë“œ ëª¸í†µ ë§Œë“¤ê¸°) }  AudioPlayer ap = new AudioPlayer(); // OK. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¨ Player ap = new AudioPlayer(); // ë‹¤í˜•ì„± (Plyer = ë¶€ëª¨, AudioPlayer **= ìì†**)       6.2 ì¶”ìƒ ë©”ì„œë“œ(abstract method)      ë¯¸ì™„ì„± ë©”ì„œë“œ. êµ¬í˜„ë¶€(ëª¸í†µ, {})ê°€ ì—†ëŠ” ë©”ì„œë“œ   1 2 /* ì£¼ì„ì„ í†µí•´ ì–´ë–¤ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ëª©ì ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ëŠ”ì§€ ì„¤ëª…í•œë‹¤. */ abstract ë¦¬í„´íƒ€ì… ë©”ì„œë“œì´ë¦„();       ë¯¸ì™„ì„± ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?   ë©”ì„œë“œì˜ ë‚´ìš©ì´ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ.   ë”°ë¼ì„œ, ì¡°ìƒ í´ë˜ìŠ¤ â†’ ì„ ì–¸ë¶€ + ì£¼ì„ ì‘ì„±(ì–´ë–¤ ê¸°ëŠ¥ì„ ìˆ˜í–‰í• ì§€)   ì‹¤ì œ ë‚´ìš©ì€ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ë„ë¡ ë¹„ì›Œ ë‘ëŠ” ê²ƒ.          ê¼­ í•„ìš”í•˜ì§€ë§Œ ìì†ë§ˆë‹¤ ë‹¤ë¥´ê²Œ êµ¬í˜„ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ê²½ìš° ì¶”ìƒ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 abstract class Player { \tabstract void play(int pos); // ì¶”ìƒë©”ì„œë“œ \tabstract void stop(); // ì¶”ìƒë©”ì„œë“œ }  class AudioPlayer extends Player { \tvoid play(int pos) { /* ë‚´ìš© ìƒëµ */ } // ì¶”ìƒë©”ì„œë“œë¥¼ êµ¬í˜„ \tvoid stop() { /* ë‚´ìš© ìƒëµ */ } // ì¶”ìƒë©”ì„œë“œë¥¼ êµ¬í˜„ }  // ì•„ë˜ëŠ” ì¼ë¶€ë§Œ êµ¬í˜„. ë”°ë¼ì„œ, ë¯¸ì™„ì„±ì´ê¸° ë•Œë¬¸ì— ì¶”ìƒë©”ì„œë“œê°€ ìˆë‹¤ëŠ”ê±¸ ì•Œë ¤ì£¼ê¸° ìœ„í•´ abstract ë¶™ì„ abstract class AbstractPlayer extends Player { \tvoid play(int pos) { /* ë‚´ìš© ìƒëµ */ } // ì¶”ìƒë©”ì„œë“œ êµ¬í˜„ \t// abstract void stop(); // ì´ê²Œ ìˆëŠ”ê±°. }          ì¶”ìƒ ë©”ì„œë“œ í˜¸ì¶œ ê°€ëŠ¥ (í˜¸ì¶œí•  ë•ŒëŠ” ì„ ì–¸ë¶€ë§Œ í•„ìš”)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 abstract class Player { \tboolean pause; // iv \tint currentPos; // iv  \tPlayer() { // ì¶”ìƒ í´ë˜ìŠ¤ë„ ìƒì„±ìê°€ ìˆì–´ì•¼ í•œë‹¤. \t\tpause = false; \t\tcurrentPos = 0; \t}  \tabstract void play(int pos); // ì¶”ìƒë©”ì„œë“œ \tabstract void stop(); // ì¶”ìƒë©”ì„œë“œ  \tvoid play() { \t\t// í˜¸ì¶œ \t\tplay(currentPos); // ì¶”ìƒë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \t} }       ì¶”ìƒí´ë˜ìŠ¤ëŠ” ì¼ë°˜ í´ë˜ìŠ¤ì™€ ë˜‘ê°™ë‹¤(ì§€ì—­ë³€ìˆ˜, ìƒì„±ì ë“±). ë‹¨ì§€, ì¶”ìƒë©”ì„œë“œê°€ í¬í•¨ë˜ì—ˆì„ ë¿!       ì¶”ìƒë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì˜¤ë¥˜ë‚˜ëŠ”ê±° ì•„ë‹Œê°€?   â†’ ì˜¤ë¥˜ ë°œìƒí•˜ì§€ ì•ŠìŒ!      ìƒì†ì„ í†µí•´ì„œ ìì†ì´ ì™„ì„±   ìì† ê°ì²´ ìƒì„±       6.2.1 ì¶”ìƒìœ¼ë¡œ ë§Œë“œëŠ” ì´ìœ !   ê°•ìš”í•˜ê¸° ìœ„í•´ì„œ! abstract ë¥¼ ì‚¬ìš©í•˜ë©´ ë‚˜ì¤‘ì— êµ¬í˜„ë¶€ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¸ì‹í•˜ì—¬ ìì‹ ì˜í´ë˜ìŠ¤ì— ë§ê²Œ êµ¬í˜„í•  ê²ƒì´ë‹¤.       6.3 ì¶”ìƒí´ë˜ìŠ¤ì˜ ì‘ì„±       ì¶”ìƒí´ë˜ìŠ¤ = ë¯¸ì™„ì„± ì„¤ê³„ë„(ë¯¸ì™„ì„± ë©”ì„œë“œ í¬í•¨)   ì¶”ìƒë©”ì„œë“œ = ë¯¸ì™„ì„± ë©”ì„œë“œ = ëª¸í†µ ì—†ëŠ” ë©”ì„œë“œ          ì—¬ëŸ¬ í´ë˜ìŠ¤ì— ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ë°”ë¡œ ì‘ì„±í•˜ê±°ë‚˜ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ê³µí†µ ë¶€ë¶„ì„ ë½‘ì•„ì„œ ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.       ê¸°ì¡´ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Marine { \tint x, y; // í˜„ì¬ ìœ„ì¹˜ \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ } \tvoid stop() { /* í˜„ì¬ ìœ„ì¹˜ì— ì •ì§€ */ } \tvoid stimPack() { /* ìŠ¤íŒ€íŒ©ì„ ì‚¬ìš© */ } }  class Tank { \tint x, y; // í˜„ì¬ ìœ„ì¹˜ \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ } \tvoid stop() { /* í˜„ì¬ ìœ„ì¹˜ì— ì •ì§€ */ } \tvoid changeMode() { /* ê³µê²©ëª¨ë“œë¥¼ ë³€í™˜ */ } }  class Dropship { \tint x, y; // í˜„ì¬ ìœ„ì¹˜ \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ } \tvoid stop() { /* í˜„ì¬ ìœ„ì¹˜ì— ì •ì§€ */ } \tvoid load() { /* ì„ íƒëœ ëŒ€ìƒì„ íƒœìš´ë‹¤ */ } \tvoid unload() { /* ì„ íƒëœ ëŒ€ìƒì„ ë‚´ë¦°ë‹¤ */ } }       ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì ìš©í•œ ì½”ë“œ: ê³µí†µ ë¶€ë¶„ì„ ì¶”ì¶œ, ì½”ë“œì˜ ì¤‘ë³µì„ ì œê±°   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 abstract class Unit { \tint x, y; \tabstract void move(int x, int y); \tvoid stop() { /* í˜„ì¬ ìœ„ì¹˜ì— ì •ì§€ */ } }  class Marine extends Unit { \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ }; \tvoid stimPack() { /* ìŠ¤íŒ€íŒ©ì„ ì‚¬ìš© */ }; }  class Tank extends Unit { \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ }; \tvoid changeMode() { /* ê³µê²©ëª¨ë“œë¥¼ ë³€í™˜ */ }; }  class Dropship extends Unit { \tvoid move(int x, int y) { /* ì§€ì •ëœ ìœ„ì¹˜ë¡œ ì´ë™ */ }; \tvoid load() { /* ì„ íƒëœ ëŒ€ìƒì„ íƒœìš´ë‹¤ */ }; \tvoid unload() { /* ì„ íƒëœ ëŒ€ìƒì„ ë‚´ë¦°ë‹¤ */ }; }   abstract void move(int x, int y); ëŒ€ì‹  abstract ì—†ì• ê³   void move(int x, int y) { }; ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, abstractë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ moveê°€ êµ¬í˜„ë˜ì–´ìˆë‹¤ê³  ìƒê°í•˜ê³  êµ¬í˜„ì„ ì•ˆí•  ìˆ˜ë„ ìˆë‹¤. ë”°ë¼ì„œ, ì§ê´€ì ìœ¼ë¡œ abstractë¥¼ ë¶™ì´ëŠ”ê²Œ ì¢‹ë‹¤.       ì •ìƒ ì½”ë“œ: ë‹¤í˜•ì„±ì˜ ì¥ì ë„ ë‚˜ì˜´   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // ì•„ë˜ ì½”ë“œëŠ” ê·¸ ë‹¤ìŒ 4ì¤„ì˜ ì½”ë“œì™€ ê°™ë‹¤. // Unit[] group = { new Marine(), new Tank(), new Dropship() }; Unit[] group = new Unit[3]; group[0] = new Marine(); group[1] = new Tank(); group[2] = new Dropship();  for(int i=0; i&lt;group.length; i++) { \tgroup[i].move(100, 200); // ì¶”ìƒë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì êµ¬í˜„ëœ ë©”ì„œë“œë¥¼ í˜¸ì¶œ }  // groupì˜ íƒ€ì…ì€ Unit[] / group[0], group[1], group[2]ì˜ íƒ€ì…ì€ Unit // group[0], group[1], group[2]: ì°¸ì¡°ë³€ìˆ˜(ë¦¬ëª¨ì½˜) group[0].move(100, 200); // Marineê°ì²´ì˜ move í˜¸ì¶œ group[1].move(100, 200); // Tankê°ì²´ì˜ move í˜¸ì¶œ group[2].move(100, 200); // Dropshipê°ì²´ì˜ move í˜¸ì¶œ          ì˜¤ë¥˜ ì½”ë“œ   1 2 3 4 5 6 7 8 Object[] group = new Object[3]; group[0] = new Marine(); group[1] = new Tank(); group[2] = new Dropship();  for(int i=0; i&lt;group.length; i++) { \tgroup[i].move(100, 200); // ì—ëŸ¬ ë°œìƒ. Objectí´ë˜ìŠ¤ì—ëŠ” moveë©”ì„œë“œê°€ ì—†ë‹¤ }          6.3.1 ì¶”ìƒí™” â†” êµ¬ì²´í™”      ì¶”ìƒí™”ëœ ì½”ë“œëŠ” êµ¬ì²´í™”ëœ ì½”ë“œë³´ë‹¤ ìœ ì—°í•˜ë‹¤. ë³€ê²½ì— ìœ ë¦¬   1 2 3 GregorianCalendar cal = new GregorianCalendar(); // êµ¬ì²´ì (ë¶„ëª…, ëª…í™•)  Calendar cal = Calendar.getInstance(); // ì¶”ìƒì (ë¶ˆë¶„ëª…)   1 2 3 4 public static Calendar getInstance(Locale aLocale) { \t// ì§€ì—­ì— ë”°ë¼ ìº˜ë¦°ë” ë‹¤ë¥´ê²Œ ê°€ì ¸ì˜´ \treturn createCalendar(TimeZone.getDefault(), aLocale); }       7. ì¸í„°í˜ì´ìŠ¤(interface)   7.1 ì¸í„°í˜ì´ìŠ¤ë€?      ì¼ì¢…ì˜ ì¶”ìƒí´ë˜ìŠ¤, ì¶”ìƒ ë©”ì„œë“œì˜ ì§‘í•© (í•µì‹¬!)   static ë©”ì„œë“œ, ë””í´íŠ¸ ë©”ì„œë“œ, ìƒìˆ˜ ë“±ë„ ì¸í„°í˜ì´ìŠ¤ì— ì†í•¨ (ë¶€ìˆ˜ì ì¸ ê²ƒ)   êµ¬í˜„ëœ ê²ƒì´ ì „í˜€ ì—†ëŠ” ì„¤ê³„ë„. ê»ë°ê¸°(ëª¨ë“  ë©¤ë²„ê°€ public)       ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë³€ìˆ˜ì— ì ‘ê·¼ â†’ ìº¡ìŠí™”       7.1.1 ì¶”ìƒí´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´   ì¶”ìƒ í´ë˜ìŠ¤: ì¼ë°˜ í´ë˜ìŠ¤ì¸ë° ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒ, ìƒì„±ì ë° ivê°€ ìˆë‹¤.   ì¸í„°í˜ì´ìŠ¤: êµ¬í˜„ëœ ê²ƒì´ ì—†ê³  ì¶”ìƒë©”ì„œë“œë§Œ ë‚˜ì—´   ì¶”ìƒí´ë˜ìŠ¤ëŠ” ë¯¸ì™„ì„± ì„¤ê³„ë„ë¼ í•œë‹¤ë©´, ì¸í„°í˜ì´ìŠ¤ëŠ” ê¸°ë³¸ ì„¤ê³„ë„ë¼ í•  ìˆ˜ ìˆë‹¤.       7.2 ì¸í„°í˜ì´ìŠ¤ì˜ ì‘ì„±   1 2 3 4 interface ì¸í„°í˜ì´ìŠ¤ì´ë¦„ { \tpublic static final íƒ€ì… ìƒìˆ˜ì´ë¦„ = ê°’; // ìƒìˆ˜, ivì™€ cvëŠ” ê°€ì§ˆ ìˆ˜ ì—†ìŒ \tpublic abstract ë©”ì„œë“œì´ë¦„(ë§¤ê°œë³€ìˆ˜ëª©ë¡); // ì¶”ìƒë©”ì„œë“œ }   ì¸í„°í˜ì´ìŠ¤ ë©¤ë²„ë“¤ ì œì•½ì‚¬í•­      ëª¨ë“  ë©¤ë²„ë³€ìˆ˜ëŠ” public static final, ìƒëµí•  ìˆ˜ ìˆë‹¤   ëª¨ë“  ë©”ì„œë“œëŠ” public abstract, ìƒëµí•  ìˆ˜ ìˆë‹¤ (ë‹¨, static ë©”ì„œë“œ, ë””í´íŠ¸ ë©”ì„œë“œ ì œì™¸)       1 2 3 4 5 6 7 8 9 10 11 12 13 interface PlayingCard { \t// ìƒìˆ˜ ì‹œì‘ \tpublic static final int SPADE = 4; \tfinal int DIAMOND = 3; \tstatic int HEART = 2; \tint CLOVER = 1; // public, static, final ìƒëµê°€ëŠ¥ \t// ìƒìˆ˜ ë  \t// ì¶”ìƒë©”ì„œë“œ ì‹œì‘ \tpublic abstract String getCardNumber(); \tString getCardKind(); // public, abstract ìƒëµê°€ëŠ¥ \t// ì¶”ìƒë©”ì„œë“œ ë }       7.3 ì¸í„°í˜ì´ìŠ¤ì˜ ìƒì†      ì¸í„°í˜ì´ìŠ¤ì˜ ì¡°ìƒì€ ì¸í„°í˜ì´ìŠ¤ë§Œ ê°€ëŠ¥(Objectê°€ ìµœê³  ì¡°ìƒ ì•„ë‹˜)   ë‹¤ì¤‘ ìƒì†ì´ ê°€ëŠ¥ (ì¶”ìƒë©”ì„œë“œëŠ” ì¶©ëŒí•´ë„ ë¬¸ì œ ì—†ìŒ)            ë‹¤ì¤‘ ìƒì†ì˜ ë¬¸ì œì ì€ ì„ ì–¸ë¶€ê°€ ê°™ê³  ë‚´ìš©ì´ ë‹¬ë¼ ì–´ëŠìª½ì„ ìƒì†ë°›ì„ì§€ ê²°ì •í•  ìˆ˜ ì—†ë‹¤ëŠ” ì (ì¶©ëŒ ë°œìƒ)       ê·¸ëŸ°ë°, ì¶”ìƒë©”ì„œë“œì˜ ê²½ìš° ëª¸í†µì´ ì—†ê¸° ë•Œë¬¸ì— ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.           1 2 3 4 5 6 7 8 9 interface Fightable extends Movable, Attackable {}  interface Movable { \tvoid move(int x, int y); }  interface Attackable { \tvoid attack(Unit u); }       7.4 ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„      ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì™„ì„±í•˜ëŠ” ê²ƒ   1 2 3 class í´ë˜ìŠ¤ì´ë¦„ implements ì¸í„°í˜ì´ìŠ¤ì´ë¦„ { \t// ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ ì¶”ìƒë©”ì„œë“œë¥¼ ëª¨ë‘ êµ¬í˜„í•´ì•¼ í•œë‹¤. }       1 2 3 4 5 6 7 8 9 interface Fightable { \tvoid move(int x, int y); \tvoid attack(Unit u); }  class Fighter implements Fightable { \tpublic void move(int x, int y) { /* ë‚´ìš© ìƒëµ */ } \tpublic void attack(Unit u) { /* ë‚´ìš© ìƒëµ */ } }   class Fighter implements Fightable ì€ Fighter í´ë˜ìŠ¤ëŠ” Fightable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ ì´ë¼ê³  ë§í•  ìˆ˜ ìˆë‹¤.          ì¼ë¶€ë§Œ êµ¬í˜„í•˜ëŠ” ê²½ìš°, í´ë˜ìŠ¤ ì•ì— abstractë¥¼ ë¶™ì—¬ì•¼ í•¨   1 2 3 4 abstract class Fighter implements Fightable { \tpublic void move(int x, int y) { /* ë‚´ìš© ìƒëµ */ } \t// public abstract void attack(Unit u); // ì´ê²ƒì´ ìƒëµëœê±°.. }       Q. ì¸í„°í˜ì´ìŠ¤ë€?   ì¶”ìƒë©”ì„œë“œì˜ ì§‘í•© (ê·¸ ë°–ì— ìƒìˆ˜, static ë©”ì„œë“œ, ë””í´íŠ¸ ë©”ì„œë“œê°€ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë“¤ì€ í•µì‹¬ì´ ì•„ë‹ˆë‹¤. ì¶”ìƒë©”ì„œë“œê°€ í•µì‹¬!)   Q. ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì´ë€?   ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒë©”ì„œë“œ ëª¸í†µë§Œë“¤ê¸°(ë¯¸ì™„ì„± ì„¤ê³„ë„ ì™„ì„±í•˜ê¸°)   1 2 3 4 5 6 class AudioPlayer extends Player {}  class Fighter implements Fightable {}  // AudioPlayer, Fighter: ì™„ì„±ëœ ì„¤ê³„ë„ // Player, Fightable: ë¯¸ì™„ì„± ì„¤ê³„ë„   Q. ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ì˜ ê³µí†µì    ì¶”ìƒë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤. (ë¯¸ì™„ì„± ì„¤ê³„ë„)   Q. ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´ì    ì¸í„°í˜ì´ìŠ¤ëŠ” iv(ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)ë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.       7.5 ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œ ë‹¤ì¤‘ìƒì†       7.6 ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œ ë‹¤í˜•ì„±   ë‹¤í˜•ì„±: ì¡°ìƒ ì°¸ì¡°ë³€ìˆ˜ë¡œ ìì† ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ”ê²ƒ   1 Tv t = new SmartTv();       ì¸í„°í˜ì´ìŠ¤ë„ ë‹¤í˜•ì„±ì´ ì„±ë¦½í•œë‹¤.   1 2 Fightable f = (Fightable) new Fighter(); Fightable f = new Fighter();          ì¸í„°í˜ì´ìŠ¤ë„ êµ¬í˜„ í´ë˜ìŠ¤ì˜ ë¶€ëª¨? yes   ì¸í„°í˜ì´ìŠ¤ íƒ€ì… ë§¤ê°œë³€ìˆ˜ëŠ” ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ê°ì²´ë§Œ ê°€ëŠ¥   1 2 3 4 5 6 7 8 9 10 11 12 interface Fightable { \tvoid move(int x, int y); \tvoid attack(Fightable f); }  class Fighter extends Unit implements Fightable { \tpublic void move(int x, int y) { /* ë‚´ìš©ìƒëµ */ } \tpublic void attack(Fightable f) { /* ë‚´ìš©ìƒëµ */ } }  Unit u = new Fighter(); Fightable f = new Fighter();   Unit: ì¡°ìƒí´ë˜ìŠ¤ / Fighter: ìì†ê°ì²´ / Fightable: ì¸í„°í˜ì´ìŠ¤ (êµ¬í˜„)               ì¸í„°í˜ì´ìŠ¤ë¥¼ ë©”ì„œë“œì˜ ë¦¬í„´íƒ€ì…ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.       â†’ ë©”ì„œë“œê°€ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸       1 2 3 4 5 6 7 8 9 10 11 12 13 // Fightable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜ // ë‹¤í˜•ì„±ìœ¼ë¡œ ì¸í•´ Fighter ë°˜í™˜ì´ ê°€ëŠ¥ Fightable method() { \t... \tFighter f = new Fighter(); \treturn f; \t// return (Fightable) f; }  class Fighter extends Unit implements Fightable { \tpublic void move(int x, int y) { /* ë‚´ìš©ìƒëµ */ } \tpublic void attack(Fightable f) { /* ë‚´ìš©ìƒëµ */ } }   class Fighter implements Fightable: Fighterí´ë˜ìŠ¤ê°€ Fightable(ì¸í„°í˜ì´ìŠ¤)ì„ êµ¬í˜„   (Fightable: ì¡°ìƒ / Fighter: ìì†)       ì˜ˆì œ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 abstract class Unit { \tint x, y; \tabstract void move(int x, int y); \tvoid stop() { \t\tSystem.out.println(\"ë©ˆì¶¥ë‹ˆë‹¤.\"); \t} }  // ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œëŠ” public abstract. ì˜ˆì™¸ì—†ì´ interface Fightable { \tvoid move(int x, int y); // public abstractê°€ ìƒëµë¨ \tvoid attack(Fightable f); // public abstractê°€ ìƒëµë¨ }  class Fighter extends Unit implements Fightable { \t// ì˜¤ë²„ë¼ì´ë”© ê·œì¹™: ì¡°ìƒ(public)ë³´ë‹¤ ì ‘ê·¼ì œì–´ìê°€ ë²”ìœ„ê°€ ì¢ìœ¼ë©´ ì•ˆëœë‹¤. \tpublic void move(int x, int y) { \t\tSystem.out.println(\"[\"+x+\",\"+y+\"]ë¡œ ì´ë™\"); \t} \tpublic void attack(Fightable f) { \t\tSystem.out.println(f+\"ë¥¼ ê³µê²©\"); \t}  \tFightable getFightable() { \t\tFighter f = new Fighter(); // Fighterë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜ \t\treturn (Fightable)f; \t} }  public class FighterTest { \tpublic static void main(String[] args) { \t\tFightable f = new Fighter(); \t\tf.move(100, 200); \t\tf.attack(new Fighter()); \t\t// f.stop(); // Fightableì—ëŠ” stop()ì´ ì—†ì–´ì„œ í˜¸ì¶œë¶ˆê°€  \t\tUnit u = new Fighter(); \t\tu.move(100, 200); \t\t// u.attack(new Fighter()); // Unitì—ëŠ” attack()ì´ ì—†ì–´ì„œ í˜¸ì¶œë¶ˆê°€  \t\tFightable f2 = f.getFightable(); \t} }   ë¦¬í„´ íƒ€ì…ì´ Fightable ì¸ ê²ƒì€ Fightable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ëŠ” ëœ»!       7.7 ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì       ê°œë°œ ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆë‹¤.   ë³€ê²½ì— ìœ ë¦¬í•œ ìœ ì—°í•œ ì„¤ê³„ê°€ ê°€ëŠ¥í•˜ë‹¤.   í‘œì¤€í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.   ì„œë¡œ ê´€ê³„ì—†ëŠ” í´ë˜ìŠ¤ë“¤ì„ ê´€ê³„ë¥¼ ë§ºì–´ì¤„ ìˆ˜ ìˆë‹¤.       ìƒì†ê³„ì¸µë„      Unit í´ë˜ìŠ¤: ìµœê³  ì¡°ìƒ   ìœ ë‹›ì˜ ì¢…ë¥˜ëŠ” ì§€ìƒìœ ë‹›(GroundUnit), ê³µì¤‘ìœ ë‹›(AirUnit)       1 2 3 4 5 6 7 void repair(Tank t) { \t// Tankë¥¼ ìˆ˜ë¦¬ }  void repair(Dropship d) { \t// Dropshipì„ ìˆ˜ë¦¬ }   ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ Unitì˜ ê°œìˆ˜ë§Œí¼ ì˜¤ë²„ë¡œë”©í•´ì•¼ í•¨.       ì´ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ê³µí†µ ì¡°ìƒìœ¼ë¡œ í•œë‹¤ê³  í•´ë„ ìµœì†Œ 2ê°œì˜ ë©”ì„œë“œê°€ í•„ìš”í•¨.   1 2 3 4 5 6 7 void repair(GroundUnit gu) { \t// ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì§„ ì§€ìƒìœ ë‹›ì„ ìˆ˜ë¦¬í•¨ }  void repair(AirUnit au) { \t// ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì§„ ê³µì¤‘ìœ ë‹›ì„ ìˆ˜ë¦¬í•¨ }   ê·¸ë¦¬ê³   Marineê³¼ ê°™ì´ ê¸°ê³„í™” ìœ ë‹›ì´ ì•„ë‹Œ í´ë˜ìŠ¤ë„ í¬í•¨ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— repairë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ GroundUnitì€ ë¶€ì ì ˆí•¨!       ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Repairableì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜   1 2 3 4 5 6 7 8 9 10 11 12 13 interface Repairable {}  class SCV extends GroupUnit implements Repairable { \t// .. }  class Tank extends GroupUnit implements Repairable { \t// .. }  class Dropship extends GroupUnit implements Repairable { \t// .. }   ì´ì œ ìœ„ 3ê°œì˜ í´ë˜ìŠ¤ëŠ” ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆë‹¤ëŠ” ê³µí†µì ì´ ìƒê¹€!   â†’ ì„œë¡œ ê´€ê³„ì—†ëŠ” í´ë˜ìŠ¤ë“¤ì„ ê´€ê³„ë¥¼ ë§ºì–´ì¤Œ       repair ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ Repairableë¡œ ì„ ì–¸   1 2 3 void repair(Repairable r) { \t// ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ ìœ ë‹›ì„ ìˆ˜ë¦¬í•œë‹¤. }   Repairable r : ì¸í„°í˜ì´ìŠ¤ Repairableë¥¼ êµ¬í˜„í•œ ë©¤ë²„ë“¤ë§Œ ë“¤ì–´ì™€ë¼       7.8 ì¸í„°í˜ì´ìŠ¤ì˜ ì´í•´   interface = inter(~ì‚¬ì´, between) + face(ì–¼êµ´)      ë‘ ëŒ€ìƒ(ê°ì²´)ê°„ì˜ ì—°ê²°, ëŒ€í™”, ì†Œí†µì„ ë•ëŠ” ì¤‘ê°„ ì—­í• ì„ í•œë‹¤.   ì„ ì–¸(ì„¤ê³„)ì™€ êµ¬í˜„ì„ ë¶„ë¦¬ì‹œí‚¬ ìˆ˜ ìˆê²Œ í•œë‹¤.   1 2 3 4 5 class B { \tpublic void method() { \t\tSystem.out.println(\"methodInB\"); \t} }   ìœ„ì˜ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 // ì„ ì–¸ë¶€ interface I { \tpublic void method(); }   1 2 3 4 5 6 // êµ¬í˜„ë¶€ class B implements I { \tpublic void method() { \t\tSystem.out.println(\"methodInB\"); \t} }      ì¸í„°í˜ì´ìŠ¤ ë•ë¶„ì— Bê°€ ë³€ê²½ë˜ì–´ë„ AëŠ” ì•ˆë°”ê¿€ ìˆ˜ ìˆê²Œ ëœë‹¤.(ëŠìŠ¨í•œ ê²°í•©)       ì§ì ‘ì ì¸ ê´€ê³„ì˜ ë‘ í´ë˜ìŠ¤(A-B)   â†’ ê°•í•œ ê²°í•© : Aê°€ Bë¥¼ ì‚¬ìš©(Aê°€ Bë¥¼ ì˜ì¡´).          ê°„ì ‘ì ì¸ ê´€ê³„ì˜ ë‘ í´ë˜ìŠ¤(A-I-B)   â†’ ëŠìŠ¨í•œ ê²°í•© : ë³€ê²½ì— ìœ ë¦¬í•˜ê³  ìœ ì—°í•œ ì½”ë“œê°€ ëœë‹¤.          1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 class A { \tpublic void method(B b) { \t// public void method(C b) { // Cë¥¼ ì‚¬ìš©í•  ë•Œ \t\tb.method(); \t} }  class B { \tpublic void mehotd() { \t\tSystem.out.println(\"Bí´ë˜ìŠ¤ì˜ ë©”ì„œë“œ\"); \t} }  class C { \tpublic void mehotd() { \t\tSystem.out.println(\"Cí´ë˜ìŠ¤ì˜ ë©”ì„œë“œ\"); \t} }  public class InterfaceTest { \tpublic static void main(String[] args) { \t\tA a = new A(); \t\ta.method(new B()); // Aê°€ Bë¥¼ ì‚¬ìš©(ì˜ì¡´) \t\t// a.method(new C()); // Aê°€ Cë¥¼ ì‚¬ìš©(ì˜ì¡´) \t} }   mainì„ ìˆ˜ì •í•˜ë©´ Aí´ë˜ìŠ¤ë„ ìˆ˜ì •í•´ì•¼ í•¨ (í´ë˜ìŠ¤ Aì˜ ë³€í™”ê°€ ìˆìŒ)       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class A { \tpublic void method(I i) { // ì¸í„°í˜ì´ìŠ¤ Ië¥¼ êµ¬í˜„í•œ ë©¤ë²„ë“¤ë§Œ ë“¤ì–´ì™€ë¼ \t\ti.method(); \t} }  // Bí´ë˜ìŠ¤ì˜ ì„ ì–¸ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬ interface I { \tpublic void method(); }  class B implements I { \tpublic void mehotd() { \t\tSystem.out.println(\"Bí´ë˜ìŠ¤ì˜ ë©”ì„œë“œ\"); \t} }  class C implements I { \tpublic void mehotd() { \t\tSystem.out.println(\"Cí´ë˜ìŠ¤ì˜ ë©”ì„œë“œ\"); \t} }  public class InterfaceTest { \tpublic static void main(String[] args) { \t\tA a = new A(); \t\ta.method(new C()); // Aê°€ Bë¥¼ ì‚¬ìš©(ì˜ì¡´) \t} }   mainì„ ìˆ˜ì •í•´ë„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ Aí´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ìŒ (í´ë˜ìŠ¤ Aì˜ ë³€í™”ê°€ ì—†ìŒ)       7.8.1 ë””í´íŠ¸ ë©”ì„œë“œì™€ static ë©”ì„œë“œ   ê¸°ì¡´ì˜ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒ ë©”ì„œë“œë§Œ ì¡´ì¬.       ì•„ë˜ì™€ ê°™ì€ ê°€ì •ì„ í•˜ì˜€ì„ë•Œ ì¸í„°í˜ì´ìŠ¤ì˜ ì›ì¹™ì— ì˜í•´ ClassA, ClassB, ClassC ì— ëª¨ë‘ methodAë¥¼ êµ¬í˜„í•´ì•¼ í•¨.      ì´ 3ê°œì˜ ClassA, ClassB, ClassC í´ë˜ìŠ¤ê°€ InterfaceAë¥¼ êµ¬í˜„í•˜ê³  ìˆë‹¤.   ì´ë•Œ, ìš”êµ¬ì‚¬í•­ì´ ì¶”ê°€. InterfaceAì— íŠ¹ì • ì¶”ìƒ ë©”ì„œë“œ methodA ê°€ ì¶”ê°€ë¨   ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ default ë©”ì„œë“œ ì‚¬ìš©       ë””í´íŠ¸ ë©”ì„œë“œì™€ static ë©”ì„œë“œ      ì¸í„°í˜ì´ìŠ¤ì— ë””í´íŠ¸ ë©”ì„œë“œ, static ë©”ì„œë“œ ì¶”ê°€ ê¸°ëŠ¥        ì¸í„°í˜ì´ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œ(ì¶”ìƒ ë©”ì„œë“œ)ë¥¼ ì¶”ê°€í•˜ê¸° ì–´ë ¤ì›€       í•´ê²°ì±… â‡’ ë””í´íŠ¸ ë©”ì„œë“œ(default method)       ë””í´íŠ¸ ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ(ì¸í„°í˜ì´ìŠ¤ ì›ì¹™ ìœ„ë°˜)   1 2 3 4 interface MyInterface { \tvoid method(); \tvoid newMethod(); // ì¶”ìƒ ë©”ì„œë“œ }   1 2 3 4 interface MyInterface { \tvoid method(); \tdefault void newMethod(); // ì¶”ìƒ ë©”ì„œë“œ }               ë””í´íŠ¸ ë©”ì„œë“œê°€ ê¸°ì¡´ì˜ ë©”ì„œë“œì™€ ì¶©ëŒí•  ë•Œì˜ í•´ê²°ì±…       â†’ ì§ì ‘ ì˜¤ë²„ë¼ì´ë”©í•˜ë©´ í•´ê²°ë¨       1 2 3 4 1. ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ì˜ ë””í´íŠ¸ ë©”ì„œë“œ ê°„ì˜ ì¶©ëŒ  - ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì—ì„œ ë””í´íŠ¸ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•œë‹¤. 2. ë””í´íŠ¸ ë©”ì„œë“œì™€ ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ê°„ì˜ ì¶©ëŒ  - ì¡°ìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œê°€ ìƒì†ë˜ê³ , ë””í´íŠ¸ ë©”ì„œë“œëŠ” ë¬´ì‹œëœë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP8/",
        "teaser": ""
      },{
        "title": "DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   DIP, OCPë¥¼ ì§€í‚¤ê¸° ìœ„í•´ì„  ë‹¤í˜•ì„±ë§Œìœ¼ë¡  ë¶€ì¡±í•˜ë‹¤. ì˜ì¡´ê´€ê³„ ì£¼ì…(DI) ê°œë…ì´ í•„ìš”í•˜ë‹¤.   ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ëŒ€í•´ ì•Œì•„ë³´ê¸° ì „ì— ì•„ë˜ ìš”êµ¬ì‚¬í•­ê³¼ ê·¸ì— ë”°ë¥¸ ì½”ë“œ íë¦„ì„ ì‚´í´ë³´ì.       ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œì™€ ì„¤ê³„   íšŒì› ë„ë©”ì¸ ì„¤ê³„      íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤   íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤   íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤ (ë¯¸í™•ì •)   ì£¼ë¬¸ê³¼ í• ì¸      íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤   íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤   í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•œë‹¤ (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤)   í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í• ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)         ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œë¥¼ ë³´ë©´ ë¯¸í™•ì •ëœ ìš”êµ¬ì‚¬í•­ì´ ìˆì–´ êµ¬í˜„í•˜ê¸° ì–´ë ¤ìš´ ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ì—ê² ê°ì²´ ì§€í–¥ ì„¤ê³„ ë°©ë²•ì´ ìˆë‹¤. ì¸í„°í˜ì´ìŠ¤, êµ¬í˜„ì²´ í˜•ì‹ìœ¼ë¡œ ì„¤ê³„ë¥¼ í•˜ê³  ë‚˜ì¤‘ì— ë³€ê²½ëœ êµ¬í˜„ì²´ëŠ” ê°ˆì•„ë¼ìš°ì.       íšŒì› ì €ì¥ì†Œ   1 2 3 4 5 6 7 8 package hello.core.member;  public interface MemberRepository {      void save(Member member);      Member findById(Long memberId); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 package hello.core.member;  import java.util.HashMap; import java.util.Map;  public class MemoryMemberRepository implements MemberRepository {      private static Map&lt;Long, Member&gt; store = new HashMap&lt;&gt;();      @Override     public void save(Member member) {         store.put(member.getId(), member);     }      @Override     public Member findById(Long memberId) {         return store.get(memberId);     } }   íšŒì› ë°ì´í„°ì— ëŒ€í•œ ì €ì¥ ë¶€ë¶„ì´ ì•„ì§ ë¯¸í™•ì •ì´ì§€ë§Œ ê°œë°œì€ ì§„í–‰í•´ì•¼ í•˜ë¯€ë¡œ ê°€ì¥ ë‹¨ìˆœí•œ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œë¥¼ êµ¬í˜„í•´ì„œ ê°œë°œì„ ì§„í–‰í•œë‹¤.       íšŒì› ì„œë¹„ìŠ¤   1 2 3 4 5 6 7 8 package hello.core.member;  public interface MemberService {      void join(Member member);      Member findMember(Long memberId); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 package hello.core.member;  public class MemberServiceImpl implements MemberService {      private final MemberRepository memberRepository = new MemoryMemberRepository();      @Override     public void join(Member member) {         memberRepository.save(member);     }      @Override     public Member findMember(Long memberId) {         return memberRepository.findById(memberId);     } }       í• ì¸ ì •ì±…   1 2 3 4 5 6 7 8 package hello.core.discount;  import hello.core.member.Member;  public interface DiscountPolicy {      int discount(Member member, int price); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package hello.core.discount;  import hello.core.member.Grade; import hello.core.member.Member;  public class FixDiscountPolicy implements DiscountPolicy {      private int discountFixAmount = 1000; // 1000ì› í• ì¸      @Override     public int discount(Member member, int price) {         if (member.getGrade() == Grade.VIP) {             return discountFixAmount;         } else {             return 0;         }     } }       ì£¼ë¬¸ ì„œë¹„ìŠ¤   1 2 3 4 5 6 package hello.core.order;  public interface OrderService {      Order createOrder(Long memberId, String itemName, int itemPrice); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package hello.core.order;  import hello.core.discount.DiscountPolicy; import hello.core.discount.FixDiscountPolicy; import hello.core.member.Member; import hello.core.member.MemberRepository; import hello.core.member.MemoryMemberRepository;  public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository = new MemoryMemberRepository();      private final DiscountPolicy discountPolicy = new FixDiscountPolicy();      @Override     public Order createOrder(Long memberId, String itemName, int itemPrice) {         Member member = memberRepository.findById(memberId);         int discountPrice = discountPolicy.discount(member, itemPrice);          return new Order(memberId, itemName, itemPrice, discountPrice);     } }       [ì°¸ê³ ] OrderServiceImpl.createOrder() ë©”ì†Œë“œ   1 int discountPrice = discountPolicy.discount(member, itemPrice);   ì•„ë˜ ì½”ë“œëŠ” discountPolicyì—ê²Œ í• ì¸ëœ ê°€ê²©ì„ ì•Œì•„ì„œ ê³„ì‚°í•´ì„œ return í•´ë‹¬ë¼ëŠ” ì½”ë“œì´ë‹¤. ì´ ì½”ë“œëŠ” ë‹¨ì¼ì±…ì„ì›ì¹™(SRP)ì„ ë§¤ìš° ì˜ ì§€í‚¨ ì½”ë“œì´ë‹¤. ë§Œì•½, í• ì¸ ì •ì±…ì´ ë°”ë€Œë”ë¼ë„ í• ì¸ ìª½ ì½”ë“œë§Œ ë³€ê²½í•˜ë©´ ë˜ê³  ì£¼ë¬¸ ê´€ë ¨ ì½”ë“œëŠ” ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤. (ë§Œì¼, ë‹¨ì¼ì±…ì„ì›ì¹™ì„ ì ìš©í•˜ì§€ ì•Šê³  ì£¼ë¬¸ ìª½ ì½”ë“œì— í• ì¸ ì •ì±…ê¹Œì§€ ê°™ì´ ì‘ì„±í–ˆë‹¤ë©´ í• ì¸ ì •ì±… ë³€ê²½ ì‹œ ì£¼ë¬¸ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ ë˜ë¯€ë¡œ ë‹¨ì¼ì±…ì„ì›ì¹™ì— ìœ„ë°°ëœë‹¤.)       í˜„ì¬ê¹Œì§€ ì½”ë“œëŠ” ì£¼ë¬¸ ìƒì„± ìš”ì²­ì´ ì˜¤ë©´, íšŒì› ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  í• ì¸ ì •ì±…ì„ ì ìš©í•œ ë‹¤ìŒ ì£¼ë¬¸ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤. ë©”ëª¨ë¦¬ íšŒì› ë¦¬í¬ì§€í† ë¦¬ì™€ ê³ ì • ê¸ˆì•¡ í• ì¸ ì •ì±…ì„ êµ¬í˜„ì²´ë¡œ ìƒì„±í•œë‹¤. ì¦‰, ì—­í• (ì¸í„°í˜ì´ìŠ¤)ê³¼ êµ¬í˜„(êµ¬í˜„ì²´)ì„ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì— ì•ì—ì„œ ë§í•œ DIPë¥¼ ì§€ì¼°ë‹¤.   ê·¸ëŸ°ë°, ìš”êµ¬ì‚¬í•­ì— ë³€ê²½ì´ ìƒê²¨ë„ DIPì™€ OCPì›ì¹™ì„ ì§€í‚¬ ìˆ˜ ìˆì„ê¹Œ? ì´ ë¶€ë¶„ì— ëŒ€í•´ ìƒê°ì„ í•˜ë©´ì„œ ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ ë³€ê²½ì„ ì‚´í´ë³´ì.       ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ      ê³ ì • ê¸ˆì•¡ í• ì¸ì´ ì•„ë‹Œ ì •ë¥ %í• ì¸ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤   ì˜ˆë¥¼ ë“¤ì–´ì„œ ê¸°ì¡´ ì •ì±…ì€ VIPê°€ 10000ì›ì„ ì£¼ë¬¸í•˜ë“  20000ì›ì„ ì£¼ë¬¸í•˜ë“  í•­ìƒ 1000ì›ì„ í• ì¸í–ˆëŠ”ë°, ì´ë²ˆì— ìƒˆë¡œ ë‚˜ì˜¨ ì •ì±…ì€ 10%ë¡œ ì§€ì •í•´ë‘ë©´ ê³ ê°ì´ 10000ì› ì£¼ë¬¸ì‹œ 1000ì›ì„ í• ì¸í•´ì£¼ê³ , 20000ì› ì£¼ë¬¸ì‹œì— 2000ì›ì„ í• ì¸       ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì— ëŒ€í•œ êµ¬í˜„ì²´   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package hello.core.discount;  import hello.core.member.Grade; import hello.core.member.Member;  public class RateDiscountPolicy implements DiscountPolicy {      private int discountPercent = 10; // 10% í• ì¸      @Override     public int discount(Member member, int price) {         if (member.getGrade() == Grade.VIP) {             return price * discountPercent / 100;         } else {             return 0;         }     } }       ìš°ë¦¬ëŠ” ë¶„ëª… DIPì›ì¹™(ì¸í„°í˜ì´ìŠ¤, êµ¬í˜„ì²´)ì„ ì§€í‚¤ë©´ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤. ê·¸ëŸ°ë°, ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImpl ì½”ë“œë¥¼ ê³ ì³ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package hello.core.order;  import hello.core.discount.DiscountPolicy; import hello.core.discount.FixDiscountPolicy; import hello.core.discount.RateDiscountPolicy; import hello.core.member.Member; import hello.core.member.MemberRepository; import hello.core.member.MemoryMemberRepository;  public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository = new MemoryMemberRepository();  //    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();     private final DiscountPolicy discountPolicy = new RateDiscountPolicy();      ... }   ë¬¸ì œê°€ ìƒê²¼ë‹¤. ìš°ë¦¬ëŠ” ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆê³  ë‹¤í˜•ì„±ì„ í™œìš©í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ë¥¼ ë¶„ë¦¬í–ˆë‹¤. ê·¸ëŸ°ë°, DIPì™€ OCPë¥¼ ìœ„ë°˜í–ˆë‹¤.       1. DIP ìœ„ë°˜   OrderServiceImpl ì€ DiscountPolicyì—ë§Œ ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ FixDiscountPolicy ì™€ RateDiscountPolicyì—ë„ ì˜ì¡´í•œë‹¤. ì¦‰, ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ êµ¬ì²´ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.      ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´: DiscountPolicy   êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤: FixDiscountPolicy, RateDiscountPolicy   2. OCP ìœ„ë°˜   ê³ ì •ê¸ˆì•¡í• ì¸ì—ì„œ ì •ë¥ %í• ì¸ìœ¼ë¡œ ë³€ê²½ ì‹œ OrderServiceImplì„ ë³€ê²½í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, ì§€ê¸ˆ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì¤€ë‹¤.            ì°¸ê³    OCPëŠ” í™•ì¥ì—” ì—´ë ¤ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆì–´ì•¼ í•œë‹¤ëŠ” ëœ», DIPëŠ” êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•´ì•¼í•œë‹¤ëŠ” ëœ»ì´ë‹¤.         ìœ„ì˜ DIP, OCP ìœ„ë°˜ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸(OrderServiceImpl)ê°€ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 package hello.core.order;  import hello.core.discount.DiscountPolicy; import hello.core.member.Member; import hello.core.member.MemberRepository; import hello.core.member.MemoryMemberRepository;  public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository = new MemoryMemberRepository();      private DiscountPolicy discountPolicy;      @Override     public Order createOrder(Long memberId, String itemName, int itemPrice) {         Member member = memberRepository.findById(memberId);         int discountPrice = discountPolicy.discount(member, itemPrice);          return new Order(memberId, itemName, itemPrice, discountPrice);     } }   ê·¸ëŸ¬ë‚˜, ì‹¤í–‰í•˜ë©´ discountPolicyì— ëŒ€í•œ êµ¬í˜„ì²´ê°€ ì—†ê¸° ë•Œë¬¸ì— NullPointException ë°œìƒí•œë‹¤.   ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ëˆ„êµ°ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì— DiscountPolicyì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.       ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬   ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•´ì•¼ í•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì—°ê·¹ì— ë¹„ìœ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.      ì• í”Œë¦¬ì¼€ì´ì…˜ - ì—°ê·¹   ì¸í„°í˜ì´ìŠ¤ - ë°°ì—­   êµ¬í˜„ì²´ - ë‹´ë‹¹ ë°°ìš°   AppConfig - ê³µì—° ê¸°íš       AppConfig ë“±ì¥   êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°(ì£¼ì…)í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 package hello.core;  import hello.core.discount.FixDiscountPolicy; import hello.core.member.MemberService; import hello.core.member.MemberServiceImpl; import hello.core.member.MemoryMemberRepository; import hello.core.order.OrderService; import hello.core.order.OrderServiceImpl;  public class AppConfig {      public MemberService memberService() {         return new MemberServiceImpl(new MemoryMemberRepository());     }      public OrderService orderService() {         return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());     } }   AppConfigì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±      MemberServiceImpl   MemoryMemberRepository   OrderServiceImpl   FixDiscountPolicy   AppConfigëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ë¥¼ ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)      MemberServiceImpl â†’ MemoryMemberRepository   OrderServiceImpl â†’ MemoryMemberRepository, FixDiscountPolicy       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 package hello.core.member;  public class MemberServiceImpl implements MemberService {      private final MemberRepository memberRepository;      public MemberServiceImpl(MemberRepository memberRepository) {         this.memberRepository = memberRepository;     }      @Override     public void join(Member member) {         memberRepository.save(member);     }      @Override     public Member findMember(Long memberId) {         return memberRepository.findById(memberId);     } }   ì´ì œ MemberServiceImplì€ MemoryMemberRepositoryì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨ì§€, MemberRepository ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤. ê·¸ë¦¬ê³  MemberServiceImpl ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€(ì£¼ì…ë ì§€) ì•Œ ìˆ˜ ì—†ê³  MemberServiceImplì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(â€™AppConfigâ€™)ì—ì„œ ê²°ì •ëœë‹¤. MemberServiceImplì€ ì´ì œë¶€í„° ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•œë‹¤.          ìœ„ ê·¸ë¦¼ì„ ì‚´í´ë³´ë©´ AppConfigê°€ MemberServiceImpl ê°ì²´ì™€ MemoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfigê°€ ë‹´ë‹¹í•œë‹¤.   ì´ë¥¼ í†µí•´ ì–»ì€ ê²ƒì€ ë‘ê°€ì§€ì´ë‹¤.      DIP ì™„ì„±: MemberServiceImplì€ MemberRepositoryì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤. (êµ¬ì²´ í´ë˜ìŠ¤ëŠ” ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ëœë‹¤.)   ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬: ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤.          AppConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImplì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI(Dependency Injection) ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë¼ê³  í•œë‹¤.       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 package hello.core.order;  import hello.core.discount.DiscountPolicy; import hello.core.member.Member; import hello.core.member.MemberRepository;  public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository;     private final DiscountPolicy discountPolicy;      public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {         this.memberRepository = memberRepository;         this.discountPolicy = discountPolicy;     }      @Override     public Order createOrder(Long memberId, String itemName, int itemPrice) {         Member member = memberRepository.findById(memberId);         int discountPrice = discountPolicy.discount(member, itemPrice);          return new Order(memberId, itemName, itemPrice, discountPrice);     } }   OrderServiceImplì€ FixDiscountPolicyë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. (DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´) OrderServiceImplì€ ì´ì œ ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ê³  OrderServiceImplì˜ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •ëœë‹¤. OrderServiceImplì—ëŠ” MemoryMemberRepository, FixDiscountPolicy ê°ì²´ì˜ ì˜ì¡´ê´€ê³„ê°€ ì£¼ì…ëœë‹¤.       ì •ë¦¬      AppConfigë¥¼ í†µí•´ì„œ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬   AppConfigëŠ” ê³µì—° ê¸°íšì   AppConfigëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í• ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„ì§„ë‹¤.   ì´ì œ ê° ë°°ìš°ë“¤ì€ ë‹´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.   OrderServiceImplì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.       AppConfig ë¦¬íŒ©í† ë§   ìœ„ì—ì„œ ì‘ì„±í•œ AppConfigì˜ ë¬¸ì œì ì€ ì—­í• ê³¼ êµ¬í˜„ì´ ëª…í™•íˆ êµ¬ë¶„ë˜ì§€ ì•ŠëŠ” ê²ƒê³¼ new MemoryMemberRepository()ê°€ ì¤‘ë³µëœë‹¤ëŠ” ì ì´ë‹¤.   ë”°ë¼ì„œ, ì•„ë˜ì½”ë“œì™€ ê°™ì´ ë¦¬íŒ©í† ë§ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package hello.core;  import hello.core.discount.DiscountPolicy; import hello.core.discount.FixDiscountPolicy; import hello.core.member.MemberService; import hello.core.member.MemberServiceImpl; import hello.core.member.MemoryMemberRepository; import hello.core.order.OrderService; import hello.core.order.OrderServiceImpl;  public class AppConfig {      public MemberService memberService() {         return new MemberServiceImpl(memberRepository());     }      private MemoryMemberRepository memberRepository() {         return new MemoryMemberRepository();     }      public OrderService orderService() {         return new OrderServiceImpl(memberRepository(), discountPolicy());     }      public DiscountPolicy discountPolicy() {         return new FixDiscountPolicy();     } }   new MemoryMemberRepository() ì´ ë¶€ë¶„ì´ ì¤‘ë³µ ì œê±°ë˜ì—ˆë‹¤. ì´ì œ MemoryMemberRepository ë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ë³€ê²½í•  ë•Œ í•œ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. ë˜í•œ, ë¦¬íŒ©í† ë§ëœ AppConfigë¥¼ ë³´ë©´ ì—­í• ê³¼ êµ¬í˜„ í´ë˜ìŠ¤ê°€ í•œëˆˆì— ë“¤ì–´ì˜¨ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ êµ¬ì„±ì´ ì–´ë–»ê²Œ ë˜ì–´ìˆëŠ”ì§€ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.      ì—­í• : ë©”ì†Œë“œ ë¦¬í„´ íƒ€ì…   êµ¬í˜„: êµ¬í˜„ì²´       ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©   ì´ì œ ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ë„ì…í•´ë„ AppConfigë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤.   ë³€ê²½: FixDiscountPolicy â†’ RateDiscountPolicy         ì´ì œ ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±…ì„ ì ìš©í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ì½”ë“œëŠ” ë³€ê²½í•  í•„ìš” ì—†ì´ êµ¬ì„± ì˜ì—­ì˜ ì½”ë“œë§Œ ë°”ê¾¸ë©´ ëœë‹¤. DIP, OCPë¥¼ ë§Œì¡±í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package hello.core;  import hello.core.discount.DiscountPolicy; import hello.core.discount.FixDiscountPolicy; import hello.core.member.MemberService; import hello.core.member.MemberServiceImpl; import hello.core.member.MemoryMemberRepository; import hello.core.order.OrderService; import hello.core.order.OrderServiceImpl;  public class AppConfig {      public MemberService memberService() {         return new MemberServiceImpl(memberRepository());     }      private MemoryMemberRepository memberRepository() {         return new MemoryMemberRepository();     }      public OrderService orderService() {         return new OrderServiceImpl(memberRepository(), discountPolicy());     }      public DiscountPolicy discountPolicy() {         // return new FixDiscountPolicy();         return new RateDiscountPolicy();     } }   AppConfigì—ì„œ í• ì¸ ì •ì±… ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” êµ¬í˜„ì„ Fix â†’ Rate ê°ì²´ë¡œ ë³€ê²½í–ˆë‹¤. ì´ì œëŠ” í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„ AppConfigë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ OrderServiceImplë¥¼ í¬í•¨í•´ì„œ ì‚¬ìš© ì˜ì—­ì˜ ì–´ë–¤ ì½”ë“œë„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.   êµ¬ì„± ì˜ì—­ì€ ë‹¹ì—°íˆ ë³€ê²½ëœë‹¤. êµ¬ì„± ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” AppConfigë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ëŠ” ê³µì—°ì˜ ê¸°íšìë¡œ ìƒê°í•˜ì. ê³µì—° ê¸°íšìëŠ” ê³µì—° ì°¸ì—¬ìì¸ êµ¬í˜„ ê°ì²´ë“¤ì„ ëª¨ë‘ ì•Œì•„ì•¼ í•œë‹¤.       ì „ì²´ íë¦„ ì •ë¦¬   ì§€ê¸ˆê¹Œì§€ì˜ íë¦„ì„ ì •ë¦¬í•´ë³´ì.      ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ   ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì    ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬   AppConfig ë¦¬íŒ©í„°ë§   ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©       ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ   ë‹¤í˜•ì„± ë•ë¶„ì— ìƒˆë¡œìš´ ì •ë¥  í• ì¸ ì •ì±… ì½”ë“œë¥¼ ì¶”ê°€ë¡œ ê°œë°œí•˜ëŠ” ê²ƒ ìì²´ëŠ” ì•„ë¬´ ë¬¸ì œê°€ ì—†ìŒ       ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì    ìƒˆë¡œ ê°œë°œí•œ ì •ë¥  í• ì¸ ì •ì±…ì„ ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ë„ í•¨ê»˜ ë³€ê²½í•´ì•¼í•¨ ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸í„°í˜ì´ìŠ¤ì¸ DiscountPolicy ë¿ë§Œ ì•„ë‹ˆë¼, êµ¬ì²´ í´ë˜ìŠ¤ì¸ FixDiscountPolicyë„ í•¨ê»˜ ì˜ì¡´ â†’ DIP ìœ„ë°˜       ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬      ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ê³µì—°ìœ¼ë¡œ ìƒê°   ê¸°ì¡´ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³ , ì‹¤í–‰í•¨   ë¹„ìœ ë¥¼ í•˜ë©´ ê¸°ì¡´ì—ëŠ” ë‚¨ì ì£¼ì¸ê³µ ë°°ìš°ê°€ ê³µì—°ë„ í•˜ê³ , ë™ì‹œì— ì—¬ì ì£¼ì¸ê³µë„ ì§ì ‘ ì´ˆë¹™í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆìŒ   ê³µì—°ì„ êµ¬ì„±í•˜ê³ , ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³ , ì§€ì •í•˜ëŠ” ì±…ì„ì„ ë‹´ë‹¹í•˜ëŠ” ë³„ë„ì˜ ê³µì—° ê¸°íšìê°€ ë‚˜ì˜¬ ì‹œì    ê³µì—° ê¸°íšìì¸ AppConfigê°€ ë“±ì¥   AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„   ì´ì œë¶€í„° í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ìì‹ ì˜ ì—­í• ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒë§Œ ì§‘ì¤‘, ê¶Œí•œì´ ì¤„ì–´ë“¬(ì±…ì„ì´ ëª…í™•í•´ì§)   1 2 3 4 5 6 7 8 9 10 public class AppConfig {      public MemberService memberService() {         return new MemberServiceImpl(new MemoryMemberRepository());     }      public OrderService orderService() {         return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());     } }      AppConfig ë¦¬íŒ©í„°ë§      êµ¬ì„± ì •ë³´ì—ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬   ì—­í• ì´ ì˜ ë“œëŸ¬ë‚¨   ì¤‘ë³µ ì œê±°   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class AppConfig {      public MemberService memberService() {         return new MemberServiceImpl(memberRepository());     }      private MemoryMemberRepository memberRepository() {         return new MemoryMemberRepository();     }      public OrderService orderService() {         return new OrderServiceImpl(memberRepository(), discountPolicy());     }      public DiscountPolicy discountPolicy() {         return new FixDiscountPolicy();     } }       ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©      ì •ì•¡ í• ì¸ ì •ì±… ì •ë¥ % í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½   AppConfigì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼, ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±(Configuration)í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬   í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„ AppConfigê°€ ìˆëŠ” êµ¬ì„± ì˜ì—­ë§Œ ë³€ê²½í•˜ë©´ ë¨, ì‚¬ìš© ì˜ì—­ì€ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŒ. ë¬¼ë¡  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì½”ë“œë„ ë³€ê²½í•˜ì§€ ì•ŠìŒ       ê°ì²´ì§€í–¥ì„¤ê³„ ì›ì¹™ 5ê°€ì§€ ì¤‘ ìœ„ì˜ ì½”ë“œë“¤ì—ì„œ ì ìš©ëœ ì›ì¹™ì€ 3ê°€ì§€ì´ë‹¤.   1. SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™   SRP ì›ì¹™ì€ í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ ê°ì²´(OrderServiceImpl)ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±, ì—°ê²°, ì‹¤í–‰í•˜ëŠ” ë„ˆë¬´ ë§ì€ ì±…ì„ì„ ê°€ì§€ê³  ìˆì—ˆë‹¤. SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ê³  êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹í•˜ì˜€ë‹¤. ì¦‰, í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹í•˜ê²Œ ë˜ì—ˆë‹¤.   2. DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™   DIP ì›ì¹™ì€ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤. ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì˜ ë³€ê²½ì´ ë¶ˆê°€í”¼í–ˆë‹¤. OrderServiceImplì€ DiscountPolicy(ì¶”ìƒ)ë¥¼ ì˜ì¡´í•˜ëŠ” ë™ì‹œì— FixDiscountPolicy(êµ¬ì²´)ë„ ì˜ì¡´í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ë¥¼ AppConfigë¥¼ ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” êµ¬ì²´ì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ ì„¤ê³„í•˜ê³  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í–ˆë‹¤.   3. OCP   OCP ì›ì¹™ì€ ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚¨ë‹¤. ë˜í•œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©ì˜ì—­ê³¼ êµ¬ì„±ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ê³  AppConfigë¥¼ í†µí•´ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ë¯€ë¡œ ìƒˆë¡œìš´ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•œë‹¤ê³  í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ì½”ë“œë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤. ì¦‰, ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆê³  êµ¬ì„±ì˜ì—­ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","Java"],
        "url": "/spring/Spring-DIP-OCP-DI/",
        "teaser": ""
      },{
        "title": "IoC(ì œì–´ì˜ ì—­ì „)ì™€ DI(ì˜ì¡´ê´€ê³„ ì£¼ì…)",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ì œì–´ì˜ ì—­ì „(IoC, Inversion of Control)   AppConfigë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±, ì—°ê²°, ì‹¤í–‰í–ˆë‹¤. êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢…í–ˆë‹¤.   ë°˜ë©´ì—, AppConfig ë“±ì¥ ì´í›„ êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³  í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ AppConfigê°€ ê°€ì ¸ê°”ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, OrderServiceImplì€ í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ í˜¸ì¶œí•˜ì§€ë§Œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë“¤ì´ ì‹¤í–‰ë ì§€ ëª¨ë¥¸ë‹¤.   ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ì´ë¼ í•œë‹¤.   í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬      í”„ë ˆì„ì›Œí¬ê°€ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ë§ë‹¤.            ì˜ˆ) JUnit           ë°˜ë©´ì— ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹ˆë¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.            ì˜ˆ) ìë°” ê°ì²´ë¥¼ xml, jsonìœ¼ë¡œ ë°”ê¿€ë•ŒëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ importí•˜ì—¬ ì§ì ‘ í˜¸ì¶œ           ì˜ì¡´ê´€ê³„ ì£¼ì…(DI, Dependency Injection)   ì•„ë˜ ì˜ˆì œë¥¼ ì‚´í´ë³´ë©´ OrderServiceImplì€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. OrderServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ DiscountPolicyì— ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì‚¬ìš©ë ì§€ ëª¨ë¥¸ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package hello.core.order;  import hello.core.discount.DiscountPolicy; import hello.core.member.Member; import hello.core.member.MemberRepository;  public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository;     private final DiscountPolicy discountPolicy;      public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {         this.memberRepository = memberRepository;         this.discountPolicy = discountPolicy;     }      ... }   ì˜ì¡´ê´€ê³„ëŠ” ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€, ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„ ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼ í•œë‹¤.   ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„   ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ëŠ” í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” importë¥¼ ë³´ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ì½”ë“œë§Œ ë³´ê³  ë¶„ì„í•  ìˆ˜ ìˆë‹¤. OrderServiceImplì€ MemberRepository, DiscountPolicyì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ íŒŒì•…í•  ìˆ˜ ìˆì§€ë§Œ ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ OrderServiceImplì— ì£¼ì… ë ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.      ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„   ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ì™€ ë‹¤ë¥´ê²Œ ë™ì ì¸ ê°ì²´ ì˜ì¡´ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì (ëŸ°íƒ€ì„)ì— ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒì„ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë¼ í•œë‹¤. ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ ì „ë‹¬í•´ì„œ ì—°ê²°ëœë‹¤. ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì •ë¦¬í•˜ìë©´, ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì´ ë¶€ë¶„ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì˜ ì¥ì ì´ë‹¤.   DI ì»¨í…Œì´ë„ˆ   AppConfigì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±, ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ ë˜ëŠ” DI ì»¨í…Œì´ë„ˆë¼ í•˜ëŠ”ë° ìµœê·¼ì—ëŠ” ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ   í˜„ì¬ê¹Œì§„ ìˆœìˆ˜í•œ ìë°”ì½”ë“œë¡œ DIë¥¼ ì ìš©í–ˆë‹¤. ì´ì œ ìŠ¤í”„ë§ì„ ì‚¬ìš©í•´ë³´ì.      @Configuration: ì„¤ì •ì •ë³´ì— ë¶™ì´ê²Œ ë˜ìˆìŒ   @Beanì„ ë¶™ì´ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ëŠ” ê³³ì— ë“±ë¡ë¨   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 @Configuration public class AppConfig {      @Bean     public MemberService memberService() {         return new MemberServiceImpl(memberRepository());     }      @Bean     public MemoryMemberRepository memberRepository() {         return new MemoryMemberRepository();     }      @Bean     public OrderService orderService() {         return new OrderServiceImpl(memberRepository(), discountPolicy());     }      @Bean     public DiscountPolicy discountPolicy() {         return new FixDiscountPolicy();     } }   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ í…ŒìŠ¤íŠ¸ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class MemberApp {      public static void main(String[] args) {         ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);         MemberService memberService = applicationContext.getBean(\"memberService\", MemberService.class);          Member member = new Member(1L, \"memberA\", Grade.VIP);         memberService.join(member);          Member findMember = memberService.findMember(1L);         System.out.println(\"new Member: \" + member.getName());         System.out.println(\"find Member: \" + findMember.getName());     } }   ê¸°ì¡´ì—ëŠ” AppConfigë¥¼ ì‚¬ìš©í•´ì„œ DIë¥¼ í–ˆì§€ë§Œ, ì´ì œë¶€í„´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ DIë¥¼ ì‚¬ìš©í•œë‹¤.   ApplicationContextì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” @Configurationì´ ë¶™ì€ AppConfigë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•˜ë©° @Beanì„ ë¶™ì¸ ë©”ì„œë“œëŠ” ëª¨ë‘ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆì€ @Beanì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. (memberService, orderService)   ì´ì „ì—ëŠ” ê°œë°œìê°€ í•„ìš”í•œ ê°ì²´ë¥¼ AppConfigë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¡°íšŒí–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆì€ applicationContext.getBean() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤. ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.   ë‚´ìš© ìš”ì•½      í• ì¸ ì •ì±… ê°œë°œ: ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ ë¶„ë¦¬, ë‹¤í˜•ì„± í™œìš©í•˜ì—¬ ì½”ë“œ ì‘ì„±í•¨   ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ: ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ë¥¼ ë¶„ë¦¬í•œ ë•ì— ì½”ë“œ ì‘ì„±ì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆìŒ. ë‹¤ë§Œ, ìƒˆë¡œìš´ ì •ì±…ì„ ì ìš©í•  ê²½ìš° êµ¬ì²´í´ë˜ìŠ¤ê°€ ë³€ê²½ë¨ â†’ OCP, DIP ìœ„ë°˜!   AppConfigë¥¼ ì‘ì„±í•˜ì—¬ ì—­í• ê³¼ ì±…ì„ì„ ë¶„ë¦¬. AppConfigê°€ ì–´ë–¤ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ ê²°ì •í•¨.   ì´ì œ êµ¬í˜„ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ í•¨. ì–´ë–¤ ê°ì²´ê°€ ì£¼ì…ë ì§€ ëª¨ë¦„. ì´ë¥¼ ì œì–´ì˜ ì—­ì „(IoC)ë¼ í•¨. (ì œì–´ì˜ ì—­ì „: í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ)   ì˜ì¡´ê´€ê³„ëŠ” ì •ì ì¸ ì˜ì¡´ê´€ê³„(import ë³´ê³  ì•Œìˆ˜ ìˆëŠ”), ë™ì ì¸ ì˜ì¡´ê´€ê³„(ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°)ê°€ ìˆëŠ”ë° ë™ì ì¸ ì˜ì¡´ê´€ê³„ë¥¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë¼ í•¨.   ê·¸ë¦¬ê³  AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ(DI ì»¨í…Œì´ë„ˆ)ë¼ í•¨. (ì—¬ê¸°ê¹Œì§€ ìˆœìˆ˜í•œ ìë°” ì½”ë“œë¡œ DIë¥¼ ì ìš©í•¨.)   ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜, AppConfigì— @Configuration, ë©”ì„œë“œì— @Beanì„ ë¶™ì„. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¨.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(ApplicationContext)ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì— ê°œë°œìê°€ ì§ì ‘ ê°ì²´ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ ì´ì   ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©.  ","categories": ["Spring"],
        "tags": ["Spring","Java"],
        "url": "/spring/Spring-IoC-DI/",
        "teaser": ""
      },{
        "title": "ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ì‹±ê¸€í†¤ íŒ¨í„´   ì‹±ê¸€í†¤ íŒ¨í„´ ë“±ì¥ë°°ê²½   ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ìì˜ ìš”ì²­ì´ ë§ìœ¼ë©° ë™ì‹œì— ìš”ì²­ì„ í•œë‹¤. ë§Œì•½, ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ í•  ë•Œë§ˆë‹¤ ê°ì²´ê°€ ìƒì„±ëœë‹¤. ë”°ë¼ì„œ, ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë§¤ìš° ì‹¬í•˜ë‹¤.   ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ í…ŒìŠ¤íŠ¸   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Test @DisplayName(\"ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ\") void pureContainer(){     AppConfig appConfig = new AppConfig();      MemberService memberService1 = appConfig.memberService();     MemberService memberService2 = appConfig.memberService();      // ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸     System.out.println(\"memberService1 = \" + memberService1);     System.out.println(\"memberService2 = \" + memberService2);      // memberService1 != memberService2     assertThat(memberService1).isNotSameAs(memberService2); }   1 2 memberService1 = com.study.core.member.MemberServiceImpl@13b6aecc memberService2 = com.study.core.member.MemberServiceImpl@158a8276   ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•œ í›„ ê³µìœ í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ í•˜ëŠ”ë° ì´ëŸ¬í•œ íŒ¨í„´ì„ ì‹±ê¸€í†¤ íŒ¨í„´ì´ë¼ í•œë‹¤.   ì‹±ê¸€í†¤ íŒ¨í„´ì´ë€?   ì‹±ê¸€í†¤ íŒ¨í„´ì´ë€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ì ìš©ë˜ë©´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œ ì´ìƒ ìƒì„±í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ëŠ”ë‹¤. (private ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„ì˜ë¡œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ëŠ”ë‹¤.)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 package hello.core.singleton;  public class SingletonService {  \t\t// #1     private static final SingletonService instance = new SingletonService();  \t\t// #2     public static SingletonService getInstance() {         return instance;     }      // #3     private SingletonService() {     }      public void logic() {         System.out.println(\"ì‹±ê¸€í†¤ ê°ì²´ ë¡œì§ í˜¸ì¶œ\");     } }      static ì˜ì—­ì— ê°ì²´ instanceë¥¼ ë”± 1ê°œë§Œ ìƒì„±í•´ë‘”ë‹¤. staticìœ¼ë¡œ ë˜ìˆìœ¼ë©´ í´ë˜ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ë•Œ ë‹¨ í•œë²ˆë§Œ ìˆ˜í–‰í•˜ê³  static ì˜ì—­ì— í•˜ë‚˜ë§Œ ì˜¬ë¼ê°„ë‹¤.   publicìœ¼ë¡œ ì—´ì–´ì„œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì´ static ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•˜ë„ë¡ í—ˆìš©í•œë‹¤. ì´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì˜¤ì§ getInstance() ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.   private ìƒì„±ìë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì„ ëª»í•˜ê²Œ ë§‰ëŠ”ë‹¤.   ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 11 @Test @DisplayName(\"ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•œ ê°ì²´ ì‚¬ìš©\") void singletonServiceTest() {     SingletonService singletonService1 = SingletonService.getInstance();     SingletonService singletonService2 = SingletonService.getInstance();      System.out.println(\"singletonService1 = \" + singletonService1);     System.out.println(\"singletonService2 = \" + singletonService2);      Assertions.assertThat(singletonService1).isSameAs(singletonService2); }   1 2 singletonService1 = com.study.core.singleton.SingletonService@66d18979 singletonService2 = com.study.core.singleton.SingletonService@66d18979   privateë¡œ new í‚¤ì›Œë“œë¥¼ ë§‰ì•„ë‘ì—ˆê¸° ë•Œë¬¸ì— getInstance() ë©”ì„œë“œ ì‚¬ìš©í–ˆë‹¤. í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ë©´ ê³ ê°ì˜ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ ë§ì€ ë¬¸ì œì ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤.   ì‹±ê¸€í†¤ íŒ¨í„´ ë¬¸ì œì       ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œ ìì²´ê°€ ë§ì´ ë“¤ì–´ê°„ë‹¤.   ì˜ì¡´ê´€ê³„ìƒ í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•œë‹¤. DIPë¥¼ ìœ„ë°˜í•œë‹¤.   í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•´ì„œ OCP ì›ì¹™ì„ ìœ„ë°˜í•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.   í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µë‹¤.   ë‚´ë¶€ ì†ì„±ì„ ë³€ê²½í•˜ê±°ë‚˜ ì´ˆê¸°í™” í•˜ê¸° ì–´ë µë‹¤.   private ìƒì„±ìë¡œ ìì‹ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì–´ë µë‹¤.   ê²°ë¡ ì ìœ¼ë¡œ ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤.   ì•ˆí‹°íŒ¨í„´ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.      ì°¸ê³    ì—¬ê¸°ì„œ DIP ì›ì¹™ì„ ìœ„ë°˜í–ˆë‹¤ê³  í•œ ê²ƒì´ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ë¬´ì¡°ê±´ DIP ì›ì¹™ì„ ìœ„ë°˜í•œë‹¤ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.     ì´ëŸ¬í•œ ë¬¸ì œì ë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•œë‹¤.   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆë€?   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë¬¸ì œì ì„ í•´ê²°í•˜ë©´ì„œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤(1ê°œë§Œ ìƒì„±)ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì•„ë„ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤. ì¦‰, ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ê´€ë¦¬í•œë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì—­í• ì„ í•œë‹¤. ì´ë ‡ê²Œ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¼ í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìœ„ì—ì„œ ì„¤ëª…í–ˆë˜ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ìœ„í•œ ì§€ì €ë¶„í•œ ì½”ë“œê°€ ë“¤ì–´ê°€ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ê³¼ DIP, OCP, í…ŒìŠ¤íŠ¸, private ìƒì„±ìë¡œë¶€í„° ììœ ë¡­ê²Œ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì  ë•ë¶„ì— ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ëª¨ë“  ë‹¨ì ì„ í•´ê²°í•˜ë©´ì„œ ê°ì²´ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Test @DisplayName(\"ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì‹±ê¸€í†¤\") void springContainer() {     ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);     MemberService memberService1 = ac.getBean(\"memberService\", MemberService.class);     MemberService memberService2 = ac.getBean(\"memberService\", MemberService.class);      // ì°¸ì¡°ê°’ì´ ê°™ì€ ê²ƒì„ í™•ì¸     System.out.println(\"memberService1 = \" + memberService1);     System.out.println(\"memberService2 = \" + memberService2);      // memberService1 == memberService2     assertThat(memberService1).isSameAs(memberService2); }   1 2 memberService1 = com.study.core.member.MemberServiceImpl@c2db68f memberService2 = com.study.core.member.MemberServiceImpl@c2db68f   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë•ë¶„ì— ê³ ê°ì˜ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³    ìŠ¤í”„ë§ì˜ ê¸°ë³¸ ë¹ˆ ë“±ë¡ ë°©ì‹ì€ ì‹±ê¸€í†¤ì´ì§€ë§Œ, ì‹±ê¸€í†¤ ë°©ì‹ë§Œ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë’¤ì— ë¹ˆ ìŠ¤ì½”í”„ì—ì„œ ì„¤ëª…í•˜ê² ë‹¤.     ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì    ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ê³µìœ í•˜ëŠ” ì‹±ê¸€í†¤ ë°©ì‹ì€ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ì˜ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ ê°ì²´ëŠ” ìƒíƒœë¥¼ ìœ ì§€(stateful)í•˜ê²Œ ì„¤ê³„í•˜ë©´ ì•ˆë˜ê³  ë¬´ìƒíƒœ(stateless)ë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆì˜ í•„ë“œì— ê³µìœ  ê°’ì„ ì„¤ì •í•˜ë©´ ì •ë§ í° ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.   ë¬´ìƒíƒœ(stateless)      íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ì— ì˜ì¡´ì ì¸ í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆëœë‹¤.   íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆëœë‹¤.   ê°€ê¸‰ì  ì½ê¸°ë§Œ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.   í•„ë“œ ëŒ€ì‹ ì— ìë°”ì—ì„œ ê³µìœ ë˜ì§€ ì•ŠëŠ” ì§€ì—­ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal ë“±ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   CGLIB ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘   @Configurationê³¼ ì‹±ê¸€í†¤   ì•„ë˜ ì½”ë“œëŠ” AppConfig ì„¤ì •íŒŒì¼ë¡œ @Configurationê³¼ @Beanì´ ìˆê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ì´ ì ìš©ë˜ì–´ìˆë‹¤. ê·¸ëŸ°ë° í˜¸ì¶œë˜ëŠ” ì˜ì¡´ê´€ê³„ë¥¼ ë³´ë©´ ì‹±ê¸€í†¤ì´ ê¹¨ì§€ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @Configuration public class AppConfig {      // memberService -&gt; MemoryMemberRepository     // orderService -&gt; MemoryMemberRepository      @Bean     public MemberService memberService() {         return new MemberServiceImpl(memberRepository());     }      @Bean     public MemoryMemberRepository memberRepository() {         return new MemoryMemberRepository();     }      @Bean     public OrderService orderService() {         return new OrderServiceImpl(memberRepository(), discountPolicy());     }      @Bean     public DiscountPolicy discountPolicy() {         return new FixDiscountPolicy();     } }   memberService(), orderService() ë‘˜ ë‹¤ MemoryMemberRepository()ê°€ ìƒì„±ë˜ë©´ì„œ ì‹±ê¸€í†¤ì´ ê¹¨ì§€ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤. ê·¸ëŸ¬ë‚˜, í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë©´ ëª¨ë‘ ê°™ì€ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê³  ìˆë‹¤. ì´ì²˜ëŸ¼ ì‹±ê¸€í†¤ì„ ë³´ì¥í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ”  @Configurationì„ í†µí•´ ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.   @Configurationê³¼ ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë‹¤. ë”°ë¼ì„œ, ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì´ ë˜ë„ë¡ ë³´ì¥í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë° ìŠ¤í”„ë§ì´ ìë°” ì½”ë“œê¹Œì§€ ì¡°ì‘í•˜ê¸´ ì–´ë µë‹¤. ê·¸ë˜ì„œ ìŠ¤í”„ë§ì€ í´ë˜ìŠ¤ì˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.   AppConfig í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì¶œë ¥í•˜ëŠ” í…ŒìŠ¤íŠ¸ì½”ë“œ   1 2 3 4 5 6 7 @Test void configurationDeep() {     ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);     AppConfig bean = ac.getBean(AppConfig.class);      System.out.println(\"bean = \" + bean.getClass()); }   1 bean = class hello.core.AppConfig$$EnhancerBySpringCGLIB$$4730a6f2   ìˆœìˆ˜í•œ í´ë˜ìŠ¤ë¼ë©´ class hello.core.AppConfigê°€ ì¶œë ¥ë˜ì–´ì•¼ í•˜ì§€ë§Œ, ì˜ˆìƒê³¼ëŠ” ë‹¤ë¥´ê²Œ í´ë˜ìŠ¤ ëª…ì— xxxCGLIBê°€ ë¶™ëŠ”ë‹¤. ì´ê²ƒì€ ìŠ¤í”„ë§ì´ CGLIBë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ AppConfig í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ê·¸ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í–ˆê¸° ë•Œë¬¸ì´ë‹¤. (AppConfigë¥¼ ìƒì†ë°›ì€ AppConfig@CGLIB)   ê·¸ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ë°”ë¡œ ì‹±ê¸€í†¤ì´ ë³´ì¥ë˜ë„ë¡ í•´ì¤€ë‹¤. ì•„ë§ˆë„ ë‹¤ìŒê³¼ ê°™ì´ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì¡°ì‘í•´ì„œ ì‘ì„±ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.   AppConfig@CGLIB ì˜ˆìƒ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 @Bean public MemberRepository memberRepository() {       if (memoryMemberRepositoryê°€ ì´ë¯¸ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ë˜ì–´ ìˆìœ¼ë©´?) {         return ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì°¾ì•„ì„œ ë°˜í™˜;     } else { //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì—†ìœ¼ë©´         ê¸°ì¡´ ë¡œì§ì„ í˜¸ì¶œí•´ì„œ MemoryMemberRepositoryë¥¼ ìƒì„±í•˜ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡         return ë°˜í™˜;     } }   @Beanì´ ë¶™ì€ ë©”ì„œë“œë§ˆë‹¤ ì´ë¯¸ ìŠ¤í”„ë§ ë¹ˆì´ ì¡´ì¬í•˜ë©´ ì¡´ì¬í•˜ëŠ” ë¹ˆì„ ë°˜í™˜í•˜ê³ , ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ìƒì„±í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ë°˜í™˜í•˜ëŠ” ì½”ë“œê°€ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. ë•ë¶„ì— ì‹±ê¸€í†¤ì´ ë³´ì¥ëœë‹¤.   @Configurationì„ ì ìš©í•˜ì§€ ì•Šê³  @Beanë§Œ ì ìš©í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?   @Configurationì„ ë¶™ì´ë©´ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ëŠ” CGLIB ê¸°ìˆ ì„ ì‚¬ìš©í•´ì„œ ì‹±ê¸€í†¤ì„ ë³´ì¥í•˜ì§€ë§Œ ë§Œì•½, @Beanë§Œ ì ìš©í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?   1 2 3 4 //@Configuration ì‚­ì œ public class AppConfig {  }   1 bean = class hello.core.AppConfig   ì´ ì¶œë ¥ ê²°ê³¼ë¥¼ í†µí•´ì„œ AppConfigê°€ CGLIB ê¸°ìˆ  ì—†ì´ ìˆœìˆ˜í•œ AppConfigë¡œ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¦‰, @Beanë§Œ ì‚¬ìš©í•´ë„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ë§Œ, ì‹±ê¸€í†¤ì„ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ëŠ” í•­ìƒ @Configurationì„ ì‚¬ìš©í•˜ì.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-Singleton/",
        "teaser": ""
      },{
        "title": "ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…   ìŠ¤í”„ë§ì€ ìë°” ì½”ë“œì˜ @Beanì´ë‚˜ XMLì˜ &lt;bean&gt; ê°™ì€ ì„¤ì • ì •ë³´ê°€ ì—†ì–´ë„ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” @Autowired ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   1 2 3 4 5 @ComponentScan(         excludeFilters = @Filter(type = FilterType.ANNOTATION, classes = Configuration.class)) public class AutoAppConfig {     // ê¸°ì¡´ê³¼ ë‹¤ë¥´ê²Œ ë¹„ì–´ìˆìŒ }   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € @ComponentScanì„ ì„¤ì • ì •ë³´ì— ë¶™ì—¬ì£¼ë©´ ëœë‹¤. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ ì´ë¦„ ê·¸ëŒ€ë¡œ @Component ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.   ì´ì œ êµ¬ì²´ í´ë˜ìŠ¤ë“¤(MemoryMemberRespository, RateDiscountPolicy, MemberServiceImpl, OrderServiceImpl)ì´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ë˜ë„ë¡ @Component ì• ë…¸í…Œì´ì…˜ì„ ì…ë ¥í•œë‹¤.      ì°¸ê³    excludeFiltersë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ê¸°ì¡´ì˜ ì„¤ì • ì •ë³´ì¸ AppConfigë¥¼ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. AppConfigì—ëŠ” @Configurationê°€ ë¶™ì–´ìˆëŠ”ë°, ì´ëŸ¬ë©´ ì„¤ì • ì •ë³´ë„ ìë™ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ë˜ë¯€ë¡œ ì¶©ëŒì´ ë°œìƒí•œë‹¤.        ì°¸ê³    excludeFiltersë¥¼ ì‚¬ìš©í•˜ë©´ @Configurationì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì œì™¸í•œë‹¤ê³  í–ˆëŠ”ë° AutoAppConfigë„ @Configuration ë¶™ì–´ìˆë‹¤. í•˜ì§€ë§Œ ì œì™¸ëŒ€ìƒì´ ì•„ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” @ComponentScanì´ ë¶™ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.        ì°¸ê³    @Configurationì´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ëœ ì´ìœ ë„ @Configuration ì†ŒìŠ¤ì½”ë“œë¥¼ ì—´ì–´ë³´ë©´ @Component ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤.     ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…   AppConfigì—ì„œëŠ” @Beanìœ¼ë¡œ ì§ì ‘ ì„¤ì • ì •ë³´ë¥¼ ì‘ì„±í–ˆê³ , ì˜ì¡´ê´€ê³„ë„ ì§ì ‘ ëª…ì‹œí–ˆë‹¤. ì´ì œëŠ” ì´ëŸ° ì„¤ì • ì •ë³´ ìì²´ê°€ ì—†ê¸° ë•Œë¬¸ì—, ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ê° í´ë˜ìŠ¤ ì•ˆì—ì„œ í•´ê²°í•´ì•¼ í•œë‹¤.   @AutowiredëŠ” ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì¤€ë‹¤. ìƒì„±ìì— @Autowiredë¥¼ ì§€ì •í•˜ë©´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤. ë˜í•œ, @Autowiredë¥¼ ì‚¬ìš©í•˜ë©´ ìƒì„±ìì—ì„œ ì—¬ëŸ¬ ì˜ì¡´ê´€ê³„ë„ í•œë²ˆì— ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 @Component public class MemberServiceImpl implements MemberService {      private final MemberRepository memberRepository;  \t\t// getBean(MemberRepository.class)ì™€ ë™ì¼     @Autowired     public MemberServiceImpl(MemberRepository memberRepository) {         this.memberRepository = memberRepository;     } \t\t... }   1 2 3 4 5 6 7 8 9 10 11 12 13 @Component public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository;     private final DiscountPolicy discountPolicy;      @Autowired     public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {         this.memberRepository = memberRepository;         this.discountPolicy = discountPolicy;     }     ... }   í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì •ìƒì ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ë˜ì—ˆëŠ”ì§€ì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 @Test void basicScan() {     ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class);     MemberService memberService = ac.getBean(MemberService.class);     assertThat(memberService).isInstanceOf(MemberService.class); }   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”, ìë™ ì˜ì¡´ê´€ê³„ ì£¼ì…ì˜ ë™ì‘ íë¦„   @ComponentScan      @ComponentScanì€ @Componentê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.   ìŠ¤í”„ë§ ë¹ˆì˜ ê¸°ë³¸ ì´ë¦„ì€ í´ë˜ìŠ¤ëª…ì„ ì‚¬ìš©í•˜ë˜ ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¥¼ ì‚¬ìš©í•œë‹¤. (MemberServiceImpl í´ë˜ìŠ¤ â†’ memberServiceImpl)   ë§Œì•½ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ì„ ì§ì ‘ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë©´ @Component(â€ë¹ˆ ì´ë¦„â€) ë¡œ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´ ëœë‹¤.   @Autowired ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…      ìƒì„±ìì— @Autowiredë¥¼ ì§€ì •í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤.        ì´ë•Œ, ê¸°ë³¸ ì¡°íšŒ ì „ëµì€ íƒ€ì…ì´ ê°™ì€ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, MemberServiceImpl ìƒì„±ìì— @Autowiredê°€ ë¶™ì–´ìˆìœ¼ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìˆëŠ” memberRepositoryì™€ ê°™ì€ íƒ€ì…ì´ ìˆëŠ”ì§€ ì°¾ëŠ”ë‹¤.       1 2 3 4 5 6 7 8 9 10   @Component   public class MemberServiceImpl implements MemberService {            private final MemberRepository memberRepository;            @Autowired       public MemberServiceImpl(MemberRepository memberRepository) {           this.memberRepository = memberRepository;       }   }           íƒìƒ‰ ìœ„ì¹˜ì™€ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒ   íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ ì§€ì •   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ì—¬ íƒìƒ‰í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ @ComponentScanì´ ë¶™ì€ ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ì‹œì‘ ìœ„ì¹˜ê°€ ëœë‹¤.           basePackages: íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ìœ„ì¹˜ ì§€ì •, í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•œ í•˜ìœ„ íŒ¨í‚¤ì§€ ëª¨ë‘ íƒìƒ‰       1 2 3 4 5 6 7 8   @ComponentScan(       basePackages = \"hello.core.member\",   )        // ì‹œì‘ ìœ„ì¹˜ë¥¼ ì—¬ëŸ¬ê°œ ì§€ì •í•  ìˆ˜ë„ ìˆìŒ   @ComponentScan(       basePackages = {\"hello.core\", \"hello.service\"}   )                basePackageClasses: ì§€ì •í•œ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¥¼ íƒìƒ‰ ì‹œì‘ ìœ„ì¹˜ë¡œ ì§€ì •í•œë‹¤.       ê¶Œì¥í•˜ëŠ” ë°©ë²•   íŒ¨í‚¤ì§€ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³ , ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— ë‘ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤. í”„ë¡œì íŠ¸ ë©”ì¸ ì„¤ì • ì •ë³´ëŠ” í”„ë¡œì íŠ¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ì •ë³´ì´ê¸° ë•Œë¬¸ì— ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤.   ì˜ˆì‹œ) com.hello, com.hello.service, com.hello.repository ì™€ ê°™ì€ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´, com.hello (ì‹œì‘ ë£¨íŠ¸)ì— ë©”ì¸ ì„¤ì • ì •ë³´ë¥¼ ë‘ê³  basePackagesëŠ” ìƒëµí•œë‹¤.   ì°¸ê³ ë¡œ, ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê²½ìš°ì—ë„ ëŒ€í‘œ ì‹œì‘ ì •ë³´ì¸ @SpringBootApplicationì„ í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤. (ë˜í•œ, @SpringBootApplication ì•ˆì— @ComponentScanì´ ë“¤ì–´ìˆë‹¤.)   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë³¸ ëŒ€ìƒ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.      @Component: ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©   @Controller: ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš© ë° ì¸ì‹   @Service: ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš©, ê°œë°œìë“¤ì´ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì„ ì¸ì‹í•˜ëŠ”ë° ë„ì›€ì´ ë¨ (ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì„ ì¸ì‹í•˜ëŠ”ë° ë„ì›€ì„ ì¤„ ë¿, íŠ¹ë³„í•œ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.)   @Repository: ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš© ë° ì¸ì‹í•˜ê³  ë°ì´í„° ê³„ì¸µì˜ ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì¤Œ   @Configuration: ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš© ë° ì¸ì‹, ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€ ì²˜ë¦¬í•¨   í•´ë‹¹ í´ë˜ìŠ¤ë“¤ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ë³´ë©´ @Componentë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 @Component public @interface Controller { }  @Component public @interface Service { }  @Component public @interface Configuration { }      ì°¸ê³    ì‚¬ì‹¤ ì• ë…¸í…Œì´ì…˜ì—ëŠ” ìƒì†ê´€ê³„ë¼ëŠ” ê²ƒì´ ì—†ë‹¤. ê·¸ë˜ì„œ ì´ë ‡ê²Œ ì• ë…¸í…Œì´ì…˜ì´ íŠ¹ì • ì• ë…¸í…Œì´ì…˜ì„ ë“¤ê³  ìˆëŠ” ê²ƒì„ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìë°” ì–¸ì–´ê°€ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆê³ , ìŠ¤í”„ë§ì´ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.        ì°¸ê³    useDefaultFilters ì˜µì…˜ì€ ê¸°ë³¸ìœ¼ë¡œ ì¼œì ¸ìˆëŠ”ë°, ì´ ì˜µì…˜ì„ ë„ë©´ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒë“¤ì´ ì œì™¸ëœë‹¤. (ê·¸ëƒ¥ ì´ëŸ° ì˜µì…˜ì´ ìˆêµ¬ë‚˜ ì •ë„ ì•Œê³  ë„˜ì–´ê°€ì.)     í•„í„°   includeFilters   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì„ ì¶”ê°€ë¡œ ì§€ì •   excludeFilters   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì œíšŒí•  ëŒ€ìƒì„ ì§€ì •   FilterType ì˜µì…˜      ANNOTATION: ê¸°ë³¸ê°’, ì• ë…¸í…Œì´ì…˜ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤.   ASSIGNABLE_TYPE: ì§€ì •í•œ íƒ€ì…ê³¼ ìì‹ íƒ€ì…ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤.   ASPECTJ: AspectJ íŒ¨í„´ ì‚¬ìš©   REGEX: ì •ê·œ í‘œí˜„ì‹   CUSTOM: TypeFilterì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì²˜ë¦¬      ì°¸ê³    @Componentë©´ ì¶©ë¶„í•˜ê¸° ë•Œë¬¸ì—, includeFilters ë¥¼ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. excludeFiltersëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ìœ ë¡œ ê°„í˜¹ ì‚¬ìš©í•  ë•Œê°€ ìˆì§€ë§Œ ë§ì§€ëŠ” ì•Šë‹¤. íŠ¹íˆ ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ”ë°, ê°œì¸ì ìœ¼ë¡œëŠ” ì˜µì…˜ì„ ë³€ê²½í•˜ë©´ì„œ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” ìŠ¤í”„ë§ì˜ ê¸°ë³¸ ì„¤ì •ì— ìµœëŒ€í•œ ë§ì¶”ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³ , ì„ í˜¸í•˜ëŠ” í¸ì´ë‹¤.     ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ê°™ì€ ë¹ˆ ì´ë¦„ì„ ë“±ë¡í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?           ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡       â†’ ConflictingBeanDefinitionException ì˜ˆì™¸ ë°œìƒ            ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡       â†’ ìˆ˜ë™ ë¹ˆì´ ìš°ì„ ê¶Œì„ ê°€ì§       ê·¸ëŸ¬ë‚˜, ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì´ ì¶©ëŒë‚˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-ComponentScan/",
        "teaser": ""
      },{
        "title": "Java, í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± - JUnit 5",
        "excerpt":"1. JUnit 5 ì†Œê°œ   1.1 JUnit 5ë€?      ìë°” ê°œë°œìê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬            ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ìë°” ê°œë°œì 93%ê°€ JUnitì„ ì‚¬ìš©           ìë°” 8 ì´ìƒì„ í•„ìš”ë¡œ í•¨       1.2 Junit 5ì˜ ì„¸ë¶€ ëª¨ë“ˆ 3ê°€ì§€      JUnit Platform: í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•´ì£¼ëŠ” ëŸ°ì²˜ë¥¼ ì œê³µ. TestEngine API ì œê³µ   Jupiter: TestEngine API êµ¬í˜„ì²´ë¡œ JUnit 5ë¥¼ ì œê³µ   Vintage: JUnit 4ì™€ 3ì„ ì§€ì›í•˜ëŠ” TestEngine êµ¬í˜„ì²´       2. JUnit 5: ì‹œì‘í•˜ê¸°   2.2+ ë²„ì „ì˜ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ëŠ” ê¸°ë³¸ìœ¼ë¡œ JUnit 5 ì˜ì¡´ì„± ì¶”ê°€ë˜ì–´ ë”°ë¡œ ì„¤ì •í• ê²Œ ì—†ë‹¤.   maven dependency   1 2 3 4 5 6 &lt;dependency&gt;     &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;     &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;     &lt;version&gt;5.5.2&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;          ì°¸ê³  Junit 5ë¶€í„°ëŠ” publicì„ ì•ˆë¶™ì—¬ë„ ëœë‹¤. (ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— public ì„ êµ³ì´ ë¶™ì¼ í•„ìš”ê°€ ì—†ì–´ì§)         2.1 ê¸°ë³¸ ì–´ë…¸í…Œì´ì…˜   ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ êµ¬í˜„í•  ë•ŒëŠ” ë°˜ë“œì‹œ staticì„ ë¶™ì—¬ì•¼ í•œë‹¤. default ëŠ” ë˜ê³  private ì€ ì•ˆëœë‹¤. ê·¸ë¦¬ê³  ë¦¬í„´íƒ€ì…ì´ ìˆìœ¼ë©´ ì•ˆë¨.   â†’ ê¸°ë³¸ì ìœ¼ë¡œ static void ì¨ì•¼í•œë‹¤ê³  ìƒê°í•˜ì       2.1.1 @Test   í…ŒìŠ¤íŠ¸ ë©”ì„œë“œì„ì„ ë‚˜íƒ€ë‚´ëŠ” ì–´ë…¸í…Œì´ì…˜   2.1.2 @BeforeAll / @AfterAll   beforeAll ì–´ë…¸í…Œì´ì…˜: í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì•ˆì— ìˆëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ ë”± í•œë²ˆ í˜¸ì¶œ ë¨   afterAll ì–´ë…¸í…Œì´ì…˜: í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì•ˆì— ìˆëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ëœ í›„ ë”± í•œë²ˆ í˜¸ì¶œ ë¨   2.1.3 @BeforeEach / @AfterEach   beforeEach ì–´ë…¸í…Œì´ì…˜: ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ í˜¸ì¶œ ë¨   afterEach ì–´ë…¸í…Œì´ì…˜: ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ì‹¤í–‰ëœ í›„ í˜¸ì¶œ ë¨   2.1.4 @Disabled   í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ì´ ìˆì–´ë„ Disabled ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ìˆë‹¤ë©´ í…ŒìŠ¤íŠ¸ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ       í…ŒìŠ¤íŠ¸ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 package me.yes.thejavatest;  import org.junit.jupiter.api.*;  import static org.junit.jupiter.api.Assertions.*;  class StudyTest {      @Test     void create() {         Study study = new Study();         assertNotNull(study);         System.out.println(\"create\");     }      @Test     void create1() {         System.out.println(\"create1\");     }      @BeforeAll     static void beforeAll() {         System.out.println(\"before all\");     }      @AfterAll     static void afterAll() {         System.out.println(\"after all\");     }      @BeforeEach     void beforeEach() {         System.out.println(\"before each\");     }      @AfterEach     void afterEach() {         System.out.println(\"after each\");     }      @Test     @Disabled     void create2() {         System.out.println(\"create2\");     }  }       3. JUnit 5: í…ŒìŠ¤íŠ¸ ì´ë¦„ í‘œê¸°í•˜ê¸°      @DisplayNameGeneration   @DisplayName       í…ŒìŠ¤íŠ¸ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 package me.yes.thejavatest;  import org.junit.jupiter.api.*;  import static org.junit.jupiter.api.Assertions.*;  @DisplayNameGeneration(DisplayNameGenerator.ReplaceUnderscores.class) class StudyTest {      @Test     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\")     void create() {         Study study = new Study();         assertNotNull(study);         System.out.println(\"create\");     } }       4. JUnit 5: Assertion   org.junit.jupiter.api.Assertions.* ë¥¼ ì‚¬ìš©       4.1 ìì£¼ ì‚¬ìš©í•˜ëŠ” Assertë¬¸   4.1.1 assertEquals(expected, actual)      ì‹¤ì œ ê°’ì´ ê¸°ëŒ€í•œ ê°’ê³¼ ê°™ì€ì§€ í™•ì¸   ê¸°ëŒ€í•˜ëŠ” ê°’ì„ ì™¼ìª½ì— ì‹¤ì œ ë‚˜ì˜¤ëŠ” ê°’ì„ ì˜¤ë¥¸ìª½ì— ì ì–´ì¤Œ (í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ apiê°€ ì˜ë„í•˜ëŠ” ë°”ëŠ” ê·¸ë ‡ë‹¤)       ëŒë‹¤ì‹ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ì´ìœ       í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨ í–ˆì„ ë•Œë§Œ ì—°ì‚° (ëŒë‹¤ì‹ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤íŒ¨í•˜ë˜ ì„±ê³µí•˜ë˜ ë¬´ì¡°ê±´ ì‹¤í–‰)   ë¬¸ìì—´ ì—°ì‚°ì˜ ë¹„ìš©ì´ ì¡°ê¸ˆ ê±±ì •ì´ ë  ë•ŒëŠ” ëŒë‹¤ì‹ì„ ì“°ëŠ”ê²Œ ìœ ë¦¬ (ì„±ëŠ¥ì„ ì‹ ê²½ì“°ëŠ” ì…ì¥ì—ì„œ)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 assertEquals(StudyStatus.DRAFT, study.getStatus(), \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ DRAFTì—¬ì•¼ í•œë‹¤.\"); assertEquals(StudyStatus.DRAFT, study.getStatus(), () -&gt; \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ DRAFTì—¬ì•¼ í•œë‹¤.\");  assertEquals(StudyStatus.DRAFT, study.getStatus(),          \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ \" + StudyStatus.DRAFT + \"ì—¬ì•¼ í•œë‹¤.\"); assertEquals(StudyStatus.DRAFT, study.getStatus(),         () -&gt; \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ \" + StudyStatus.DRAFT + \"ì—¬ì•¼ í•œë‹¤.\");  assertEquals(StudyStatus.DRAFT, study.getStatus(), new Supplier&lt;String&gt;() {     @Override     public String get() {         return \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ \" + StudyStatus.DRAFT + \" ìƒíƒœë‹¤.\";     } });       4.1.2 assertNotNull(actual)   ê°’ì´ nullì´ ì•„ë‹Œì§€ í™•ì¸       4.1.3 assertTrue(boolean)   ë‹¤ìŒ ì¡°ê±´ì´ ì°¸(true)ì¸ì§€ í™•ì¸       4.1.4 assertAll(executableslâ€¦)   ëª¨ë“  í™•ì¸ êµ¬ë¬¸ í™•ì¸   í…ŒìŠ¤íŠ¸ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ê¹¨ì§€ë©´ ê·¸ ë‹¤ìŒ assertë¬¸ìœ¼ë¡œ ë„˜ì–´ê°€ì§€ ì•Šì§€ë§Œ ì´ë¥¼ ë™ì‹œì— ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤.   ê°ê° assertë¬¸ì„ ì‹¤í–‰ í•  ìˆ˜ë„ ìˆì§€ë§Œ ëª¨ë“  assertë¬¸ì˜ ê²°ê³¼ë¥¼ í•œë²ˆì— ì•Œê³  ì‹¶ì„ ë•Œ assertAllì„ ì‚¬ìš©í•´ì„œ ëŒë‹¤ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ assertë¬¸ì„ í•œë²ˆì— ì‹¤í–‰ í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 assertAll(         () -&gt; assertNotNull(study),         () -&gt; assertEquals(StudyStatus.DRAFT, study.getStatus(), () -&gt; \"ìŠ¤í„°ë””ë¥¼ ì²˜ìŒ ë§Œë“¤ë©´ ìƒíƒœê°’ì´ DRAFTì—¬ì•¼ í•œë‹¤.\"),         () -&gt; assertTrue(study.getLimit() &gt; 0, \"ìŠ¤í„°ë”” ìµœëŒ€ ì°¸ì„ ê°€ëŠ¥ ì¸ì›ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•œë‹¤.\") );       4.1.5 assertThrows(expectedType, executable)   ì˜ˆì™¸ ë°œìƒ í™•ì¸   1 2 3 IllegalArgumentException exception =         assertThrows(IllegalArgumentException.class, () -&gt; new Study(-10)); assertEquals(\"limitì€ 0ë³´ë‹¤ ì»¤ì•¼ í•œë‹¤.\", exception.getMessage());       4.1.6 assertTimeout(duration, executable)   íŠ¹ì • ì‹œê°„ ì•ˆì— ì‹¤í–‰ì´ ì™„ë£Œë˜ëŠ”ì§€ í™•ì¸   ìœ„ì˜ ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ê°€ ëë‚ ë•Œê¹Œì§€ í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì‹¤ì œ í…ŒìŠ¤íŠ¸ì— ì˜¤ë˜ê±¸ë¦¬ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´ ê·¸ ì½”ë“œê°€ ëë‚ ë•Œê¹Œì§€ ëë‚˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜, ì´ë ‡ê²Œ í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤. ì‹¤ì œ 100ë°€ë¦¬ì„¸ì»¨ë“œê°€ ëë‚˜ë©´ ê·¸ëƒ¥ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤.(ì´ê²Œ íš¨ìœ¨ì ì´ë‹ˆê¹Œ)   ê·¸ëŸ´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ assertTimeoutPreemptively() ì´ë‹¤. (Preemptively: ì¦‰ê°ì ì¸)   ê·¸ëŸ¬ë‚˜, assertTimeoutPreemptively()ëŠ” ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤. ThreadLocalê³¼ ê´€ë ¨í•´ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 assertTimeout(Duration.ofMillis(100), () -&gt; {     new Study(10);     Thread.sleep(300); });  assertTimeoutPreemptively(Duration.ofMillis(100), () -&gt; {     new Study(10);     Thread.sleep(300); });          ThreadLocalì´ë€?         4.2 org.assertj.core.api.Assertions.assertThat   1 2 Study actual = new Study(10); assertThat(actual.getLimit()).isGreaterThan(0);   ì´ë ‡ê²Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.       5. JUnit 5: ì¡°ê±´ì— ë”°ë¼ í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ê¸°   íŠ¹ì •í•œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ì— í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•       org.junit.jupiter.api.Assumptions      assumeTrue(ì¡°ê±´)   assumingThat(ì¡°ê±´, í…ŒìŠ¤íŠ¸)   @Enabled ì™€ @Disabled      OnOS   OnJre   IfEnvironmentVariable   If       í…ŒìŠ¤íŠ¸ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package me.yes.thejavatest;  import org.junit.jupiter.api.*; import org.junit.jupiter.api.condition.*;  import static org.assertj.core.api.Assertions.assertThat; import static org.junit.jupiter.api.Assumptions.assumeTrue; import static org.junit.jupiter.api.Assumptions.assumingThat;  class StudyTest {      @Test     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\")     @EnabledOnOs({OS.MAC, OS.LINUX})     @EnabledOnJre({JRE.JAVA_8, JRE.JAVA_9, JRE.JAVA_10, JRE.JAVA_11})     @EnabledIfEnvironmentVariable(named = \"TEST_ENV\", matches = \"LOCAL\")     void create() {         String test_env = System.getenv(\"TEST_ENV\");          assumeTrue(\"LOCAL\".equalsIgnoreCase(test_env));          assumingThat(\"LOCAL\".equalsIgnoreCase(test_env), () -&gt; {             Study actual = new Study(10);             assertThat(actual.getLimit()).isGreaterThan(0);         });      } }       6. JUnit 5: íƒœê¹…ê³¼ í•„í„°ë§   í…ŒìŠ¤íŠ¸ ê·¸ë£¹ì„ ë§Œë“¤ê³  ì›í•˜ëŠ” í…ŒìŠ¤íŠ¸ ê·¸ë£¹ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥          1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Test @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\") @Tag(\"fast\") void create_new_study() {      Study actual = new Study(10);     assertThat(actual.getLimit()).isGreaterThan(0); }  @Test @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° slow\") @Tag(\"slow\") void create_new_study_again() {     System.out.println(\"create1\"); }       ë©”ì´ë¸ì—ì„œ í…ŒìŠ¤íŠ¸ í•„í„°ë§ í•˜ëŠ” ë°©ë²•   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31     &lt;profiles&gt;         &lt;profile&gt;             &lt;id&gt;default&lt;/id&gt;             &lt;activation&gt;                 &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;             &lt;/activation&gt;             &lt;build&gt;                 &lt;plugins&gt;                     &lt;plugin&gt;                         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;                         &lt;configuration&gt;                             &lt;groups&gt;fast&lt;/groups&gt;                         &lt;/configuration&gt;                     &lt;/plugin&gt;                 &lt;/plugins&gt;             &lt;/build&gt;         &lt;/profile&gt;         &lt;profile&gt;             &lt;id&gt;ci&lt;/id&gt;             &lt;build&gt;                 &lt;plugins&gt;                     &lt;plugin&gt;                         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;                         &lt;configuration&gt;                             &lt;groups&gt;fast | slow&lt;/groups&gt;                         &lt;/configuration&gt;                     &lt;/plugin&gt;                 &lt;/plugins&gt;             &lt;/build&gt;         &lt;/profile&gt;     &lt;/profiles&gt;       7. JUnit 5: ì»¤ìŠ¤í…€ íƒœê·¸   JUnit 5 ì• ë…¸í…Œì´ì…˜ì„ ì¡°í•©í•˜ì—¬ ì»¤ìŠ¤í…€ íƒœê·¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.   FastTest.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 package me.yes.thejavatest;  import org.junit.jupiter.api.Tag; import org.junit.jupiter.api.Test;  import java.lang.annotation.ElementType; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; import java.lang.annotation.Target;  @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Test @Tag(\"fast\") public @interface FastTest { }   ìœ„ì—ì„œ ìƒì„±í•œ FastTest ì–´ë…¸í…Œì´ì…˜ì€ ì•„ë˜ì™€ ê°™ì´ ì“¸ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 @FastTest @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\") void create_new_study() {     Study actual = new Study(10);     assertThat(actual.getLimit()).isGreaterThan(0); }       8. JUnit 5: í…ŒìŠ¤íŠ¸ ë°˜ë³µí•˜ê¸°   @RepeatedTest      ë°˜ë³µ íšŸìˆ˜ì™€ ë°˜ë³µ í…ŒìŠ¤íŠ¸ ì´ë¦„ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.            {displayName}       {currentRepetition}       {totalRepetitions}           RepetitionInfo íƒ€ì…ì˜ ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\") @RepeatedTest(value = 10, name = \"{displayName}, {currentRepetition}/{totalRepetitions}\") void repeatTest(RepetitionInfo repetitionInfo) {     System.out.println(\"test\" + repetitionInfo.getCurrentRepetition() + \"/\" + repetitionInfo.getTotalRepetitions()); }       @ParameterizedTest      í…ŒìŠ¤íŠ¸ì— ì—¬ëŸ¬ ë‹¤ë¥¸ ë§¤ê°œë³€ìˆ˜ë¥¼ ëŒ€ì…í•´ê°€ë©° ë°˜ë³µ ì‹¤í–‰í•œë‹¤.            {displayName}       {index}       {arguments}       {0}, {1}, â€¦           1 2 3 4 5 6 @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\") @ParameterizedTest(name = \"{index} {displayName} message={0}\") @ValueSource(strings = {\"ë‚ ì”¨ê°€\", \"ë§ì´\", \"ì¶”ì›Œì§€ê³ \", \"ìˆë„¤ìš”.\"}) void parameterizedTest(String message) {     System.out.println(message); }       1 2 3 4 5 6 7 @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\") @ParameterizedTest(name = \"{index} {displayName} message={0}\") @ValueSource(strings = {\"ë‚ ì”¨ê°€\", \"ë§ì´\", \"ì¶”ì›Œì§€ê³ \", \"ìˆë„¤ìš”.\"}) @NullAndEmptySource void parameterizedTest(String message) {     System.out.println(message); }       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\") @ParameterizedTest(name = \"{index} {displayName} message={0}\") @ValueSource(ints = {10, 20, 40}) void parameterizedTest(@ConvertWith(StudyConverter.class) Study study) {     System.out.println(study.getLimit()); }  static class StudyConverter extends SimpleArgumentConverter {      @Override     protected Object convert(Object o, Class&lt;?&gt; aClass) throws ArgumentConversionException {         assertEquals(Study.class, aClass, \"Can only be convert to Study\");         return new Study(Integer.parseInt(o.toString()));     } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸°\") @ParameterizedTest(name = \"{index} {displayName} message={0}\") @CsvSource({\"10, 'ìë°” ìŠ¤í„°ë””'\", \"20, ìŠ¤í”„ë§\"}) void parameterizedTest(@ConvertWith(StudyConverter.class) Study study) {     System.out.println(study.getLimit()); }  static class StudyConverter extends SimpleArgumentConverter {      @Override     protected Object convert(Object o, Class&lt;?&gt; aClass) throws ArgumentConversionException {         assertEquals(Study.class, aClass, \"Can only be convert to Study\");         return new Study(Integer.parseInt(o.toString()));     } }       10. JUnit 5: í…ŒìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤   JUnitì˜ ê¸°ë³¸ ì „ëµì€ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œ ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“ ë‹¤.   â†’ í…ŒìŠ¤íŠ¸ê°„ì˜ ì˜ì¡´ì„±ì„ ë‚®ì¶”ê¸° ìœ„í•´..!      ì´ê²ƒì´ ê¸°ë³¸ ì „ëµ   í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨   ì´ ì „ëµì„ JUnit 5ì—ì„œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.   ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class StudyTest {     int value = 1;      @FastTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\")     void create_new_study() {         System.out.println(this);         System.out.println(value++);         Study actual = new Study(1);         assertThat(actual.getLimit()).isGreaterThan(0);     }      @SlowTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° slow\")     void create_new_study_again() {         System.out.println(this);         System.out.println(\"create1 \" + value++);     } }   ê²°ê³¼   1 2 3 4 5 6 7 // í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê°ì²´ê°€ ë‹¤ë¦„ì„ ì•„ë˜ì˜ í•´ì‰¬ê°’ì„ í†µí•´ ì•Œ ìˆ˜ ìˆë‹¤  me.yes.thejavatest.StudyTest@17f7cd29 1  me.yes.thejavatest.StudyTest@581ac8a8 create1 1       ì•„ë˜ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ ê³µìœ  í•  ìˆ˜ë„ ìˆë‹¤.       @TestInstance(Lifecycle.PER_CLASS)      í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤.   ê²½ìš°ì— ë”°ë¼, í…ŒìŠ¤íŠ¸ ê°„ì— ê³µìœ í•˜ëŠ” ëª¨ë“  ìƒíƒœë¥¼ @BeforeEach ë˜ëŠ” @AfterEachì—ì„œ ì´ˆê¸°í™” í•  í•„ìš”ê°€ ìˆë‹¤.   @TestInstance ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ @BeforeAllê³¼ @AfterAllì„ static ìœ¼ë¡œ ì •ì˜í•  í•„ìš”ê°€ ì—†ë‹¤. ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜í•œ default ë©”ì†Œë“œë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.       11. JUnit5: í…ŒìŠ¤íŠ¸ ìˆœì„œ   ì‹¤í–‰í•  í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œ íŠ¹ì •í•œ ìˆœì„œì— ì˜í•´ ì‹¤í–‰ë˜ì§€ë§Œ ì–´ë–»ê²Œ ê·¸ ìˆœì„œë¥¼ ì •í•˜ëŠ”ì§€ëŠ” ì˜ë„ì ìœ¼ë¡œ ë¶„ëª…í•˜ì§€ ì•ŠëŠ”ë‹¤. (í…ŒìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒê³¼ ê°™ì€ ì´ìœ )       ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ìˆœì„œì— ì˜ì¡´í•˜ë©´ ì•ˆë˜ê³  í…ŒìŠ¤íŠ¸ê°„ì˜ ë…ë¦½ì„±ì´ ìˆì–´ì•¼ í•œë‹¤.       í•˜ì§€ë§Œ, ê²½ìš°ì— ë”°ë¼ íŠ¹ì • ìˆœì„œëŒ€ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œë„ ìˆë‹¤. ê·¸ ê²½ìš°ì—ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œë¥¼ ì›í•˜ëŠ” ìˆœì„œì— ë”°ë¼ ì‹¤í–‰í•˜ë„ë¡ @TestInstance(Lifecycle.PER_CLASS)ì™€ í•¨ê»˜ @TestMethodOrderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      MethodOrderer êµ¬í˜„ì²´ë¥¼ ì„¤ì •   ê¸°ë³¸ êµ¬í˜„ì²´            Alphanumeric       OrderAnnotation       Random                  ì°¸ê³ ) ë°˜ë“œì‹œ TestInstance ì™€ ê°™ì´ ì¨ì•¼í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.         1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 @TestInstance(TestInstance.Lifecycle.PER_CLASS) @TestMethodOrder(MethodOrderer.OrderAnnotation.class) class StudyTest {     int value = 1;      @Order(2)     @FastTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\")     void create_new_study() {         System.out.println(this);         System.out.println(value++);         Study actual = new Study(1);         assertThat(actual.getLimit()).isGreaterThan(0);     }      @Order(1)     @SlowTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° slow\")     void create_new_study_again() {         System.out.println(this);         System.out.println(\"create1 \" + value++);     }      @BeforeAll     void beforeAll() {         System.out.println(\"before all\");     }      @AfterAll     void afterAll() {         System.out.println(\"after all\");     } }   12. JUnit 5: junit-platform.properties   JUnit ì„¤ì •íŒŒì¼ë¡œ í´ë˜ìŠ¤íŒ¨ìŠ¤ ë£¨íŠ¸(src/test/resources/)ì— ë„£ì–´ë‘ë©´ ì ìš©ëœë‹¤.   junit-platform.properties   1 2 3 4 5 6 7 8 9 10 11 # í…ŒìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ë¼ì´í”„ì‚¬ì´í´ ì„¤ì • junit.jupiter.testinstance.lifecycle.default = per_class  # í™•ì¥íŒ© ìë™ ê°ì§€ ê¸°ëŠ¥ junit.jupiter.extensions.autodetection.enabled = true  # @Disabled ë¬´ì‹œí•˜ê³  ì‹¤í–‰í•˜ê¸° junit.jupiter.conditions.deactivate = org.junit.*DisabledCondition  # í…ŒìŠ¤íŠ¸ ì´ë¦„ í‘œê¸° ì „ëµ ì„¤ì • junit.jupiter.displayname.generator.default = org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores       13. JUnit 5: í™•ì¥ ëª¨ë¸   JUnit 4ì˜ í™•ì¥ ëª¨ë¸ì€ @RunWith(Runner), TestRule, MethodRule   JUnit 5ì˜ í™•ì¥ ëª¨ë¸ì€ Extension       ì•„ë˜ ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ì˜ ì‹¤í–‰ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ê²½ìš° SlowTest ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” í™•ì¥íŒ©? ì´ë‹¤   FindSlowTestExtension.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 package me.yes.thejavatest;  import org.junit.jupiter.api.extension.AfterTestExecutionCallback; import org.junit.jupiter.api.extension.BeforeTestExecutionCallback; import org.junit.jupiter.api.extension.ExtensionContext;  import java.lang.reflect.Method;  public class FindSlowTestExtension implements BeforeTestExecutionCallback, AfterTestExecutionCallback {      private static final long THRESHOLD = 1000L;      @Override     public void beforeTestExecution(ExtensionContext context) throws Exception {         ExtensionContext.Store store = getStore(context);         store.put(\"START_TIME\", System.currentTimeMillis());     }      @Override     public void afterTestExecution(ExtensionContext context) throws Exception {         Method requiredTestMethod = context.getRequiredTestMethod();         SlowTest annotation = requiredTestMethod.getAnnotation(SlowTest.class);          String testMethodName = context.getRequiredTestMethod().getName();         ExtensionContext.Store store = getStore(context);         long start_time = store.remove(\"START_TIME\", long.class);         long duration = System.currentTimeMillis() - start_time;         if (duration &gt; THRESHOLD &amp;&amp; annotation == null) {             System.out.printf(\"Please consider mark method [%s] with @SlowTest.\\n\", testMethodName);         }     }      private ExtensionContext.Store getStore(ExtensionContext context) {         String testClassName = context.getRequiredTestClass().getName();         String testMethodName = context.getRequiredTestMethod().getName();         return context.getStore(ExtensionContext.Namespace.create(testClassName, testMethodName));     } }       í™•ì¥íŒ© ë“±ë¡ ë°©ë²•   ì„ ì–¸ì ì¸ ë“±ë¡ @ExtendWith   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @ExtendWith(FindSlowTestExtension.class) @TestMethodOrder(MethodOrderer.OrderAnnotation.class) class StudyTest {      int value = 1;      @Order(2)     @FastTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\")     void create_new_study() {         System.out.println(this);         System.out.println(value++);         Study actual = new Study(1);         assertThat(actual.getLimit()).isGreaterThan(0);     }      @Order(1)     @Test     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° slow\")     @Disabled     void create_new_study_again() throws InterruptedException {         Thread.sleep(1005L);         System.out.println(this);         System.out.println(\"create1 \" + value++);     } }   ê²°ê³¼   1 2 3 me.yes.thejavatest.StudyTest@f2ff811 create1 1 Please consider mark method [create_new_study_again] with @SlowTest.       í”„ë¡œê·¸ë˜ë° ë“±ë¡ @RegisterExtension   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 @TestMethodOrder(MethodOrderer.OrderAnnotation.class) class StudyTest {      int value = 1;      @RegisterExtension     static FindSlowTestExtension findSlowTestExtension = new FindSlowTestExtension(1000L);      @Order(2)     @FastTest     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° fast\")     void create_new_study() {         System.out.println(this);         System.out.println(value++);         Study actual = new Study(1);         assertThat(actual.getLimit()).isGreaterThan(0);     }      @Order(1)     @Test     @DisplayName(\"ìŠ¤í„°ë”” ë§Œë“¤ê¸° slow\")     @Disabled     void create_new_study_again() throws InterruptedException {         Thread.sleep(1005L);         System.out.println(this);         System.out.println(\"create1 \" + value++);     } }  ","categories": ["Spring"],
        "tags": ["Spring","Java","JUnit5"],
        "url": "/spring/Java-JUnit5/",
        "teaser": ""
      },{
        "title": "JPA N+1 ë¬¸ì œ",
        "excerpt":"JPAë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ì˜ë„í•˜ì§€ ì•Šì•˜ì§€ë§Œ select ì¿¼ë¦¬ê°€ ì—¬ëŸ¬ ê°œ ë°œìƒí•˜ëŠ” í˜„ìƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ í˜„ìƒì„ N+1 ë¬¸ì œë¼ê³  ë¶€ë¥´ëŠ”ë° ì´ ë¬¸ì œê°€ ì™œ ë°œìƒí•˜ëŠ”ì§€ì™€ ì´ì— ëŒ€í•œ í•´ê²° ë°©ë²•ì„ ì•Œì•„ë³´ì.   N+1 ë¬¸ì œë€?   ê°„ë‹¨íˆ ë§í•˜ìë©´, ì¡°íšŒ ì‹œ 1ê°œì˜ ì¿¼ë¦¬ë¥¼ ìƒê°í•˜ê³  ì„¤ê³„ë¥¼ í–ˆìœ¼ë‚˜ ë‚˜ì˜¤ì§€ ì•Šì•„ë„ ë˜ëŠ” ì¡°íšŒì˜ ì¿¼ë¦¬ê°€ Nê°œ ë” ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤.   ì´ ë¬¸ì œëŠ” ì—°ê´€ê´€ê³„ê°€ ìˆëŠ” ì—”í‹°í‹°ê°„ì— ë°œìƒí•œë‹¤. ì—°ê´€ ê´€ê³„ê°€ ì„¤ì •ëœ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ê²½ìš°ì— ì¡°íšŒëœ ë°ì´í„° ê°¯ìˆ˜(N) ë§Œí¼ ì—°ê´€ê´€ê³„ì˜ ì¡°íšŒ ì¿¼ë¦¬ê°€ ì¶”ê°€ë¡œ ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤.   N+1 ì˜ˆì œ   ë‹¤ìŒì€ N+1 ë¬¸ì œë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•œ ì˜ˆì œì´ë‹¤.      Team ì—”í‹°í‹°, User ì—”í‹°í‹°   Teamê³¼ UserëŠ” ì–‘ë°©í–¥ ì¼ëŒ€ë‹¤ ì—°ê´€ê´€ê³„   1 2 3 4 5 6 7 8 9 10 11 12 13 @Entity @Getter @Setter public class Team {      @Id     @GeneratedValue(strategy = GenerationType.IDENTITY)     @Column(name = \"team_id\")     private Long id;     private String name;      @OneToMany(mappedBy = \"team\")     private List&lt;User&gt; users = new ArrayList&lt;&gt;(); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Entity @Getter @Setter public class User {      @Id     @GeneratedValue(strategy = GenerationType.IDENTITY)     @Column(name = \"user_id\")     private Long id;     private String username;      @ManyToOne     @JoinColumn(name = \"team_id\")     private Team team; }      ì°¸ê³  FetchTypeì€ Defaultë¡œ *ToMany ì—ì„œëŠ” Lazy Loading, *ToOne ì—ì„œëŠ” Eager Loadingë¡œ ì§€ì •ëœë‹¤. default ì˜µì…˜ì„ ì‚¬ìš©í•´ë„ ëª…ì‹œí•´ì£¼ëŠ” ê²ƒì´ í˜‘ì—…í•˜ëŠ” ë‹¤ë¥¸ ê°œë°œìê°€ ë³´ê¸°ì— ì¢‹ë‹¤.     í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ 2ê°œì˜ íŒ€ì„ ë§Œë“¤ê³  ê° íŒ€ì— 2ëª…ì˜ ì‚¬ìš©ìë¥¼ ë„£ê² ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 public class JpaProblem {      public static void main(String[] args) {          EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"hello\");         EntityManager em = emf.createEntityManager();         EntityTransaction tx = em.getTransaction();         tx.begin();          try {             Team team = null;             for (int i = 0; i &lt; 2; i++) {                 team = new Team();                 team.setName(\"team\" + i);                 em.persist(team);             }              for (int j = 0; j &lt; 2; j++) {                 User user = new User();                 user.setUsername(\"member\" + j);                 user.setTeam(team);                 em.persist(user);             }             em.flush();             em.clear();              List&lt;User&gt; users = em.createQuery(\"select u from User u\", User.class)                     .getResultList();             tx.commit();         } catch (Exception e) {             tx.rollback();             e.printStackTrace();         } finally {             em.close();         }         emf.close();     } }   Fetch ëª¨ë“œê°€ EAGERì¸ ê²½ìš°   1 2 3 4 5 6 7 public class User {     ...      @ManyToOne(fetch = FetchType.EAGER)     @JoinColumn(name = \"team_id\")     private Team team; }   1 2 3 4 Hibernate: /* select u from User u */ select  user0_.user_id as user_id1_1_, user0_.team_id as team_id3_1_, user0_.username as username2_1_ from User user0_ Hibernate: select team0_.team_id as team_id1_0_0_, team0_.name as name2_0_0_ from Team team0_ where team0_.team_id=? Hibernate: select team0_.team_id as team_id1_0_0_, team0_.name as name2_0_0_ from Team team0_ where team0_.team_id=?      userë¥¼ ì¡°íšŒí•˜ëŠ” selectë¬¸ì´ ë°œìƒí•œë‹¤.   userë¥¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ê°€ teamì„ ì¡°íšŒí•œ row ë§Œí¼ selectë¬¸ì„ í˜¸ì¶œí•œë‹¤.   FetchType.EAGERì—ì„œ N+1 ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.   N+1 ë¬¸ì œëŠ” ì¦‰ì‹œë¡œë”©ì—ì„œ ë°œìƒ?   NO! N+1 ë¬¸ì œëŠ” FetchTypeìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆë‹¤. ì§€ì—°ë¡œë”©ìœ¼ë¡œ ë³€ê²½í•´ë„ N+1 ë¬¸ì œëŠ” ë°œìƒí•œë‹¤.   Fetch ëª¨ë“œê°€ Lazyì¸ ê²½ìš°   1 2 3 4 5 6 7 public class User {     ...      @ManyToOne(fetch = FetchType.LAZY)     @JoinColumn(name = \"team_id\")     private Team team; }   1 Hibernate: /* select u from User u */ select user0_.user_id as user_id1_1_, user0_.team_id as team_id3_1_, user0_.username as username2_1_ from User user0_      userë¥¼ ì¡°íšŒí•˜ëŠ” selectë¬¸ì´ ë°œìƒí•œë‹¤.   ì¿¼ë¦¬ë¬¸ì´ í•˜ë‚˜ë§Œ í˜¸ì¶œë˜ì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ N+1 ë¬¸ì œê°€ í•´ê²°ëœ ê²ƒì¼ê¹Œ? ì•„ì‰½ê²Œë„ í•´ê²°ëœ ê²ƒì´ ì•„ë‹ˆë‹¤.ğŸ¥²  ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤ëŠ” ê²ƒì€ ì—°ê´€ê´€ê³„ ë°ì´í„°ë¥¼ í”„ë¡ì‹œ ê°ì²´ë¡œ ë°”ì¸ë”©í•œ ê²ƒì´ë‹¤. ì‹¤ì œ ì—°ê´€ê´€ê³„ì˜ ì—”í‹°í‹°ë¥¼ í˜¸ì¶œ ì‹œ teamì— ëŒ€í•œ ì¿¼ë¦¬ë¬¸ì´ ë°œìƒí•œë‹¤.   ê²°êµ­, ì¦‰ì‹œë¡œë”©ê³¼ ì§€ì—°ë¡œë”©ì€ ë™ì¼í•œ ê²°ê³¼ê°€ ë°œìƒí•œë‹¤. FetchTypeì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ë‹¨ì§€ N+1 ë°œìƒ ì‹œì ì„ ì—°ê´€ê´€ê³„ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì ìœ¼ë¡œ ë¯¸ë£°ì§€, ì•„ë‹ˆë©´ ì´ˆê¸° ë°ì´í„° ë¡œë“œ ì‹œì ì— ê°€ì ¸ì˜¬ì§€ì˜ ì°¨ì´ì´ë‹¤.   ê·¸ë ‡ë‹¤ë©´, N+1ì€ ì™œ ë°œìƒí•˜ëŠ” ê²ƒì¼ê¹Œ?   ë°œìƒ ì›ì¸   N+1 ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” JPQLì—ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤. JPQLì€ SQLì„ ì¶”ìƒí™”í•œ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´ë¡œì„œ íŠ¹ì • SQLì— ì¢…ì†ë˜ì§€ ì•Šê³  ì—”í‹°í‹° ê°ì²´ì™€ í•„ë“œ ì´ë¦„ì„ ê°€ì§€ê³  ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤. ë”°ë¼ì„œ, ìœ„ì˜ User ì—”í‹°í‹°ì™€ Team ì—”í‹°í‹°ê°€ ì—°ê´€ê´€ê³„ê°€ ìˆìŒì—ë„ JPQL ì…ì¥ì—ì„  ì—°ê´€ê´€ê³„ ë°ì´í„°ë¥¼ ë¬´ì‹œí•˜ê³  í•´ë‹¹ ì—”í‹°í‹°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì¡°íšŒí•œë‹¤. (select * from User) ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì—°ê´€ëœ ì—”í‹°í‹° ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš°, FetchTypeìœ¼ë¡œ ì§€ì •í•œ ì‹œì ì— ë³„ë„ë¡œ ì¡°íšŒí•˜ê²Œ ëœë‹¤.   í•´ê²° ë°©ì•ˆ   í•´ê²°ë°©ì•ˆìœ¼ë¡  ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ì´ ìˆë‹¤. í•˜ë‚˜ì”© ì‚´í´ë³´ì.      JPQL Fetch Join ì‚¬ìš©   EntityGraph ì• ë…¸í…Œì´ì…˜   Batch Size   JPQL Fetch Join ì‚¬ìš©   ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì½”ë“œëŠ” â€˜select * from Team left join User on User.team_id = Team.idâ€™ ì´ë‹¤. JPQLì˜ fetch joinì„ ì‚¬ìš©í•˜ë©´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.   1 2 List&lt;Team&gt; teams = em.createQuery(\"select t from Team t left join fetch t.users\", Team.class)                     .getResultList();   1 Hibernate: /* select t from Team t left join fetch t.users */ select team0_.team_id as team_id1_0_0_, users1_.user_id as user_id1_1_1_, team0_.name as name2_0_0_, users1_.team_id as team_id3_1_1_, users1_.username as username2_1_1_, users1_.team_id as team_id3_1_0__, users1_.user_id as user_id1_1_0__ from Team team0_ left outer join User users1_ on team0_.team_id=users1_.team_id   ë¡œê·¸ë¥¼ ì‚´í´ë³´ë©´ ì›í•˜ëŠ” ëŒ€ë¡œ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¬¸ í•œ ê°œê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   í•˜ì§€ë§Œ, fetch joinë„ ë‹¨ì ì´ ìˆë‹¤. ìš°ì„  ìš°ë¦¬ê°€ ì—°ê´€ê´€ê³„ë¡œ ì„¤ì •í•´ë†“ì€ FetchTypeì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. fetch joinì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë°ì´í„° í˜¸ì¶œ ì‹œì ì— ëª¨ë“  ì—°ê´€ê´€ê³„ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— FetchTypeì„ Lazyë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ë¬´ì˜ë¯¸í•˜ë‹¤.   ë˜í•œ, í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ê³¼ 2ê°œ ì´ìƒì˜ Collection joinì´ ì•ˆëœë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   @EntityGraph ì• ë…¸í…Œì´ì…˜   JPQLì—ì„œ fetch joinì„ í•˜ê²Œ ë˜ë©´ í•˜ë“œì½”ë”© í•˜ê²Œ ëœë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ë¥¼ ìµœì†Œí™” í•˜ê³  ì‹¶ì„ ë•Œ @EntityGraphë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ëƒ¥ ì´ëŸ°ê²Œ ìˆêµ¬ë‚˜ë§Œ ì•Œì•„ë‘ê³  ì‚¬ìš©í•˜ì§€ ë§ì. (ë„ˆë¬´ ë³µì¡í•˜ë‹¤.)   1 2 3 @EntityGraph(attributePaths = {\"articles\"}, type = EntityGraphType.FETCH) @Query(\"select distinct u from User u left join u.articles\") List&lt;User&gt; findAllEntityGraph();      ì°¸ê³  Fetch Joinê³¼ EntityGraph ì£¼ì˜í•  ì      Fetch Joinê³¼ EntityGraphëŠ” JPQLì„ ì‚¬ìš©í•˜ì—¬ JOINë¬¸ì„ í˜¸ì¶œí•œë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤. ë˜í•œ, ê³µí†µì ìœ¼ë¡œ ì¹´í…Œì‹œì•ˆ ê³±(Cartesian Product)ì´ ë°œìƒí•˜ì—¬ ì¤‘ë³µ ë°ì´í„°ê°€ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì¤‘ë³µëœ ë°ì´í„°ê°€ ì»¬ë ‰ì…˜ì— ì¡´ì¬í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•œë‹¤.     ì¤‘ë³µëœ ë°ì´í„°ë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.          ì»¬ë ‰ì…˜ì„ Setì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ìë£Œêµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— ì¤‘ë³µëœ ë°ì´í„°ë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤.     JPQLì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— distinctë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µëœ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.      Batch Size   ì´ ì˜µì…˜ì€ ì •í™•íˆëŠ” N+1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸°ë³´ë‹¨ N+1 ë¬¸ì œê°€ ë°œìƒí•´ë„ IN ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ 100ë²ˆ ì¼ì–´ë‚  N+1 ë¬¸ì œë¥¼ 1ë²ˆë§Œ ë” ì¡°íšŒí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 select * from user where team_id = ? select * from user where team_id = ?  # Batch Size ì‚¬ìš© ì‹œ select * from user where team_id in (?,?);   Batch Sizeì— ê´€ë ¨ëœ ì˜µì…˜ì€ application.ymlì—ì„œ ì„¤ì •í•˜ë©´ ëœë‹¤. ì„¤ì • í•˜ë‚˜ë§Œ ì„¸íŒ…í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ in ì ˆë¡œ ì¿¼ë¦¬ê°€ ë‚˜ê°„ë‹¤.   1 2 3 4 5 spring:   jpa:     properties:       hibernate:         default_batch_fetch_size: 1000   Batch SizeëŠ” ì•ì„œ fetch joinì—ì„œ ë‹¨ì ì´ì—ˆë˜ í˜ì´ì§• ì²˜ë¦¬ì™€ Collection Joinì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, Batch SizeëŠ” ìµœì í™” ë°ì´í„° ì‚¬ì´ì¦ˆë¥¼ ì•Œê¸° ì‰½ì§€ ì•Šë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   QueryBuilder   Queryë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì§€ì›í•´ì£¼ëŠ” ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì´ ìˆëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ Mybatis, QueryDSL, JDBC Template ë“±ì´ ìˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œì§ì— ìµœì í™”ëœ ì¿¼ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.   1 2 // QueryDSLë¡œ êµ¬í˜„í•œ ì˜ˆì œ return from(team).leftJoin(team.users, user).fetchJoin();   ì‹¤ë¬´ì—ì„œ N+1 ë¬¸ì œë¥¼ ë°©ì§€í•˜ëŠ” ë°©ë²•   ìš°ì„  ì—°ê´€ê´€ê³„ ì„¤ì •ì€ FetchTypeì„ ëª¨ë‘ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•œë‹¤. ê·¸ë¦¬ê³  ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•œ ë¶€ë¶„ì—ì„œëŠ” Fetch Joinì„ ì‚¬ìš©í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ Batch Sizeì˜ ê°’ì€ 1000ì´í•˜ë¡œ ì„¤ì •í•œë‹¤. (ìµœì í™” ë°ì´í„° ì‚¬ì´ì¦ˆë¥¼ ì•Œê¸´ ì–´ë µë‹¤.) JPA ë§Œìœ¼ë¡œ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ëª¨ë‘ êµ¬í˜„í•˜ê¸´ ì–´ë ¤ìš°ë¯€ë¡œ QueryDSLì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì´ ë  ìˆ˜ ìˆë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-N+1/",
        "teaser": ""
      },{
        "title": "JWT(Json Web Token) ì¸ì¦",
        "excerpt":"1. REST API ì¸ì¦ ê¸°ë²•      Basic ì¸ì¦   Bearer ì¸ì¦   JSON ì›¹ í† í°       1.1 Basic ì¸ì¦   Basic ì¸ì¦ì´ë€      ìƒíƒœê°€ ì—†ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜(Todo ì•±)ì—ì„œ ì¸ì¦ì„ êµ¬í˜„í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•       Basic ì¸ì¦ ì ˆì°¨      ëª¨ë“  HTTP ìš”ì²­ì— ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°™ì´ ë³´ëƒ„   ìµœì´ˆ ë¡œê·¸ì¸ í›„ HTTP ìš”ì²­ í—¤ë”ì˜ Authorization: â€˜Basic &lt;ID&gt;:&lt;Password&gt;â€™ ì²˜ëŸ¼ Base64ë¡œ ì¸ì½”ë”©í•œ ë¬¸ìì—´ì„ í•¨ê»˜ ë³´ëƒ„       Basic Auth ì˜ˆ   1 Authorization : Basic a2FpemVuOjEyMzQ1 (ID:Password)      HTTP ìš”ì²­ì„ ìˆ˜ì‹ í•œ ì„œë²„ëŠ” ì¸ì½”ë”©ëœ ë¬¸ìì—´ì„ ë””ì½”ë”©í•˜ì—¬ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ë©´ ìš”ì²­ë°›ì€ ì¼ì„ ìˆ˜í–‰í•˜ê³ , ì•„ë‹ˆë©´ ê±°ë¶€í•¨       Basic ì¸ì¦ì˜ ë‹¨ì       ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë…¸ì¶œí•œë‹¤.            ë””ì½”ë”©ì„ í†µí•´ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.       ë”°ë¼ì„œ ë³´ì•ˆì„ ìœ„í•´ ë°˜ë“œì‹œ HTTPSë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.           ì‚¬ìš©ìë¥¼ ë¡œê·¸ì•„ì›ƒì‹œí‚¬ ìˆ˜ ì—†ë‹¤            ëª¨ë“  ìš”ì²­ì´ ì¼ì¢…ì˜ ë¡œê·¸ì¸ ìš”ì²­ì´ê¸° ë•Œë¬¸       ì—¬ëŸ¬ ë””ë°”ì´ìŠ¤ì—ì„œ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•œ ê²½ìš° í•œêº¼ë²ˆì— ë¡œê·¸ì•„ì›ƒì„ í•˜ê±°ë‚˜ ë””ë°”ì´ìŠ¤ ë³„ë¡œ ë¡œê·¸ì•„ì›ƒì„ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ Basic ì¸ì¦ì€ ì œê³µí•˜ê¸° í˜ë“¤ë‹¤           ì‚¬ìš©ì ê³„ì • ì •ë³´ê°€ ìˆëŠ” ì €ì¥ ì¥ì†Œ(ì¸ì¦ ì„œë²„, ì¸ì¦ DB)ì˜ ê²½ìš° ê³¼ë¶€í•˜ê°€ ê±¸ë¦´ í™•ë¥ ì´ ë†’ë‹¤            í° ì„œë¹„ìŠ¤ì¼ ìˆ˜ë¡ ë¬¸ì œ ë°œìƒ           ì¸ì¦ ì„œë²„ê°€ ë‹¨ì¼ ì¥ì• ì (ì‹œìŠ¤í…œì˜ í•œ ë¶€ë¶„ì´ ì˜¤ë¥˜ê°€ ë‚˜ëŠ” ê²½ìš° ì „ì²´ ì‹œìŠ¤í…œì„ ê°€ë™ ë¶ˆê°€í•˜ê²Œ í•¨)       1.2 í† í° ê¸°ë°˜ ì¸ì¦   í† í° ê¸°ë°˜ ì¸ì¦ì´ë€?      í† í°ì€ ìµœì´ˆ ë¡œê·¸ì¸ ì‹œ ì„œë²„ê°€ ë§Œë“¤ì–´ ì¤Œ.   ì„œë²„ê°€ í† í°ì„ ë§Œë“¤ì–´ ë°˜í™˜í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ì´í›„ ìš”ì²­ì— ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ëŒ€ì‹  í† í°ì„ ë„˜ê²¨ ìì‹ ì´ ì¸ì¦ëœ ì‚¬ìš©ìì„ì„ ì•Œë¦¼   í† í° ê¸°ë°˜ ìš”ì²­ì€ í—¤ë”ì— Authorization: Bearer &lt;TOKEN&gt; ëª…ì‹œ   Bearer Token ì˜ˆ   1 Authorization: Bearer eyJhbGciOiJIUzUMyIsInJvbGUiOiJST0xFX1VTRVIiLCJpc3MiOiJkZ       í† í° ê¸°ë°˜ ì¸ì¦ ì¥ì       Basic Auth ì— ë¹„í•´ ë³´ì•ˆ ì¸¡ë©´ì—ì„œ ì•ˆì „í•˜ë‹¤   ì„œë²„ê°€ í† í°ì„ ë§ˆìŒëŒ€ë¡œ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ìì˜ ì¸ê°€ ì •ë³´, ìœ íš¨ ì‹œê°„ì„ ì •í•´ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤   ë””ë°”ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ í† í°ì„ ìƒì„±í•´ ì£¼ê³  ìœ íš¨ ì‹œê°„ì„ ë‹¤ë¥´ê²Œ ì •í•˜ê±°ë‚˜ ì„ì˜ë¡œ ë¡œê·¸ì•„ì›ƒì„ í•  ìˆ˜ ìˆë‹¤       í† í° ê¸°ë°˜ ì¸ì¦ ë‹¨ì    Basic ì¸ì¦ì—ì„œ ë§ˆì£¼í•œ ìŠ¤ì¼€ì¼ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ì—†ë‹¤. ì¦‰,  í† í° ì´ìš©ë§Œìœ¼ë¡œ ìŠ¤ì¼€ì¼ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ì—†ë‹¤       1.3 JSON ì›¹ í† í° (JWT)   ì „ì ì„œëª…ëœ í† í° ì¤‘ í•˜ë‚˜ê°€ JSON ì›¹ í† í° (JWT)   ì„œë²„ì—ì„œ ì „ì ì„œëª…ëœ í† í°ì„ ì´ìš©í•˜ë©´ ì¸ì¦ì— ë”°ë¥¸ ìŠ¤ì¼€ì¼ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤   JWT í† í°ì€ {header}.{payload}.{signature}   JWT ì˜ˆ   1 Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIzMyIsInJvbGUiOiJST0xFX1VTRVIiLCJpc3MiOiJkZWJyYWlucyIsImlhdCI6MTY0NzQ3NjgzMSwiZXhwIjoxNjQ3NDgwNDMxfQ.IXv1DKfaBNGWzTPEzuinyJV789PnWg8EwZQAI6GVCwYvbb6KQKmevvScHPjIHde8fwVz2J2zGcLAuh2QLqUSmw       JWT ë¥¼ ë””ì½”ë”©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤   1 2 3 4 5 6 7 8 9 10 11 12 { // header \t\"typ\": \"JWT\", \t\"alg\": \"HS512\" }. { // payload \t\"sub\": \"absdcsdfdfsdfds\", \t\"iss\": \"demo app\", \t\"exp\": 1595733647, \t\"iat\": 1595733657 }. IXv1DKfaBNGWzTPEzuinyJV789PnWg8EwZQAI6GVCwYvbb6KQKmevvScHPjIHde8fwVz2J2zGcLAuh2QLqUSmw // signature   Header      typ(type): í† í°ì˜ íƒ€ì…ì„ ì˜ë¯¸   alg(algorithm): í† í°ì˜ ì„œëª…ì„ ë°œí–‰í•˜ëŠ”ë° ì‚¬ìš©ëœ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì˜ ì¢…ë¥˜ë¥¼ ì˜ë¯¸   Payload      sub(subject): í† í°ì˜ ì£¼ì¸ì„ ì˜ë¯¸. subëŠ” IDì²˜ëŸ¼ ìœ ì¼í•œ ì‹ë³„ì   iss(issuer): í† í°ì„ ë°œí–‰í•œ ì£¼ì²´ë¥¼ ì˜ë¯¸. í˜ì´ìŠ¤ë¶ì´ ë°œí–‰í–ˆë‹¤ë©´ facebook ì´ ë¨   iat(issued at): í† í°ì¼ ë°œí–‰ëœ ë‚ ì§œì™€ ì‹œê°„   exp(expiration): í† í°ì´ ë§Œë£Œë˜ëŠ” ì‹œê°„   Signature      í† í°ì„ ë°œí–‰í•œ ì£¼ì²´ Issuerê°€ ë°œí–‰í•œ ì„œëª…ìœ¼ë¡œ í† í°ì˜ ìœ íš¨ì„± ê²€ì‚¬ì— ì‚¬ìš©       JWTì—ì„œ ì „ì ì„œëª…ì´ë€ {í—¤ë”}.{í˜ì´ë¡œë“œ}ì™€ ì‹œí¬ë¦¿í‚¤ë¥¼ ì´ìš©í•´ í•´ì‹œ í•¨ìˆ˜ì— ëŒë¦° ì•”í˜¸í™”í•œ ê²°ê³¼ ê°’   ì‹œí¬ë¦¿í‚¤ë€ ë‚˜ë§Œ ì•Œê³ ìˆëŠ” ë¬¸ìì—´, ë¹„ë°€ë²ˆí˜¸ ê°™ì€ ê²ƒ       JWT ì¸ì¦ ì ˆì°¨      ìµœì´ˆ ë¡œê·¸ì¸ ì‹œ ì„œë²„ëŠ” ì‚¬ìš©ìì˜ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„œë²„ì— ì €ì¥ëœ ê°’ê³¼ ë¹„êµí•´ ì¸ì¦   ì¸ì¦ëœ ì‚¬ìš©ìì˜ ê²½ìš° ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì´ìš©í•´ {í—¤ë”}.{í˜ì´ë¡œë“œ} ë¶€ë¶„ì„ ì‘ì„±, ì‹œí¬ë¦¿í‚¤ë¡œ {í—¤ë”}.{í˜ì´ë¡œë“œ} ë¶€ë¶„ì„ ì „ì ì„œëª…   ì „ì ì„œëª…ì˜ ê²°ê³¼ë¡œ ë‚˜ì˜¨ ê°’ì„ {í—¤ë”}.{í˜ì´ë¡œë“œ}.{ì„œëª…}ìœ¼ë¡œ ì´ì–´ë¶™ì´ê³  Base64ë¡œ ì¸ì½”ë”© í›„ ë°˜í™˜   ì´í›„ ì´ í† í°ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ìš”ì²­í•˜ë©´ ì„œë¸ŒëŠ” í† í°ì„ ë””ì½”ë”©í•´ {í—¤ë”}.{í˜ì´ë¡œë“œ}ì™€ {ì„œëª…} ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ”   ì„œë²„ëŠ” {í—¤ë”}.{í˜ì´ë¡œë“œ}ì™€ ì‹œí¬ë¦¿í‚¤ë¡œ ì „ì ì„œëª…ì„ ë§Œë“  í›„ ë°©ê¸ˆ ë§Œë“  ì „ì ì„œëª…ì„ HTTP ìš”ì²­ì´ ê°–ê³  ì˜¨ {ì„œëª…} ë¶€ë¶„ê³¼ ë¹„êµí•´ ì´ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬       ìœ„ ê³¼ì •ì„ í†µí•´ JWT ì¸ì¦ ë°©ì‹ì€ ì¸ì¦ ì„œë²„ì— í† í°ì˜ ìœ íš¨ì„±ì— ëŒ€í•´ ë¬¼ì–´ë³¼ í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ì¸ì¦ ì„œë²„ì— ë¶€í•˜ë¥¼ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì¸ì¦ ì„œë²„ê°€ ë‹¨ì¼ ì¥ì• ì ì´ ì•„ë‹ˆë‹¤.       í† í°ì„ í›”ì³ê°€ë©´ í•´ë‹¹ ê³„ì •ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ HTTPSë¥¼ í†µí•´ í†µì‹ í•´ì•¼ í•¨.       2. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í†µí•©      JWT ì¸ì¦ ë¡œì§ êµ¬í˜„   íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™” ë¡œì§ êµ¬í˜„       2.1 ì‹¤ìŠµ ì „ ì¤€ë¹„      User.java   UserRepository.java   UserService.java   UserDTO.java   UserController.java       User.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package me.yessm.userauth.user;  import lombok.*;  import javax.persistence.*;  @Entity @AllArgsConstructor @NoArgsConstructor @Data @Builder @Table(uniqueConstraints = {@UniqueConstraint(columnNames = \"email\")}) public class User {      @Id     @GeneratedValue     private Long id;      @Column(nullable = false)     private String username;      @Column(nullable = false)     private String email;      @Column(nullable = false)     private String password; }       UserRepository.java   1 2 3 4 5 6 7 8 9 10 11 12 package me.yessm.userauth.user;  import org.springframework.data.jpa.repository.JpaRepository; import org.springframework.stereotype.Repository;  @Repository public interface UserRepository extends JpaRepository&lt;User, Long&gt; {      User findByEmail(String email);     Boolean existsByEmail(String email);     User findByEmailAndPassword(String email, String password); }       UserService.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package me.yessm.userauth.user;  import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Service;  @Service public class UserService {      @Autowired     private UserRepository userRepository;      public User create(final User user) {         if (user == null || user.getEmail() == null) {             throw new RuntimeException(\"Invalid arguments\");         }          final String email = user.getEmail();         if (userRepository.existsByEmail(email)) {             throw new RuntimeException(\"Email already exists\");         }          return userRepository.save(user);     }      public User getByCredentials(final String email, final String password) {         return userRepository.findByEmailAndPassword(email, password);     } }       UserDTO.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 package me.yessm.userauth.user;  import lombok.AllArgsConstructor; import lombok.Builder; import lombok.Data; import lombok.NoArgsConstructor;  @Data @Builder @AllArgsConstructor @NoArgsConstructor public class UserDTO {      private String token;     private String email;     private String username;     private String password;     private Long id; }       UserController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 package me.yessm.userauth.user;  import me.yessm.userauth.common.ResponseDTO; import me.yessm.userauth.security.TokenProvider; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.http.ResponseEntity; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestBody; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  @RestController @RequestMapping(\"/auth\") public class UserController {      @Autowired     private UserService userService;      @PostMapping(\"/signup\")     public ResponseEntity&lt;?&gt; registerUser(@RequestBody UserDTO userDTO) {         try {             User user = User.builder()                     .email(userDTO.getEmail())                     .username(userDTO.getUsername())                     .password(userDTO.getPassword())                     .build();              User registeredUser = userService.create(user);             UserDTO responseUserDTO = UserDTO.builder()                     .email(registeredUser.getEmail())                     .id(registeredUser.getId())                     .username(registeredUser.getUsername())                     .build();              return ResponseEntity.ok().body(responseUserDTO);         } catch (Exception e) {             ResponseDTO responseDTO = ResponseDTO.builder().error(e.getMessage()).build();              return ResponseEntity.badRequest().body(responseDTO);         }     }      @PostMapping(\"/signin\")     public ResponseEntity&lt;?&gt; authenticate(@RequestBody UserDTO userDTO) {         User user = userService.getByCredentials(                 userDTO.getEmail(),                 userDTO.getPassword());          if (user != null) {             final UserDTO responseUserDTO = UserDTO.builder()                     .email(user.getUsername())                     .id(user.getId())                     .build();              return ResponseEntity.ok().body(responseUserDTO);         } else {             ResponseDTO responseDTO = ResponseDTO.builder()                     .error(\"Login failed\")                     .build();              return ResponseEntity.badRequest().body(responseDTO);         }     } }       2.2 JWT ìƒì„± ë° ë°˜í™˜ êµ¬í˜„   ì‚¬ìš©ì ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í—¤ë”ì™€ í˜ì´ë¡œë“œë¥¼ ì‘ì„±í•™ê³  ì „ì ì„œëª…í•œ í›„ í† í°ì„ ë¦¬í„´          1. JWT ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€   1 implementation group: 'io.jsonwebtoken', name: 'jjwt', version: '0.9.1'       2. TokenProvider ìƒì„±   TokenProvider.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 package me.yessm.userauth.security;  import io.jsonwebtoken.Claims; import io.jsonwebtoken.Jwts; import io.jsonwebtoken.SignatureAlgorithm; import me.yessm.userauth.user.User; import org.springframework.stereotype.Service;  import java.time.Instant; import java.time.temporal.ChronoUnit; import java.util.Date;  @Service public class TokenProvider {      private static final String SECRET_KEY = \"test12341234\";      public String create(User user) {         Date expiryDate = Date.from(Instant.now().plus(1, ChronoUnit.DAYS));          return Jwts.builder()                 .signWith(SignatureAlgorithm.HS512, SECRET_KEY)                 .setSubject(user.getEmail())                 .setIssuer(\"yessm app\")                 .setIssuedAt(new Date())                 .setExpiration(expiryDate)                 .compact();     }      public String validateAndGetUserId(String token) {         Claims claims = Jwts.parser()                 .setSigningKey(SECRET_KEY)                 .parseClaimsJws(token)                 .getBody();          return claims.getSubject();     } }   TokenProvider í´ë˜ìŠ¤ê°€ í•˜ëŠ” ì¼ì€ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ì•„ JWTë¥¼ ìƒì„±í•˜ëŠ” ì¼   create(): JWT ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ JWT í† í°ì„ ìƒì„±   validateAndGetUserId(): í† í°ì„ ë””ì½”ë”© ë° íŒŒì‹±í•˜ê³  í† í°ì˜ ìœ„ì¡° ì—¬ë¶€ í™•ì¸       3. UserController.java ìˆ˜ì •   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24     @PostMapping(\"/signin\")     public ResponseEntity&lt;?&gt; authenticate(@RequestBody UserDTO userDTO) {         User user = userService.getByCredentials(                 userDTO.getEmail(),                 userDTO.getPassword());          if (user != null) {             // í† í° ìƒì„±, UserDTOì— ì¶”ê°€             final String token = tokenProvider.create(user);             final UserDTO responseUserDTO = UserDTO.builder()                     .email(user.getUsername())                     .id(user.getId())                     .token(token)                     .build();              return ResponseEntity.ok().body(responseUserDTO);         } else {             ResponseDTO responseDTO = ResponseDTO.builder()                     .error(\"Login failed\")                     .build();              return ResponseEntity.badRequest().body(responseDTO);         }     }       4. í…ŒìŠ¤íŠ¸         ì¸ì½”ë”©ëœ JWT í† í°   1 2 3 4 5 6 7 {     \"token\": \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ5ZXNzbTYyM0BnbWFpbC5jb20iLCJpc3MiOiJ5ZXNzbSBhcHAiLCJpYXQiOjE2NTAzNDU3NjEsImV4cCI6MTY1MDQzMjE2MX0.znuDrNcPA6BcKUzbysOQJ99vxm_OCTPpEhr1DUfveMjkkDh1uEKn4zF7pHSBiz3cTR4gBRalyKMDUHgn3RSIHA\",     \"email\": \"user1\",     \"username\": null,     \"password\": null,     \"id\": 3 }       2.3 ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ì„œë¸”ë¦¿ í•„í„°          ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ë„ì›€ì„ ë°›ì•„ APIê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì‚¬ìš©ìë¥¼ ì¸ì¦í•´ ì£¼ëŠ” ë¶€ë¶„ì„ êµ¬í˜„   í† í° ì¸ì¦ì„ ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ì²« ë¶€ë¶„ë§ˆë‹¤ ì¸ì¦ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ì„œë¸”ë¦¿ í•„í„°ë¥¼ ì‚¬ìš©       ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì„œë¸”ë¦¿ í•„í„°ì˜ ì§‘í•©.  ì„œë¸”ë¦¿ í•„í„°ë€ ì„œë¸”ë¦¿ ì‹¤í–‰ ì „ì— ì‹¤í–‰ë˜ëŠ” í´ë˜ìŠ¤ë“¤   ìŠ¤í”„ë§ì´ êµ¬í˜„í•˜ëŠ” ì„œë¸”ë¦¿ì´ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ê³  ì„œë¸”ë¦¿ í•„í„°ëŠ” ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì‹¤í–‰ë˜ê¸° ì „ì— í•­ìƒ ì‹¤í–‰ë¨   ë”°ë¼ì„œ, ê°œë°œìëŠ” ì„œë¸”ë¦¿ í•„í„°ë¥¼ êµ¬í˜„í•˜ê³  ì„œë¸”ë¦¿ í•„í„°ë¥¼ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•´ ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤       ì„œë¸”ë¦¿ í•„í„°ëŠ” êµ¬í˜„ëœ ë¡œì§ì— ë”°ë¼ ì›í•˜ì§€ ì•ŠëŠ” HTTP ìš”ì²­ì„ ê±¸ëŸ¬ë‚¼ ìˆ˜ ìˆë‹¤.   ê±¸ëŸ¬ë‚¸ HTTPëŠ” ê±°ì ˆë˜ëŠ” ê²ƒì´ê³  ì„œë¸”ë¦¿ í•„í„°ê°€ ì „ë¶€ ì‚´ì•„ë‚¨ì€ HTTPìš”ì²­ì€ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ìœ¼ë¡œ ë„˜ì–´ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‹¤í–‰ë¨       2.4 JWTë¥¼ ì´ìš©í•œ ì¸ì¦ êµ¬í˜„   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€   1 implementation 'org.springframework.boot:spring-boot-starter-security'       OncePerRequestFilter í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ í•„í„°ë¥¼ ìƒì„±   OncePerRequestFilterëŠ” í•œ ìš”ì²­ë‹¹ ë°˜ë“œì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰ë¨       OncePerRequestFilterë¥¼ ìƒì†ë°›ëŠ” JwtAuthenticationFilterë¥¼ êµ¬í˜„   JwtAuthenticationFilter.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 package me.yessm.userauth.security;  import lombok.extern.log4j.Log4j2; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.security.authentication.AbstractAuthenticationToken; import org.springframework.security.authentication.UsernamePasswordAuthenticationToken; import org.springframework.security.core.authority.AuthorityUtils; import org.springframework.security.core.context.SecurityContext; import org.springframework.security.core.context.SecurityContextHolder; import org.springframework.security.web.authentication.WebAuthenticationDetailsSource; import org.springframework.stereotype.Component; import org.springframework.util.StringUtils; import org.springframework.web.filter.OncePerRequestFilter;  import javax.servlet.FilterChain; import javax.servlet.ServletException; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException;  @Log4j2 @Component public class JwtAuthenticationFilter extends OncePerRequestFilter {      @Autowired     private TokenProvider tokenProvider;      @Override     protected void doFilterInternal(HttpServletRequest request,                                     HttpServletResponse response,                                     FilterChain filterChain)             throws ServletException, IOException {         try {             // ìš”ì²­ì—ì„œ í† í° ê°€ì ¸ì˜´             String token = parseBearerToken(request);              if (token != null &amp;&amp; !token.equalsIgnoreCase(\"null\")) {                 // userId ê°€ì ¸ì˜¤ê¸°, ìœ„ì¡°ëœ ê²½ìš° ì˜ˆì™¸ ì²˜ë¦¬                 String userId = tokenProvider.validateAndGetUserId(token);                  // ì¸ì¦ ì™„ë£Œ. SecurityContextHolderì— ë“±ë¡í•´ì•¼ ì¸ì¦ëœ ì‚¬ìš©ìë¼ê³  ìƒê°í•œë‹¤                 AbstractAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userId, null, AuthorityUtils.NO_AUTHORITIES);                  authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));                  SecurityContext securityContext = SecurityContextHolder.createEmptyContext();                 securityContext.setAuthentication(authentication);                 SecurityContextHolder.setContext(securityContext);             }         } catch (Exception ex) {             logger.error(\"Could not set user authentication in security context\", ex);         }         filterChain.doFilter(request, response);     }      private String parseBearerToken(HttpServletRequest request) {         String bearerToken = request.getHeader(\"Authorization\");          if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(\"Bearer \")) {             return bearerToken.substring(7);         }         return null;     } }       ìœ„ ì½”ë“œì˜ ì²˜ë¦¬ ê³¼ì •      ìš”ì²­ì˜ í—¤ë”ì—ì„œ Bearer í† í°ì„ ê°€ì ¸ì˜´        TokenProviderë¥¼ ì´ìš©í•´ í† í°ì„ ì¸ì¦í•˜ê³  UsernamePasswordAuthenticationToken ì‘ì„±       â†’ UsernamePasswordAuthenticationToken ì˜¤ë¸Œì íŠ¸ì— ì‚¬ìš©ìì˜ ì¸ì¦ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  SecurityContextì— ì¸ì¦ëœ ì‚¬ìš©ìë¥¼ ë“±ë¡       â†’ ë“±ë¡í•˜ëŠ” ì´ìœ ? ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©ìê°€ ì¸ì¦ëëŠ”ì§€ì˜ ì—¬ë¶€ë‚˜ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ëˆ„êµ°ì§€ ì•Œì•„ì•¼ í•  ë•Œê°€ ìˆê¸° ë•Œë¬¸           ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ SercurityContextëŠ” SecurityContextHolderì˜ createEmptyContext() ë©”ì„œë“œë¥¼ ì´ìš©í•´ ìƒì„± ê°€ëŠ¥   ìƒì„±í•œ ì»¨í…ìŠ¤íŠ¸ì— ì¸ì¦ ì •ë³´ì¸ authenticationì„ ë„£ê³  ë‹¤ì‹œ SecurityContextHolderì— ì»¨í…ìŠ¤íŠ¸ë¡œ ë“±ë¡   SecurityContextHolderëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ThreadLocalì— ì €ì¥ë¨   ThreadLocalì— ì €ì¥ë˜ë¯€ë¡œ Threadë§ˆë‹¤ í•˜ë‚˜ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ       2.5 ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •   ì„œë¸”ë¦¿ í•„í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´      ì„œë¸”ë¦¿ í•„í„°ë¥¼ êµ¬í˜„í•´ì•¼ í•¨   ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ì´ ì„œë¸”ë¦¿ í•„í„°ë¥¼ ì‚¬ìš©í•˜ë¼ê³  ì•Œë ¤ì£¼ëŠ” ì„¤ì • ì‘ì—…       ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— JwtAuthenticationFilterë¥¼ ì‚¬ìš©í•˜ë¼ê³  ì•Œë ¤ì£¼ì       WebSecurityConfig.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 package me.yessm.userauth.config;  import me.yessm.userauth.security.JwtAuthenticationFilter; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.config.http.SessionCreationPolicy; import org.springframework.web.filter.CorsFilter;  @EnableWebSecurity public class WebSecurityConfig extends WebSecurityConfigurerAdapter {      @Autowired     private JwtAuthenticationFilter jwtAuthenticationFilter;      @Override     protected void configure(HttpSecurity http) throws Exception {         http.cors()                 .and()                 .csrf()                 .disable()                 .httpBasic()                 .disable()                 .sessionManagement()                 .sessionCreationPolicy(SessionCreationPolicy.STATELESS)                 .and()                 .authorizeRequests()                 .antMatchers(\"/\", \"/auth/**\").permitAll()                 .anyRequest()                 .authenticated();          http.addFilterAfter(                 jwtAuthenticationFilter,                 CorsFilter.class         );     } }   HttpSecurity ëŠ” ì‹œíë¦¬í‹° ì„¤ì •ì„ ìœ„í•œ ì˜¤ë¸Œì íŠ¸   web.xml ëŒ€ì‹  HttpSecurity ë¥¼ ì´ìš©í•´ ì‹œíë¦¬í‹° ê´€ë ¨ ì„¤ì •ì„ í•˜ëŠ” ê²ƒ       addFilterAfter() ë©”ì„œë“œë¥¼ í†µí•´ CorsFilter ì´í›„ì—  jwtAuthenticationFilter ì‹¤í–‰í•˜ê²Œ ì„¤ì •       í…ŒìŠ¤íŒ…     íšŒì›ê°€ì… í›„ ë‹¤ì‹œ ë¡œê·¸ì¸ì„ í•˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì‘ë‹µê³¼ í•¨ê»˜ í† í°ì´ ì˜¨ë‹¤             Authorization ì— Bearer Token ì„ ì„ íƒí•˜ê³  í† í°ì„ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸° í•œë‹¤             í† í°ì´ ìœ„ì¡°ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë©”ì‹œì§€ê°€ ë°œìƒí•œë‹¤.   1 2 3 4 // JWTë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ì–´ ì˜ˆì™¸ ì²˜ë¦¬ë¨ io.jsonwebtoken.SignatureException:  JWT signature does not match locally computed signature.  JWT validity cannot be asserted and should not be trusted.       2.6 TodoControllerì—ì„œ ì¸ì¦ëœ ì‚¬ìš©ì ì‚¬ìš©í•˜ê¸°   TodoController.java   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 package me.yessm.userauth.controller;  import me.yessm.userauth.dto.ResponseDTO; import me.yessm.userauth.dto.TodoDTO; import me.yessm.userauth.entity.Todo; import me.yessm.userauth.service.TodoService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.http.ResponseEntity; import org.springframework.security.core.annotation.AuthenticationPrincipal; import org.springframework.web.bind.annotation.*;  import java.util.ArrayList; import java.util.List; import java.util.stream.Collectors;  @RestController @RequestMapping(\"todo\") public class TodoController {      @Autowired     private TodoService todoService;      @GetMapping(\"/test\")     public ResponseEntity&lt;?&gt; testTodo() {         String str = todoService.testService();         List&lt;String&gt; list = new ArrayList&lt;&gt;();         list.add(str);         ResponseDTO&lt;String&gt; response = ResponseDTO.&lt;String&gt;builder().data(list).build();          return ResponseEntity.ok(response);     }      @PostMapping     public ResponseEntity&lt;?&gt; createTodo(             @AuthenticationPrincipal String userId,             @RequestBody TodoDTO dto) {         try {             Todo entity = TodoDTO.toEntity(dto);             entity.setId(null);             entity.setUserId(userId);              List&lt;Todo&gt; entities = todoService.create(entity);             List&lt;TodoDTO&gt; dtos = entities.stream().map(TodoDTO::new).collect(Collectors.toList());              ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().data(dtos).build();              return ResponseEntity.ok(response);         } catch (Exception e) {             String error = e.getMessage();             ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().error(error).build();              return ResponseEntity.badRequest().body(response);         }     }      @GetMapping     public ResponseEntity&lt;?&gt; retrieveTodoList(             @AuthenticationPrincipal String userId) {         System.out.println(\"UserID : \" + userId);         List&lt;Todo&gt; entities = todoService.retrieve(userId);          List&lt;TodoDTO&gt; dtos = entities.stream().map(TodoDTO::new).collect(Collectors.toList());          ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().data(dtos).build();          return ResponseEntity.ok(response);     }      @PutMapping     public ResponseEntity&lt;?&gt; updateTodo(@AuthenticationPrincipal String userId,                                         @RequestBody TodoDTO dto) {         Todo entity = TodoDTO.toEntity(dto);         entity.setUserId(userId);         List&lt;Todo&gt; entities = todoService.update(entity);          List&lt;TodoDTO&gt; dtos = entities.stream().map(TodoDTO::new).collect(Collectors.toList());          ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().data(dtos).build();          return ResponseEntity.ok(response);     }      @DeleteMapping     public ResponseEntity&lt;?&gt; deleteTodo(             @AuthenticationPrincipal String userId,             @RequestBody TodoDTO dto) {         try {             Todo entity = TodoDTO.toEntity(dto);             entity.setUserId(userId);             List&lt;Todo&gt; entities = todoService.delete(entity);              List&lt;TodoDTO&gt; dtos = entities.stream().map(TodoDTO::new).collect(Collectors.toList());              ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().data(dtos).build();              return ResponseEntity.ok(response);         } catch (Exception e) {             String error = e.getMessage();             ResponseDTO&lt;TodoDTO&gt; response = ResponseDTO.&lt;TodoDTO&gt;builder().error(error).build();              return ResponseEntity.badRequest().body(response);         }     } }       ë§¤ê°œë³€ìˆ˜ userId ëŠ” ìŠ¤í”„ë§ì˜ @AuthenticationPrincipal ë¥¼ ì´ìš©í•´ì„œ ì°¾ëŠ”ë‹¤       @AuthenticationPrincipal ì´ë€?   1 2 AbstractAuthenticationToken authentication =  new UsernamePasswordAuthenticationToken(userId, null, AuthorityUtils.NO_AUTHORITIES);   UsernamePasswordAuthenticationToken ìƒì„±ìì˜ ì²« ë§¤ê°œë³€ìˆ˜ê°€ AuthenticationPrincipal ì´ë‹¤       2.7 íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”   ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” BCryptPasswordEncoder ë¥¼ ì‚¬ìš©       UserService.java   1 2 3 4 5 6 7 8 9 10 11 12 ...  \tpublic User getByCredentials(final String email, final String password, final PasswordEncoder encoder) {         final User originalUser = userRepository.findByEmail(email);          if (originalUser != null &amp;&amp; encoder.matches(password, originalUser.getPassword())) {             return originalUser         }         return userRepository.findByEmailAndPassword(email, password);     }  ...   BCryptPasswordEncoder ëŠ” ê°™ì€ ê°’ì„ ì¸ì½”ë”©í•´ë„ í•  ë•Œë§ˆë‹¤ ê°’ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— matches() ë©”ì„œë“œë¥¼ ì´ìš©í•´ íŒ¨ìŠ¤ì›Œë“œê°€ ê°™ì€ì§€ ë¹„êµ       UserController.java ìˆ˜ì •   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 package me.yessm.userauth.controller;  import me.yessm.userauth.dto.ResponseDTO; import me.yessm.userauth.dto.UserDTO; import me.yessm.userauth.entity.User; import me.yessm.userauth.security.TokenProvider; import me.yessm.userauth.service.UserService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.http.ResponseEntity; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.crypto.password.PasswordEncoder; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestBody; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  @RestController @RequestMapping(\"/auth\") public class UserController {      @Autowired     private UserService userService;      @Autowired     private TokenProvider tokenProvider;      private PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();      @PostMapping(\"/signup\")     public ResponseEntity&lt;?&gt; registerUser(@RequestBody UserDTO userDTO) {         try {             User user = User.builder()                     .email(userDTO.getEmail())                     .username(userDTO.getUsername())                     .password(passwordEncoder.encode(userDTO.getPassword()))                     .build();              User registeredUser = userService.create(user);             UserDTO responseUserDTO = UserDTO.builder()                     .email(registeredUser.getEmail())                     .id(registeredUser.getId())                     .username(registeredUser.getUsername())                     .build();              return ResponseEntity.ok().body(responseUserDTO);         } catch (Exception e) {             ResponseDTO responseDTO = ResponseDTO.builder().error(e.getMessage()).build();              return ResponseEntity.badRequest().body(responseDTO);         }     }      @PostMapping(\"/signin\")     public ResponseEntity&lt;?&gt; authenticate(@RequestBody UserDTO userDTO) {         System.out.println(\"signin userDTO: \" + userDTO);         User user = userService.getByCredentials(                 userDTO.getEmail(),                 userDTO.getPassword(),                 passwordEncoder);          if (user != null) {             // í† í° ìƒì„±             final String token = tokenProvider.create(user);             final UserDTO responseUserDTO = UserDTO.builder()                     .email(user.getUsername())                     .id(user.getId())                     .token(token)                     .build();              return ResponseEntity.ok().body(responseUserDTO);         } else {             ResponseDTO responseDTO = ResponseDTO.builder()                     .error(\"Login failed\")                     .build();              return ResponseEntity.badRequest().body(responseDTO);         }     } }  ","categories": ["Spring"],
        "tags": ["Java","Spring","JPA"],
        "url": "/spring/SpringBoot-JWT/",
        "teaser": ""
      },{
        "title": "íŒŒì´ì¬ ì•Œê³ ë¦¬ì¦˜",
        "excerpt":"íŒŒì´ì¬ ê¸°ì´ˆ ë¬¸ë²•   ì¶œë ¥ë°©ì‹   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 a, b, c = 1, 2, 3  print(a, b, c, sep=', ') # 1, 2, 3  print(a, b, c, sep='') # 123  print(a, b, c, sep='\\n') # 1 # 2 # 3  # ì¤„ë°”ê¿ˆ ì•ˆí•¨. ê³µë°±ìœ¼ë¡œ êµ¬ë¶„. print(a, end=' ') print(b, end=' ') print(c) # 1 2 3     ë³€ìˆ˜ì…ë ¥ê³¼ ì—°ì‚°ì   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 # a = 2, b = 3 a=input(\"ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš” : \") print(type(a)) print(a) # &lt;class 'str'&gt; # 2  a, b = input(\"ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš” : \").split() a=int(a) b=int(b) print(type(a)) print(a+b) # &lt;class 'int'&gt; # 5  # ì…ë ¥ë°›ì€ ê°’ì„ ë°”ë¡œ intë¡œ ê°€ì ¸ì˜´ a, b = map(int, input(\"ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš” : \").split()) print(type(a)) print(a+b) print(a-b) print(a*b) print(a/b) # ë‚˜ëˆ„ê¸° print(a//b) # ë‚˜ëˆ„ê¸°ì˜ ëª« print(a%b) # ë‚˜ëˆ„ê¸°ì˜ ë‚˜ë¨¸ì§€ print(a**b) # ì œê³±ê·¼ # &lt;class 'int'&gt; # 5 # -1 # 6 # 0.66666666666 # 0 # 2 # 8  a=4.3 b=5 print(type(c)) print(c) # &lt;class 'float'&gt; # ì‹¤ìˆ˜í˜•ê³¼ ì •ìˆ˜í˜•ì„ ë”í•˜ë©´ ì‹¤ìˆ˜í˜•ìœ¼ë¡œ ë‚˜ì˜´, ë²”ìœ„: ì‹¤ìˆ˜í˜•&gt;ì •ìˆ˜í˜• # 9.3  # ìˆ«ìë©´ true, ì•„ë‹ˆë©´ false isdecimal()  # ê°’ ë¹„êµí•˜ì—¬ ë” í° ê°’ì„ return largest = 20 tmp = 30 largest = max(largest, tmp) # largest = 30  tmp = 10 largest = max(largest, tmp) # largest = 30     ë°˜ë³µë¬¸   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 # range()ëŠ” ì •ìˆ˜ë¥¼ ìˆœì„œëŒ€ë¡œ ë§Œë“¦ a=range(1, 11) list(a) # [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]  # range(10) == range(0,10) list(range(10)) # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  list(range(10, 0, -1)) # [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]  list(range(10, 0, -2)) # [10, 8, 6, 4, 2]  # í•œ ìˆ«ìì˜ ëª¨ë“  ë°°ìˆ˜ì— ì ‘ê·¼í•  ë•ŒëŠ” range(start, end, start)  # (i=i+1) == (i+=1)  # for ~ else êµ¬ë¬¸: forë¬¸ì´ ëª¨ë‘ ì‹¤í–‰ëœ í›„ else ì‹¤í–‰ for i in range(1, 11): \tprint(i) \tif i==5: \t\tbreak else: \tprint(11) # 1 # 2 # 3 # 4 # 5  for i in range(1, 11): \tprint(i) \tif i&gt;15: \t\tbreak else: \tprint(11) # 1 # 2 # ... # 9 # 10 # 11     ë°˜ë³µë¬¸ì„ ì´ìš©í•œ ë¬¸ì œí’€ì´   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 ''' ë°˜ë³µë¬¸ì„ ì´ìš©í•œ ë¬¸ì œí’€ì´ 1) 1ë¶€í„° Nê¹Œì§€ í™€ìˆ˜ ì¶œë ¥í•˜ê¸° (Nì€ ì…ë ¥ë°›ê¸°) 2) 1ë¶€í„° Nê¹Œì§€ í•© ì¶œë ¥í•˜ê¸° (Nì€ ì…ë ¥ë°›ê¸°) 3) Nì˜ ì•½ìˆ˜ ì¶œë ¥í•˜ê¸° (Nì€ ì…ë ¥ë°›ê¸°) '''  # 1) n = input(\"ìˆ«ì1: \") n = int(n) for i in range(1, n+1): \tif i%2 == 1: \t\tprint(i)  # 2) n2 = int(input(\"ìˆ«ì2: \")) sum = 0 for i in range(1, n2+1):     sum+=i print(sum)  # 3) n3 = int(input(\"ìˆ«ì3: \")) for i in range(1, n3+1):     if n3%i==0:         print(i, end=' ')     ì¤‘ì²© ë°˜ë³µë¬¸(2ì¤‘ forë¬¸)   1 2 3 4 5 for i in range(5):     print('i:', i, sep='', end=' ')     for j in range(5):         print('j:', j, sep='', end=' ')     print()   1 2 3 4 5 i:0 j:0 j:1 j:2 j:3 j:4  i:1 j:0 j:1 j:2 j:3 j:4  i:2 j:0 j:1 j:2 j:3 j:4 i:3 j:0 j:1 j:2 j:3 j:4 i:4 j:0 j:1 j:2 j:3 j:4   1 2 3 4 5 for i in range(5):     print('i:', i, sep='', end=' ')     for j in range(i+1):         print('*', end=' ')     print()   1 2 3 4 5 i:0 *  i:1 * *  i:2 * * * i:3 * * * * i:4 * * * * *   1 2 3 4 for i in range(5):     for j in range(5-i):         print('*', end=' ')     print()   1 2 3 4 5 * * * * *  * * * *  * * * * * *     ë¬¸ìì—´ê³¼ ë‚´ì¥í•¨ìˆ˜   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 msg = \"It is Time\" print(msg.upper()) # ëŒ€ë¬¸ì print(msg.lower()) # ì†Œë¬¸ì print(msg) tmp=msg.upper() print(tmp) print(tmp.find('T')) # ë¬¸ìì—´ index ë°˜í™˜(ì²«ë²ˆì§¸ index) print(tmp.count('T')) # ë¬¸ìì—´ ê°¯ìˆ˜ count print(msg) print(msg[:2]) # 0ë²ˆë¶€í„° 2ë²ˆ ì „ê¹Œì§€ print(msg[3:5]) # 3ë²ˆë¶€í„° 5ë²ˆ ì „ê¹Œì§€ print(len(msg)) for i in range(len(msg)):     print(msg[i], end=' ') print()  for x in msg:     print(x, end=',') print()  # ë¬¸ìì—´ì—ì„œ ëŒ€ë¬¸ìë§Œ ì¶œë ¥ for x in msg:     if x.isupper():         print(x, end=' ') print()  # ë¬¸ìì—´ì—ì„œ ì†Œë¬¸ìë§Œ ì¶œë ¥ for x in msg:     if x.islower():         print(x, end=' ') print()  # ì•ŒíŒŒë²³ë§Œ ì¶œë ¥ for x in msg:     if x.isalpha():         print(x, end='') print()  # ord(): ì•„ìŠ¤í‚¤ number ì¶œë ¥ # A: 65, Z: 90 # tmp='AZ' tmp='az' for x in tmp:     print(ord(x))  # ì•„ìŠ¤í‚¤ë„˜ë²„ -&gt; ë¬¸ìì—´ë¡œ tmp=65 print(chr(tmp))   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 IT IS TIME it is time It is Time IT IS TIME 1 2 It is Time It is 10 I t   i s   T i m e I,t, ,i,s, ,T,i,m,e, I T t i s i m e ItisTime 97 122 A     ë¦¬ìŠ¤íŠ¸ì™€ ë‚´ì¥í•¨ìˆ˜(1)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 # ë¹ˆ list ìƒì„± a=[] b=list() print(a, b) print(type(a), type(b))  a = [1, 2, 3, 4, 5] print(a, a[0])  # rangeë¡œ list ì´ˆê¸°í™” b=list(range(1,11)) print(b)  c=a+b print(c)  # listì— ê°’ ì¶”ê°€ a.append(6)  # list a ì— 3ë²ˆì§¸ ì¸ë±ìŠ¤ì— 7ì„ ì¶”ê°€ a.insert(3, 7) print(a)  a.pop() # list ë§ˆì§€ë§‰ ìš”ì†Œ ì‚­ì œ print(a) # listì˜ 3ë²ˆì§¸ ìš”ì†Œ ì‚­ì œ a.pop(3) print(a)  # ê°’ìœ¼ë¡œ ìš”ì†Œ ì‚­ì œ a.remove(4) print(a)  # c=[3,2,1,4,6,8,'ì•ˆë…•'] # c.remove('ì•ˆë…•') # print(c)  # í•´ë‹¹í•˜ëŠ” ê°’ì˜ indexë¥¼ ë°˜í™˜ print(a.index(5))  print(\"===================\")  a=list(range(1,11)) print(a) print(sum(a)) # ë¦¬ìŠ¤íŠ¸ì˜ í•© print(max(a)) # ë¦¬ìŠ¤íŠ¸ì˜ ê°€ì¥ í° ê°’ print(min(a)) # ë¦¬ìŠ¤íŠ¸ì˜ ê°€ì¥ ì‘ì€ ê°’ print(min(7,3,5)) # 7, 3, 5 ì¤‘ ì‘ì€ ê°’  import random as r # ëœë¤ìœ¼ë¡œ ì„ê¸° r.shuffle(a) print(a)  # ë‚´ë¦¼ì°¨ìˆœ a.sort(reverse=True) print(a)  # ì˜¤ë¦„ì°¨ìˆœ a.sort() print(a)  a.clear() print(a)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 [] [] &lt;class 'list'&gt; &lt;class 'list'&gt; [1, 2, 3, 4, 5] 1 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] [1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] [1, 2, 3, 7, 4, 5, 6] [1, 2, 3, 7, 4, 5] [1, 2, 3, 4, 5] [1, 2, 3, 5] 3 ============================== [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 55 10 1 3 [6, 5, 1, 10, 4, 8, 2, 7, 3, 9] [10, 9, 8, 7, 6, 5, 4, 3, 2, 1] [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] []     ë¦¬ìŠ¤íŠ¸ì™€ ë‚´ì¥í•¨ìˆ˜(2)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 a=[23,12,36,53,19] print(a[:3]) print(a[1:4]) print(len(a))  for i in range(len(a)):     print(a[i], end=' ') print()  for x in a:     print(x, end=' ') print()  for x in a:     if x%2==1:         print(x, end=' ') print()  # xê°€ tupleë¡œ ë°˜í™˜ë¨ for x in enumerate(a):     print(x)  b=(1,2,3,4,5) print(b[0]) # error. tupleì€ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥, ë¦¬ìŠ¤íŠ¸ëŠ” ë³€ê²½ ê°€ëŠ¥ # b[0]=7  b=[1,2,3,4,5] b[0]=7 print(b)  for x in enumerate(a):     print(x[0], x[1]) print()  for index, value in enumerate(a):     print(index, value) print()  print(\"============================\")  # aë¥¼ forë¬¸ìœ¼ë¡œ ëŒë©´ì„œ ì¡°ê±´ì— ëª¨ë‘ ì°¸ì´ë©´ true ë°˜í™˜ if all(60&gt;x for x in a):     print(\"YES\") else:     print(\"NO\")  # aë¥¼ forë¬¸ìœ¼ë¡œ ëŒë©´ì„œ ì¡°ê±´ì— í•˜ë‚˜ë¼ë„ ì°¸ì´ë©´ true ë°˜í™˜ if any(15 &gt; x for x in a):     print(\"YES\") else:     print(\"NO\")  # Q: ë¦¬ìŠ¤íŠ¸ì•ˆì— íŠœí”Œì´ ìˆëŠ” í˜•íƒœ any(cur[1] &lt; x[1] for x in Q)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 [23, 12, 36] [12, 36, 53] 5 23 12 36 53 19 23 12 36 53 19 23 53 19 (0, 23) (1, 12) (2, 36) (3, 53) (4, 19) 1 [7, 2, 3, 4, 5] 0 23 1 12 2 36 3 53 4 19  0 23 1 12 2 36 3 53 4 19  ============================ YES YES   ë¦¬ìŠ¤íŠ¸ì™€ íŠœí”Œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  a = [(0, 1), (1, 4), (5, 9), (3, 8), (4, 3)]  # ì •ë ¬ë°©ë²• # íŠœí”Œì˜ ì²«ë²ˆì§¸ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ a.sort() # [(0, 1), (1, 4), (3, 8), (4, 3), (5, 9)]  # íŠœí”Œì˜ ë‘ë²ˆì§¸ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ a.sort(key=lambda x: (x[1], x[0])) # [(0, 1), (4, 3), (1, 4), (3, 8), (5, 9)]  # ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì˜¤ëŠ” ë™ì‹œì— íŠœí”Œì˜ ì²«ë²ˆì§¸ëŠ” ì¸ë±ìŠ¤, ë‘ë²ˆì§¸ëŠ” ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë²• # input(): 60 50 70 80 90 Q = [(pos, val) for pos, val in enumerate(list(map(int, input().split())))] # [(0, 60), (1, 50), (2, 70), (3, 80), (4, 90)]     2ì°¨ì› ë¦¬ìŠ¤íŠ¸ ìƒì„±ê³¼ ì ‘ê·¼   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 a=[0]*3 print(a)  # ë³€ìˆ˜ì—†ì´ ë°˜ë³µë¬¸ 3ë²ˆ ì‹¤í–‰ # for _ in range(3)  # 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ -&gt; í‘œë¡œ í‘œí˜„í•˜ëŠ”ê²Œ ì¢‹ë‹¤ # [0]*3 ì„ 3ë²ˆ ë°˜ë³µ a=[[0]*3 for _ in range(3)] print(a) print()  a[0][1]=1 print(a) print()  a[1][1]=2 print(a) print()  for x in a:     print(x)  for x in a:     for y in x:         print(y, end=' ')     print()   1 2 3 4 5 6 7 8 9 10 11 12 13 [0, 0, 0] [[0, 0, 0], [0, 0, 0], [0, 0, 0]]  [[0, 1, 0], [0, 0, 0], [0, 0, 0]]  [[0, 1, 0], [0, 2, 0], [0, 0, 0]]  [0, 1, 0] [0, 2, 0] [0, 0, 0] 0 1 0 0 2 0 0 0 0     í•¨ìˆ˜ë§Œë“¤ê¸°   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # í•¨ìˆ˜ëŠ” í•­ìƒ ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ìœ„ì— ìƒì„±í•´ì•¼ í•¨ def add(a, b):     c = a+b     return c  x = add(3,2) print(add(3,2)) print(x)  print(\"==========================\")  # í•¨ìˆ˜ì—ì„œ ì—¬ëŸ¬ê°œì˜ ê°’ì„ return í•  ìˆ˜ ìˆë‹¤ # íŠœí”Œë¡œ return ë¨ def cal(a, b):     c=a+b     d=a-b     return c, d  print(cal(3,2))  print(\"==========================\")  # ì†Œìˆ˜ë©´ true ë°˜í™˜ def isPrime(x):     for i in range(2,x):         if x%i==0:             return False     return True  arr=[12, 13, 7, 9, 19] for a in arr:     if isPrime(a):         print(a, end=' ')   1 2 3 4 5 6 5 5 ========================== (5, 1) ========================== 13 7 19     ëŒë‹¤í•¨ìˆ˜   1 2 3 4 5 6 7 8 9 10 11 12 def plus_one(x):     return x+1 print(plus_one(1))  plus_two=lambda x: x+2 print(plus_two(1))  a=[1, 2, 3] # map(í•¨ìˆ˜ëª…, ì¸ì) # map(int, a) print(list(map(plus_one, a))) print(list(map(lambda x: x+1, a)))   1 2 3 4 2 3         [2, 3, 4] [2, 3, 4]     ìˆ«ì, ë¬¸ìì—´ ì—­ìˆœ  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # ìˆ«ì ì—­ìˆœ í•  ë•Œ ì‚¬ìš© def reverse(x):     res = 0     while x &gt; 0:         t = x % 10         res = res * 10 + t         x = x//10     return res  # ìˆ«ìì™€ ë¬¸ìì—´ ì—­ìˆœ í•  ë•Œ ì‚¬ìš© def reverse(x):     x = list(str(x))     x.reverse()     x = ''.join(x)      return int(x)     ì†Œìˆ˜ ê´€ë ¨   ì†Œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë°©ë²• (ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´)  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # ì†Œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë°©ë²•ì€ ë‹¤ì–‘í•˜ê²Œ ìˆìœ¼ë‚˜ ê°€ì¥ ë¹ ë¥¸ ë°©ë²•ì€ ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ ì²´  # ë°›ì€ ì…ë ¥ë§Œí¼ì˜ í¬ê¸°ë¥¼ ê°€ì§„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤ ch=[0]*(n+1)  # ì†Œìˆ˜ì¸ ê²½ìš° ì¹´ìš´íŠ¸ë¥¼ í•  ë³€ìˆ˜ ì´ˆê¸°í™” cnt=0  # ì†Œìˆ˜ì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ 2ë¶€í„° nê¹Œì§€ forë¬¸ì„ ì‹¤í–‰ for i in range(2, n+1): \t\t# ch[i]ê°€ 0ì´ë©´ ì†Œìˆ˜     if ch[i] == 0:         cnt += 1 \t\t\t\t# ch[j]ì˜ ë°°ìˆ˜ë¥¼ ëª¨ë‘ 1ë¡œ ì´ˆê¸°í™”         for j in range(i, n+1, i):             ch[j] = 1      [ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´]           1ì€ ì œê±°            ì§€ì›Œì§€ì§€ ì•Šì€ ìˆ˜ ì¤‘ ì œì¼ ì‘ì€ 2ë¥¼ ì†Œìˆ˜ë¡œ ì±„íƒí•˜ê³ , ë‚˜ë¨¸ì§€ 2ì˜ ë°°ìˆ˜ë¥¼ ëª¨ë‘ ì§€ìš´ë‹¤.            ì§€ì›Œì§€ì§€ ì•Šì€ ìˆ˜ ì¤‘ ì œì¼ ì‘ì€ 3ì„ ì†Œìˆ˜ë¡œ ì±„íƒí•˜ê³ , ë‚˜ë¨¸ì§€ 3ì˜ ë°°ìˆ˜ë¥¼ ëª¨ë‘ ì§€ìš´ë‹¤.            ì§€ì›Œì§€ì§€ ì•Šì€ ìˆ˜ ì¤‘ ì œì¼ ì‘ì€ 5ë¥¼ ì†Œìˆ˜ë¡œ ì±„íƒí•˜ê³ , ë‚˜ë¨¸ì§€ 5ì˜ ë°°ìˆ˜ë¥¼ ëª¨ë‘ ì§€ìš´ë‹¤.            (ë°˜ë³µ)           ì†Œìˆ˜ íŒë³„   1 2 3 4 5 6 7 8 def isPrime(x):     if x == 1:         return False     for i in range(2, x//2+1):         if x%i == 0:             return False     else:         return True     ë‚´ì¥ í•¨ìˆ˜   itertools (ìˆœì—´, ì¡°í•©)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 from itertools import combinations, combinations_with_replacement  arr = [1,2,3]  for a in combinations(arr, 2):     print(a)  print(\"=========\")  for a in combinations_with_replacement(arr, 2):     print(a)  # (1, 2) # (1, 3) # (2, 3) # ========= # (1, 1) # (1, 2) # (1, 3) # (2, 2) # (2, 3) # (3, 3)  from itertools import product a = ['A', 'B'] for i in product(a, repeat=3): \tprint(i)  ''' ì¶œë ¥ê²°ê³¼: ('A', 'A', 'A') ('A', 'A', 'B') ('A', 'B', 'A') ('A', 'B', 'B') ('B', 'A', 'A') ('B', 'A', 'B') ('B', 'B', 'A') ('B', 'B', 'B') '''   collections   1 2 3 4 5 6 7 8 9 10 11 12 from collections import Counter  # ê°€ì¥ í”í•œ ê°’ arr = [1,4,5,6,3,2,4,5,6,1,1,4,5] counts = Counter(arr) res = counts.most_common(2) print(res) print(res[0][0], res[0][1]) print(res[1][0], res[1][1],) # [(1, 3), (4, 3)] # 1 3 # 4 3       ì•Œê³ ë¦¬ì¦˜ ì¢…ë¥˜   ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜   ë¬¸ì œë¥¼ í’€ì–´ë‚˜ê°€ëŠ” ê³¼ì •(ë‹¨ê³„)ì— ìˆì–´ì„œ ê·¸ ìˆœê°„ì— ìµœì ì´ë¼ê³  ìƒê°ë˜ëŠ” ê²ƒì„ ì„ íƒí•´ ë‚˜ê°€ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ì—¬ ìµœì¢…ì ì¸ í•´ë‹µì— ë„ë‹¬í•˜ëŠ” ê²ƒ ë³´í†µì˜ ê·¸ë¦¬ë”” ë¬¸ì œëŠ” ë‹¤ ì •ë ¬ì´ë‹¤. ì •ë ¬ í›„ ìˆœì„œëŒ€ë¡œ ì„ íƒí•´ ë‚˜ê°€ë©´ ë¨       ìë£Œêµ¬ì¡°   ë¦¬ìŠ¤íŠ¸(List)           ì •ì˜       ë¦¬ìŠ¤íŠ¸ëŠ” ìë£Œë¥¼ ë’¤ì—ì„œ ë¶€í„° ë„£ì„ ìˆ˜ ìˆê³  ë§Œì•½ ì²˜ìŒ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤ë©´ ìë£Œê°€ í•˜ë‚˜ì”© ì•ë‹¹ê²¨ ì§€ëŠ” ê²ƒ       â†’ ë¹„íš¨ìœ¨ì ì´ë‹¤            í‰ê·  ì‹œê°„ë³µì¡ë„: O(n)           ìŠ¤íƒ(Stack)           ë¦¬ìŠ¤íŠ¸ì™€ ê°™ë‹¤ (FILO)            append(), pop() í™œìš©            í™œìš©: í›„ìœ„í‘œê¸°ì‹ ë“±            í›„ìœ„í‘œê¸°ì‹              â€™(â€˜: ë‚˜ì˜¤ë©´ ë°”ë¡œ ìŠ¤íƒì— pushí•œë‹¤.       â€™)â€™: ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€ ê´„í˜¸ì—°ì‚°ìê°€ ëë‚œë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ, ê´„í˜¸ ì•ˆì— ë‚¨ì•„ìˆëŠ” ì—°ì‚°ìë¥¼ ì „ë¶€ popí•˜ê³  â€˜(â€˜ë„ popí•´ì¤Œ. â€˜)â€™ëŠ” ì²˜ìŒë¶€í„° ìŠ¤íƒì— ë„£ì§€ ì•ŠëŠ”ë‹¤.       â€™*â€™, â€˜/â€™: ìŠ¤íƒì— â€˜*â€™, â€˜/â€™ê°€ ìˆë‹¤ë©´ ê·¸ê²ƒë“¤ì„ ë¨¼ì € ì—†ì–´ì§ˆ ë•Œê¹Œì§€ popí•´ì£¼ê³  ëë‚˜ë©´ pushí•œë‹¤. (â€˜+â€™,â€™-â€˜ì€ ìš°ì„ ìˆœìœ„ê°€ ë‚®ìœ¼ë¯€ë¡œ popì•ˆí•¨)       â€™+â€™, â€˜-â€˜: ìŠ¤íƒì— ë‹¤ë¥¸ ì‚¬ì¹™ì—°ì‚°ìê°€ ìˆë‹¤ë©´ ê·¸ê²ƒë“¤ì„ ë¨¼ì € ì—†ì–´ì§ˆ ë•Œê¹Œì§€ (ê´„í˜¸ì—°ì‚°ì ì§ì „ê°€ì§€)popí•´ì£¼ê³  ëë‚˜ë©´ pushí•œë‹¤.               ë±(Double-ended Queue, Double-linked list)           ì •ì˜       ì–‘ ëì— elements ì¶”ê°€/ì‚­ì œ ê°€ëŠ¥       ë°í¬ëŠ” ë¦¬ìŠ¤íŠ¸ì™€ ë‹¬ë¦¬ ì•ì—ì„œë„ ë„£ì„ ìˆ˜ ìˆê³  ë’¤ì—ì„œë„ ë„£ì„ ìˆ˜ ìˆë‹¤       ë§Œì•½ ì²˜ìŒ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë”ë¼ë„ ìë£Œê°€ ì´ë™í•˜ì§€ ì•ŠëŠ”ë‹¤ (í¬ì¸í„°ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì´ë¼ ìƒê°)       â†’ ì¦‰, íš¨ìœ¨ì ì´ë‹¤!            í‰ê·  ì‹œê°„ë³µì¡ë„: O(1)            deque ì£¼ìš” í•¨ìˆ˜             append()       appendleft()       pop()       popleft()           ì°¸ê³ ) dequeì˜ appendleft() ëŒ€ì‹  ListëŠ” insert()ê°€ ìˆëŠ”ë° O(n)ì˜ ì‹œê°„ ë³µì¡ë„ì´ë‹¤.       í(Queue): FIFO   íë¥¼ ì•ë’¤ë¡œ í™œìš©í•œ ê²ƒì´ deque(ë±)   dequeë¥¼ ì‚¬ìš©í•´ì„œ í’€ì´: popleft(), append() ì‚¬ìš©   ì›í˜• íëŠ” ì›í˜•ì¸ ì ì„ ê³ ë ¤í•˜ì—¬ popleft() í›„ ë§ˆì§€ë§‰ì— ë‹¤ì‹œ append() í•´ì¤Œâ€¦       ì°¸ê³ ) ì•„ë˜ ê·¸ë¦¼ì€ ë±ê³¼ ë¦¬ìŠ¤íŠ¸ì˜ ì°¨ì´ë¥¼ ë³´ì—¬ì¤Œ           ì´ë¶„/ì´ì§„ íƒìƒ‰ (binary search)      ì´ì§„ íƒìƒ‰ì„ í•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´: ë¦¬ìŠ¤íŠ¸ê°€ ì •ë ¬ë˜ì–´ ìˆì–´ì•¼ í•¨   ì´ì§„ íƒìƒ‰ ìˆœì„œ            íƒìƒ‰ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬       left(0), right(len(list)), mid((left + right) // 2) ì„¤ì •       mid ê°’ê³¼ ì°¾ê³ ì í•˜ëŠ” ê°’ ë¹„êµ       mid ê°’ì´ ë” í¬ë©´ right = mid - 1, mid ê°’ì´ ë” ì‘ìœ¼ë©´ left = mid + 1       left &lt;= right ì¡°ê±´ì´ ë§Œì¡±í•  ë•Œê¹Œì§€ ë°˜ë³µ           ì´ì§„ íƒìƒ‰ ì‹œê°„ë³µì¡ë„: íƒìƒ‰ ì‚¬ì´ì¦ˆê°€ ê³„ì† 1/2ì”© ì¤„ì–´ë“¤ê¸° ë•Œë¬¸ì— ì‹œê°„ë³µì¡ë„ê°€ O(logN)       ì´ì§„íŠ¸ë¦¬ìˆœíšŒ(ê¹Šì´ìš°ì„ íƒìƒ‰)      ì „ìœ„ìˆœíšŒ: ë¶€ëª¨-ì™¼ìª½-ì˜¤ë¥¸ìª½   ì¤‘ìœ„ìˆœíšŒ: ì™¼ìª½-ë¶€ëª¨-ì˜¤ë¥¸ìª½   í›„ìœ„ìˆœíšŒ: ì™¼ìª½-ì˜¤ë¥¸ìª½-ë¶€ëª¨   ëŒ€ë¶€ë¶„ì˜ ë¬¸ì œëŠ” ì „ìœ„ìˆœíšŒê°€ ëŒ€ë¶€ë¶„. í›„ìœ„ìˆœíšŒëŠ” ë³‘í•©ì •ë ¬ì´ ëŒ€í‘œì , ì¤‘ìœ„ìˆœíšŒë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ë§ì§€ ì•Šë‹¤.   ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ë¶€ëª¨ê°€ D(i)ì´ë¼ í•œë‹¤ë©´, ì™¼ìª½ ìì‹ì€ D(i2), ì˜¤ë¥¸ìª½ ìì‹ì€ D(i2+1)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import sys sys.stdin=open(\"input.txt\", \"r\")  def DFS(v):     if v &gt; 7:         return     else:         # ì „ìœ„ìˆœíšŒë°©ì‹         print(v)         DFS(v * 2)         # ì¤‘ìœ„ìˆœíšŒë°©ì‹         print(v)         DFS(v * 2 + 1)         # í›„ìœ„ìˆœíšŒë°©ì‹         print(v)  if __name__==\"__main__\":     DFS(1)      ","categories": ["Python","Algorithm"],
        "tags": ["Algorithm","Python"],
        "url": "/python/algorithm/Python-Algorithm/",
        "teaser": ""
      },{
        "title": "ìë°”: ì˜ˆì™¸ì²˜ë¦¬",
        "excerpt":"ì˜ˆì™¸ì²˜ë¦¬(excetpion handling)   1.1 í”„ë¡œê·¸ë¨ ì˜¤ë¥˜   ë°œìƒì‹œì ì— ë”°ë¼      ì»´íŒŒì¼ ì—ëŸ¬: ì»´íŒŒì¼ í•  ë•Œ ë°œìƒí•˜ëŠ” ì—ëŸ¬   ëŸ°íƒ€ì„ ì—ëŸ¬: í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ë„ì¤‘ì— ë°œìƒí•˜ëŠ” ì—ëŸ¬ (í”„ë¡œê·¸ë¨ ì¢…ë£Œë¨)   ê·¸ ì™¸ì—      ë…¼ë¦¬ì  ì—ëŸ¬: ì»´íŒŒì¼ë„ ì˜ë˜ê³  ì‹¤í–‰ë„ ì˜ë˜ì§€ë§Œ ì˜ë„í•œ ê²ƒê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ê²ƒ (í”„ë¡œê·¸ë¨ ì¢…ë£Œ X)       ì‹¤í–‰ ìˆœì„œ   ì»´íŒŒì¼ ì‹¤í–‰ â†’ ì»´íŒŒì¼ëŸ¬ê°€ ì†ŒìŠ¤ì½”ë“œì— ëŒ€í•´ ì˜¤ë¥˜ê°€ ìˆëŠ”ì§€ ì•Œë ¤ì¤Œ â†’ ì»´íŒŒì¼ ì„±ê³µë˜ë©´ í´ë˜ìŠ¤ íŒŒì¼ ìƒì„±ë¨ â†’ ìƒì„±ëœ í´ë˜ìŠ¤ íŒŒì¼ ì‹¤í–‰       ì‹¤í–‰ ì¤‘ ì—ëŸ¬ (ëŸ°íƒ€ì„ ì—ëŸ¬)      ì—ëŸ¬(error)            í”„ë¡œê·¸ë¨ ì½”ë“œì— ì˜í•´ì„œ ìˆ˜ìŠµ ë  ìˆ˜ ì—†ëŠ” ì‹¬ê°í•œ ì˜¤ë¥˜       ex. ë©”ëª¨ë¦¬ ë¶€ì¡± (OOME, Out of Memory Error), ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°           ì˜ˆì™¸(exception)            í”„ë¡œê·¸ë¨ ì½”ë“œì— ì˜í•´ì„œ ìˆ˜ìŠµë  ìˆ˜ ìˆëŠ” ë‹¤ì†Œ ë¯¸ì•½í•œ ì˜¤ë¥˜       ê°œë°œìê°€ ì˜ˆì™¸ë¥¼ ëŒ€ë¹„í•´ ì ì ˆí•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ ì‘ì„±í•˜ì—¬ í”„ë¡œê·¸ë¨ì˜ ë¹„ì •ìƒì ì¸ ì¢…ë£Œë¥¼ ë§‰ì„ ìˆ˜ ìˆìŒ               1.2 ì˜ˆì™¸ í´ë˜ìŠ¤ì˜ ê³„ì¸µêµ¬ì¡°   ìë°”ì—ì„  ì‹¤í–‰ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜(Exceptionê³¼ Error)ë¥¼ í´ë˜ìŠ¤ë¡œ ì •ì˜í•¨   Exceptionê³¼ Error í´ë˜ìŠ¤ì˜ ì¡°ìƒì€ Object í´ë˜ìŠ¤ (ëª¨ë“  í´ë˜ìŠ¤ì˜ ì¡°ìƒì€ Objectì´ë¯€ë¡œ..)       ëª¨ë“  ì˜ˆì™¸ì˜ ìµœê³  ì¡°ìƒì€ Exception   Exceptionê³¼ RuntimeException      Exceptioní´ë˜ìŠ¤ë“¤: ì‚¬ìš©ìì˜ ì‹¤ìˆ˜ì™€ ê°™ì€ ì™¸ì ì¸ ìš”ì¸ì— ì˜í•´ ë°œìƒí•˜ëŠ” ì˜ˆì™¸   RuntimeExceptioní´ë˜ìŠ¤ë“¤: í”„ë¡œê·¸ë˜ë¨¸ì˜ ì‹¤ìˆ˜ë¡œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸       1.3 ì˜ˆì™¸ì²˜ë¦¬í•˜ê¸° - try~catchë¬¸   ì˜ˆì™¸ì²˜ë¦¬ì˜ ì •ì˜ì™€ ëª©ì    ì •ì˜: í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ì˜ ë°œìƒì— ëŒ€ë¹„í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒ   ëª©ì : í”„ë¡œê·¸ë¨ì˜ ë¹„ì •ìƒ ì¢…ë£Œë¥¼ ë§‰ê³ , ì •ìƒì ì¸ ì‹¤í–‰ìƒíƒœë¥¼ ìœ ì§€       ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ try~catchë¬¸ì„ ì‚¬ìš©   1 2 3 4 5 6 7 8 9 try { \t// ì˜ˆì™¸ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ë¬¸ì¥ë“¤ì„ ë„£ëŠ”ë‹¤ } catch (Exception1 e1) { \t// Exception1ì´ ë°œìƒí–ˆì„ ê²½ìš°, ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¬¸ì¥ì„ ì ìŒ } catch (Exception2 e2) { \t// Exception2ì´ ë°œìƒí–ˆì„ ê²½ìš°, ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¬¸ì¥ì„ ì ìŒ } catch (Exception3 e3) { \t// Exception3ì´ ë°œìƒí–ˆì„ ê²½ìš°, ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¬¸ì¥ì„ ì ìŒ }       1.4 try~catchë¬¸ì—ì„œì˜ íë¦„      tryë¸”ëŸ­ ë‚´ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²½ìš°            ë°œìƒí•œ ì˜ˆì™¸ì™€ ì¼ì¹˜í•˜ëŠ” catch ë¸”ëŸ­ì´ ìˆëŠ”ì§€ í™•ì¸       ì¼ì¹˜í•˜ëŠ” catchë¸”ëŸ­ì„ ì°¾ìœ¼ë©´, ê·¸ catchë¸”ëŸ­ ë‚´ì˜ ë¬¸ì¥ë“¤ì„ ìˆ˜í–‰. ì¼ì¹˜í•˜ëŠ” catchë¸”ëŸ­ì„ ì°¾ì§€ ëª»í•˜ë©´ ì˜ˆì™¸ëŠ” ì²˜ë¦¬ë˜ì§€ ëª»í•¨           tryë¸”ëŸ­ ë‚´ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šì€ ê²½ìš°            catchë¸”ëŸ­ì„ ê±°ì¹˜ì§€ ì•Šê³  try~catchë¬¸ì„ ë¹ ì ¸ë‚˜ê°€ì„œ ìˆ˜í–‰ì„ ê³„ì†í•¨               1.5 ì˜ˆì™¸ì˜ ë°œìƒê³¼ catchë¸”ëŸ­   catchë¸”ëŸ­ì˜ ê´„í˜¸() ë‚´ì—ëŠ” ì²˜ë¦¬í•˜ê³  í•˜ëŠ” ì˜ˆì™¸ì™€ ê°™ì€ íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ í•˜ë‚˜ë¥¼ ì„ ì–¸   (ì°¸ì¡°ë³€ìˆ˜ì˜ ìœ íš¨ë²”ìœ„(scope): í•˜ë‚˜ì˜ catchë¸”ëŸ­)   ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë°œìƒí•œ ì˜ˆì™¸ì— í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§       printStackTrace()ì™€ getMessage()   ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ìƒì„±ë˜ëŠ” ì˜ˆì™¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ë°œìƒí•œ ì˜ˆì™¸ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ìˆìŒ.      printStackTrace(): ì˜ˆì™¸ë°œìƒ ë‹¹ì‹œì˜ í˜¸ì¶œìŠ¤íƒì— ìˆì—ˆë˜ ë©”ì„œë“œì˜ ì •ë³´ì™€ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ í™”ë©´ì— ì¶œë ¥   getMessage(): ë°œìƒí•œ ì˜ˆì™¸í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì €ì¥ëœ ë©”ì‹œì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤       ë©€í‹° catchë¸”ëŸ­   ë‚´ìš©ì´ ê°™ì€ catchë¸”ëŸ­ì„ í•˜ë‚˜ì˜ catchë¸”ëŸ­ìœ¼ë¡œ í•©ì¹œ ê²ƒ   1 2 3 4 5 try { \t... } catch (ExceptionA | ExceptionB e) { \te.printStackTrace(); }   ë‹¨, ë¶€ëª¨ ìì‹ ê´€ê³„ì—ì„  ë©€í‹° catchë¸”ëŸ­ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.   ë©€í‹° catchë¸”ëŸ­ì„ ì‚¬ìš©í•  ë• ExceptionAì—ë§Œ ì„ ì–¸ëœ methodA()ëŠ” í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-OOP9-Exception/",
        "teaser": ""
      },{
        "title": "IPì™€ TCP",
        "excerpt":"IP   í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ í†µì‹ ì€ ë³µì¡í•œ ì¸í„°ë„· ë§(ì¤‘ê°„ ë…¸ë“œë¼ëŠ” ì„œë²„ë“¤)ì„ ê±°ì³ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤. ë¨¼ì € IPì— ëŒ€í•´ ì•Œì•„ë³´ì.      ì°¸ê³  ë…¸ë“œ   ì—¬ê¸°ì„œì˜ ë…¸ë“œë€ ë„¤íŠ¸ì›Œí¬ë¥¼ ì¤‘ê°„ì—ì„œ ì—°ê²°í•´ì£¼ëŠ” ì„œë²„(ë¼ìš°í„°)ë¥¼ ì˜ë¯¸í•œë‹¤.     IPë€ Internet Protocol(ì¸í„°ë„· í”„ë¡œí† ì½œ)ì˜ ì¤„ì„ë§ë¡œ IP í”„ë¡œí† ì½œì´ë¼ê³ ë„ í•œë‹¤. ë³µì¡í•œ ì¸í„°ë„· ë§ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ í†µì‹ í•˜ë ¤ë©´ ìµœì†Œí•œì˜ ê·œì¹™ì´ ìˆì–´ì•¼ í•˜ëŠ”ë° ê·¸ê²Œ IPì´ë‹¤.   í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ì§€ì •í•œ ì£¼ì†Œë¡œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìœ¼ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì— IP ì£¼ì†Œë¥¼ ë¶€ì—¬í•´ì•¼ í•œë‹¤.      IPëŠ” ì§€ì •í•œ IP ì£¼ì†Œ(IP Address)ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  íŒ¨í‚·(Packet)ì´ë¼ëŠ” í†µì‹  ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤.      ì°¸ê³  íŒ¨í‚·   ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ë°ì´í„°ë¥¼ ì¼ì • ë¬¶ìŒìœ¼ë¡œ ë‚˜ëˆ ë†“ì€ ê²ƒì´ë‹¤. ë°ì´í„°ëŠ” ì‘ì€ íŒ¨í‚·ìœ¼ë¡œ ë‚˜ë‰˜ì–´ ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡ëœë‹¤. ì´ íŒ¨í‚·ì—ëŠ” í—¤ì–´ê°€ ìˆì–´ì„œ í—¤ë”ì— ë°œì‹ ì ì •ë³´ì™€ ìˆ˜ë ¹ì ì •ë³´ ë“±ì´ í¬í•¨ëœë‹¤.        ì°¸ê³    íŒ¨í‚· êµí™˜ë°©ì‹ì˜ ì¥ì            ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ ì ìœ  ì‹œê°„ì´ ì ë‹¤.     í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ì´ë™í•˜ëŠ” ê²½ë¡œê°€ ê³ ì •ë˜ì–´ ìˆì§€ ì•Šë‹¤.                íŒ¨í‚·ë§ˆë‹¤ ì–´ë–¤ ê²½ë¡œë¥¼ í†µí•´ ì „ë‹¬ë ì§€ê°€ ê²°ì •ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ê²½ë¡œìƒì— ì¥ì• ê°€ ë°œìƒí•´ë„ ë‹¤ë¥¸ ê²½ë¡œë¥¼ í†µí•´ ì „ì†¡í•˜ê²Œ ë˜ë¯€ë¡œ ì•ˆì •ì„±ì´ ë†’ë‹¤.                 ë‚˜ëˆ„ì–´ì§„ íŒ¨í‚·ì€ ìˆœì„œ(ë„˜ë²„ë§)ê°€ ë§¤ê²¨ì ¸ ì¤‘ê°„ì— ìœ ì‹¤ëœ íŒ¨í‚·ì— ëŒ€í•œ ì¬ìš”ì²­ì´ ê°€ëŠ¥í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ ì¬ì „ì†¡í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. (syn, ack ì‹ í˜¸ êµí™˜ì´ ê° íŒ¨í‚·ì— ëª¨ë‘ ì ìš©ëœë‹¤)       íŒ¨í‚· êµí™˜ë°©ì‹ì˜ ë‹¨ì    ëª¨ë“  íŒ¨í‚·ì— ëŒ€í•œ syn, ack í™•ì¸ê³¼ì •ì´ ì¶”ê°€ë˜ëŠ” ê²ƒ, ëª¨ë“  íŒ¨í‚·ì— í—¤ë”ê°€ ë¶™ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì— ë”°ë¥¸ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.     IP íŒ¨í‚· ì •ë³´   IP íŒ¨í‚· ì •ë³´ì—ëŠ” ì¶œë°œì§€ IP, ëª©ì ì§€ IP, ì „ì†¡ ë°ì´í„°, ê¸°íƒ€ ë“±ì´ ìˆë‹¤.      ì°¸ê³    ìš”ì²­(í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„) íŒ¨í‚·ê³¼ ì‘ë‹µ(ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸) íŒ¨í‚·ì˜ ì „ë‹¬ ê²½ë¡œëŠ” ì„œë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.     IP í”„ë¡œí† ì½œì˜ í•œê³„      ë¹„ì—°ê²°ì„±: í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ê°€ ì–´ë–¤ ìƒíƒœì¸ì§€ ëª¨ë¥¸ë‹¤. ë”°ë¼ì„œ, ì„œë²„ê°€ ì„œë¹„ìŠ¤ ë¶ˆëŠ¥ ìƒíƒœì—¬ë„ ì¼ë‹¨ íŒ¨í‚·ì„ ì „ì†¡í•˜ê³  ì‚¬ë¼ì§„ë‹¤.   ë¹„ì‹ ë¢°ì„±: íŒ¨í‚·ì„ ë³´ë‚´ëŠ” ì¤‘ê°„ì— ë…¸ë“œ(ì„œë²„)ê°€ êº¼ì§€ê±°ë‚˜ ë¬¸ì œê°€ ìƒê¸°ë©´ íŒ¨í‚·ì´ ìœ ì‹¤ë˜ëŠ”ë°, í´ë¼ì´ì–¸íŠ¸ëŠ” íŒ¨í‚·ì´ ì‚¬ë¼ì§„ì§€ ëª¨ë¥¸ë‹¤. ë˜í•œ, ë©”ì‹œì§€ê°€ ë„ˆë¬´ í¬ë©´ íŒ¨í‚·ì„ ëŠì–´ì„œ ë³´ë‚´ëŠ”ë° íŒ¨í‚·ì´ ìˆœì„œëŒ€ë¡œ ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ì˜ˆ) í´ë¼ì´ì–¸íŠ¸ 1:Hello, 2:World â†’ ì„œë²„ 1:World, 2:Hello   í”„ë¡œê·¸ë¨ êµ¬ë¶„: ê°™ì€ IPë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë²„ì—ì„œ í†µì‹ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ 2ê°œ ì´ìƒì´ë©´ êµ¬ë¶„ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.  ì˜ˆ) ê°™ì€ IPì—ì„œ ìŒì•…ì„ ì‹¤í–‰í•˜ê³  ê²Œì„ì„ í•˜ê³  ìˆìœ¼ë©´ êµ¬ë¶„í•  ìˆ˜ ì—†ë‹¤.      ì°¸ê³  IP íŒ¨í‚·ì˜ ìˆœì„œ   ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ í—¤ë”ì˜ í”„ë˜ê·¸ë¨¼íŠ¸ ì˜¤í”„ì…‹ ë“±ì„ ì´ìš©í•´ íŒ¨í‚·ì˜ ìˆœì„œë¥¼ ì•Œ ìˆ˜ ìˆë‹¤. ìˆ˜ì‹ ì¸¡ì€ ì´ í—¤ë”ì •ë³´ë¥¼ í†µí•´ ë°ì´í„°ì˜ ìˆœì„œë‚˜, ì¶”ê°€ ë°ì´í„°ê°€ ìˆëŠ”ì§€ ë“±ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.     ì´ëŸ¬í•œ IP í”„ë¡œí† ì½œì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ TCPë¥¼ ì‚¬ìš©í•œë‹¤.   TCP, UDP   TCP   TCPë€ Transmission Control Protocolì˜ ì¤„ì„ë§ë¡œ ì „ì†¡ ì œì–´ í”„ë¡œí† ì½œì´ë¼ê³  í•œë‹¤.   TCPëŠ” íŒ¨í‚·ì†Œì‹¤ì„ ë°©ì§€í•´ì£¼ê³ , íŒ¨í‚· ìˆœì„œë¥¼ ë³´ì¥í•´ì¤€ë‹¤. ë˜í•œ, TCPì—” PORTê°€ ìˆì–´ì„œ ê°™ì€ IPì—ì„œ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ë„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.   TCP/IP íŒ¨í‚· ì •ë³´      IP ë‚´ìš©: ì¶œë°œì§€ IP, ëª©ì ì§€ IP, ê¸°íƒ€   TCP ë‚´ìš©: ì¶œë°œì§€ PORT, ëª©ì ì§€ PORT, ì „ì†¡ì œì–´ ì •ë³´, ìˆœì„œ ì •ë³´, ê²€ì¦ ì •ë³´   TCP = IP + PORT (IPê°€ í•œ ì•„íŒŒíŠ¸ë¼ë©´ PORTëŠ” ë™, í˜¸ìˆ˜ì´ë‹¤.)         ì°¸ê³  PORT   PORTëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•œë²ˆì— ë‘˜ ì´ìƒì˜ ì„œë²„ì™€ ì—°ê²°í•  ë•Œ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. í¬íŠ¸ëŠ” 0~65535 í• ë‹¹ ê°€ëŠ¥í•˜ë‹¤. ê·¸ ì¤‘ 0~1023ê¹Œì§€ëŠ” ì˜ ì•Œë ¤ì§„ í¬íŠ¸ì´ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.  ì˜ˆ) FTP - 20, 21 / TELNET - 23 / HTTP - 80 / HTTPS - 443        ì°¸ê³  localhost:8080   ì›¹ì€ ê¸°ë³¸ì ìœ¼ë¡œ 80í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤. ê·¸ë˜ì„œ HTTP ìš”ì²­ì´ë©´ì„œ ë³„ë„ì˜ í¬íŠ¸ë¥¼ ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš° 80ë²ˆ í¬íŠ¸ë¡œ ì ‘ì†ì„ ì‹œë„í•œë‹¤. ê·¸ëŸ¬ë‚˜, ì‚¬ìš©ìê°€ ì§ì ‘ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì§€ì •í•  ê²½ìš° ê·¸ í¬íŠ¸ë¡œ ë°”ë¡œ ì ‘ì†ì„ ì‹œë„í•œë‹¤. 80ì—ì„œ 8080ìœ¼ë¡œ í¬ì›Œë”©í•˜ëŠ” êµ¬ì¡°ëŠ” ì•„ë‹ˆë‹¤.     TCP íŠ¹ì§•   TCPì—” ì „ì†¡ì œì–´ ì •ë³´, ìˆœì„œ ì •ë³´, ê²€ì¦ ì •ë³´ê°€ ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì˜ ì—°ê²°ì§€í–¥, ë°ì´í„° ì „ë‹¬ ë³´ì¦, ìˆœì„œ ë³´ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.      ì—°ê²°ì§€í–¥ - TCP 3way handshake(ê°€ìƒ ì—°ê²°): ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ì´ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.   ë°ì´í„° ì „ë‹¬ ë³´ì¦: í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  ì„œë²„ê°€ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ ì„œë²„ê°€ ë°ì´í„°ë¥¼ ì˜ ë°›ì•˜ë‹¤ê³  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•´ì¤€ë‹¤. ë”°ë¼ì„œ, íŒ¨í‚·ì´ ëˆ„ë½ ë˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ì•Œ ìˆ˜ ìˆë‹¤.   ìˆœì„œ ë³´ì¥: íŒ¨í‚·ì„ ë³´ëƒˆëŠ”ë° ìˆœì„œê°€ í‹€ë¦¬ë©´ ë‹¤ ë²„ë¦¬ê³  ë‹¤ì‹œ ë³´ë‚¸ë‹¤. ì˜ˆ) íŒ¨í‚· 1, 2, 3 ì„ ë³´ëƒˆëŠ”ë° ì „ì†¡ ë„ì°©ì´ 1, 3, 2ë¼ê³  í•˜ë©´ 2ë²ˆì§¸ íŒ¨í‚·ë¶€í„° ìˆœì„œê°€ í‹€ë ¸ê¸° ë•Œë¬¸ì— 2ë²ˆë¶€í„° ë‹¤ì‹œ ë°›ìŒ   ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í”„ë¡œí† ì½œ   í˜„ì¬ëŠ” ëŒ€ë¶€ë¶„ TCP ì‚¬ìš©   TCP 3way handshake   TCP 3way handshakeëŠ” ê°€ìƒ ì—°ê²°ë¡œ ë¬¼ë¦¬ì  ì—°ê²°ì´ ì•„ë‹Œ ë…¼ë¦¬ì  ì—°ê²°ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ë‘ ì„œë²„ë‘ SYN - ACKì„ ë³´ë‚´ë©´ì„œ ì—°ê²°ì´ ë˜ì–´ìˆë‚˜ë³´ë‹¤ ìƒê°í•˜ëŠ” ê²ƒì´ë‹¤.   TCP/IP í”„ë¡œí† ì½œë¡œ ì—°ê²°í•˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. (SYN: ì ‘ì† ìš”ì²­, ACK: ìš”ì²­ ìˆ˜ë½)      í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ SYN ë³´ëƒ„   ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ SYN+ACK ë³´ëƒ„   í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ACK ë³´ëƒ„   ì—°ê²°ì´ ì™„ë£Œë˜ë©° í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡   1,2,3: connect ê³¼ì •ì´ê³  ì´ ê³¼ì • ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ connectionì´ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤. 4ë²ˆì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤ê³  í•˜ì˜€ì§€ë§Œ ìš”ì¦˜ì—” ìµœì í™”ë˜ì–´ 3ë²ˆ ACKë¥¼ ì „ì†¡í•˜ë©´ì„œ ë°ì´í„°ë„ ê°™ì´ ì „ì†¡í•œë‹¤.         ì°¸ê³    TCP/IP íŒ¨í‚·ì€ í¬ê²Œ í—¤ë” ë¶€ë¶„ê³¼ ë°ì´í„° ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. 3 way handshakeì—ì„œ TCP/IP íŒ¨í‚·ì„ ì „ì†¡í•œë‹¤ê³  í–ˆëŠ”ë° ì‹¤ì œë¡  í—¤ë” ë¶€ë¶„ì„ ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤. ì´ í—¤ë” ë¶€ë¶„ì— SYN, ACKë“±ì„ í¬í•¨í•´ì„œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. 3ë‹¨ê³„ë‚˜ 4ë‹¨ê³„ì—ì„œ í—¤ë” + ë°ì´í„° ë¶€ë¶„ì´ í•¨ê»˜ ì „ì†¡ëœë‹¤.        ì°¸ê³    ë°ì´í„° ì „ë‹¬ì´ ì¢…ë£Œë˜ê³  ë‚œ í›„ ì—°ê²°ì„ í•´ì œí•  ë•ŒëŠ” 4 way handshake ê³¼ì •ì„ ê±°ì¹œë‹¤.     UDP   UDPë€ User Datagram Protocolì˜ ì¤„ì„ë§ë¡œ ì‚¬ìš©ì ë°ì´í„°ê·¸ë¨ í”„ë¡œí† ì½œì´ë¼ê³  í•œë‹¤.   TCPì™€ ë‹¬ë¦¬ UDPëŠ” íŒ¨í‚· ì†Œì‹¤ ë°©ì§€, íŒ¨í‚· ìˆœì„œ ë³´ì¥ì„ í•´ì£¼ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ í¬ê²Œ ë„ì›€ì´ ë˜ì§„ ì•Šì§€ë§Œ, ê·¸ë˜ë„ ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ëŠ” ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤. UDPëŠ” TCPì™€ ë§ˆì°¬ê°€ì§€ë¡œ PORTê°€ ìˆë‹¤.   UDP íŠ¹ì§•   UDPëŠ” ê¸°ëŠ¥ì´ ê±°ì˜ ì—†ë‹¤. (ì—°ê²°ì§€í–¥ - TCP 3way handshake X, ë°ì´í„° ì „ë‹¬ ë³´ì¦ X, ìˆœì„œ ë³´ì¥ X) ë°ì´í„° ì „ë‹¬ ë° ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•Šì§€ë§Œ, ë‹¨ìˆœí•˜ê³  ë¹ ë¥´ë‹¤. IPì™€ ê±°ì˜ ê°™ê³  PORT, ì²´í¬ì„¬ ì •ë„ë§Œ ì¶”ê°€ëœë‹¤.   ìµœê·¼ HTTP 3ìŠ¤í™ì´ ë‚˜ì˜¤ë©´ì„œ TCP í”„ë¡œí† ì½œì˜ 3 Way Handshake ê³¼ì •ì˜ ë²ˆê±°ë¡œì›€ì„ ì—†ì• ê³ ì UDPë¥¼ ì‚¬ìš©í•˜ë©´ì„œ UDPê°€ ë– ì˜¤ë¥´ê³  ìˆë‹¤.      ì°¸ê³  ì²´í¬ì„¬   ì´ ë©”ì„¸ì§€ê°€ ë§ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ìš©ë„, ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ë‹¬ëœ ê°’ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ ê²€ì‚¬í•˜ëŠ” ê°’ìœ¼ë¡œ ë¬´ê²°ì„±ì„ ì œê³µí•¨        ì°¸ê³  TCPì™€ UDP   ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ í†µì‹ ì„ êµ¬í˜„í•  ë•Œ TCPì™€ UDP ì¤‘ ì„ íƒí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ, ì›¹ ê°œë°œì€ ë¸Œë¼ìš°ì €ë¼ê³  í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ì¼ì´ë‹¤. ë”°ë¼ì„œ, í†µì‹  í”„ë¡œí† ì½œì„ ì„ íƒí•˜ê±°ë‚˜ í•˜ëŠ” ììœ ë„ê°€ ë§ì´ ë–¨ì–´ì§„ë‹¤. ì„œë²„ì™€ ë¸Œë¼ìš°ì €ê°€ ì„œë¡œ í†µì‹ í•˜ë©° HTTP ìµœì‹  ê·œê²©ì„ ì‚¬ìš©í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ê²Œ ë˜ê³ , ì´ ê·œê²©ì— ë”°ë¼ TCPë§Œ ì‚¬ìš©í• ì§€ UDPë„ ì‚¬ìš©í• ì§€ê°€ ê²°ì •ëœë‹¤. HTTP ìµœì‹ ê·œê²©ì¸ HTTP/3 ëŠ” UDPë¥¼ ì´ìš©í•œ ë°ì´í„° ì „ì†¡ì„ ì£¼ë ¥ìœ¼ë¡œ í†µì‹ ì†ë„ í–¥ìƒì„ ê¾€í•˜ëŠ” ê²ƒì´ ì£¼ëœ ëª©ì ì´ê³  êµ¬ê¸€ì´ ì£¼ë„ì ìœ¼ë¡œ í‘œì¤€ì„ ì •ë¦½í•˜ê³  ìˆë‹¤.     DNS (Domain Name System)   IPëŠ” ê¸°ì–µí•˜ê¸° ì–´ë µê³  ë³€ê²½ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, IPì£¼ì†Œë¥¼ ë„ë©”ì¸ ëª…ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤. ì´ë•Œ DNSë€ ì „í™”ë²ˆí˜¸ë¶€ì²˜ëŸ¼ ë„ë©”ì¸ ëª…ê³¼ IPë¥¼ ë§¤ì¹­í•˜ì—¬ ë“±ë¡í•´ ë†“ì€ ê²ƒì„ ì˜ë¯¸í•œë‹¤.      ì¸í„°ë„· í”„ë¡œí† ì½œ ìŠ¤íƒì˜ 4ê³„ì¸µ   ì•„ë˜ ê·¸ë¦¼ì€ ë¸Œë¼ìš°ì €ì˜ ì¸í„°ë„·ì„ ì‚¬ìš©í•  ë•Œ ì´ìš©ë˜ëŠ” í”„ë¡œí† ì½œ ìŠ¤íƒì˜ 4ê³„ì¸µì´ë‹¤. ë¸Œë¼ìš°ì €ë¼ëŠ” ì‘ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤ì œ ë„¤íŠ¸ì›Œí‚¹ì„ í•˜ê¸° ìœ„í•œ êµ¬ì¡°ë¼ê³  ì´í•´í•˜ì.      [ì˜ˆì œ] ì±„íŒ… í”„ë¡œê·¸ë¨      Hello, world! ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì‹¶ë‹¤ë©´,      Hello, world! ë©”ì‹œì§€ ìƒì„±   SOCKET ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ OS ê³„ì¸µì— ë©”ì‹œì§€ë¥¼ ë„˜ê¸´ë‹¤.   OS ê³„ì¸µì˜ TCPê°€ ë©”ì‹œì§€ì— TCPì˜ ì •ë³´ ì”Œìš´ë‹¤.   TCP ì •ë³´ì— IPì •ë³´ë¥¼ ì”Œìš´ë‹¤.            IP íŒ¨í‚· ì•ˆì— TCP ë°ì´í„° í¬í•¨í•˜ê³  ìˆê³  ê·¸ ì•ˆì— ë©”ì‹œì§€ê°€ ìˆë‹¤.           ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ LAN ì¹´ë“œë¡œ IP íŒ¨í‚·ì„ ì„œë²„ì— ë³´ë‚¸ë‹¤. (Ethernet frameì´ í¬í•¨ë˜ì„œ ë‚˜ê°„ë‹¤.)      ì°¸ê³  ì´ë”ë„· í”„ë ˆì„ (Ethernet frame)   ëœì¹´ë“œì— ë“±ë¡ëœ ë§¥ì£¼ì†Œ ê°™ì€ ë¬¼ë¦¬ì ì¸ ì •ë³´ë“¤ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.     Reference.   ëª¨ë“  ê°œë°œìë¥¼ ìœ„í•œ HTTP ì›¹ ê¸°ë³¸ ì§€ì‹  ","categories": ["HTTP"],
        "tags": ["HTTP","web"],
        "url": "/http/Web-Internet-Network/",
        "teaser": ""
      },{
        "title": "HTTP",
        "excerpt":"HTTPë€?   HTTPë€ HyperText Transfer Protocolì˜ ì¤„ì„ë§ë¡œ ê³¼ê±°ì—ëŠ” HyperText(ë¬¸ì„œê°„ì˜ ë§í¬ë¥¼ í†µí•´ ì—°ê²°í•œ HTML)ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œì´ì˜€ìœ¼ë‚˜ í˜„ì¬ëŠ” ê±°ì˜ ëª¨ë“  í˜•íƒœì˜ ë°ì´í„°ë¥¼ HTTP ë©”ì‹œì§€ë¡œ ì „ì†¡ ê°€ëŠ¥í•˜ë‹¤. (HTML, TEXT, IMAGE, ìŒì„±, ì˜ìƒ, íŒŒì¼, JSON, XML(API) ë“±)   HTTP ë²„ì „ì€ HTTP/1.1ì„ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œë‹¤. HTTP/1.1ì´ ì œì¼ ì¤‘ìš”í•œë° ê·¸ ì´ìœ ëŠ” HTTP/1.1ì— ê±°ì˜ ëª¨ë“  ê¸°ëŠ¥ì´ ë“¤ì–´ìˆê³  HTTP/2, HTTP/3ì€ ì„±ëŠ¥ ê°œì„ ì— ì´ˆì ì´ ë§ì¶°ì ¸ ìˆë‹¤.   HTTP/1.1ê³¼ HTTP/2ëŠ” TCP ê¸°ë°˜ í”„ë¡œí† ì½œì´ë©° HTTP/3ì€ UDP ê¸°ë°˜ í”„ë¡œí† ì½œì´ë‹¤.      ì°¸ê³    TCP í”„ë¡œí† ì½œ ìœ„ì— HTTP í”„ë¡œí† ì½œì´ ìˆê³  í˜„ì¬ëŠ” TCP í”„ë¡œí† ì½œì€ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šê³  HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤.     HTTP íŠ¹ì§•   HTTPì˜ íŠ¹ì§•ì€ 4ê°€ì§€ê°€ ìˆë‹¤. ê·¸ ì¤‘ì—ì„œ HTTP ë©”ì‹œì§€ê°€ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.   1. í´ë¼ì´ì–¸íŠ¸ - ì„œë²„ êµ¬ì¡°   HTTPëŠ” Requst, Response êµ¬ì¡°ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ëŒ€ê¸°í•˜ê³ , ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ì„œ ì‘ë‹µí•œë‹¤.   í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ë¥¼ ë¶„ë¦¬í•œê²Œ ì¤‘ìš”í•˜ë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„°ëŠ” ì„œë²„ì— ì²˜ë¦¬í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” UI, ì‚¬ìš©ì„±ì— ì§‘ì¤‘í•œë‹¤. ì´ëŸ¬í•œ ì„¤ê³„ êµ¬ì¡°ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ê°ê° ë…ë¦½ì ìœ¼ë¡œ ì§„í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.      2. ë¬´ìƒíƒœ í”„ë¡œí† ì½œ(stateless)   HTTPì˜ ì¤‘ìš”í•œ íŠ¹ì§• ì¤‘ í•˜ë‚˜ëŠ” ë¬´ìƒíƒœ í”„ë¡œí† ì½œì„ ì§€í–¥í•œë‹¤ëŠ” ê²ƒì´ë‹¤.   ë¬´ìƒíƒœ í”„ë¡œí† ì½œì´ë€ íŠ¹ì§• ë•Œë¬¸ì— ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœë¥¼ ë³´ì¡´í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë²„ í™•ì¥ì„±ì´ ë†’ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ë¬´í•œí•œ ì„œë²„ ì¦ì„¤ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ìŠ¤ì¼€ì¼ ì•„ì›ƒì— ìœ ë¦¬í•˜ë‹¤. ë”°ë¼ì„œ, ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ì´ ë°œìƒí•´ë„ ì„œë²„ë¥¼ ë§ì´ ì¦ì„¤í•˜ì—¬ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ë§ì•„ì§„ë‹¤. ë°˜ë©´, (stateless í•˜ê¸° ë•Œë¬¸ì—) í´ë¼ì´ì–¸íŠ¸ê°€ ì¶”ê°€ì ìœ¼ë¡œ ë³´ë‚¼ ë°ì´í„°ê°€ ë§ë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤.   ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœë¥¼ ë³´ì¡´í•˜ì§€ ì•ŠëŠ” í˜•íƒœë¡œ ì„¤ê³„í•˜ë„ë¡ ë…¸ë ¥í•´ì•¼ í•˜ê³  ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—” ì¿ í‚¤, ì„¸ì…˜, í† í°ê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.   ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ê³„ëŠ” ìµœëŒ€í•œ ë¬´ìƒíƒœë¡œ ì„¤ê³„í•˜ê³  ì •ë§ ì–´ì©”ìˆ˜ ì—†ëŠ” ê²½ìš°ì— í•œí•´ì„œ ìƒíƒœìœ ì§€ë¥¼ í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ í•œë‹¤.   ë¹„ ì—°ê²°ì„± (connectionless)   HTTPëŠ” ê¸°ë³¸ì´ ì—°ê²°ì„ ìœ ì§€í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ í•˜ê³  ì‘ë‹µì„ ë°›ìœ¼ë©´ ë°”ë¡œ TCP/IP ì—°ê²°ì„ ëŠì–´ ì—°ê²°ì„ ìœ ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ, ì„œë²„ì˜ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆ˜ ë§ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ëŒ€ì‘í•  ìˆ˜ ìˆê²Œ í•œë‹¤.   í•˜ì§€ë§Œ, ë§¤ë²ˆ TCP/IP ì—°ê²°ì„ ìƒˆë¡œ ë§ºì–´ì•¼ í•˜ë¯€ë¡œ 3 way handshake(SYN, SYN+ANK, ANK)ì— ëŒ€í•œ ì‹œê°„ì´ ì†Œìš”ëœë‹¤ëŠ” í•œê³„ì ë„ ê°€ì§€ê³  ìˆë‹¤. ì´ëŸ¬í•œ í•œê³„ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ HTTP/2, HTTP/3ì—ì„œëŠ” HTTP ì§€ì† ì—°ê²°(Persistent Connections)ì„ í†µí•´ ìµœì í™”í–ˆë‹¤.         ì°¸ê³  ë¹„ì—°ê²°ì„± vs Stateless   ë¹„ì—°ê²°ì„±ì€ TCP/IP ì»¤ë„¥ì…˜ ì—°ê²°ì„ ì§€ì†í•˜ì§€ ì•ŠëŠ”ë‹¤ ëŠ” ëœ»ì´ê³  StatelessëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì‚¬ì´ì— ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤ ëŠ” ëœ»ì´ë‹¤.        ì°¸ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ì˜ ì—°ê²° ê³¼ì •           ë¸Œë¼ìš°ì €ì—ì„œ URLì„ ì…ë ¥í•˜ê³  ì—”í„°ë¥¼ ëˆ„ë¥¸ë‹¤.     DNS ì„œë²„ì—ì„œ í•´ë‹¹ URLì˜ ì•„ì´í”¼ë¥¼ ì¡°íšŒí•œë‹¤.     ì•„ì´í”¼ì— í•´ë‹¹í•˜ëŠ” ì„œë²„ì™€ TCP ì—°ê²°ì„ í•œë‹¤. ì´ë•Œ, 3 way handshakeë¥¼ í†µí•´ ì—°ê²°í•œë‹¤.     ì´í›„ HTTP ìš”ì²­/ì‘ë‹µì„ í•œë‹¤.          ì°¸ê³  TCP, HTTP   TCPì˜ íŠ¹ì§•ìœ¼ë¡œ ì—°ê²° ì§€í–¥ì´ ìˆë‹¤. ê·¸ë¦¬ê³  HTTPë¥¼ ì‚¬ìš©í•˜ë©´ TCPë„ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° HTTPì˜ íŠ¹ì§•ì´ ì™œ ë¹„ì—°ê²°ì„±ì¼ê¹Œ? TCPì˜ ì—°ê²°ì§€í–¥ê³¼ HTTPì˜ ë¹„ì—°ê²°ì„±ì€ ê²°ì´ ë‹¤ë¥´ë‹¤. TCPì˜ ì—°ê²°ì§€í–¥ì  íŠ¹ì§•ìœ¼ë¡œ 3 way handshakeê°€ ìˆëŠ”ë° TCPëŠ” UDPì™€ ë‹¤ë¥´ê²Œ ë¨¼ì € ë‚´ê°€ ìš”ì²­ ë³´ë‚¼ ê³³ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì²´í¬í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ëŠ” ì ì—ì„œ ì—°ê²°ì§€í–¥ì ì´ë‹¤.  ë°˜ë©´, HTTPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SOCKET í†µì‹ ê³¼ ë‹¬ë¦¬ ìš”ì²­ê³¼ ì‘ë‹µì„ ë°›ê³  ë‚˜ë©´ ì—°ê²°ì„ ëŠê³ , ìš”ì²­ì´ í•„ìš”í•  ë•Œë§ˆë‹¤ ì—°ê²°ì„ í•˜ëŠ” ë¹„ì—°ê²°ì„±ì„ ë³´ì¸ë‹¤.     3. HTTP ë©”ì‹œì§€(â­Â ë§¤ìš° ì¤‘ìš”)   HTTP ë©”ì‹œì§€ëŠ” start line, headers, blank line(ê³µë°±), body(message body)ë¡œ êµ¬ë¶„ëœë‹¤.   HTTP ìš”ì²­ ë©”ì‹œì§€ì™€ HTTP ì‘ë‹µ ë©”ì‹œì§€ì˜ start-lineì€ ë‹¤ë¥´ê²Œ ìƒê²¼ë‹¤.   start-line(ì‹œì‘ ë¼ì¸)   HTTP ìš”ì²­ ë©”ì‹œì§€         start-lineì€ request-lineì´ë¼ê³ ë„ í•œë‹¤. request-lineì€ ë‹¤ìŒê³¼ ê°™ê²Œ ì‘ì„±í•œë‹¤.   1 **method** SP(ê³µë°±) **request-target** SP **HTTP-version** CRLF(ì—”í„°)      HTTP ë©”ì„œë“œ(method)            ì¢…ë¥˜: GET, POST, PUT, DELETEâ€¦       ì„œë²„ê°€ ìˆ˜í–‰í•´ì•¼ í•  ë™ì‘ ì§€ì •                    GET: ë¦¬ì†ŒìŠ¤ ì¡°íšŒ           POST: ìš”ì²­ ë‚´ì—­ ì²˜ë¦¬                           ìš”ì²­ ëŒ€ìƒ(request-target)            /search?q=hello&amp;hl=ko       absolute-path[?query] (ì ˆëŒ€ê²½ë¡œ[?ì¿¼ë¦¬])       ì ˆëŒ€ê²½ë¡œ = â€œ/â€ ë¡œ ì‹œì‘í•˜ëŠ” ê²½ë¡œ       ì°¸ê³ : *, http://â€¦?x=yì™€ ê°™ì´ ë‹¤ë¥¸ ìœ í˜•ì˜ ê²½ë¡œì§€ì • ë°©ë²•ë„ ìˆë‹¤           HTTP Version(HTTP-version)            HTTP/1.1           HTTP ì‘ë‹µ ë©”ì‹œì§€      start-line(ì‹œì‘ ë¼ì¸)      start-line = status-line   status-line = HTTP-version SP(ê³µë°±) status-code SP reason-phrase CRLF(ì—”í„°)      HTTP ë²„ì „(HTTP-version)   HTTP ìƒíƒœ ì½”ë“œ(status-code)            ìš”ì²­ ì„±ê³µ, ì‹¤íŒ¨ë¥¼ ë‚˜íƒ€ëƒ„                    200: ì„±ê³µ           400: í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì˜¤ë¥˜           500: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜                           ì´ìœ  ë¬¸êµ¬(reason-phrase)            ì‚¬ëŒì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì§§ì€ ìƒíƒœ ì½”ë“œ ì„¤ëª… ê¸€           header í—¤ë”   1 2 3 4 **field-name** \"**:**\" OWS **field-value** OWS (OWS: ë„ì–´ì“°ê¸° í—ˆìš©)  # ì˜ˆì œ Host: www.google.com   HTTP í—¤ë” ìš©ë„   HTTP ì „ì†¡ì— í•„ìš”í•œ ëª¨ë“  ë¶€ê°€ ì •ë³´ê°€ ìˆë‹¤. (ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©, ë©”ì‹œì§€ ë°”ë””ì˜ í¬ê¸°, ì••ì¶•, ì¸ì¦, ìš”ì²­ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €) ì •ë³´, ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´, ìºì‹œ ê´€ë¦¬ ì •ë³´ ë“±) í•„ìš” ì‹œ ì„ì˜ì˜ í—¤ë”ë„ ì¶”ê°€ ê°€ëŠ¥í•˜ë‹¤. (helloworld: hihi)   ë©”ì‹œì§€ ë°”ë””   ì‹¤ì œ ì „ì†¡í•  ë°ì´í„°ê°€ ìˆë‹¤. HTML ë¬¸ì„œ, ì´ë¯¸ì§€, ì˜ìƒ JSON ë“±ë“± byteë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ì „ì†¡ í•  ìˆ˜ ìˆë‹¤.   4. ë‹¨ìˆœí•˜ê³ , í™•ì¥ ê°€ëŠ¥   HTTPëŠ” ë‹¨ìˆœí•˜ë‹¤. HTTP ë©”ì‹œì§€ë„ ë§¤ìš° ë‹¨ìˆœí•˜ë‹¤. í¬ê²Œ ì„±ê³µí•˜ëŠ” í‘œì¤€ ê¸°ìˆ ì€ ë‹¨ìˆœí•˜ì§€ë§Œ í™•ì¥ ê°€ëŠ¥í•œ ê¸°ìˆ ì´ë‹¤.  ","categories": ["HTTP"],
        "tags": ["HTTP","web"],
        "url": "/http/Web-HTTP/",
        "teaser": ""
      },{
        "title": "HTTP API",
        "excerpt":"HTTP API   API URI ì„¤ê³„   ë¦¬ì†ŒìŠ¤   URIë¥¼ ì„¤ê³„ì‹œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë¦¬ì†ŒìŠ¤ ì‹ë³„ì´ë‹¤. ë¦¬ì†ŒìŠ¤ë€ ë™ì‘ì„ ì œì™¸í•œ ìì› ê·¸ ìì²´ë¥¼ ë¦¬ì†ŒìŠ¤ë¼ í•œë‹¤.   ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•˜ëŠ” ë°©ë²•ì€ ë¦¬ì†ŒìŠ¤ ìì²´ì—ë§Œ ì§‘ì¤‘í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ URIì— ë§¤í•‘í•œë‹¤.   ì˜ˆë¥¼ ë“¤ì–´, íšŒì›ê³¼ ê´€ë ¨ëœ HTTP APIë¥¼ ë§Œë“¤ì–´ë³¸ë‹¤ê³  ê°€ì •í•˜ë©´ íšŒì›ì´ë¼ëŠ” ê°œë… ìì²´ê°€ ë¦¬ì†ŒìŠ¤ì´ë‹¤.   ê·¸ë¦¬ê³  íšŒì› ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•˜ëŠ” URIëŠ” ì•„ë˜ì™€ ê°™ë‹¤. ì´ë ‡ê²Œ URIë¥¼ ì‘ì„±í•˜ê³  ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œë¥¼ êµ¬ë¶„í•  ë•ŒëŠ” HTTP ë©”ì„œë“œë¡œ êµ¬ë¶„í•œë‹¤.      íšŒì› ëª©ë¡ ì¡°íšŒ: /members   íšŒì› ì¡°íšŒ: /members/{id}   íšŒì› ë“±ë¡: /members   íšŒì› ìˆ˜ì •: /members/{id}   íšŒì› ì‚­ì œ: /members/{id}   ë¦¬ì†ŒìŠ¤ì™€ í–‰ìœ„ë¥¼ ë¶„ë¦¬   ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, URIëŠ” ë¦¬ì†ŒìŠ¤ë§Œ ì‹ë³„í•œë‹¤. ì¦‰, ë¦¬ì†ŒìŠ¤ì™€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” í–‰ìœ„ë¥¼ ë¶„ë¦¬í•œ ê²ƒì´ë‹¤. íšŒì›ìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ë©´ ë¦¬ì†ŒìŠ¤ëŠ” íšŒì›ì´ê³  í–‰ìœ„ëŠ” ì¡°íšŒ, ë“±ë¡, ì‚­ì œ, ë³€ê²½ì´ë‹¤. ì•ì—ì„œë„ ë§í–ˆë“¯ì´ í–‰ìœ„ëŠ” HTTP ë©”ì„œë“œë¡œ êµ¬ë¶„í•œë‹¤. (GET, POST, PUT, PATCH, DELETEâ€¦)      ì°¸ê³    ê³„ì¸µ êµ¬ì¡°ìƒ ìƒìœ„ë¥¼ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë³´ê³  ë³µìˆ˜ë‹¨ì–´ ì‚¬ìš© ê¶Œì¥(member â†’ members)        ì°¸ê³  Query String vs Path Variable   Query String: /members?id=123 Path Variable: /members/123 Query Stringê³¼ Path Variable ë‘˜ ë‹¤ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. queryëŠ” ì£¼ë¡œ ë¹„ê³„ì¸µ êµ¬ì¡°ë¡œ ëœ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  pathëŠ” ê³„ì¸µ êµ¬ì¡°ë¡œ ëœ ì •ë³´ë¥¼ í¬í•¨í•œë‹¤. ê´€ë¡€ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•  ë•ŒëŠ” path variable ì²˜ëŸ¼ ì‚¬ìš©í•˜ê³  ê²€ìƒ‰ì¡°ê±´ì˜ ê²½ìš°ì— query stringì„ ì‚¬ìš©í•œë‹¤.     HTTP ë©”ì„œë“œ   HTTP ë©”ì„œë“œ ì¢…ë¥˜ ì¤‘ ì£¼ìš” ë©”ì„œë“œëŠ” GET, POST, PUT, PATCH, DELETEê°€ ìˆë‹¤.   GET   GETì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•œë‹¤. ì„œë²„ì— ì „ë‹¬í•˜ê³  ì‹¶ì€ ë°ì´í„°ëŠ” query(ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°, ì¿¼ë¦¬ ìŠ¤íŠ¸ë§)ë¥¼ í†µí•´ì„œ ì „ë‹¬í•œë‹¤. ë©”ì‹œì§€ ë°”ë””ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ, ì§€ì›í•˜ì§€ ì•ŠëŠ” ê³³ì´ ë§ì•„ì„œ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.   POST   POSTëŠ” ìš”ì²­ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ì„œë²„ë¡œ ìš”ì²­ ë°ì´í„° ì „ë‹¬í•˜ë©´ ì„œë²„ê°€ ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ëª¨ë“  ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.   ë˜í•œ, ì£¼ë¡œ ì „ë‹¬ëœ ë°ì´í„°ë¡œ ì‹ ê·œ ë¦¬ì†ŒìŠ¤ ë“±ë¡, í”„ë¡œì„¸ìŠ¤ ì²˜ë¦¬ì— ì‚¬ìš©í•œë‹¤.   ì‹ ê·œ ë¦¬ì†ŒìŠ¤ ë“±ë¡   ì„œë²„ê°€ ì•„ì§ ì‹ë³„í•˜ì§€ ì•Šì€ ìƒˆ ë¦¬ì†ŒìŠ¤ ìƒì„±í•œë‹¤.   í”„ë¡œì„¸ìŠ¤ ì²˜ë¦¬   ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ë³€ê²½í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì£¼ë¬¸ì—ì„œ â€˜ê²°ì œì™„ë£Œ -&gt; ë°°ë‹¬ì‹œì‘ -&gt; ë°°ë‹¬ì™„ë£Œâ€™ì²˜ëŸ¼ ë‹¨ìˆœíˆ ìƒíƒœ ê°’ ë³€ê²½ì„ ë„˜ì–´ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ë„ POSTë¥¼ ì‚¬ìš©í•œë‹¤.   ë‹¤ë¥¸ ë©”ì„œë“œë¡œ ì²˜ë¦¬í•˜ê¸° ì• ë§¤í•œ ê²½ìš°   ì• ë§¤í•˜ë©´ POSTë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì˜ˆ) JSONìœ¼ë¡œ ì¡°íšŒ ë°ì´í„°ë¥¼ ë„˜ê²¨ì•¼ í•˜ëŠ”ë°, GET ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°      ì°¸ê³  GETê³¼ POSTì˜ ì°¨ì´ì ?   í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ í•  ë•Œ, GETì€ ë³´í†µ (ë©”ì‹œì§€ ë°”ë””ì—) ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ, POSTëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  ì„œë²„ì—ê²Œ ì²˜ë¦¬í•´ë‹¬ë¼ê³  ìš”ì²­í•œë‹¤.        ì°¸ê³    Created(201)ë¡œ ë³´ë‚¼ ë•, ì‘ë‹µ ë°ì´í„°ì— Location(ì‹ ê·œ ë¦¬ì†ŒìŠ¤ ì‹ë³„ì)ë¥¼ í¬í•¨í•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.        ì°¸ê³  POST vs PATCH   POSTë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¤‘ì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•  ë•Œë„ POSTë¥¼ ì‚¬ìš©í•œë‹¤ê³  í–ˆë‹¤. ì´ë•Œ, ê°’ì´ ë³€ê²½ë˜ëŠ” ê²ƒì´ë‹ˆ PATCHë¥¼ ì¨ë„ ë˜ì§€ ì•Šë‚˜ í•˜ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì´ ê²½ìš°ëŠ” ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ìƒì„±, ë³€ê²½í•˜ëŠ” ê²ƒì„ ë„˜ì–´ ë‚´ë¶€ì—ì„œ ë§¤ìš° í° í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ëœë‹¤. ì´ë ‡ê²Œ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë§Œ ë³€ê²½í•˜ëŠ”ê²ƒì´ ì•„ë‹Œ ë‚´ë¶€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•´ì•¼ í•  ë•ŒëŠ” PATCH ë³´ë‹¤ POSTë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.     PUT   PUTì€ ë¦¬ì†ŒìŠ¤ë¥¼ ëŒ€ì²´í•œë‹¤. í•´ë‹¹ ë¦¬ì†ŒìŠ¤ê°€ ìˆìœ¼ë©´ ì™„ì „íˆ ëŒ€ì²´(ì£¼ì˜)í•˜ê³  ì—†ìœ¼ë©´ ìƒì„±í•œë‹¤. ì‰½ê²Œ ì´ì•¼ê¸° í•˜ë©´ ë®ì–´ì“°ê¸° í•œë‹¤.   POSTì™€ PUTì˜ í° ì°¨ì´ì ì€ PUTì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„í•œë‹¤ëŠ” ê²ƒì´ë‹¤. POSTëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ëª¨ë¥¸ë‹¤.(POST /members) í•˜ì§€ë§Œ, PUTì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜ë¥¼ ì•Œê³  URI ì§€ì •í•œë‹¤.(PUT /member/100)   PATCH   PATCHëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë¶€ë¶„ ë³€ê²½í•œë‹¤. ë§Œì•½, PATCHë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ POSTë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. (ë¬¼ë¡  ìš”ì¦˜ì€ ëŒ€ë¶€ë¶„ ì§€ì›í•¨)   DELETE   DELETEëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•œë‹¤.      ì°¸ê³    ë¦¬ì†ŒìŠ¤ê°€ ìµœê·¼ì—ëŠ” Representation(í‘œí˜„)ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.     HTTP ë©”ì„œë“œ ì¢…ë¥˜ ì¤‘ ê¸°íƒ€ ë©”ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.      HEAD: GETê³¼ ë™ì¼í•˜ì§€ë§Œ ë©”ì‹œì§€ ë¶€ë¶„ì„ ì œì™¸í•˜ê³  ìƒíƒœ ì¤„ê³¼ í—¤ë”ë§Œ ë°˜í™˜   OPTIONS: ëŒ€ìƒ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ í†µì‹  ê°€ëŠ¥ ì˜µì…˜(ë©”ì„œë“œ)ì„ ì„¤ëª…(ì£¼ë¡œ CORSì—ì„œ ì‚¬ìš©)   CONNECT, TRACEë„ ìˆì§€ë§Œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ   HTTP ë©”ì„œë“œì˜ ì†ì„±   ì•ˆì „(Safe Methods)   í˜¸ì¶œí•´ë„ ë¦¬ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤. GETì˜ ê²½ìš°ê°€ ì´ì— í•´ë‹¹ë˜ê³  POST, DELETE ë“±ì€ í•´ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë°”ë€Œë©´ ì•ˆì „í•˜ì§€ ì•ŠìŒ)      ì°¸ê³    ì—¬ê¸°ì„œ ì•ˆì „ì´ë€ ë‹¨ì–´ì˜ ê´€ì ì€ ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ëƒ ì•ˆë˜ëƒì˜ ì°¨ì´ì´ë‹¤.     ë©±ë“±(Idempotent Methods)   ë©±ë“±ì´ë€ í•œ ë²ˆ í˜¸ì¶œí•˜ë“  ë‘ë²ˆ í˜¸ì¶œí•˜ë“  100ë²ˆ í˜¸ì¶œí•˜ë“  ê²°ê³¼ê°€ ë˜‘ê°™ë‹¤ëŠ” ëœ»ì´ë‹¤. ë©±ë“± ë©”ì„œë“œì—ëŠ” GET, PUT, DELETEê°€ í•´ë‹¹ëœë‹¤. POSTëŠ” ë©±ë“±ì´ ì•„ë‹ˆë‹¤. (ë‘ ë²ˆ í˜¸ì¶œí•˜ë©´ ê°™ì€ ê²°ì œê°€ ì¤‘ë³µí•´ì„œ ë°œìƒí•  ìˆ˜ ìˆìŒ)   ë©±ë“±ì„ í™œìš©í•˜ëŠ” ê²½ìš°ëŠ” ìë™ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ì—ì„œ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì„œë²„ê°€ TIMEOUT ë“±ìœ¼ë¡œ ì •ìƒ ì‘ë‹µì„ ëª»ì£¼ì—ˆì„ ë•Œ, í´ë¼ì´ì–¸íŠ¸ê°€ ê°™ì€ ìš”ì²­ì„ ë‹¤ì‹œ í•´ë„ ë˜ëŠ”ì§€ì— ëŒ€í•œ ë¶€ë¶„ì„ íŒë‹¨í•˜ëŠ” ê·¼ê±°ê°€ ëœë‹¤.   ìºì‹œê°€ëŠ¥(Cacheable Methods)   ì¤‘ìš”í•œ ë‚´ìš©ì´ë‹¤. ì‘ë‹µ ê²°ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ìºì‹œí•´ì„œ ì‚¬ìš©í•´ë„ ë˜ëŠ” ë©”ì„œë“œëŠ” GET, HEAD, POST, PATCH ì´ë‹¤. ì‹¤ì œë¡œëŠ” GET, HEAD ì •ë„ë§Œ ìºì‹œë¡œ ì‚¬ìš©í•œë‹¤. POST, PATCHë¥¼ ìºì‹œí•´ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë³¸ë¬¸ ë‚´ìš©ê¹Œì§€ ìºì‹œ í‚¤ë¡œ ê³ ë ¤í•´ì•¼ í•˜ëŠ”ë°, êµ¬í˜„ì´ ì‰½ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.      ì°¸ê³    ìºì‹œë¥¼ ì´í•´í•˜ëŠ” ì¤‘ìš”í•œ í‚¤ëŠ” ë°ì´í„°ì˜ ë³€ê²½ ê´€ì ì´ë‹¤. ìºì‹œëŠ” ì›ë³¸ ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šê³  ìœ ì§€ë˜ì–´ì•¼ í•˜ëŠ”ë° POST, PUT, DELETE, PATCHë¡œ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ê²Œ ë˜ë©´ ì›ë³¸ ë°ì´í„°ê°€ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— ìºì‹œë¥¼ ìœ ì§€í•˜ê¸°ê°€ ì–´ë µë‹¤. ë”°ë¼ì„œ, ë°ì´í„°ë¥¼ ë³€ê²½í•  ê°€ëŠ¥ì„±ì´ ìˆëŠ” POST, PUT, DELETE, PATCHëŠ” ëŒ€ë¶€ë¶„ì˜ êµ¬í˜„ì—ì„œ ìºì‹œë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤.     í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡   ì •ì  ë°ì´í„° ì¡°íšŒ   ì´ë¯¸ì§€, ì •ì  í…ìŠ¤íŠ¸ ë¬¸ì„œë¥¼ ì „ì†¡í•œë‹¤. GETì„ ì‚¬ìš©í•˜ì—¬ ì¡°íšŒí•˜ë©° ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì •ì  ë°ì´í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì—†ì´ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¡œ ë‹¨ìˆœí•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.   ë™ì  ë°ì´í„° ì¡°íšŒ   ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°(?q=hello&amp;hl=ko) ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³  ì¡°íšŒí•œë‹¤. ì£¼ë¡œ ê²€ìƒ‰, ê²Œì‹œíŒ ëª©ë¡ì—ì„œ ì •ë ¬ í•„í„°(ê²€ìƒ‰ì–´)ì—ì„œ ì‚¬ìš©í•œë‹¤.   HTML Form ë°ì´í„° ì „ì†¡   HTML Form ë°ì´í„° ì „ì†¡ì—ëŠ” POST ì „ì†¡, GET ì „ì†¡, multipart/form-data 3ê°€ì§€ê°€ ìˆë‹¤.   POST ì „ì†¡ - ì €ì¥   ì£¼ë¡œ íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸ ë“±ì—ì„œ ì‚¬ìš©í•œë‹¤. (Content-Type: application/x-www-form-urlencoded) formì˜ ë‚´ìš©ì„ ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ì„œ ì „ì†¡í•œë‹¤. (key=value í˜•ì‹, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹) ì´ë•Œ, ì „ì†¡ ë°ì´í„°ë¥¼ url encoding ì²˜ë¦¬í•œë‹¤. (ì˜ˆ. abcê¹€ -&gt; abc%EA%B9%80)      ì°¸ê³  ì¸ì½”ë”©í•˜ëŠ” ì´ìœ ?   ì›¹ ë¸Œë¼ìš°ì €ì™€ ì›¹ ì„œë²„ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì¸ì½”ë”© ë°©ì‹ì„ ê°€ì§€ë¯€ë¡œ ì ì ˆí•œ ì¸ì½”ë”© ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.     GET ì „ì†¡ - ì €ì¥   GET ë°©ì‹ìœ¼ë¡œ form ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë©´ URLì´ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì„œë²„ì— ë“¤ì–´ì˜¨ë‹¤. ë‹¨, form ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ë•Œ GETì€ ì¡°íšŒì—ë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë¦¬ì†ŒìŠ¤ ë³€ê²½(ì €ì¥ ë“±)ì´ ë°œìƒí•˜ëŠ” ê³³ì—ì„œ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.   multipart/form-data   íŒŒì¼ ì—…ë¡œë“œ ê°™ì€ ë°”ì´ë„ˆë¦¬ ë°ì´í„° ì „ì†¡ì‹œ ì‚¬ìš©í•œë‹¤. ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì—¬ëŸ¬ íŒŒì¼ê³¼ í¼ì˜ ë‚´ìš© í•¨ê»˜ ì „ì†¡ ê°€ëŠ¥í•˜ë‹¤. (Content-Type: multipart/form-data)      ì°¸ê³    HTML Form ì „ì†¡ì€ GET, POSTë§Œ ì§€ì›í•œë‹¤.     HTTP API ë°ì´í„° ì „ì†¡   HTTP API ë°ì´í„° ì „ì†¡ì€ ì„œë²„ to ì„œë²„(ë°±ì—”ë“œ ì‹œìŠ¤í…œ í†µì‹ ), ì•± í´ë¼ì´ì–¸íŠ¸(ì•„ì´í°, ì•ˆë“œë¡œì´ë“œ), ì›¹ í´ë¼ì´ì–¸íŠ¸(ajax, React, Vue ê°™ì€ ì›¹ í´ë¼ì´ì–¸íŠ¸ì™€ API í†µì‹ )ì—ì„œ ì‚¬ìš©í•œë‹¤. Content-Type: application/jsonì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. (ì‚¬ì‹¤ìƒ í‘œì¤€)   GETì€ ì¡°íšŒ, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ë°ì´í„° ì „ë‹¬í•˜ê³  POST, PUT, PATCHëŠ” ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.   HTTP API ì„¤ê³„ ì˜ˆì‹œ   HTTP API ì„¤ê³„ì—ëŠ” ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•˜ëŠ” POST ê¸°ë°˜ ë“±ë¡, ìŠ¤í† ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” PUT ê¸°ë°˜ ë“±ë¡, ì»¨íŠ¸ë¡¤ URIë¥¼ ì‚¬ìš©í•˜ëŠ” HTML FORM ê¸°ë°˜ ë“±ë¡ ë°©ë²•ì´ ìˆë‹¤.   POST ê¸°ë°˜ ë“±ë¡      íšŒì› ëª©ë¡ /members â†’ GET   íšŒì› ë“±ë¡ /members â†’ POST   íšŒì› ì¡°íšŒ /members/{id} â†’ GET   íšŒì› ìˆ˜ì • /members/{id} â†’ PATCH(default), PUT(ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•Œ), POST   íšŒì› ì‚­ì œ /members/{id} â†’ DELETE   POSTë¡œ ì‹ ê·œ ìì›ì„ ë“±ë¡í•  ë•Œì˜ íŠ¹ì§•ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” ë“±ë¡ë  ë¦¬ì†ŒìŠ¤ì˜ URIë¥¼ ëª¨ë¥¸ë‹¤ëŠ” ê²ƒì´ë‹¤. ì„œë²„ê°€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ìƒˆë¡œ ë“±ë¡ëœ ë¦¬ì†ŒìŠ¤ URIë¥¼ ìƒì„±í•´ì¤€ë‹¤. ì¦‰, ì‘ë‹µë©”ì‹œì§€ì— ì‹ë³„ìë¥¼ Locationì— ë‹´ì•„(Location: /members/100) í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.   ì´ëŸ° í˜•ì‹ì„  ì»¬ë ‰ì…˜(Collection)ì´ë¼ í•œë‹¤. ì¦‰, ì„œë²„ê°€ ê´€ë¦¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ì— ì„œë²„ê°€ ë¦¬ì†ŒìŠ¤ì˜ URIë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì»¬ë ‰ì…˜ì€ /membersì´ë‹¤.   PUT ê¸°ë°˜ ë“±ë¡      íŒŒì¼ ëª©ë¡ /files â†’ GET   íŒŒì¼ ì¡°íšŒ /files/{filename} â†’ GET   íŒŒì¼ ë“±ë¡ /files/{filename} â†’ PUT(íŒŒì¼ ì—…ë¡œë“œì˜ ê²½ìš°ì—” PUTì´ ë”± ë§ë‹¤. ì—†ìœ¼ë©´ ìƒì„±í•´ì•¼ í•˜ê³  ìˆìœ¼ë©´ ë”ë®ì–´ì“°ê¸° í•´ì•¼í•˜ë¯€ë¡œ..)   íŒŒì¼ ì‚­ì œ /files/{filename} â†’ DELETE   íŒŒì¼ ëŒ€ëŸ‰ ë“±ë¡ /files â†’ POST   PUTë¡œ ì‹ ê·œ ìì›ì„ ë“±ë¡í• ë•Œì˜ íŠ¹ì§•ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ URIë¥¼ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤. ì¦‰, í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ë¦¬ì†ŒìŠ¤ì˜ URIë¥¼ ì§€ì •í•œë‹¤.   ì´ëŸ° í˜•ì‹ì„ ìŠ¤í† ì–´(Store)ë¼ í•œë‹¤. ì¦‰, í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì €ì¥ì†Œì— í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ì˜ URIë¥¼ ì•Œê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ìŠ¤í† ì–´ëŠ” /filesì´ë‹¤.      ì¤‘ìš” POST, PUT ê¸°ë°˜ ì‹ ê·œ ìì› ë“±ë¡ì˜ ì°¨ì´ì    APIë¥¼ ì„¤ê³„í• ë•Œ í¬ê²Œ ë‘ê°€ì§€ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.  ì²«ë²ˆì§¸ê°€ POST ê¸°ë°˜ì˜ ë“±ë¡ì„ í•˜ëŠ” ê²ƒì´ê³  ì»¬ë ‰ì…˜ì´ë¼ í•˜ê³  ë‘ë²ˆì§¸ëŠ” PUT ê¸°ë°˜ì˜ ë“±ë¡ì„ í•˜ëŠ” ê²ƒì´ê³  ìŠ¤í† ì–´ë¼ í•œë‹¤. ì´ ë‘˜ì˜ ì°¨ì´ì ì€ ì„œë²„ê°€ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ë¥¼ í•˜ëŠ”ì§€(ì»¬ë ‰ì…˜), í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ë¥¼ í•˜ëŠ”ì§€(ìŠ¤í† ì–´)ì˜ ì°¨ì´ì´ë‹¤. ëŒ€ë¶€ë¶„ ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•˜ê³  íŒŒì¼ ì—…ë¡œë“œ ê°™ì€ ê²½ìš°ì—” ìŠ¤í† ì–´ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.     HTML FORM ì‚¬ìš©      íšŒì› ëª©ë¡ /members â†’  GET   íšŒì› ë“±ë¡ í¼ /members/new â†’ GET   íšŒì› ë“±ë¡ /members/new, /members â†’ POST   íšŒì› ì¡°íšŒ /members/{id} â†’ GET   íšŒì› ìˆ˜ì • í¼ /members/{id}/edit â†’ GET   íšŒì› ìˆ˜ì • /members/{id}/edit, /members/{id} â†’ POST   íšŒì› ì‚­ì œ /members/{id}/delete â†’ POST   HTML FORMì€ GET, POSTë§Œ ì§€ì›í•œë‹¤. AJAX ê°™ì€ ê¸°ìˆ ì„ ì‚¬ìš©í•´ì„œ í•´ê²° ê°€ëŠ¥(íšŒì› API ì°¸ê³ )í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ìˆœìˆ˜ HTML, HTML FORM ì´ì•¼ê¸°ë¥¼ í•˜ê² ë‹¤.   HTML FORMì€ GET, POSTë§Œ ì§€ì›í•˜ë¯€ë¡œ ì œì•½ì´ ìˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ URIë¥¼ ì‚¬ìš©í•œë‹¤. ì»¨íŠ¸ë¡¤ URIëŠ” /new, /edit, /deleteì™€ ê°™ì´ ë™ì‚¬ë¡œ ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‚¬ìš©í•œë‹¤. HTTP ë©”ì„œë“œë¡œ í•´ê²°í•˜ê¸° ì• ë§¤í•œ ê²½ìš°ì— ì‚¬ìš©í•œë‹¤. (HTTP API í¬í•¨)      ì°¸ê³  ì»¨íŠ¸ë¡¤ URI   URIë¥¼ ë¦¬ì†ŒìŠ¤ë§Œ ê°€ì§€ê³  ì„¤ê³„í•˜ê¸° í˜ë“¤ ë•Œ URIì— ë™ì‚¬ë¥¼ ë„£ì–´ ì„¤ê³„í•˜ëŠ” ê²ƒì„ ì»¨íŠ¸ë¡¤ URIë¼ í•œë‹¤. ì‹¤ë¬´ì—ì„œ ì •ë§ ë§ì´ ì‚¬ìš©ëœë‹¤. í•˜ì§€ë§Œ, ìµœëŒ€í•œ ë¦¬ì†ŒìŠ¤ë€ ê°œë…ì„ ê°€ì§€ê³  ì„¤ê³„í•˜ê³  ê·¸ ìƒí™©ì—ì„œ ì•ˆë  ë•Œ ëŒ€ì²´ì œë¡œ ì»¨íŠ¸ë¡¤ URIë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì´í•´í•˜ì.    ","categories": ["HTTP"],
        "tags": ["HTTP","web"],
        "url": "/http/Web-HTTPAPI/",
        "teaser": ""
      },{
        "title": "ì‹œê°„ ë³µì¡ë„ì™€ ê³µê°„ ë³µì¡ë„",
        "excerpt":"ì•Œê³ ë¦¬ì¦˜ í‰ê°€í•  ë•Œ ì‹œê°„ ë³µì¡ë„ì™€ ê³µê°„ ë³µì¡ë„ë¥¼ ì‚¬ìš©í•¨      ì‹œê°„ ë³µì¡ë„: ì•Œê³ ë¦¬ì¦˜ì˜ ìˆ˜í–‰ì‹œê°„ì„ í‰ê°€   ê³µê°„ ë³µì¡ë„: ì•Œê³ ë¦¬ì¦˜ ìˆ˜í–‰ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ ì–‘ì„ í‰ê°€       ì‹œê°„ ë³µì¡ë„   ì‹œê°„ ë³µì¡ë„ëŠ” ì•Œê³ ë¦¬ì¦˜ì˜ ìˆ˜í–‰ì‹œê°„ì„ ë‚˜íƒ€ëƒ„.   ì‹œê°„ ë³µì¡ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆë‹¤ë©´ í”„ë¡œê·¸ë¨ì— í° ì„±ëŠ¥ í–¥ìƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŒ       O(1) - ìƒìˆ˜ ì‹œê°„   ì…ë ¥ í¬ê¸°(N)ì— ìƒê´€ì—†ì´ ì¼ì •í•œ ì—°ì‚°ì„ ìˆ˜í–‰       O(logN) - ë¡œê·¸ ì‹œê°„   ì…ë ¥ í¬ê¸°(N)ê°€ ì»¤ì§ˆ ë•Œ ì—°ì‚° íšŸìˆ˜ê°€ logNì— ë¹„ë¡€í•´ì„œ ì¦ê°€   1 for (i=1; i&lt;=n; i*2) {}       O(n) - ì„ í˜• ì‹œê°„   ì…ë ¥ í¬ê¸°(n)ê°€ ì»¤ì§ˆ ë•Œ ì—°ì‚° íšŸìˆ˜ê°€ nì— ë¹„ë¡€í•´ì„œ ì¦ê°€í•˜ë©´ ì‹œê°„ ë³µì¡ë„ëŠ” O(n).      ì—°ì‚°íšŸìˆ˜ê°€ ì„ í˜•ì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” í˜•íƒœ   1 for (i=0; i&lt;n; i++) {}       O(N^2) - 2ì°¨ ì‹œê°„   ì…ë ¥ í¬ê¸°(n)ê°€ ì»¤ì§ˆ ë•Œ ì—°ì‚° íšŸìˆ˜ê°€ n^2ì— ë¹„ë¡€í•´ì„œ ì¦ê°€   ì˜ˆ) ì¤‘ì²© forë¬¸â€¦       O(2^N) - ì§€ìˆ˜ ì‹œê°„   ì…ë ¥ í¬ê¸°ê°€ ì»¤ì§ˆ ë•Œ ì—°ì‚°ìˆ˜ê°€ 2^Nì— ë¹„ë¡€í•´ì„œ ì¦ê°€   ì˜ˆ) í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´â€¦              íŒŒì´ì¬ ì£¼ìš” í•¨ìˆ˜, ë©”ì†Œë“œì˜ ì‹œê°„ ë³µì¡ë„   list                  Operation       Example       Big-O       Notes                       Index       l[i]       O(1)       Â                  Store       l[i] = 0       O(1)       Â                  Length       len(l)       O(1)       Â                  Append       l.append(5)       O(1)       Â                  Pop       l.pop()       O(1)       l.pop(-1) ê³¼ ë™ì¼                 Clear       l.clear()       O(1)       l = [] ê³¼ ìœ ì‚¬                 Slice       l[a:b]       O(b-a)       l[:] : O(len(l)-0) = O(N)                 Extend       l.extend(â€¦)       O(len(â€¦))       í™•ì¥ ê¸¸ì´ì— ë”°ë¼                 Construction       list(â€¦)       O(len(â€¦))       ìš”ì†Œ ê¸¸ì´ì— ë”°ë¼                 check ==, â‰        l1 == l2       O(N)       ë¹„êµ                 Insert       l.insert(i, v)       O(N)       i ìœ„ì¹˜ì— vë¥¼ ì¶”ê°€                 Delete       del l[i]       O(N)       Â                  Remove       l.remove(â€¦)       O(N)       Â                  Containment       x in/not in l       O(N)       ê²€ìƒ‰                 Copy       l.copy()       O(N)       l[:] ê³¼ ë™ì¼ - O(N)                 Pop       l.pop(i)       O(N)       l.pop(0):O(N)                 Extreme value       min(l)/max(l)       O(N)       ê²€ìƒ‰                 Reverse       l.reverse()       O(N)       ê·¸ëŒ€ë¡œ ë°˜ëŒ€ë¡œ                 Interation       for v in l:       O(N)       Â                  Sort       l.sort()       O(N Log N)       Â                  Multiply       k*l       O(k N)       [1,2,3] * 3Â Â» O(N**2)               Dict                  Operation       Example       Big-O       Notes                       Index       d[k]       O(1)       Â                  Store       d[k] = v       O(1)       Â                  Length       len(d)       O(1)       Â                  Delete       del d[k]       O(1)       Â                  get/setdefault       d.method       O(1)       Â                  Pop       d.pop(k)       O(1)       Â                  Pop item       d.popitem()       O(1)       Â                  Clear       d.clear()       O(1)       s = {} or = dict() ìœ ì‚¬                 View       d.keys()       O(1)       d.values() ë™ì¼                 Construction       dict(â€¦)       O(len(â€¦))       Â                  Iteration       for k in d:       O(N)       Â                ê³µê°„ ë³µì¡ë„   ê³µê°„ ë³µì¡ë„ëŠ” ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ ì–‘ì„ ë‚˜íƒ€ëƒ„.   ê³µê°„ ë³µì¡ë„ëŠ” ë³´ì¡°ê³µê°„ê³¼ ì…ë ¥ ê³µê°„ì„ í•©ì¹œ í¬ê´„ì ì¸ ê°œë…. ë³´ì¡° ê³µê°„ì€ ì•Œê³ ë¦¬ì¦˜ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©í•˜ëŠ” ì„ì‹œ ê³µê°„  ","categories": ["Python","Algorithm"],
        "tags": ["Algorithm","Python"],
        "url": "/python/algorithm/Python-Time-Complexity/",
        "teaser": ""
      },{
        "title": "JVM(Java Virtual Machine)",
        "excerpt":"JVM(Java Virtual Machine)ì´ë€?   ì§ì—­í•˜ë©´ ìë°”ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ê°€ìƒ ê¸°ê³„(ì»´í“¨í„°)   ìë°” í”„ë¡œê·¸ë¨ì´ ì–´ëŠ ê¸°ê¸°ë‚˜ ìš´ì˜ì²´ì œ ìƒì—ì„œë„ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ë©´ì„œ í”„ë¡œê·¸ë¨ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ê³  ìµœì í™”í•˜ëŠ” ê²ƒ       ìë°”í”„ë¡œê·¸ë¨ ì‹¤í–‰ê³¼ì •      ì›ì‹œì½”ë“œ(*.java)ëŠ” CPUê°€ ì¸ì‹í•˜ì§€ ëª»í•˜ë¯€ë¡œ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼ì„ í•´ì¤˜ì•¼í•¨.   ì›ì‹œì½”ë“œ(.java)ëŠ” JVMì´ ì¸ì‹í•  ìˆ˜ ìˆëŠ” Java Bytecode(.class)ë¡œ ë³€í™˜ë¨. (Java compilerê°€ ë³€í™˜í•´ì¤Œ)          ì°¸ê³  Java compilerë€?   JDKë¥¼ ì„¤ì¹˜í•˜ë©´ binì— ì¡´ì¬í•˜ëŠ” javac.exeë¥¼ ë§í•¨ (ì¦‰, JDKì— Java compilerê°€ í¬í•¨ë˜ì–´ ìˆìŒ) javac ëª…ë ¹ì–´ë¥¼ í†µí•´ .javaë¥¼ .classë¡œ ì»´íŒŒì¼ í•  ìˆ˜ ìˆìŒ         ë³€í™˜ëœ bytecodeëŠ” ê¸°ê³„ì–´ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— OSì—ì„œ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.   ì´ë•Œ, JVMì´ OSê°€ bytecodeë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•´ì„í•´ì¤€ë‹¤. ë”°ë¼ì„œ, Byte CodeëŠ” JVM ìœ„ì—ì„œ OS ìƒê´€ì—†ì´ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ê²ƒ.   OSì— ì¢…ì†ì ì´ì§€ ì•Šê³ , Java íŒŒì¼ í•˜ë‚˜ë§Œ ë§Œë“¤ë©´ ì–´ëŠ ë””ë°”ì´ìŠ¤ë“  JVM ìœ„ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ.       ì»´íŒŒì¼ í•˜ëŠ” ë°©ë²•   Java CompilerëŠ” JDKë¥¼ ì„¤ì¹˜í•˜ë©´ javac.exeë¼ëŠ” ì‹¤í–‰ íŒŒì¼ í˜•íƒœë¡œ ì„¤ì¹˜ë¨. (ê²½ë¡œ: *jdk/bin/javac.exe)   Java Compilerì˜ javacë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ .classíŒŒì¼ì„ ìƒì„±í•  ìˆ˜ ìˆìŒ.   1 javac test.java       ì‹¤í–‰í•˜ëŠ” ë°©ë²•   java ëª…ë ¹ì–´ë¡œ .class íŒŒì¼ì„ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆìŒ.   1 java test(.class íŒŒì¼ ì´ë¦„)          ì°¸ê³    JDK ë””ë ‰í† ë¦¬ì˜ /bin í´ë”ì— ì¡´ì¬í•˜ëŠ” java.exeëŠ” JVMì„ êµ¬ë™ì‹œí‚¤ê¸° ìœ„í•œ ëª…ë ¹ í”„ë¡œê·¸ë¨(JRE) java ëª…ë ¹ì–´ë¡œ JVMì„ ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆìŒ         ë°”ì´íŠ¸ ì½”ë“œë€?   ê°€ìƒ ì»´í“¨í„°(VM)ì—ì„œ ëŒì•„ê°€ëŠ” ì‹¤í–‰ í”„ë¡œê·¸ë¨ì„ ìœ„í•œ ì´ì§„ í‘œí˜„ë²•   ìë°” ë°”ì´íŠ¸ì½”ë“œëŠ” JVMì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ë¡œ ë³€í™˜ëœ ìë°” ì†ŒìŠ¤ì½”ë“œë¥¼ ì˜ë¯¸í•¨   ë°”ì´íŠ¸ ì½”ë“œëŠ” ë‹¤ì‹œ ì‹¤ì‹œê°„ ë²ˆì—­ê¸° or JLT ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ë°”ì´ë„ˆë¦¬ ì½”ë“œë¡œ ë³€í™˜ëœë‹¤.       ì¦‰, CPUê°€ ì´í•´í•˜ëŠ” ì–¸ì–´ëŠ” ë°”ì´ë„ˆë¦¬ ì½”ë“œ, ê°€ìƒ ë¨¸ì‹ ì´ ì´í•´í•˜ëŠ” ì½”ë“œëŠ” ë°”ì´íŠ¸ ì½”ë“œ       ì§€ê¸ˆê¹Œì§€ ë‚´ìš©ì„ ì •ë¦¬í•˜ë©´,       ìë°” ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ì—¬ .class ë°”ì´íŠ¸ ì½”ë“œë¡œ ë§Œë“¤ë©´ ì´ ì½”ë“œê°€ ìë°” ê°€ìƒ ë¨¸ì‹  í™˜ê²½ì—ì„œ ì‹¤í–‰ ë¨. JVMì€ ìë°” ì‹¤í–‰ í™˜ê²½ JREì— í¬í•¨ë˜ì–´ ìˆìŒ. í˜„ì¬ ì‚¬ìš©í•˜ëŠ” ì»´í“¨í„°ì˜ ìš´ì˜ì²´ì œì— ë§ëŠ” ìë°” ì‹¤í–‰í™˜ê²½(JRE, Java Runtime Environment)ê°€ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ ìë°” ê°€ìƒ ë¨¸ì‹ ì´ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ëŠ” ëœ»      JavaëŠ” ì»´íŒŒì¼ëœ ë°”ì´íŠ¸ ì½”ë“œë¡œ ì–´ë–¤ JVMì—ì„œë„ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í”Œë«í¼ì— ì˜ì¡´ì ì´ì§€ ì•Šì§€ë§Œ, JVMì€ í”Œë«í¼ì— ì˜ì¡´ì . ì¦‰, ë¦¬ëˆ…ìŠ¤ JVMê³¼ ìœˆë„ìš°ì˜ JVMì€ ì„œë¡œ ë‹¤ë¥´ë‹¤.       ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì½ëŠ” ë°©ì‹   JVMì€ ë°”ì´íŠ¸ì½”ë“œë¥¼ ëª…ë ¹ì–´ ë‹¨ìœ„ë¡œ ì½ì–´ì„œ í•´ì„í•˜ëŠ”ë°, Interpreter ë°©ì‹ê³¼ JIT ì»´íŒŒì¼ ë°©ì‹ ë‘ê°€ì§€ ë°©ì‹ì„ í˜¼í•©í•´ì„œ ì‚¬ìš©í•¨.   Interpreter ë°©ì‹ì€ ë°”ì´íŠ¸ì½”ë“œë¥¼ í•œ ì¤„ì”© í•´ì„, ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì´ë©° ì´ˆê¸° ë°©ì‹ìœ¼ë¡œ ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ ê²ƒì´ JIT(Just In Time) ì»´íŒŒì¼ ë°©ì‹.   JIT(Just In Time) ì»´íŒŒì¼ ë°©ì‹ì€ ë°”ì´íŠ¸ì½”ë“œë¥¼ JIT ì»´íŒŒì¼ëŸ¬ë¥¼ ì´ìš©í•´ í”„ë¡œê·¸ë¨ì„ ì‹¤ì œ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ê° OSì— ë§ëŠ” Native Codeë¡œ ë³€í™˜í•˜ì—¬ ì‹¤í–‰ ì†ë„ë¥¼ ê°œì„ í•¨. í•˜ì§€ë§Œ, ë°”ì´íŠ¸ì½”ë“œë¥¼ Native Codeë¡œ ë³€í™˜í•˜ëŠ” ë°ì—ë„ ë¹„ìš©ì´ ì†Œìš”ë˜ë¯€ë¡œ, JVMì€ ëª¨ë“  ì½”ë“œë¥¼ JIT ì»´íŒŒì¼ëŸ¬ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ì¸í„°í”„ë¦¬í„° ë°©ì‹ì„ ì‚¬ìš©í•˜ë‹¤ê°€ ì¼ì • ê¸°ì¤€ì´ ë„˜ì–´ê°€ë©´ JIT ì»´íŒŒì¼ ë°©ì‹ìœ¼ë¡œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•¨.       JIT ì»´íŒŒì¼ëŸ¬ë€?   JIT ì»´íŒŒì¼ëŸ¬ëŠ” ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì½ëŠ” ë°©ì‹ ì¤‘ í•˜ë‚˜ì¸ ì¸í„°í”„ë¦¬í„° ë°©ì‹ì˜ ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ì ì„ ë³´ì™„í•œ ë°©ì‹. ê°™ì€ ì½”ë“œë¥¼ ë§¤ë²ˆ í•´ì„í•˜ì§€ ì•Šê³ , ì‹¤í–‰í•  ë•Œ ì»´íŒŒì¼ì„ í•˜ë©´ì„œ í•´ë‹¹ ì½”ë“œë¥¼ ìºì‹±í•´ë²„ë¦¼. ì´í›„ì—ëŠ” ë°”ë€ ë¶€ë¶„ë§Œ ì»´íŒŒì¼í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ìºì‹±ëœ ì½”ë“œë¥¼ ì‚¬ìš©í•¨.       ìë°”ì—ì„  ìë°”Â ì»´íŒŒì¼ëŸ¬ê°€ ìë°” í”„ë¡œê·¸ë¨ ì½”ë“œë¥¼ ë°”ì´íŠ¸ ì½”ë“œë¡œ ë³€í™˜í•œ ë‹¤ìŒ, ì‹¤ì œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì ì—ì„œ ìë°” ê°€ìƒ ë¨¸ì‹ (JVM, ì •í™•íˆëŠ” JRE)ì´ ë°”ì´íŠ¸ ì½”ë“œë¥¼ JIT ì»´íŒŒì¼ì„ í†µí•´ ê¸°ê³„ì–´ë¡œ ë³€í™˜       ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ (Garbage Collection, GC)   JREì˜ êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜. ìë°” ì´ì „ì—ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ëª¨ë“  í”„ë¡œê·¸ë¨ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í–ˆì§€ë§Œ Javaì—ì„œëŠ” JVMì´ í”„ë¡œê·¸ë¨ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•¨. ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì•„ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œí•¨          ì°¸ê³  JDKì™€ JRE ì°¨ì´?   JDK(Java Development kit, ìë°” ê°œë°œ í‚¤íŠ¸)   ìë°”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ê¸°ëŠ¥ì„ ê°–ì¶˜ Javaìš© SDK(Software Development Kit). JDKëŠ” JREë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì¦‰, JDKëŠ” í”„ë¡œê·¸ë¨ì„ ìƒì„±, ì‹¤í–‰, ì»´íŒŒì¼ í•  ìˆ˜ ìˆìŒ   JRE(Java Runtime Environment, ìë°” ëŸ°íƒ€ì„ í™˜ê²½)   JVM + ìë°” í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì»´íŒŒì¼ ëœ Java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ íŒ¨í‚¤ì§€         JVMì˜ ë©”ëª¨ë¦¬ êµ¬ì¡°   ìœ„ì˜ ë‚´ìš©ì„ ë‹¤ì‹œ ì •ë¦¬í•˜ìë©´, JVMì´ë€ Java Virtual Machineì˜ ì•½ìë¡œ, ìë°” ê°€ìƒ ë¨¸ì‹ ì´ë¼ê³  ë¶€ë¦„. ìë°”ì™€ ìš´ì˜ì²´ì œ ì‚¬ì´ì—ì„œ ì¤‘ê°œì ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, ìë°”ê°€ ìš´ì˜ì²´ì œì— êµ¬ì•  ë°›ì§€ ì•Šê³  í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. ë˜í•œ, ê°€ë¹„ì§€ ì»¬ë ‰í„°(GC)ë¥¼ ì‚¬ìš©í•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ë„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©°, ë‹¤ë¥¸ í•˜ë“œì›¨ì–´ì™€ ë‹¤ë¥´ê²Œ ë ˆì§€ìŠ¤í„° ê¸°ë°˜ì´ ì•„ë‹Œ ìŠ¤íƒ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•¨.       JVMì˜ êµ¬ì¡°      Garbage Collector   Execution Engine   Class Loader   Runtime Data Area          ìë°” ì†ŒìŠ¤ íŒŒì¼ì€ ìë°” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ì„œ ë°”ì´íŠ¸ ì½”ë“œ í˜•íƒœì¸ í´ë˜ìŠ¤ íŒŒì¼ì´ ë˜ê³  ì´ í´ë˜ìŠ¤ íŒŒì¼ì€ í´ë˜ìŠ¤ ë¡œë”ê°€ ì½ì–´ë“¤ì´ë©´ì„œ JVMì´ ìˆ˜í–‰ë¨       Class Loader   .java ì†ŒìŠ¤ë¥¼ ìë°”ì»´íŒŒì¼ëŸ¬ê°€ ì»´íŒŒì¼í•˜ë©´ .class(ë°”ì´íŠ¸ì½”ë“œ)ì´ ìƒì„±ë˜ëŠ”ë° ì´ë ‡ê²Œ ìƒì„±ëœ í´ë˜ìŠ¤íŒŒì¼ë“¤ì„ ì—®ì–´ì„œ JVMì´ ìš´ì˜ì²´ì œë¡œë¶€í„° í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ì˜ì—­ì¸ Runtime Data Areaë¡œ ì ì¬í•˜ëŠ” ì—­í• ì„ Class Loaderê°€ í•¨. (ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ì¤‘ì¼ ë•Œ ì´ëŸ° ì‘ì—… ìˆ˜í–‰)       Execution Engine   í´ë˜ìŠ¤ ë¡œë”ë¥¼ í†µí•´ JVM ë‚´ì— Runtime Data Areaì— ë°°ì¹˜ëœ ë°”ì´íŠ¸ ì½”ë“œë“¤ì„ ê¸°ê³„ì–´ë¡œ ë³€ê²½í•´ ëª…ë ¹ì–´ ë‹¨ìœ„ë¡œ ì½ì–´ì„œ ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤.   ìµœì´ˆ JVMì´ ë‚˜ì™”ì„ ë‹¹ì‹œì—ëŠ” ì¸í„°í”„ë¦¬í„° ë°©ì‹ì´ì—ˆê¸°ë•Œë¬¸ì— ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ JIT ì»´íŒŒì¼ëŸ¬ ë°©ì‹ì„ í†µí•´ ë³´ì™„í•¨. JITëŠ” ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì–´ì…ˆë¸”ëŸ¬ ê°™ì€ ë„¤ì´í‹°ë¸Œ ì½”ë“œë¡œ ë°”ê¿ˆìœ¼ë¡œì¨ ì‹¤í–‰ì´ ë¹ ë¥´ì§€ë§Œ ë³€í™˜í•˜ëŠ”ë° ë¹„ìš©ì´ ë°œìƒí•¨. ì´ ê°™ì€ ì´ìœ ë¡œ JVMì€ ëª¨ë“  ì½”ë“œë¥¼ JIT ì»´íŒŒì¼ëŸ¬ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ì¸í„°í”„ë¦¬í„° ë°©ì‹ì„ ì‚¬ìš©í•˜ë‹¤ê°€ ì¼ì •í•œ ê¸°ì¤€ì´ ë„˜ì–´ê°€ë©´ JIT ì»´íŒŒì¼ëŸ¬ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•¨       Garbage Collector(GC)   GCëŠ” í™ ë©”ëª¨ë¦¬ ì˜ì—­ì— ìƒì„±ëœ ê°ì²´ë“¤ ì¤‘ì—ì„œ ì°¸ì¡°ë˜ì§€ ì•Šì€ ê°ì²´ë“¤ì„ íƒìƒ‰ í›„ ì œê±°í•˜ëŠ” ì—­í• ì„ í•œë‹¤.   GCê°€ ì—­í• ì„ í•˜ëŠ” ì‹œê°„ì€ ì–¸ì œì¸ì§€ ì •í™•íˆ ì•Œ ìˆ˜ ì—†ë‹¤. (ì°¸ì¡°ê°€ ì—†ì–´ì§€ìë§ˆì í•´ì œë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ì§€ ì•ŠìŒ)       Runtime Data Area   JVMì˜ ë©”ëª¨ë¦¬ ì˜ì—­ìœ¼ë¡œ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë“¤ì„ ì ì¬í•˜ëŠ” ì˜ì—­. ì´ ì˜ì—­ì€ í¬ê²Œ Method Area, Heap Area, Stack Area, PC Register, Native Method Stackë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ.               Method Area       ëª¨ë“  ì“°ë ˆë“œê°€ ê³µìœ í•˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­. ë©”ì†Œë“œ ì˜ì—­ì€ í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤, ë©”ì†Œë“œ, í•„ë“œ, Static ë³€ìˆ˜ ë“±ì´ ìƒì„±ë˜ëŠ” ì˜ì—­.            Heap Area       ëª¨ë“  ì“°ë ˆë“œê°€ ê³µìœ í•˜ë©°, new í‚¤ì›Œë“œë¡œ ìƒì„±ëœ ê°ì²´ì™€ ë°°ì—´ì´ ìƒì„±ë˜ëŠ” ì˜ì—­. ë˜í•œ, ë©”ì†Œë“œ ì˜ì—­ì— ë¡œë“œëœ í´ë˜ìŠ¤ë§Œ ìƒì„±ì´ ê°€ëŠ¥í•˜ê³  Garbage Collectorê°€ ì°¸ì¡°ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ í™•ì¸í•˜ê³  ì œê±°í•˜ëŠ” ì˜ì—­.            Stack Area              ë©”ì„œë“œ í˜¸ì¶œ ì‹œë§ˆë‹¤ ê°ê°ì˜ ìŠ¤íƒ í”„ë ˆì„(ê·¸ ë©”ì„œë“œë§Œì„ ìœ„í•œ ê³µê°„)ì´ ìƒì„±í•œë‹¤. ë©”ì„œë“œ ì•ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” ê°’ë“¤ì„ ì €ì¥í•˜ê³ , í˜¸ì¶œëœ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜, ì§€ì—­ë³€ìˆ˜, ë¦¬í„´ ê°’ ë° ì—°ì‚° ì‹œ ì¼ì–´ë‚˜ëŠ” ê°’ë“¤ì„ ì„ì‹œë¡œ ì €ì¥í•¨. ë§ˆì§€ë§‰ìœ¼ë¡œ, ë©”ì„œë“œ ìˆ˜í–‰ì´ ëë‚˜ë©´ í”„ë ˆì„ë³„ë¡œ ì‚­ì œí•œë‹¤.            PC Register       ì“°ë ˆë“œê°€ ì‹œì‘ë  ë•Œ ìƒì„±ë˜ë©°, ìƒì„±ë  ë•Œë§ˆë‹¤ ìƒì„±ë˜ëŠ” ê³µê°„ìœ¼ë¡œ ì“°ë ˆë“œë§ˆë‹¤ í•˜ë‚˜ì”© ì¡´ì¬í•¨. ì“°ë ˆë“œê°€ ì–´ë–¤ ë¶€ë¶„ì„ ë¬´ìŠ¨ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼í•  ì§€ì— ëŒ€í•œ ê¸°ë¡ì„ í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ í˜„ì¬ ìˆ˜í–‰ì¤‘ì¸ JVM ëª…ë ¹ì˜ ì£¼ì†Œë¥¼ ê°–ëŠ”ë‹¤.            Native Method Stack       ìë°” ì™¸ ì–¸ì–´ë¡œ ì‘ì„±ëœ ë„¤ì´í‹°ë¸Œ ì½”ë“œë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ì˜ì—­           ì“°ë ˆë“œê°€ ìƒì„±ë˜ì—ˆì„ ë•Œ ê¸°ì¤€ìœ¼ë¡œ1,2ë²ˆì¸ ë©”ì†Œë“œÂ ì˜ì—­ê³¼ í™Â ì˜ì—­ì„ ëª¨ë“  ì“°ë ˆë“œê°€ ê³µìœ í•˜ê³ ,3,4,5ë²ˆì¸ ìŠ¤íƒ ì˜ì—­ê³¼ PC ë ˆì§€ìŠ¤í„°, Native method stackì€ ê°ê°ì˜ ì“°ë ˆë“œë§ˆë‹¤ ìƒì„±ë˜ê³  ê³µìœ ë˜ì§€ ì•ŠëŠ”ë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-JVM/",
        "teaser": ""
      },{
        "title": "ì„œë¸”ë¦¿",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ì„œë¸”ë¦¿   ì„œë¸”ë¦¿ì´ë€ Dynamic Web Pageë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©ë˜ëŠ” ìë°” ê¸°ë°˜ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œê·¸ë˜ë° ê¸°ìˆ ì´ë‹¤. ì›¹ì„ ë§Œë“¤ë•ŒëŠ” ë‹¤ì–‘í•œ ìš”ì²­(request)ê³¼ ì‘ë‹µ(response)ì´ ìˆê³  ê·œì¹™ì´ ì¡´ì¬í•˜ëŠ”ë° ì´ëŸ¬í•œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì¼ì¼ì´ ì²˜ë¦¬í•˜ê¸° í˜ë“¤ë‹¤. ì„œë¸”ë¦¿ì€ ì´ëŸ¬í•œ ì›¹ ìš”ì²­ê³¼ ì‘ë‹µì˜ íë¦„ì„ ê°„ë‹¨í•œ ë©”ì„œë“œ í˜¸ì¶œë§Œìœ¼ë¡œ ì²´ê³„ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.   ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì•„ë˜ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ êµ¬í˜„í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ, ì„œë¸”ë¦¿ì„ ì§€ì›í•˜ëŠ” WASë¥¼ ì‚¬ìš©í•˜ë©´ ì´ˆë¡ìƒ‰ ë°•ìŠ¤ì•ˆì˜ ë‚´ìš©ë§Œ êµ¬í˜„í•˜ë©´ ëœë‹¤.      ì„œë¸”ë¦¿ ì‚¬ìš©ì˜ˆì œ   1 2 3 4 5 6 7 8 @WebServlet(name = \"helloServelt\", urlPatterns = \"/hello\") public class HelloServlet extends HttpServlet {      @Override     protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {         ...     } }      @WebServlet            name: ì„œë¸”ë¦¿ ì´ë¦„       urlPatterns: URL ë§¤í•‘           protected void service(HttpServletRequest request, HttpServletResponse response)            HTTP ìš”ì²­ì„ í†µí•´ ë§¤í•‘ëœ URLì´ í˜¸ì¶œë˜ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” service() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.           ì„œë¸”ë¦¿ íŠ¹ì§•      urlPatternsì˜ URLì´ í˜¸ì¶œë˜ë©´ ì„œë¸”ë¦¿ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.   HTTP ìš”ì²­, ì‘ë‹µ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” HttpServletRequestì™€ HttpServletResponseë¥¼ ì œê³µí•œë‹¤.   ê°œë°œìëŠ” HTTP ìŠ¤í™ì„ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì„œë¸”ë¦¿ HTTP ìš”ì²­, ì‘ë‹µ íë¦„   í´ë¼ì´ì–¸íŠ¸ì—ì„œ URL ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ WASëŠ” Request, Response ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì„œë¸”ë¦¿ ê°ì²´ë¥¼ í˜¸ì¶œí•œë‹¤. ê°œë°œìëŠ” Reqeust ê°ì²´ì—ì„œ HTTP ìš”ì²­ ì •ë³´ë¥¼ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê³  Response ê°ì²´ì—ì„œ HTTP ì‘ë‹µ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì…ë ¥í•œë‹¤. WASëŠ” Response ê°ì²´ì— ë‹´ê²¨ìˆëŠ” ë‚´ìš©ìœ¼ë¡œ HTTP ì‘ë‹µ ì •ë³´ë¥¼ ìƒì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.         ì°¸ê³  ì„œë¸”ë¦¿ ê°ì²´ì˜ ìƒì„± ì‹œì    ì„œë²„ ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥´ë‹¤. ë¡œë”© ì‹œì ì— ìƒì„±í•  ìˆ˜ë„ ìˆê³  ìµœì´ˆ ìš”ì²­ ì‹œì ì— ìƒì„±í•  ìˆ˜ë„ ìˆë‹¤.     ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ   ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë€ í†°ìº£ì²˜ëŸ¼ ì„œë¸”ë¦¿ì„ ì§€ì›í•˜ëŠ” WASë¥¼ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì„œë¸”ë¦¿ ê°ì²´ë¥¼ ìƒì„±, ì´ˆê¸°í™”, í˜¸ì¶œ, ì¢…ë£Œí•˜ëŠ” ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì´ë•Œ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.   ê³ ê°ì˜ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ ìµœì´ˆ ë¡œë”© ì‹œì ì— ì„œë¸”ë¦¿ ê°ì²´ë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê³  ì¬í™œìš©í•œë‹¤. ëª¨ë“  ê³ ê°ì˜ ìš”ì²­ì€ ë™ì¼í•œ ì„œë¸”ë¦¿ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ë©° ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œ í•¨ê»˜ ì¢…ë£Œí•œë‹¤. ì´ë•Œ, ê³µìœ  ë³€ìˆ˜ ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼í•œë‹¤.   JSPë„ ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜ë˜ì–´ì„œ ì‚¬ìš©í•˜ë©° ë™ì‹œ ìš”ì²­ì„ ìœ„í•œ ë©€í‹° ì“°ë ˆë“œ ì²˜ë¦¬ë¥¼ ì§€ì›í•œë‹¤.      ì°¸ê³  ì‹±ê¸€í†¤ íŒ¨í„´   ì‹±ê¸€í†¤ íŒ¨í„´ì€ ê°ì²´ë¥¼ ë”± í•˜ë‚˜ë§Œ ìƒì„±í•˜ì—¬ ìƒì„±ëœ ê°ì²´ë¥¼ í”„ë¡œê·¸ë¨ ì–´ë””ì—ì„œë‚˜ ì ‘ê·¼í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” íŒ¨í„´ì„ ë§í•œë‹¤. ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì „ì—­ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ê°ì²´ë§Œì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë° ì´ë•Œ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ê°ì²´ ìƒì„±ì„ ë‹¨ í•œë²ˆìœ¼ë¡œ ì œí•œí•˜ì—¬ ê°ì²´ë“¤ì´ ë³µì œë˜ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆê³  í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì—¬ëŸ¬ ê³³ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³„ì† ìƒì„±í•˜ì—¬ ë¶ˆí•„ìš”í•˜ê²Œ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨ë˜ëŠ” ê²½ìš°ì—ë„ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.        ì°¸ê³  ì„œë¸”ë¦¿ê³¼ ì‹±ê¸€í†¤   /hello ë¥¼ ì²˜ë¦¬í•˜ëŠ” HelloServlet, /springì„ ì²˜ë¦¬í•˜ëŠ” SpringServletì´ ê°ê° ì¡´ì¬í•œë‹¤ë©´ HelloServlet, SpringServletë¥¼ ë§¤ë²ˆ ìš”ì²­ì´ ì˜¬ ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì¤„ í•„ìš” ì—†ì´ í•œ ë²ˆë§Œ ìƒì„±í•œ ë’¤ ì´ë¯¸ ìƒì„±ëœ ê²ƒì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì—¬ê¸°ì„œ ì–¸ê¸‰ëœ ì‹±ê¸€í†¤ì€ HelloServlet, SpringServletì„ ê°ê° í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.        ì°¸ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì˜ ê´€ê³„   ì„œë¡œê°€ ì–´ë””ì— í¬í•¨ëœë‹¤ê³  ë³´ê¸°ë³´ë‹¨ ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì„œë¸”ë¦¿ì„ ê´€ë¦¬í•˜ëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ê°ìì˜ ëª©ì ì— ë§ê²Œ ë³„ë„ì˜ ì»¨í…Œì´ë„ˆë¡œ ì¡´ì¬í•œë‹¤.             ì°¸ê³    request ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì„œë¸”ë¦¿ì— ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì˜ ì—­í• ì´ë©° responseë„ ë§ˆì°¬ê°€ì§€ë¡œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ í•œë‹¤. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•´ì¤€ë‹¤. ì„œë¸”ë¦¿ì€ service() ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì‹±ê¸€í†¤ ê°ì²´ë¼ê³  ì´í•´í•´ë„ ëœë‹¤.        ì°¸ê³  ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ íë¦„           ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì„œë¸”ë¦¿ ê°ì²´ë¥¼ ìƒì„± (ì„œë¸”ë¦¿ì˜ ìƒì„±ì‹œì ì€ ì„œë²„ ì„¤ì •ì— ë”°ë¼ ë‹¤ë¦„)     í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ëŠ” HTTP ìš”ì²­ì„ í•˜ë©´, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œ request, response ê°ì²´ë¥¼ ìƒì„±     ì´ë•Œ, ì“°ë ˆë“œê°€ ì„œë¸”ë¦¿ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê³  request, response ê°ì²´ë¥¼ ì„œë¸”ë¦¿ ê°ì²´ì— ë„˜ê²¨ì¤Œ     request ê°ì²´ë¥¼ í™œìš©í•´ ì„œë¸”ë¦¿ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰     ì‘ë‹µ ê²°ê³¼ë¥¼ response ê°ì²´ì— ë‹´ì€ í›„, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ì „ë‹¬     ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ HTTP ì‘ë‹µ ë©”ì‹œì§€ ìƒì„± í›„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬      ","categories": ["Spring"],
        "tags": ["Spring","Java"],
        "url": "/spring/Spring-Servlet/",
        "teaser": ""
      },{
        "title": "ìŠ¤ë ˆë“œì™€ ìŠ¤ë ˆë“œ í’€",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ìŠ¤ë ˆë“œ   ìŠ¤ë ˆë“œë€ í”„ë¡œì„¸ìŠ¤ì˜ ìì›ì„ ì´ìš©í•´ì„œ ì‹¤ì œë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒ      ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ í•˜ë‚˜í•˜ë‚˜ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒ   ìë°” ë©”ì¸ ë©”ì„œë“œë¥¼ ì²˜ìŒ ì‹¤í–‰í•˜ë©´ mainì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰   ìŠ¤ë ˆë“œê°€ ì—†ë‹¤ë©´ ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì´ ë¶ˆê°€ëŠ¥í•¨   ìŠ¤ë ˆë“œëŠ” í•œë²ˆì— í•˜ë‚˜ì˜ ì½”ë“œ ë¼ì¸ë§Œ ìˆ˜í–‰   ë™ì‹œ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë©´ ìŠ¤ë ˆë“œë¥¼ ì¶”ê°€ë¡œ ìƒì„±      ì°¸ê³      í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ë“¤ì–´ì˜¨ ê²½ìš° WASì™€ ì—°ê²°ì„ í•´ì£¼ëŠ” ì—­í• ì„ TCP/IP ì—ì„œ í•´ì¤€ë‹¤.     TCP/IPë¥¼ í†µí•´ ìš”ì²­í•œ ì£¼ì†Œë¥¼ í†µí•´ WASì™€ ì—°ê²°ì´ ë˜ê³  ì—°ê²°ëœ ìš”ì²­ì„ WASì—ì„œ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì ì ˆí•œ Servletìœ¼ë¡œ ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.     ìš”ì²­ë§ˆë‹¤ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤ê³  ê°€ì •í•˜ë©´,   ë™ì‹œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê³ , í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ ì§€ì—°ë˜ë„ ë‚˜ë¨¸ì§€ ìŠ¤ë ˆë“œëŠ” ì •ìƒ ë™ì‘í•œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.   ê·¸ëŸ¬ë‚˜, ìŠ¤ë ˆë“œëŠ” ìƒì„± ë¹„ìš©ì´ ë§¤ìš° ë¹„ì‹¸ê³  ìš”ì²­ë§ˆë‹¤ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ë©´ ì‘ë‹µ ì†ë„ê°€ ëŠ¦ì–´ì§„ë‹¤. ë˜í•œ, ìŠ¤ë ˆë“œëŠ” ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ì´ ë°œìƒí•œë‹¤. ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ì´ë€ ìŠ¤ë ˆë“œë¥¼ ì „í™˜í• ë•Œ ë°œìƒí•˜ëŠ” ë¹„ìš©ì„ ë§í•˜ëŠ”ë° ìŠ¤ë ˆë“œê°€ ë„ˆë¬´ ë§ìœ¼ë©´ ë¬¸ì œê°€ ìƒê¸´ë‹¤. ìŠ¤ë ˆë“œ ìƒì„± ì‹œ CPU, ë©”ëª¨ë¦¬ê°€ ì‚¬ìš©ë˜ëŠ”ë° ê·¸ ì„ê³„ì ì„ ë„˜ì–´ì„œ ì„œë²„ê°€ ì£½ì„ ìˆ˜ë„ ìˆë‹¤.   ì´ëŸ¬í•œ ë‹¨ì ë“¤ì€ ë³´ì™„í•œ ê²ƒì´ ìŠ¤ë ˆë“œ í’€ì´ë‹¤.      ì°¸ê³  ë©€í‹° ìŠ¤ë ˆë“œì—ì„œì˜ ë™ì‹œ ìš”ì²­ê³¼ ë‹¤ìˆ˜ ì„œë²„ë¡œ ìš´ì˜ë˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ë™ì‹œ ìš”ì²­ì€ ê°™ì€ ë§¥ë½ì´ ì•„ë‹ˆë‹¤. ë©€í‹° ìŠ¤ë ˆë“œëŠ” í•˜ë‚˜ì˜ ì„œë²„ ì•ˆì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒì„ ì „ì œë¡œ ì–˜ê¸°í•œë‹¤. ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¡œ êµ¬ì„±ëœ ì„œë¹„ìŠ¤ê°€ ë™ì‹œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê±´ ë¡œë“œ ë°¸ëŸ°ì„œë¼ëŠ” í‚¤ì›Œë“œê°€ ìˆë‹¤.     ìŠ¤ë ˆë“œ í’€   ìŠ¤ë ˆë“œ í’€ì— í•„ìš”í•œ ìŠ¤ë ˆë“œë¥¼ ë³´ê´€í•˜ê³  ê´€ë¦¬í•˜ë©° ìŠ¤ë ˆë“œ í’€ì— ìƒì„± ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œì˜ ìµœëŒ€ì¹˜ë¥¼ ê´€ë¦¬í•œë‹¤. (í†°ìº£ì˜ ê²½ìš° ìµœëŒ€ 200ê°œ)   ìŠ¤ë ˆë“œê°€ í•„ìš”í•˜ë©´ ìŠ¤ë ˆë“œ í’€ì— ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ìŠ¤ë ˆë“œë¥¼ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê³  ì‚¬ìš©ì„ ì¢…ë£Œí•˜ë©´ ìŠ¤ë ˆë“œ í’€ì— í•´ë‹¹ ìŠ¤ë ˆë“œë¥¼ ë°˜ë‚©í•œë‹¤. ë§Œì•½, ìµœëŒ€ ìŠ¤ë ˆë“œê°€ ëª¨ë‘ ì‚¬ìš©ì¤‘ì´ì—¬ì„œ ìŠ¤ë ˆë“œ í’€ì— ìŠ¤ë ˆë“œê°€ ì—†ë‹¤ë©´ ê¸°ë‹¤ë¦¬ëŠ” ìš”ì²­ì€ ê±°ì ˆí•˜ê±°ë‚˜ íŠ¹ì • ìˆ«ìë§Œí¼ë§Œ ëŒ€ê¸°í•˜ë„ë¡ ì„¤ì • í•  ìˆ˜ ìˆë‹¤.   ìŠ¤ë ˆë“œ í’€ì˜ ì¥ì ì€ ìŠ¤ë ˆë“œê°€ ë¯¸ë¦¬ ìƒì„±ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ì¢…ë£Œí•˜ëŠ” ë¹„ìš©ì´ ì ˆì•½ë˜ê³  ì‘ë‹µ ì‹œê°„ì´ ë¹ ë¥´ë‹¤. ë˜í•œ, ìƒì„± ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œì˜ ìµœëŒ€ì¹˜ê°€ ìˆìœ¼ë¯€ë¡œ ë„ˆë¬´ ë§ì€ ìš”ì²­ì´ ë“¤ì–´ì™€ë„ ê¸°ì¡´ ìš”ì²­ì€ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.      ìŠ¤ë ˆë“œ í’€ê³¼ ê´€ë ¨ëœ ì‹¤ë¬´íŒ   WASì˜ ì£¼ìš” íŠœë‹ í¬ì¸íŠ¸ëŠ” ìµœëŒ€ ìŠ¤ë ˆë“œ(max thread) ìˆ˜ì´ë‹¤. max threadë¥¼ ë‚®ê²Œ ì„¤ì • ì‹œ ë™ì‹œ ìš”ì²­ì´ ë§ìœ¼ë©´ ì„œë²„ ë¦¬ì†ŒìŠ¤ëŠ” ì—¬ìœ ë¡­ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ëŠ” ê¸ˆë°© ì‘ë‹µ ì§€ì—°ëœë‹¤. max threadë¥¼ ë†’ê²Œ ì„¤ì • ì‹œ ë™ì‹œ ìš”ì²­ì´ ë§ìœ¼ë©´ CPU, ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ ì„ê³„ì  ì´ˆê³¼ë¡œ ì„œë²„ê°€ ë‹¤ìš´ëœë‹¤.   ê·¸ëŸ¼ ìŠ¤ë ˆë“œ í’€ì˜ ì ì • ìˆ«ìê°€ ë­˜ê¹Œ? ì´ì— ëŒ€í•œ ì •ë‹µì€ ì—†ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì˜ ë³µì¡ë„, CPU, ë©”ëª¨ë¦¬, IO ë¦¬ì†ŒìŠ¤ ìƒí™©ì— ë”°ë¼ ëª¨ë‘ ë‹¤ë¥´ë‹¤. ì ì • ìˆ«ìë¥¼ ì°¾ì„ ë°©ë²•ì€ ìµœëŒ€í•œ ì‹¤ì œ ì„œë¹„ìŠ¤ì™€ ìœ ì‚¬í•˜ê²Œ í™˜ê²½ì„ êµ¬ì„± í›„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œë„í•˜ëŠ” ê²ƒì´ë‹¤. ê´€ë ¨ íˆ´ë¡œëŠ” ì•„íŒŒì¹˜ ab, ì œì´ë¯¸í„°,Â nGrinderê°€ ìˆë‹¤.   ì¥ì• ê°€ ë°œìƒí–ˆë‹¤ê³  ê°€ì •í•˜ê³ , í´ë¼ìš°ë“œë©´ ì¼ë‹¨ ì„œë²„ë¶€í„° ì¦ì„¤í•˜ê³  ì´í›„ì— íŠœë‹ì„ í•˜ê³  í´ë¼ìš°ë“œê°€ ì•„ë‹ˆë©´ ì—´ì‹¬íˆ íŠœë‹..í•´ì•¼ í•œë‹¤.      ì°¸ê³  ìŠ¤ë ˆë“œ í’€ì„ ì‚¬ìš©í•´ë„ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ì´ ë°œìƒí•œë‹¤. ê·¸ëŸ¬ë‚˜, ë¬´í•œì • ëŠ˜ì–´ë‚˜ì§€ ì•Šìœ¼ë‹ˆ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ë„ ë¬´í•œì • ëŠ˜ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.        ì°¸ê³  ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆì„ ê²½ìš° ìš°ì„  ì ê²€ í˜ì´ì§€ë¡œ ìš”ì²­ì„ ëŒë¦°ë‹¤. ê·¸ í›„ ë‹¤ìš´ë˜ëŠ” ì›ì¸ì„ ì°¾ëŠ”ë‹¤. ë‹¤ìš´ë˜ëŠ” ì›ì¸ì€ connection pool timeout, memory leak ë“± ì—¬ëŸ¬ ì´ìœ ê°€ ìˆë‹¤. ëª¨ë‹ˆí„°ë§ íˆ´ì„ í†µí•´ ì›ì¸ì„ ì°¾ì•„ë‚¼ ìˆ˜ë„ ìˆê³ , í™ ë¤í”„ë¥¼ ë– ì„œ ì‚´í´ë³´ëŠ” ë°©ë²•ë„ ìˆë‹¤. ì½”ë“œ ë ˆë²¨ì—ì„œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œëŠ” ì¡°ì¹˜ í›„ ìš´ì˜í•˜ë©´ ë˜ê³  ë¬¼ë¦¬ì ì¸ ë¬¸ì œë¼ë©´ ì„œë²„ ì¦ì„¤ì„ ë¹ ë¥´ê²Œ ì§„í–‰í•œë‹¤.        ì°¸ê³  AWSì˜ AutoScaling AWSì—ëŠ” AutoScalingì´ë€ ê¸°ëŠ¥ì´ ìˆì–´ ìš”ì²­ì´ ì¦ê°€í•  ë•Œ ìë™ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ëŠ˜ì–´ë‚˜ëŠ” ìš”ì²­ì— ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìˆœê°„ì ìœ¼ë¡œ ìš”ì²­ì´ í­ë°œì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” ê²½ìš°ì—ëŠ” ëŒ€ì‘í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œê°„ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸!. ì˜ˆì¸¡í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ì˜ ê²½ìš° ë¯¸ë¦¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™•ë³´í•˜ì—¬ ëŠ˜ì–´ë‚˜ëŠ” ìš”ì²­ì— ëŒ€ì‘í•˜ê¸°ë„ í•œë‹¤.        ì°¸ê³  í†°ìº£ ìŠ¤ë ˆë“œì™€ JPAì—ì„œ ì‚¬ìš©í•˜ëŠ” ìŠ¤ë ˆë“œ ìŠ¤ë ˆë“œëŠ” ì–´ë– í•œ í”„ë¡œê·¸ë¨, í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” í•˜ë‚˜ì˜ íë¦„ì„ ì˜ë¯¸í•œë‹¤. í†°ìº£ì€ ì›¹ì„œë²„ë¡œì¨ ê³ ê°ì˜ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ë©° ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìŠ¤ë ˆë“œí’€ì„ ìš´ì˜í•œë‹¤. JPAë„ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ DB ì‚¬ì´ì—ì„œì˜ ì¤‘ê³„ì ì—­í• ì„ ë§¡ê³  ìˆë‹¤. JPA ë˜í•œ ì—…ë¬´ íš¨ìœ¨ì„ ìœ„í•œ ìŠ¤ë ˆë“œí’€ì„ ë³„ë„ë¡œ ìš´ì˜í•œë‹¤. (ë³´í†µ HikariPool ì´ë¼ê³  í•˜ëŠ” ìŠ¤ë ˆë“œí’€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.) ì´ ë‘˜ì˜ ìŠ¤ë ˆë“œëŠ” ë³„ë„ë¡œ ê´€ë¦¬ë˜ê¸°ì— ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨, ì–´ë–¤ HTTP ìš”ì²­ì´ ë§ì€ DB ì¡°íšŒë¥¼ ìš”êµ¬í•œë‹¤ë©´ í†°ìº£ì˜ ìŠ¤ë ˆë“œ 1ê°œì™€ JPA ìŠ¤ë ˆë“œ ì—¬ëŸ¬ê°œë¥¼ ì°¨ì§€í•  ìˆ˜ ìˆë‹¤.    ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-Thread/",
        "teaser": ""
      },{
        "title": "SSR, CSR",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§ì€ ê°ê° ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì›¹ í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” ê¸°ìˆ ì„ ì˜ë¯¸í•œë‹¤.   ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR)   SSRì€ ì„œë²„ì—ì„œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ í˜ì´ì§€ë¥¼ ëª¨ë‘ êµ¬ì„±í•´ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰, HTML ìµœì¢… ê²°ê³¼ë¥¼ ì„œë²„ì—ì„œ ë§Œë“¤ì–´ì„œ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•œë‹¤. ì£¼ë¡œ ì •ì ì¸ í™”ë©´ì—ì„œ ì‚¬ìš©í•˜ê³  ê´€ë ¨ ê¸°ìˆ ë¡œëŠ” JSP, íƒ€ì„ë¦¬í”„ê°€ ìˆë‹¤. SSRì„ ì“°ë©´ ëª¨ë“  ë°ì´í„°ê°€ ë§¤í•‘ëœ ì„œë¹„ìŠ¤ í˜ì´ì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë°”ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤. ì„œë²„ë¥¼ ì´ìš©í•´ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— CSRë³´ë‹¤ í˜ì´ì§€ êµ¬ì„± ì†ë„ëŠ” ëŠë¦¬ì§€ë§Œ ì „ì²´ì ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì»¨í…ì¸  êµ¬ì„±ì´ ì™„ë£Œë˜ëŠ” ì‹œì ì€ ë¹¨ë¼ì§„ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.      í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§(CSR)   CSRì€ ì‚¬ìš©ìì˜ í–‰ë™ì— ë”°ë¼ í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‹¤ì‹œ ì½ì–´ë“¤ì´ê¸° ë•Œë¬¸ì— ì„œë²„ ì¸¡ì—ì„œ ë Œë”ë§í•˜ì—¬ ì „ì²´ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ì½ì–´ë“¤ì´ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥¸ ì¸í„°ë ‰ì…˜ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤. ì„œë²„ëŠ” ë‹¨ì§€ JSONíŒŒì¼ë§Œ ë³´ë‚´ì£¼ê³  htmlì„ ê·¸ë¦¬ëŠ” ì—­í• ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ìˆ˜í–‰í•œë‹¤. ì£¼ë¡œ ë™ì ì¸ í™”ë©´ì— ì‚¬ìš©í•˜ë©° ì›¹ í™˜ê²½ì„ ë§ˆì¹˜ ì•±ì²˜ëŸ¼ í•„ìš”í•œ ë¶€ë¶„ë¶€ë¶„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ê´€ë ¨ ê¸°ìˆ ë¡œëŠ” React, Vue.jsê°€ ìˆë‹¤.      ì°¸ê³ ë¡œ React, Vue.jsë¥¼ CSR+SSR ë™ì‹œì— ì§€ì›í•˜ëŠ” ì›¹ í”„ë ˆì„ì›Œí¬ê°€ ìˆë‹¤. ë˜í•œ, SSRì„ ì‚¬ìš©í•˜ë”ë¼ë„ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ í™”ë©´ ì¼ë¶€ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.   ë°±ì—”ë“œ ê°œë°œì ì…ì¥ì—ì„  ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR) ê¸°ìˆ ì„ í•™ìŠµí•˜ëŠ” ê²ƒì€ í•„ìˆ˜ì´ì§€ë§Œ, CSR ê¸°ìˆ (React, Vue.js ë“±) í•™ìŠµì€ ì˜µì…˜ì´ë‹¤. ë°±ì—”ë“œ ê°œë°œìëŠ” ì„œë²„, DB, ì¸í”„ë¼ ë“± ìˆ˜ ë§ì€ ë°±ì—”ë“œ ê¸°ìˆ ì„ í•™ìŠµí•´ì•¼ í•œë‹¤. ì„ íƒê³¼ ì§‘ì¤‘ì„ í•´ì•¼í•œë‹¤.  ","categories": ["HTTP"],
        "tags": ["HTTP","Spring"],
        "url": "/http/Web-SSR-CSR/",
        "teaser": ""
      },{
        "title": "ì›¹ ì„œë²„ì™€ WAS",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ì›¹ ì„œë²„(Web Server, WS)   ì›¹ ì„œë²„ëŠ” HTTP ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©° ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì •ì  ë¦¬ì†ŒìŠ¤ì—ëŠ” ì •ì  html, css ,js, ì´ë¯¸ì§€, ì˜ìƒ ë“±ì´ ìˆë‹¤. nginx, apacheê°€ ì›¹ ì„œë²„ì— í•´ë‹¹í•œë‹¤.   ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„(WAS)   WASëŠ” HTTP ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©° ì›¹ ì„œë²„ ê¸°ëŠ¥(ì •ì  ë¦¬ì†ŒìŠ¤ ì œê³µ)ë„ ì œê³µí•  ìˆ˜ ìˆê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ë„ ìˆ˜í–‰í•œë‹¤. tomcat ë“±ì´ WASì— í•´ë‹¹ëœë‹¤.   ì›¹ ì„œë²„ì™€ WASì˜ ì°¨ì´ì    ì‚¬ì‹¤ ë‘˜ì˜ ê²½ê³„ëŠ” ëª¨í˜¸í•˜ë‹¤. ì›¹ ì„œë²„ë„ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•˜ê¸°ë„ í•˜ê³  WASë„ ì›¹ ì„œë²„ì˜ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì°¨ì´ì ì„ ë§í•˜ìë©´ ì›¹ ì„œë²„ëŠ” ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ê²ƒì— íŠ¹í™”ë˜ì–´ìˆê³ , WASëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ”ë° ë” íŠ¹í™”ë˜ì–´ìˆë‹¤. ì¦‰, ì›¹ ì„œë²„ ì—†ì´ WASì—ì„œ ëª¨ë“  ì²˜ë¦¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìœ¼ë©°, WAS ì—†ì´ WS ë§Œìœ¼ë¡œ ì •ì  ì›¹ì„ ë§Œë“œëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.   ì›¹ ì„œë²„ì™€ WASë¥¼ ë¶„ë¦¬í•  ê²½ìš° ì¥ì    ìš°ì„ , íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. ì •ì  ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ ì‚¬ìš©ë˜ë©´ ì›¹ ì„œë²„ë¥¼ ì¦ì„¤í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ ì‚¬ìš©ë˜ë©´ WASë¥¼ ì¦ì„¤í•œë‹¤.   ë˜í•œ, ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì›¹ ì„œë²„ì˜ ê²½ìš°ì—” ì¥ì• ê°€ ìì£¼ ë°œìƒí•˜ì§€ ì•ŠëŠ” ë°˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì´ ë™ì‘í•˜ëŠ” WASì˜ ê²½ìš°ëŠ” ê°œë°œìì˜ ë¡œì§ ì‹¤ìˆ˜ ë“±ìœ¼ë¡œ ì¥ì• ê°€ ìì£¼ ë°œìƒí•œë‹¤. ì´ì²˜ëŸ¼ WAS, DB ì¥ì•  ì‹œ ì›¹ ì„œë²„ì—ì„œ ì˜¤ë¥˜ í™”ë©´ì„ ì œê³µí•  ìˆ˜ ìˆì–´ ì‚¬ìš©ìì˜ í˜¼ë€ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.      ì°¸ê³     API ì„œë²„ë§Œ ì œê³µí•œë‹¤ë©´ ì›¹ ì„œë²„ëŠ” êµ¬ì¶•í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ë¹„ìš© ì¸¡ë©´ì—ì„œ ì •ì  ë¦¬ì†ŒìŠ¤ ë³´ë‹¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì´ ë” ë¹„ì‹¸ë‹¤.    ","categories": ["HTTP"],
        "tags": ["Spring","HTTP"],
        "url": "/http/Web-WebServer-WAS/",
        "teaser": ""
      },{
        "title": "êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   êµ¬ MVC íŒ¨í„´ì˜ í•œê³„   MVC íŒ¨í„´ì„ ì ìš©í•´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—­í• ê³¼ ë·° ë Œë”ë§í•˜ëŠ” ì—­í• ì„ êµ¬ë¶„í•˜ì˜€ì§€ë§Œ ì¤‘ë³µì´ ë§ê³  í•„ìš”í•˜ì§€ ì•Šì€ ì½”ë“œê°€ ë§ë‹¤.   í¬ì›Œë“œ ì¤‘ë³µ   Viewë¡œ ì´ë™í•˜ëŠ” ì½”ë“œê°€ í•­ìƒ ì¤‘ë³µ í˜¸ì¶œëœë‹¤.   1 2 RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath); dispatcher.forward(request, response);   ViewPath ì¤‘ë³µ   ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤. JSPê°€ ì•„ë‹Œ thymeleaf ê°™ì€ ë‹¤ë¥¸ ë·°ë¡œ ë³€ê²½ ì‹œ ì „ì²´ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.   1 String viewPath = \"/WEB-INF/views/new-form.jsp\";   ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ   ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œë„ ìˆë‹¤.   1 HttpServletRequest request, HttpServletResponse response   ê³µí†µ ì²˜ë¦¬ ì–´ë ¤ì›€   ë‹¨ìˆœíˆ ê³µí†µ ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë½‘ì•„ë„ ê²°êµ­ ë©”ì„œë“œë¥¼ í•­ìƒ í˜¸ì¶œí•´ì•¼ë˜ê³  ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ëœë‹¤. ë˜í•œ, í˜¸ì¶œí•˜ëŠ” ê²ƒ ìì²´ë„ ì¤‘ë³µì´ë‹¤.   ì´ëŸ¬í•œ í•œê³„ì ë“¤ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ì„ ë„ì…í•˜ì—¬ ë¬¸ì œ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ìœ¼ë©´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•´ì¤€ë‹¤. ì¦‰, ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ ë§Œë“¤ì–´ ê³µí†µ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•´ì ¸ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ìŠ¤í”„ë§ MVCì˜ í•µì‹¬ì´ ë°”ë¡œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤.      í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ íŠ¹ì§•      í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ëŠ”ë‹¤.   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•œë‹¤.   ì…êµ¬ê°€ í•˜ë‚˜ì´ë¯€ë¡œ ê³µí†µ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.   ìŠ¤í”„ë§ ì›¹ MVCì˜ í•µì‹¬ì´ FrontControllerì´ê³  ìŠ¤í”„ë§ ì›¹ MVCì˜ DispatcherServletì´ FrontController íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.      í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°   í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” ì–´ëŒ‘í„° ì—­í• ì„ í•´ì£¼ì–´ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œ ê°€ëŠ¥í•˜ë‹¤.   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë‹¤ì–‘í•œ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. FrontControllerì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ì´ì— í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ë‘”ë‹¤.   í•¸ë“¤ëŸ¬   ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì´ë¦„ì„ ë” ë„“ì€ ë²”ìœ„ì¸ í•¸ë“¤ëŸ¬ë¡œ ë³€ê²½í–ˆë‹¤. ì–´ëŒ‘í„°ê°€ ìˆê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì–´ë– í•œ ê²ƒì´ë“  í•´ë‹¹í•˜ëŠ” ì¢…ë¥˜ì˜ ì–´ëŒ‘í„°ë§Œ ìˆìœ¼ë©´ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. (í•¸ë“¤ëŸ¬ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê°™ì€ ì˜ë¯¸ì§€ë§Œ í•¸ë“¤ëŸ¬ê°€ ë” ë„“ì€ ë²”ìœ„ì— ì†í•œë‹¤)  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-MVCPattern-FrontController/",
        "teaser": ""
      },{
        "title": "MVC íŒ¨í„´",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ì„œë¸”ë¦¿ê³¼ JSPì˜ í•œê³„   ì„œë¸”ë¦¿ìœ¼ë¡œ ê°œë°œì„ í•˜ë©´ ë·° í™”ë©´ì„ ìœ„í•´ HTMLì„ ë§Œë“œëŠ” ì‘ì—…ì´ ìë°” ì½”ë“œì— ì„ì—¬ì„œ ì§€ì €ë¶„í•˜ê³  ë³µì¡í•˜ë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ JSPì´ë‹¤. JSPë¥¼ í†µí•´ ìë°”ì—ì„œ HTMLì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ HTML ì½”ë“œ ë‚´ì— ì¤‘ìš”í•œ ë¶€ë¶„ì—ë§Œ ìë°” ì½”ë“œë¥¼ ì¨ì„œ ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.   JSPë¥¼ ì‚¬ìš©í•˜ë©´ì„œ HTML ì‘ì—…ì´ ê¹”ë”í•´ì¡Œì§€ë§Œ ìë°” ì½”ë“œ, ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬ ë“±ì´ JSPì— ë…¸ì¶œëœë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. (JSPê°€ ë„ˆë¬´ ë§ì€ ì—­í• ì„ í•œë‹¤) â†’ ìœ ì§€ë³´ìˆ˜ ì§€ì˜¥      ì°¸ê³  JSP   ì •ì ì¸ HTMLì´ ì•„ë‹Œ ì„œë²„(ìë°”)ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë°›ì•„ì™€ ë™ì ìœ¼ë¡œ í™”ë©´ì´ ê·¸ë ¤ì§€ëŠ” í…œí”Œë¦¿ ì—”ì§„ì´ë‹¤.     ì„œë¸”ë¦¿ - ì»¨íŠ¸ë¡¤ëŸ¬, JSP - ë·°   MVC íŒ¨í„´ ê°œìš”   í•˜ë‚˜ì˜ ì„œë¸”ë¦¿, JSP ë§Œìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·° ë Œë”ë§ì„ ëª¨ë‘ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´ ë„ˆë¬´ ë§ì€ ì—­í• ì„ í•˜ê²Œ ëœë‹¤. ì´ë¶€ë¶„ì€ í–¥í›„ ìœ ì§€ë³´ìˆ˜ë¥¼ ì§„í–‰í•˜ê²Œ ë˜ì—ˆì„ ë•Œ ë¬¸ì œê°€ ë§ì´ ìƒê¸´ë‹¤.   UIë¥¼ ìˆ˜ì •í•˜ëŠ” ì¼ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜ì •í•˜ëŠ” ì¼ì€ ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥´ë‹¤. ë•Œë¬¸ì— ìˆ˜ì • ì‹œ ê°ê° ë‹¤ë¥´ê²Œ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ê³  ëŒ€ë¶€ë¶„ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥¸ ë¶€ë¶„ì„ í•˜ë‚˜ì˜ ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì§€ ì•Šë‹¤.   ê²°ê³¼ì ìœ¼ë¡œ, JSP ê°™ì€ ë·° í…œí”Œë¦¿ì€ í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ”ë° ìµœì í™” ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì— ëŒ€í•œ ì—…ë¬´ë§Œ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì ì´ë‹¤.   ì´ëŸ¬í•œ ë¶€ë¶„ë“¤ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ MVC íŒ¨í„´ì´ë‹¤.   MVC íŒ¨í„´ì€ í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¡œ ì²˜ë¦¬í•˜ë˜ ê²ƒì„ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë·°ë¼ëŠ” ì˜ì—­ìœ¼ë¡œ ì„œë¡œ ì—­í• ì„ ë‚˜ëˆˆ ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³´í†µ ì´ MVC íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.      ì»¨íŠ¸ë¡¤ëŸ¬: HTTP ìš”ì²­ì„ ë°›ì•„ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•¨. ë·°ì— ì „ë‹¬í•  ê²°ê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì„œ ëª¨ë¸ì— ë‹´ëŠ”ë‹¤   ëª¨ë¸: ë·°ì— ì¶œë ¥í•  ë°ì´í„°ë¥¼ ë‹´ì•„ë‘ . ë·°ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ëª¨ë¸ì— ë‹´ì•„ì„œ ì „ë‹¬. ë”°ë¼ì„œ, ë·°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ë°ì´í„° ì ‘ê·¼ì„ ëª°ë¼ë„ ë˜ê³  í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì¼ì— ì§‘ì¤‘í•¨   ë·°: ëª¨ë¸ì— ë‹´ê²¨ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘ (HTML ìƒì„±)      1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @WebServlet(name = \"mvcMemberListServlet\", urlPatterns = \"/servlet-mvc/members\") public class MvcMemberListServlet extends HttpServlet {      private MemberRepository memberRepository = MemberRepository.getInstance();      @Override     protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {          List&lt;Member&gt; members = memberRepository.findAll();          request.setAttribute(\"members\", members);          String viewPath = \"/WEB-INF/views/members.jsp\";         RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);         dispatcher.forward(request, response);     } }      ì°¸ê³    ì»¨íŠ¸ë¡¤ëŸ¬ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‘˜ ìˆ˜ë„ ìˆì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë„ˆë¬´ ë§ì€ ì—­í• ì„ ë‹´ë‹¹í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€Â ì„œë¹„ìŠ¤ë¼ëŠ” ê³„ì¸µì„ ë³„ë„ë¡œ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.        ì°¸ê³  redirect vs forward   ë¦¬ë‹¤ì´ë ‰íŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì´ ë‚˜ê°”ë‹¤ê°€ í´ë¼ì´ì–¸íŠ¸ê°€ redirect ê²½ë¡œë¡œ ë‹¤ì‹œ ìš”ì²­. ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•  ìˆ˜ ìˆê³ , URL ê²½ë¡œë„ ì‹¤ì œë¡œ ë³€ê²½ ë¨.Â í¬ì›Œë“œëŠ”Â ì„œë²„ ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” í˜¸ì¶œì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•˜ì§€ ëª»í•¨        ì°¸ê³  DAO, DTO   DAOë€ ë°ì´í„° ì ‘ê·¼ ê°ì²´ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.  DTOëŠ” ë°ì´í„° ì „ì†¡ ê°ì²´ë¡œ ê³„ì¸µê°„ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•œë‹¤. ëª¨ë¸ì´ë€ ë¬¸ë§¥ì— ë”°ë¼ ì—¬ëŸ¬ê°€ì§€ ìš©ì–´ê°€ ìˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì´ë¼ê³  í•  ë•ŒëŠ” service, dto, dao ë“±ì„ í¬í•¨í•´ì„œ ì„¤ëª…í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.    ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-MVCPattern/",
        "teaser": ""
      },{
        "title": "ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëí„° êµ¬ì¡°",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get       HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ì–´ë””ì„œ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œì•„ë³´ì. HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬, ì¦‰ @RequestMappingì„ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ì¸ RequestMappingHandlerAdapter(ìš”ì²­ ë§¤í•‘ í—¨ë“¤ëŸ¬ ì–´ëŒ‘í„°)ì™€ ê´€ë ¨ì´ ìˆë‹¤.      í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ìš”ì²­ê³¼ ì‘ë‹µì„ ì£¼ê³  ë°›ì„ ë•Œ ë§¤ìš° ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ì™€ ë¦¬í„´ ê°’ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆì—ˆë‹¤. ì´ëŠ” ArgumentResolverì™€ ReturnValueHandlerë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•˜ë‹¤.   ArgumentResolver   ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë§¤ìš° ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŒŒë¼ë¯¸í„° ì¢…ë¥˜      HttpServletRequest, Model   @RequestParam, @ModelAttribute ê°™ì€ ì• ë…¸í…Œì´ì…˜   @RequestBody, HttpEntity ê°™ì€ HTTP ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„   ì´ì²˜ëŸ¼ ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° ì´ë ‡ê²Œ íŒŒë¼ë¯¸í„°ë¥¼ ìœ ì—°í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” ArgumentResolver ë•ë¶„ì´ë‹¤.   ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” RequestMappingHandlerAdapterëŠ” ArgumentResolverë¥¼ í˜¸ì¶œí•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬(í•¸ë“¤ëŸ¬)ê°€ í•„ìš”ë¡œ í•˜ëŠ” ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ì˜ ê°’(ê°ì²´)ì„ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ ëª¨ë‘ ì¤€ë¹„ë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ê°’ì„ ë„˜ê²¨ì¤€ë‹¤.   ìŠ¤í”„ë§ì€ 30ê°œê°€ ë„˜ëŠ” ArgumentResolverë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œë‹¤.      ì°¸ê³  ArgumentResolver ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„° ëª©ë¡   https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-arguments     ArgumentResolverì˜ ì •í™•í•œ ëª…ì¹­ì€ HandlerMethodArgumentResolverì¸ë° ì¤„ì—¬ì„œ ArgumentResolverë¼ ë¶€ë¥¸ë‹¤.   1 2 3 4 5 6 7 8 9 public interface HandlerMethodArgumentResolver { \tboolean supportsParameter(MethodParameter parameter); \t \t@Nullable \tObject resolveArgument(MethodParameter parameter,                           @Nullable ModelAndViewContainer mavContainer,                          NativeWebRequest webRequest,                           @Nullable WebDataBinderFactory binderFactory) throws Exception; }   ë™ì‘ ë°©ì‹   ArgumentResolverì˜ supportsParameter()ë¥¼ í˜¸ì¶œí•´ì„œ í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ëŠ”ì§€ ì²´í¬í•˜ê³ , ì§€ì›í•˜ë©´ resolverArgument()ë¥¼ í˜¸ì¶œí•´ì„œ ì‹¤ì œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ì´ë ‡ê²Œ ìƒì„±ëœ ê°ì²´ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œì‹œ ë„˜ì–´ê°„ë‹¤.   ArgumentResolverëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— í™•ì¥í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ReturnValueHandler   HandlerMethodReturnValueHandlerë¥¼ ì¤„ì—¬ì„œ ReturnValueHandlerë¼ ë¶€ë¥¸ë‹¤. ArgumentResolverì™€ ë¹„ìŠ·í•œë°, ì´ê²ƒì€ ì‘ë‹µ ê°’ì„ ë³€í™˜í•˜ê³  ì²˜ë¦¬í•œë‹¤.   ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ Stringìœ¼ë¡œ ë·° ì´ë¦„ì„ ë°˜í™˜í•´ë„, ë™ì‘í•˜ëŠ” ì´ìœ ê°€ ë°”ë¡œ ReturnValueHandler ë•ë¶„ì´ë‹¤.      ì°¸ê³  ê°€ëŠ¥í•œ ì‘ë‹µ ê°’ ëª©ë¡   https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-return-types        HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” @RequestBodyë„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í•„ìš”ë¡œ í•˜ëŠ” íŒŒë¼ë¯¸í„°ì˜ ê°’ì— ì‚¬ìš©ëœë‹¤. @ResponseBodyì˜ ê²½ìš°ë„ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë°˜í™˜ ê°’ì„ ì´ìš©í•œë‹¤.   ìš”ì²­ì˜ ê²½ìš° @RequestBodyë¥¼ ì²˜ë¦¬í•˜ëŠ” ArgumentResolverê°€ ìˆê³ , HttpEntityë¥¼ ì²˜ë¦¬í•˜ëŠ” ArgumentResolverê°€ ìˆë‹¤. ì´ ArgumentResolverë“¤ì´ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤. (HTTP ë©”ì‹œì§€ ì»¨ë²„í„° - read())   ì‘ë‹µì˜ ê²½ìš° @ResponseBodyì™€ HttpEntityë¥¼ ì²˜ë¦¬í•˜ëŠ” ReturnValueHandlerê°€ ìˆë‹¤. ê·¸ë¦¬ê³  ì—¬ê¸°ì—ì„œ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í˜¸ì¶œí•´ì„œ ì‘ë‹µ ê²°ê³¼ë¥¼ ë§Œë“ ë‹¤. (HTTP ë©”ì‹œì§€ ì»¨ë²„í„° - write())   í™•ì¥   ìŠ¤í”„ë§ì€ ë‹¤ìŒì„ ëª¨ë‘ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ì—¬ ì–¸ì œë“ ì§€ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.      HandlerMethodArgumentResolver   HandlerMethodReturnValueHandler   HttpMessageConverter   ê¸°ëŠ¥ í™•ì¥ì€ WebMvcConfigurerë¥¼ ìƒì† ë°›ì•„ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤.   ìŠ¤í”„ë§ì€ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ ê¸°ëŠ¥ì„ í™•ì¥í•  ì¼ì´ ë§ì§€ëŠ” ì•Šìœ¼ë‚˜ ì•Œì•„ëŠ” ë‘ì–´ì•¼ í•œë‹¤.      ì°¸ê³    ArgumentResolver, ReturnValueHandler ë§Œìœ¼ë¡œ í•´ê²°ì´ ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì—” HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•œë‹¤.    ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-RequestMappingHandlerAdapter/",
        "teaser": ""
      },{
        "title": "ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   DispatcherServlet   ìŠ¤í”„ë§ MVCë„ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìœ¼ë©° ìŠ¤í”„ë§ MVCì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ë‹¤. ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì€ ìŠ¤í”„ë§ MVCì˜ í•µì‹¬ì´ë‹¤.   í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ê´€ë ¨ëœ ë‚´ìš© (ë§í¬)      DispatcherServletë„ ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ HttpServletì„ ìƒì†ë°›ì•„ì„œ ì‚¬ìš©í•˜ë©° ì„œë¸”ë¦¿ìœ¼ë¡œ ë™ì‘í•œë‹¤.   1 DispatcherServlet â†’ FrameworkServlet â†’ HttpServletBean â†’ HttpServlet   ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispatcherServletì„ ì„œë¸”ë¦¿ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œ(urlPatterns=â€/â€)ì— ëŒ€í•´ ë§¤í•‘í•œë‹¤.   DispatcherServlet ìš”ì²­ íë¦„      ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ë©´ HttpServletì´ ì œê³µí•˜ëŠ” service()ê°€ í˜¸ì¶œëœë‹¤.   ìŠ¤í”„ë§ MVCëŠ” DispatcherServletì˜ ë¶€ëª¨ì¸ FrameworkServletì—ì„œ service()ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•œë‹¤.   FrameworkServlet.service()ë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ì„œ DispatcherServlet.doDispatch()ê°€ í˜¸ì¶œë¨   DispatcherServlet.doDispatch()   DispatcherServletì˜ í•µì‹¬ ì½”ë“œëŠ” doDispatch() ë©”ì„œë“œì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 // DispatcherServletì˜ í•µì‹¬ ì½”ë“œ protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {      HttpServletRequest processedRequest = request;     HandlerExecutionChain mappedHandler = null;     ModelAndView mv = null;      // 1. í•¸ë“¤ëŸ¬ ì¡°íšŒ     mappedHandler = getHandler(processedRequest);     if (mappedHandler == null) {         noHandlerFound(processedRequest, response);         return;     }      // 2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ - í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„°     HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());      // 3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ -&gt; 4. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ í•¸ë“¤ëŸ¬ ì‹¤í–‰ -&gt; 5. ModelAndView ë°˜í™˜     mv = ha.handle(processedRequest, response, mappedHandler.getHandler());      processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);  }  private void processDispatchResult(HttpServletRequest request, HttpServletResponse response, \t\t\tHandlerExecutionChain mappedHandler, ModelAndView mv, Exception exception) throws Exception {      // ë·° ë Œë”ë§ í˜¸ì¶œ     render(mv, request, response);  }  protected void render(ModelAndView mv, HttpServletRequest request,     HttpServletResponse response) throws Exception {      View view;     String viewName = mv.getViewName();      // 6. ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ì„œ ë·° ì°¾ê¸°, 7. View ë°˜í™˜     view = resolveViewName(viewName, mv.getModelInternal(), locale, request);      // 8. ë·° ë Œë”ë§     view.render(mv.getModelInternal(), request, response); }   DispatcherServlet ë™ì‘ í”„ë¡œì„¸ìŠ¤         í•¸ë“¤ëŸ¬ ì¡°íšŒ: í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ìš”ì²­ URLì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ë¥¼ ì°¾ëŠ”ë‹¤.   í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ: í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ëŠ”ë‹¤.   ì°¾ì•˜ìœ¼ë©´ ì²˜ë¦¬í•  ë°ì´í„°ë¥¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì‹¤í–‰í•˜ì—¬ ì‹¤ì œ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ì— ì „ë‹¬í•œë‹¤.   ModelAndView ë°˜í™˜: í•¸ë“¤ëŸ¬ê°€ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì—¬ ë°˜í™˜í•˜ë©´ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ModelAndViewë¡œÂ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤.   viewResolver í˜¸ì¶œ: ë·° ë¦¬ì¡¸ë²„ë¥¼ ì°¾ê³  ì‹¤í–‰í•œë‹¤.            JSPì˜ ê²½ìš° InternalResourceViewResolverê°€ ìë™ ë“±ë¡ë˜ê³  ì‚¬ìš©ë¨           View ë°˜í™˜: ë·° ë¦¬ì¡¸ë²„ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë¬¼ë¦¬ ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ê³  ë Œë”ë§ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë·° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.            JSPì˜ ê²½ìš° InternalResourceView(JstlView) ë¥¼ ë°˜í™˜í•˜ëŠ”ë°, ë‚´ë¶€ì— forward() ë¡œì§ì´ ìˆë‹¤           ë·° ë Œë”ë§: ë·°ë¥¼ í†µí•´ì„œ ë·°ë¥¼ ë Œë”ë§.   ìŠ¤í”„ë§ MVCì˜ ê°•ì ì€ DispatcherServlet ì½”ë“œì˜ ë³€ê²½ ì—†ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë³€ê²½, í™•ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. (ëŒ€ë¶€ë¶„ì„ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì´ë‹¤.)      ì°¸ê³  ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ ëª©ë¡          í•¸ë“¤ëŸ¬ ë§¤í•‘: org.springframework.web.servlet.HandlerMapping     í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°: org.springframework.web.servlet.HandlerAdapter     ë·° ë¦¬ì¡¸ë²„: org.springframework.web.servlet.ViewResolver     ë·°: org.springframework.web.servlet.View      í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°   ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”í•˜ë‹¤.   í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ì§€ê¸ˆì€ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ê³¼ê±°ì— ì£¼ë¡œ ì‚¬ìš©í–ˆë˜ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê°„ë‹¨í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚´í´ë³´ì.   Controller ì¸í„°í˜ì´ìŠ¤   ê³¼ê±° ë²„ì „ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤. í˜„ì¬ëŠ” @Controller ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œë‹¤.   1 2 3 4 // org.springframework.web.servlet.mvc.Controller public interface Controller { \tModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception; }      ì°¸ê³  Controller ì¸í„°í˜ì´ìŠ¤ì™€ @ControllerëŠ” ì „í˜€ ë‹¤ë¦„     1 2 3 4 5 6 7 8 9 10 //import org.springframework.web.servlet.mvc.Controller;  @Component(\"/springmvc/old-controller\") public class OldController implements Controller {     @Override     public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {         System.out.println(\"OldController.handleRequest\");         return null;     } }   @ComponentëŠ” OldControllerëŠ” /springmvc/old-controllerë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœë‹¤. ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ URLì„ ë§¤í•‘ì‹œí‚¨ ê²ƒì´ë‹¤. ê²°ë¡ ì ìœ¼ë¡œ OldControllerê°€ ìŠ¤í”„ë§ ë¹ˆ, /springmvc/old-controllerì´ ë¹ˆ ì´ë¦„ì´ë‹¤.   í•¸ë“¤ëŸ¬ ë§¤í•‘   í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. (ì˜ˆ. ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì´ í•„ìš”í•¨)   í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°   í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”í•˜ë‹¤. (ì˜ˆ. Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•¨)   ìŠ¤í”„ë§ì€ ëŒ€ë¶€ë¶„ì˜ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ë¯¸ë¦¬ êµ¬í˜„í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— ê°œë°œìê°€ ì§ì ‘ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ êµ¬í˜„í•˜ëŠ” ì¼ì´ ê±°ì˜ ì—†ë‹¤.   ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ ì–´ëŒ‘í„°   ìŠ¤í”„ë§ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘, í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª¨ë‘ ìˆœì„œëŒ€ë¡œ ì°¾ê³  ì—†ìœ¼ë©´ ë‹¤ìŒ ìˆœì„œë¡œ ë„˜ì–´ê°„ë‹¤. (ì¢…ë¥˜ëŠ” ì‹¤ì œë¡œ ë” ë§ì§€ë§Œ, ì£¼ìš” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ë§Œ ì†Œê°œí•¨)   HandlerMapping   1 2 0 = RequestMappingHandlerMapping : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš© 1 = BeanNameUrlHandlerMapping : ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.   HandlerAdapter   1 2 3 0 = RequestMappingHandlerAdapter : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš© 1 = HttpRequestHandlerAdapter : HttpRequestHandler ì²˜ë¦¬ 2 = SimpleControllerHandlerAdapter : Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜X, ê³¼ê±°ì— ì‚¬ìš©) ì²˜ë¦¬      í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ            HandlerMappingì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ, í•¸ë“¤ëŸ¬ë¥¼ ì°¾ìŒ       ì´ ê²½ìš°, ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ ê·¸ëŒ€ë¡œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” BeanNameUrlHandlerMappingê°€ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ OldControllerë¥¼ ë°˜í™˜í•¨           í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ            HandlerAdapterì˜ supports()ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œ       SimpleControllerHandlerAdapterê°€ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ë¨           í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰            ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ SimpleControllerHandlerAdapterë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤Œ       SimpleControllerHandlerAdapterëŠ” í•¸ë“¤ëŸ¬ì¸ OldControllerë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜           ì •ë¦¬ - OldController í•¸ë“¤ëŸ¬ë§¤í•‘, ì–´ëŒ‘í„°   OldControllerë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì‚¬ìš©ëœ ê°ì²´      HandlerMapping = BeanNameUrlHandlerMapping (ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ìŒ)   HandlerAdapter = SimpleControllerHandlerAdapter (Controller ì¸í„°í˜ì´ìŠ¤ ì²˜ë¦¬)   RequestMappingHandlerMapping   ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” RequestMappingHandlerMapping, RequestMappingHandlerAdapter ì´ê³  ì•ì— ë¶€ë¶„ë§Œ ë”°ì„œ RequestMappingì´ë¼ í•œë‹¤.   @RequestMappingì€ í˜„ì¬ ìŠ¤í”„ë§ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì›í•˜ëŠ” ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ì´ë‹¤. (ì‹¤ë¬´ì—ì„œ 99.9% ì‚¬ìš©)   ë·° ë¦¬ì¡¸ë²„   ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ”Â InternalResourceViewResolverÂ ë¼ëŠ”Â ë·° ë¦¬ì¡¸ë²„ë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ”ë° ì´ë•Œ, application.propertiesì— ë“±ë¡í•œ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•œë‹¤.   1 2 spring.mvc.view.prefix=/WEB-INF/views/ spring.mvc.view.suffix=.jsp   ë·° ë¦¬ì¡¸ë²„ ë™ì‘ ë°©ì‹   ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” ë·° ë¦¬ì¡¸ë²„   1 2 1 = BeanNameViewResolver : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë·°ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (ì˜ˆ: ì—‘ì…€ íŒŒì¼ ìƒì„± ê¸°ëŠ¥ì— ì‚¬ìš©) 2 = InternalResourceViewResolver : JSPë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë·°ë¥¼ ë°˜í™˜í•œë‹¤.      í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í˜¸ì¶œ            í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ new-formì´ë¼ëŠ” ë…¼ë¦¬ ë·° ì´ë¦„ì„ íšë“           ViewResolver í˜¸ì¶œ            new-formì´ë¼ëŠ” ë·° ì´ë¦„ìœ¼ë¡œ viewResolverë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œ       BeanNameViewResolverëŠ” new-formì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ë·°ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ë° ì—†ë‹¤       ê·¸ ë‹¤ìŒ ìˆœìœ„ì¸ InternalResourceViewResolverê°€ í˜¸ì¶œë¨           InternalResourceViewResolver            ì´ ë·° ë¦¬ì¡¸ë²„ëŠ” InternalResourceViewë¥¼ ë°˜í™˜           ë·° - InternalResourceView            InternalResourceViewëŠ” JSPì²˜ëŸ¼ í¬ì›Œë“œ forward()ë¥¼ í˜¸ì¶œí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©           view.render()            view.render()ê°€ í˜¸ì¶œë˜ê³  InternalResourceViewëŠ” forward()ë¥¼ ì‚¬ìš©í•´ì„œ JSPë¥¼ ì‹¤í–‰í•¨              ì°¸ê³    Thymeleaf ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ ThymeleafViewResolverë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤. ìµœê·¼ì—ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì´ëŸ° ì‘ì—…ë„ ëª¨ë‘ ìë™í™”í•´ì¤€ë‹¤.    ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-DispatcherServlet/",
        "teaser": ""
      },{
        "title": "HTTP ë©”ì‹œì§€ ì»¨ë²„í„°",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get       ë·° í…œí”Œë¦¿ìœ¼ë¡œ HTMLì„ ìƒì„±í•´ì„œ ì‘ë‹µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP APIì²˜ëŸ¼ JSON ë°ì´í„°ë¥¼ HTTP ë©”ì‹œì§€ ë°”ë””ì—ì„œ ì§ì ‘ ì½ê±°ë‚˜ ì“°ëŠ” ê²½ìš° HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ë‹¤.         viewResolver ëŒ€ì‹ ì— HttpMessageConverterê°€ ë™ì‘   ê¸°ë³¸ ë¬¸ìì²˜ë¦¬: StringHttpMessageConverter (ë¬¸ìë¥¼ ë°˜í™˜í•  ë•Œ)   ê¸°ë³¸ ê°ì²´ì²˜ë¦¬: MappingJackson2HttpMessageConverter (JSONì„ ë°˜í™˜í•  ë•Œ)      ì°¸ê³    ì‘ë‹µì˜ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ì˜ HTTP Accept í—¤ë”ì™€ ì„œë²„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë°˜í™˜ íƒ€ì… ì •ë³´ ë‘˜ì„ ì¡°í•©í•´ì„œ HttpMessageConverterê°€ ì„ íƒëœë‹¤.     ìŠ¤í”„ë§ MVCì˜ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.      HTTP ìš”ì²­: @RequestBodyë¥¼ ì‚¬ìš©í•˜ì—¬ JSONì„ ìë°”ê°ì²´ë¡œ ë³€í™˜, HttpEntity(RequestEntity)   HTTP ì‘ë‹µ: @ResponseBodyë¥¼ ì‚¬ìš©í•˜ì—¬ ìë°”ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜, HttpEntity(ResponseEntity)   ì¸í„°í˜ì´ìŠ¤ì¸ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì´ìš©í•˜ì—¬ JSON, Stirng, Byte íƒ€ì…ìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.   HTTP ë©”ì‹œì§€ ì»¨ë²„í„° ì¸í„°í˜ì´ìŠ¤   1 2 3 4 5 6 7 8 9 10 11 12 13 14 package org.springframework.http.converter;  public interface HttpMessageConverter&lt;T&gt; {      boolean canRead(Class&lt;?&gt; clazz, @Nullable MediaType mediaType);     boolean canWrite(Class&lt;?&gt; clazz, @Nullable MediaType mediaType);      List&lt;MediaType&gt; getSupportedMediaTypes();      T read(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage)             throws IOException, HttpMessageNotReadableException;     void write(T t, @Nullable MediaType contentType, HttpOutputMessage outputMessage)             throws IOException, HttpMessageNotWritableException; }      HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” HTTP ìš”ì²­, HTTP ì‘ë‹µ ë‘˜ ë‹¤ ì‚¬ìš©ëœë‹¤.   canRead() , canWrite() : ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ í•´ë‹¹ í´ë˜ìŠ¤, ë¯¸ë””ì–´íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ì§€ ì²´í¬   read() , write() : ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ì„œ ë©”ì‹œì§€ë¥¼ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥   ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë©”ì‹œì§€ ì»¨ë²„í„° (ì¼ë¶€ ìƒëµ)   1 2 3 4 0 = ByteArrayHttpMessageConverter: application/octet-stream 1 = StringHttpMessageConverter: text/plain 2 = MappingJackson2HttpMessageConverter: application/json ...   ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë‹¤ì–‘í•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì œê³µí•˜ëŠ”ë°, ëŒ€ìƒ í´ë˜ìŠ¤ íƒ€ì…ê³¼ ë¯¸ë””ì–´ íƒ€ì… ë‘˜ì„ ì²´í¬í•´ì„œ ì‚¬ìš©ì—¬ë¶€ë¥¼ ê²°ì •í•¨. (ë§Œì•½, ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ìš°ì„ ìˆœìœ„ê°€ ë„˜ì–´ê°)   HTTP ìš”ì²­ ë°ì´í„° ì½ê¸°      HTTP ìš”ì²­ì´ ì˜¤ê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @RequestBody , HttpEntity íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´   ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì‘ë™í•˜ë©°   ë©”ì‹œì§€ë¥¼ ì½ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ canRead()ë¥¼ í˜¸ì¶œí•œë‹¤.            ëŒ€ìƒ í´ë˜ìŠ¤ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ê°€.                    ì˜ˆ) @RequestBody ì˜ ëŒ€ìƒ í´ë˜ìŠ¤ (byte[] , String , HelloData)                       HTTP ìš”ì²­ì˜ Content-Type ë¯¸ë””ì–´ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ê°€.                    ì˜ˆ) text/plain , application/json , /                           canRead() ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ read()ë¥¼ í˜¸ì¶œí•´ì„œ ê°ì²´ ìƒì„±í•˜ê³ , ë°˜í™˜í•œë‹¤.   HTTP ì‘ë‹µ ë°ì´í„° ìƒì„±      ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @ResponseBody , HttpEntityë¡œ ê°’ì´ ë°˜í™˜ë˜ë©´   ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ ë©”ì‹œì§€ë¥¼ ì“¸ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ canWrite()ë¥¼ í˜¸ì¶œí•œë‹¤.            ëŒ€ìƒ í´ë˜ìŠ¤ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ê°€.                    ì˜ˆ) returnì˜ ëŒ€ìƒ í´ë˜ìŠ¤ (byte[] , String , HelloData)                       HTTP ìš”ì²­ì˜ Accept ë¯¸ë””ì–´ íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ê°€.(ë” ì •í™•íˆëŠ” @RequestMapping ì˜ produces)                    ì˜ˆ) text/plain , application/json , /                            canWrite() ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ write()ë¥¼ í˜¸ì¶œí•´ì„œ HTTP ì‘ë‹µ ë©”ì‹œì§€ ë°”ë””ì— ë°ì´í„°ë¥¼ ìƒì„±í•œë‹¤.                                                  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-HTTPMessageConverter/",
        "teaser": ""
      },{
        "title": "ë¡œê¹…",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   ë¡œê¹…   ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” System.out.println()ê°™ì€ ì‹œìŠ¤í…œ ì½˜ì†” ì‚¬ìš©í•˜ì§€ ì•Šê³  ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ ì¶œë ¥í•¨       ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬   ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬(spring-boot-starter-logging) í¬í•¨       ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬      SLF4J   Logback       ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Logback, Log4J, Log4J2 ë“±ë“± ìˆ˜ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬   ê·¸ê²ƒì„ í†µí•©í•´ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ SLF4J ë¼ì´ë¸ŒëŸ¬ë¦¬   SLF4JëŠ” ì¸í„°í˜ì´ìŠ¤ê³ , ê·¸ êµ¬í˜„ì²´ë¡œ Logback ê°™ì€ ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒ   ì‹¤ë¬´ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Logbackì„ ëŒ€ë¶€ë¶„ ì‚¬ìš©       ë¡œê·¸ ì„ ì–¸      private Logger log = LoggerFactory.getLogger(getClass());   private static final Logger log = LoggerFactory.getLogger(Xxx.class)   @Slf4j : ë¡¬ë³µ ì‚¬ìš© ê°€ëŠ¥       ë¡œê·¸ í˜¸ì¶œ      log.info(â€helloâ€)   System.out.println(â€hello)       ì‹œìŠ¤í…œ ì½˜ì†”ë¡œ ì§ì ‘ ì¶œë ¥í•˜ëŠ” ê²ƒë³´ë‹¤ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” í•­ìƒ ë¡œê·¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 package hello.springmvc.basic;  import lombok.extern.slf4j.Slf4j; import org.slf4j.Logger; import org.slf4j.LoggerFactory; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  //@Slf4j @RestController public class LogTestController {      private final Logger log = LoggerFactory.getLogger(getClass());      @RequestMapping(\"/log-test\")     public String logTest() {         String name = \"Spring\";          log.trace(\"trace log={}\", name);         log.debug(\"debug log={}\", name);         log.info(\" info log={}\", name);         log.warn(\" warn log={}\", name);         log.error(\"error log={}\", name);          // ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ a+b ê³„ì‚° ë¡œì§ì´ ë¨¼ì € ì‹¤í–‰ë¨, ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ X         log.debug(\"String concat log=\" + name);          return \"ok\";     } }   @RestController      @ControllerëŠ” ë°˜í™˜ê°’ì´ Stringì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹ë¨. ë”°ë¼ì„œ, ë·°ë¥¼ ì°¾ê³  ë·°ê°€ ëœë”ë§ ëœë‹¤   @RestControllerëŠ” ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹Œ, HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥ë¨. ë”°ë¼ì„œ, ì‹¤í–‰ ê²°ê³¼ë¡œ ok ë©”ì„¸ì§€ë¥¼ ë°›ëŠ”ë‹¤. @ResponseBodyì™€ ê´€ë ¨ì´ ìˆìŒ       í…ŒìŠ¤íŠ¸      ë¡œê·¸ê°€ ì¶œë ¥ë˜ëŠ” í¬ë§· í™•ì¸            ì‹œê°„, ë¡œê·¸ë ˆë²¨, í”„ë¡œì„¸ìŠ¤ID, ì“°ë ˆë“œëª…, í´ë˜ìŠ¤ëª…, ë¡œê·¸ ë©”ì‹œì§€           ë¡œê·¸ ë ˆë²¨ ì„¤ì •ì„ ë³€ê²½í•´ì„œ ì¶œë ¥ ê²°ê³¼ í™•ì¸            LEVEL: TRACE &gt; DEBUG &gt; INFO &gt; WARN &gt; ERROR       ê°œë°œ ì„œë²„ëŠ” debug ì¶œë ¥       ìš´ì˜ ì„œë²„ëŠ” info ì¶œë ¥                @Slf4jë¡œ ë³€ê²½: ë‹¤ìŒ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì„œ ë¡œê·¸ë¥¼ ì„ ì–¸í•´ì¤€ë‹¤. ê°œë°œìëŠ” í¸ë¦¬í•˜ê²Œ log ë¼ê³  ì‚¬ìš©.       1 2   private static final org.slf4j.Logger log =    org.slf4j.LoggerFactory.getLogger(RequestHeaderController.class);               ë¡œê·¸ë ˆë²¨ ì„¤ì •   application.properties   1 2 3 4 5 #ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì •(ê¸°ë³¸ info(debug)) logging.level.root=info  #hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì • logging.level.hello.springmvc=debug       ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•      log.debug(â€data=â€+data)            ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•´ë„ í•´ë‹¹ ì½”ë“œì— ìˆëŠ” â€œdata=â€+dataê°€ ì‹¤í–‰ë˜ì–´ë²„ë¦¼ (ë©”ëª¨ë¦¬ ì‚¬ìš©, cpuì‚¬ìš©)           log.debug(â€data={}â€, data)            ë¡œê·¸ ì¶œë ¥ ë ˆë²¨ì„ infoë¡œ ì„¤ì •í•˜ë©´ ì•„ë¬´ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠìŒ. ë”°ë¼ì„œ, ì•ê³¼ ê°™ì€ ì˜ë¯¸ì—†ëŠ” ì—°ì‚°ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤               ë¡œê·¸ ì‚¬ìš©ì‹œ ì¥ì       ì“°ë ˆë“œ ì •ë³´, í´ë˜ìŠ¤ ì´ë¦„ ê°™ì€ ë¶€ê°€ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆê³ , ì¶œë ¥ ëª¨ì–‘ì„ ì¡°ì •í•  ìˆ˜ ìˆìŒ   ê°œë°œ ì„œë²„ì™€ ìš´ì˜ ì„œë²„ ê°ê° ìƒí™©ì— ë§ê²Œ ë¡œê·¸ ë ˆë²¨ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŒ â†’ ì„¤ì •íŒŒì¼ì„ í†µí•´   ì‹œìŠ¤í…œ ì•„ì›ƒ ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ íŒŒì¼, ë„¤íŠ¸ì›Œí¬ ë“± ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ì— ë‚¨ê¸¸ ìˆ˜ ìˆìŒ. íŠ¹íˆ, íŒŒì¼ë¡œ ë‚¨ê¸¸ ë•Œ ì¼ë³„, íŠ¹ì • ìš©ëŸ‰ì— ë”°ë¼ ë¡œê·¸ ë¶„í•  ê°€ëŠ¥í•¨   ì„±ëŠ¥ë„ System.out ë³´ë‹¤ ì¢‹ìŒ. (ë‚´ë¶€ ë²„í¼ë§, ë©€í‹° ì“°ë ˆë“œ ë“±) ì‹¤ë¬´ì—ì„œëŠ” ê¼­ ë¡œê·¸ë¥¼ ì‚¬ìš©!  ","categories": ["web"],
        "tags": ["web","Spring"],
        "url": "/web/Spring-Logging/",
        "teaser": ""
      },{
        "title": "PRG, Post/Redirect/Get",
        "excerpt":"ëª©ì°¨      ì›¹ ì„œë²„ì™€ WAS   ì„œë¸”ë¦¿   ì“°ë ˆë“œì™€ ì“°ë ˆë“œ í’€   SSR, CSR   MVC íŒ¨í„´   êµ¬ MVC íŒ¨í„´ê³¼ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬   ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿   ë¡œê¹…   HTTP ë©”ì‹œì§€ ì»¨ë²„í„°   ìš”ì²­ ë§¤í•‘ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° êµ¬ì¡°   PRG Post/Redirect/Get   PRG íŒ¨í„´   PRG íŒ¨í„´ì´ë€ ì›¹ ê°œë°œ íŒ¨í„´ ì¤‘ ìì£¼ ì“°ì´ëŠ” íŒ¨í„´ìœ¼ë¡œ HTTP POST ìš”ì²­ì— ëŒ€í•´ GET ë°©ì‹ì˜ ì›¹í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œí‚¤ëŠ” íŒ¨í„´ì´ë‹¤.   PRG íŒ¨í„´ì„ ì‚¬ìš©í•˜ê²Œ ëœ ì´ìœ ëŠ” ì•„ë˜ ì½”ë“œë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤. ì´ ì½”ë“œëŠ” ìƒí’ˆì„ ë“±ë¡í•˜ê³  ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ëŠ” ì½”ë“œì´ë‹¤. ì´ ì½”ë“œì—ì„œëŠ” ì˜¤ë¥˜ê°€ ìˆë‹¤. ìƒí’ˆì„ ë“±ë¡ì„ ì™„ë£Œí•˜ê³  ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ìƒí’ˆì´ ìƒˆë¡œ ë“±ë¡ëœë‹¤.   1 2 3 4 5 @PostMapping(\"/add\") public String addItemV5(Item item) {     itemRepository.save(item);     return \"/basic/item\" }   ì™œ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ìƒˆë¡œ ë“±ë¡ë ê¹Œ? ìƒˆë¡œê³ ì¹¨ì€ í´ë¼ì´ì–¸íŠ¸ ë§ˆì§€ë§‰ì— ë³´ë‚¸ ìš”ì²­ì„ ë‹¤ì‹œ ë³´ë‚¸ë‹¤. ì¦‰, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ë³´ë‚¸ ë§ˆì§€ë§‰ ìš”ì²­ì´ ìƒí’ˆì„ ë“±ë¡í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ìƒˆë¡œê³ ì¹¨ì„ í•  ë•Œë§ˆë‹¤ ìƒí’ˆì´ ìƒˆë¡œ ë“±ë¡ëœë‹¤.   PRG - ìƒˆë¡œê³ ì¹¨ ë¬¸ì œ í•´ê²°   PRG íŒ¨í„´ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œ ê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•œë‹¤. ìƒˆë¡œ ê³ ì¹¨ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ìƒí’ˆ ì €ì¥ í›„ì— ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í˜¸ì¶œí•´ì£¼ë©´ ëœë‹¤.   ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ì˜ ì˜í–¥ìœ¼ë¡œ ìƒí’ˆ ì €ì¥ í›„ì— ì‹¤ì œ ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™í•œë‹¤. ë”°ë¼ì„œ, ë§ˆì§€ë§‰ì— í˜¸ì¶œí•œ ë‚´ìš©ì´ ìƒí’ˆ ìƒì„¸ í™”ë©´ì¸ â€˜GET /items/{id}â€™ ê°€ ë˜ëŠ” ê²ƒì´ë‹¤. ì´í›„ ìƒˆë¡œê³ ì¹¨ì„ í•´ë„ ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê²Œ ë˜ë¯€ë¡œ ìƒˆë¡œ ê³ ì¹¨ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 /**  * PRG - Post/Redirect/Get  */ @PostMapping(\"/add\") public String addItemV5(Item item) {     itemRepository.save(item);     // return \"/basic/item\"     return \"redirect:/basic/items/\" + item.getId(); }   ê¸°ì¡´ì—” ìƒí’ˆ ë“±ë¡ í›„ ë·° í…œí”Œë¦¿(/basic/item)ì„ ë¦¬í„´í•˜ì˜€ëŠ”ë° ì´ì   ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤. ì´ëŸ° ë¬¸ì œ í•´ê²° ë°©ì‹ì„ PRG Post/Redirect/Getë¼ í•œë‹¤.   PRG ì ìš© ì „      â€˜POST /items/add + ìƒí’ˆ ë°ì´í„°â€˜ë¥¼ ì„œë²„ë¡œ ì „ì†¡   ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ â€˜POST + 200 ì‘ë‹µì½”ë“œâ€™ ì „ë‹¬   í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë§ˆì§€ë§‰ìœ¼ë¡œ ìš”ì²­í•œ urlì€ â€˜POST /items/add + ìƒí’ˆ ë°ì´í„°â€˜ ì´ë‹¤   í´ë¼ì´ì–¸íŠ¸ì˜ ìƒˆë¡œê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤   ë”°ë¼ì„œ, ìƒˆë¡œê³ ì¹¨ì„ í• ë•Œë§ˆë‹¤ 1ë²ˆì„ ì „ì†¡í•œë‹¤. (ë¬´ì˜ë¯¸í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê²Œ ëœë‹¤)      PRG ì ìš© í›„      â€˜POST /items/add + ìƒí’ˆ ë°ì´í„°â€˜ë¥¼ ì„œë²„ë¡œ ì „ì†¡   ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ â€˜POST + 302 ì‘ë‹µ ì½”ë“œ + Locationâ€™ ì „ë‹¬   302 ì‘ë‹µ ì½”ë“œì™€ Locationì´ ì „ë‹¬ë˜ë©´ Locationì— ì íŒ urlì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.   ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— â€˜GET + /items/{id}â€™ë¥¼ ìš”ì²­í•˜ê²Œ ëœë‹¤.   í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë§ˆì§€ë§‰ìœ¼ë¡œ ìš”ì²­í•œ urlì€ â€˜GET + /items/{id}â€™ ì´ë‹¤   í´ë¼ì´ì–¸íŠ¸ì˜ ìƒˆë¡œê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤   ë”°ë¼ì„œ, ìƒˆë¡œê³ ì¹¨ì„ í• ë•Œë§ˆë‹¤ 5ë²ˆì„ ì „ì†¡í•œë‹¤. (ìƒˆë¡œê³ ì¹¨ ì˜¤ë¥˜ë¥¼ í•´ê²°!)         ì£¼ì˜   \"redirect:/basic/items/\" + item.getId()  redirectì—ì„œ +item.getId() ì²˜ëŸ¼ URLì— ë³€ìˆ˜ë¥¼ ë”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ URL ì¸ì½”ë”©ì´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ìœ„í—˜í•˜ë‹¤. ìœ„ì˜ ê²½ìš°ëŠ” intì—¬ì„œ ê´œì°®ì•˜ì§€ë§Œ ë¬¸ìì—´ì„ ì „ì†¡í•˜ê²Œ ë˜ì–´ í•œê¸€ì„ ì „ì†¡í•˜ê²Œ ëœë‹¤ë©´ ì¸ì½”ë”© ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ë¬¸ì œëŠ” ë‹¤ìŒì— ì„¤ëª…í•˜ëŠ” RedirectAttributesë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.     RedirectAttributes   RedirectAttributesë¥¼ ì‚¬ìš©í•˜ë©´ URL ì¸ì½”ë”©ë„ í•´ì£¼ê³ , pathVarible, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê¹Œì§€ ì²˜ë¦¬í•´ì¤€ë‹¤.      redirect:/basic/items/{itemId}            pathVariable ë°”ì¸ë”©: {itemId}       ë‚˜ë¨¸ì§€ëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬: ?status=true           1 2 3 4 5 6 7 8 9 10 /**  * RedirectAttributes  */ @PostMapping(\"/add\") public String addItemV6(Item item, RedirectAttributes redirectAttributes) {     Item savedItem = itemRepository.save(item);     redirectAttributes.addAttribute(\"itemId\", savedItem.getId());     redirectAttributes.addAttribute(\"status\", true);     return \"redirect:/basic/items/{itemId}\"; }   ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ â€˜http://localhost:8080/basic/items/3?status=trueâ€™ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-PRG/",
        "teaser": ""
      },{
        "title": "ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   SOLIDë€, í´ë¦°ì½”ë“œë¡œ ìœ ëª…í•œ ë¡œë²„íŠ¸ ë§ˆí‹´ì´ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì„ ì •ë¦¬í•œ ê²ƒì´ë‹¤.   SRP, OCP, LSP, ISP, DIPê°€ ìˆëŠ”ë° ê·¸ ì¤‘ OCPì™€ DIPê°€ ì¤‘ìš”í•˜ë‹¤.       1. SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single Responsibility Principle)   í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤. ì—¬ê¸°ì„œ í•˜ë‚˜ì˜ ì±…ì„ì´ë¼ëŠ” ë§ì€ ëª¨í˜¸í•  ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ ì±…ì„ì„ êµ¬ë¶„í•˜ëŠ” ì¤‘ìš”í•œ ê¸°ì¤€ì€ ë³€ê²½ì´ë‹¤. ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥¸ ê²ƒì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤.      ì˜ˆ) UI ë³€ê²½, ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬       2. OCP ê°œë°©-íì‡„ ì›ì¹™ (Open/Closed Principle)   ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤. í™•ì¥ì„ í•˜ë ¤ë©´ ë‹¹ì—°íˆ ê¸°ì¡´ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼í•œë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ, ë‹¤í˜•ì„±ì„ í™œìš©í•˜ë©´ ê°€ëŠ¥í•˜ë‹¤.   ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤ë©´ ì¦‰, ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•œë‹¤ë©´ OCPê°€ ê°€ëŠ¥í•˜ë‹¤.   ê·¸ëŸ¬ë‚˜, ë‹¤í˜•ì„±ë§Œìœ¼ë¡œëŠ” OCP ì›ì¹™ì„ ì§€í‚¬ ìˆ˜ ì—†ë‹¤. ì•„ë˜ ì˜ˆì œë¥¼ ì‚´í´ë³´ì.   1 2 3 public class MemberService {     private MemberRepository memberRepository = new MemoryMemberRepository(); }   1 2 3 4 5 6 7 8 public class MemberService {     // private MemberRepository memberRepository = new MemoryMemberRepository();     private MemberRepository memberRepository = new JdbcMemberRepository(); }  // MemberRepository: ì¸í„°í˜ì´ìŠ¤ // MemoryMemberRepository: êµ¬í˜„ ê°ì²´ // JdbcMemberRepository: êµ¬í˜„ ê°ì²´   MemberService í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì„ íƒí–ˆë‹¤. MemberRepositoryëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³  MemoryMemberRespositoryì™€ JdbcMemberRespositoryëŠ” êµ¬í˜„ì²´ì´ë‹¤. ë‹¤í˜•ì„±ì„ ì§€ì¼°ì§€ë§Œ ì½”ë“œì˜ ë³€ê²½ì€ ì¼ì–´ë‚¬ë‹¤.      MemberRepository m = new MemoryMemberRepository(); // ê¸°ì¡´ ì½”ë“œ   MemberRepository m = new JdbcMemberRepository(); // ë³€ê²½ ì½”ë“œ       êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤. ë¶„ëª… ë‹¤í˜•ì„±ì„ ì‚¬ìš©í–ˆì§€ë§Œ OCP ì›ì¹™ì„ ì§€í‚¬ ìˆ˜ ì—†ë‹¤. ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ? ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê´€ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ë³„ë„ì˜ ì¡°ë¦½, ì„¤ì •ìê°€ í•„ìš”í•˜ë‹¤. ì´í›„ì— ë“±ì¥í•˜ëŠ” DIê°œë…ê³¼ DI ì»¨í…Œì´ë„ˆê°€ ì´ ë¶€ë¶„ì„ ë‹´ë‹¹í•œë‹¤.       3. LSP ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ (Liskov Substitution Principle)   í”„ë¡œê·¸ë¨ì˜ ê°ì²´ëŠ” í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë‹¤í˜•ì„±ì—ì„œ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ê·œì•½ì„ ë‹¤ ì§€ì¼œì•¼ í•œë‹¤ëŠ” ê²ƒ, ë‹¤í˜•ì„±ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ì›ì¹™, ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ëŠ” ë¯¿ê³  ì‚¬ìš©í•˜ë ¤ë©´, ì´ ì›ì¹™ì´ í•„ìš”í•˜ë‹¤. ë‹¨ìˆœíˆ ì»´íŒŒì¼ì— ì„±ê³µí•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œëŠ” ì´ì•¼ê¸°ì´ë‹¤.      ì˜ˆ) ìë™ì°¨ ì¸í„°í˜ì´ìŠ¤ì˜ ì—‘ì…€ì€ ì•ìœ¼ë¡œ ê°€ë¼ëŠ” ê¸°ëŠ¥, ë’¤ë¡œ ê°€ê²Œ êµ¬í˜„í•˜ë©´ LSP ìœ„ë°˜, ëŠë¦¬ë”ë¼ë„ ì•ìœ¼ë¡œ ê°€ì•¼í•¨       4. ISP ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ (Interface Segregation Principle)   íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì—¬ëŸ¬ ê°œê°€ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ í•˜ë‚˜ë³´ë‹¤ ë‚«ë‹¤. ISP ì›ì¹™ì„ ì§€í‚¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ëª…í™•í•´ì§€ê³ , ëŒ€ì²´ ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§„ë‹¤.      ì˜ˆ)   ìë™ì°¨ ì¸í„°í˜ì´ìŠ¤ â†’ ìš´ì „ ì¸í„°í˜ì´ìŠ¤, ì •ë¹„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬   ì‚¬ìš©ì í´ë¼ì´ì–¸íŠ¸ â†’ ìš´ì „ì ì¸í„°í˜ì´ìŠ¤, ì •ë¹„ì‚¬ í´ë¼ì´ì–¸íŠ¸ë¡œ ë¶„ë¦¬   ë¶„ë¦¬í•˜ë©´ ì •ë¹„ ì¸í„°í˜ì´ìŠ¤ ìì²´ê°€ ë³€í•´ë„ ìš´ì „ì í´ë¼ì´ì–¸íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ       5. DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™ (Dependency Inversion Principle)   í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€˜ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.â€™ ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.   ë‹¤ì‹œë§í•˜ë©´, êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼ëŠ” ëœ»ì´ë‹¤.      ì˜ˆ) k3, ì•„ë°˜ë–¼, í…ŒìŠ¬ë¼(ìë™ì°¨ êµ¬í˜„)ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìë™ì°¨ ê°ì²´ì— ì§‘ì¤‘!   ì•ì—ì„œ ì´ì•¼ê¸°í•œ ì—­í• ì— ì˜ì¡´í•˜ê²Œ í•´ì•¼ í•œë‹¤ëŠ” ê²ƒê³¼ ê°™ì€ ì˜ë¯¸ì´ë‹¤. ê°ì²´ ì„¸ìƒë„ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•´ì•¼ ìœ ì—°í•˜ê²Œ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. êµ¬í˜„ì²´ì— ì˜ì¡´í•˜ê²Œ ë˜ë©´ ë³€ê²½ì´ ì•„ì£¼ ì–´ë ¤ì›Œì§„ë‹¤.   ê·¸ëŸ°ë° OCPì—ì„œ ì„¤ëª…í•œ MemberServiceëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ, êµ¬í˜„ í´ë˜ìŠ¤ë„ ë™ì‹œì— ì˜ì¡´í•œë‹¤. (ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì˜ ì˜ë¯¸ëŠ” ë‚´ê°€ ì € ì½”ë“œì— ëŒ€í•´ ì•Œê¸°ë§Œí•´ë„ ì˜ì¡´í•œë‹¤ê³  í•œë‹¤) ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? MemberServiceëŠ” MemberRepositoryì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„í•´ì•¼í•œë‹¤.       ìŠ¤í”„ë§ì˜ DI, DI ì»¨í…Œì´ë„ˆ ì œê³µì„ í†µí•´ ë‹¤í˜•ì„± + OCP, DIPë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-SOLID/",
        "teaser": ""
      },{
        "title": "ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€?   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€ ìŠ¤í”„ë§ì—ì„œ ìë°” ê°ì²´ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê³µê°„ì„ ë§í•œë‹¤. ì—¬ê¸°ì„œ ìë°” ê°ì²´ëŠ” ìŠ¤í”„ë§ ë¹ˆ(Bean)ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë¹ˆì˜ ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•´ì£¼ëŠ” ê³³ì´ë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì¢…ë¥˜ì—ëŠ” ApplicationContextì™€ BeanFactoryê°€ ìˆë‹¤. í•˜ì§€ë§Œ, BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±   ApplicationContextëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ê·¸ë¦¬ê³  ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ ë‹¤í˜•ì„±ì´ ì ìš©ë˜ì–´ ìˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” XML ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆê³  ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. (êµ¬í˜„ì²´)   1 2 3 // AnnotationConfigApplicationContextì€ ApplicationContextì˜ êµ¬í˜„ì²´ // AnnotationConfigApplicationContextì€ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);   ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ AppConfigë¥¼ ì „ë‹¬í•˜ë©´ AppConfigê°€ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ê³  ë‚´ë¶€ì— @Beanì´ ë¶™ì€ ë©”ì„œë“œë“¤ì´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœë‹¤.      ì°¸ê³    ApplicationContextëŠ” ì§ì ‘ ìƒì„±í•  ì¼ì´ ê±°ì˜ ì—†ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ì˜ ìµœìƒìœ„ í´ë”ì— ìˆëŠ” XxxApplication.java íŒŒì¼ì˜ SpringApplication.run(XxxApplication.class, args)ë¥¼ í†µí•´ ë‚´ë¶€ì—ì„œ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.     ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„±ê³¼ì •           ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±       new AnnotationConfigApplicationContext(AppConfig.class);ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ë©´ì„œ ë‚´ë¶€ì—ëŠ” ìŠ¤í”„ë§ ë¹ˆ ì €ì¥ì†Œê°€ ìƒì„±ë˜ëŠ”ë° í‚¤ê°€ ë¹ˆ ì´ë¦„ì´ê³  ê°’ì´ ë¹ˆ ê°ì²´ì´ë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” AppConfig ê°™ì€ ì„¤ì • ì •ë³´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.                   ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡       ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´(AppConfig)ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•œë‹¤. ë¹ˆ ì´ë¦„ì€ ë³´í†µ ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤. (ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ë„ ìˆë‹¤.)                     ì£¼ì˜     ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤. ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´ ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜ ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜ ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.                  ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •       ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI)í•œë‹¤. ë‹¨ìˆœíˆ ìë°” ì½”ë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, CGLIBë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ì´ì— ëŒ€í•œ ë‚´ìš©ì€ ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆì—ì„œ ì„¤ëª…í•œë‹¤.(ë§í¬ ë„£ì–´ì£¼ì!)                 ì°¸ê³    ìŠ¤í”„ë§ì€ ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ê·¸ëŸ°ë°, ì´ë ‡ê²Œ ìë°” ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ í•œë²ˆì— ì²˜ë¦¬ëœë‹¤. ì—¬ê¸°ì„œëŠ” ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ê°œë…ì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì„¤ëª…í–ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì—ì„œ ë‹¤ì‹œ ì„¤ëª…í•˜ê² ë‹¤.     ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ - ìë°” ì½”ë“œ, XML   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤. (ìë°” ì½”ë“œ, XML, Groovy ë“±)   ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ìë°” ì½”ë“œ ì„¤ì • ì‚¬ìš©   AnnotationConfigApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ìë°” ì½”ë“œë¡œëœ ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¸°ë©´ ëœë‹¤.   1 ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class)   XML ì„¤ì • ì‚¬ìš©   ìµœê·¼ì—ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ë§ì´ ì‚¬ìš©í•˜ë©´ì„œ XMLê¸°ë°˜ì˜ ì„¤ì •ì€ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ, ì•„ì§ ë§ì€ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ë“¤ì´ XMLë¡œ ë˜ì–´ ìˆê³ , ë˜ XMLì„ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì¥ì ë„ ìˆìœ¼ë¯€ë¡œ í•œë²ˆì¯¤ ë°°ì›Œë‘ëŠ” ê²ƒë„ ê´œì°®ë‹¤.   1 ApplicationContext ac = new GenericXmlApplicationContext(\"appConfig.xml\");   ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´   ìŠ¤í”„ë§ì´ ë‹¤ì–‘í•œ í˜•ì‹ì„ ì§€ì›í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” BeanDefinitionìœ¼ë¡œ ì¶”ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤. BeanDefinitionì„ ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ë¼ í•œë‹¤. @Bean, ë‹¹ ê°ê° í•˜ë‚˜ì˜ ë©”íƒ€ ì •ë³´ê°€ ìƒì„±ëœë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ ë©”íƒ€ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•œë‹¤. ì‹¤ë¬´ì—ì„œ BeanDefinitionì„ ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤.   BeanFactoryì™€ ApplicationContext   BeanFactory   BeanFactoryëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ë‹¤. ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•˜ë©° getBean()ì„ ì œê³µí•œë‹¤. ApplicationContextëŠ” BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µí•œë‹¤.      ì•ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì¢…ë¥˜ì—” BeanFactoryì™€ ApplicationContextê°€ ìˆì§€ë§Œ ì£¼ë¡œ ApplicationContextë¥¼ ì‚¬ìš©í•œë‹¤ê³  í–ˆë‹¤. ê·¸ ì´ìœ ëŠ” ApplicationContextì€ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ë¬¼ë¡ ì´ê³ , ìˆ˜ ë§ì€ ë¶€ê°€ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.   ApplicationContextê°€ ì œê³µí•˜ëŠ” ë¶€ê°€ê¸°ëŠ¥         ë©”ì‹œì§€ì†ŒìŠ¤ë¥¼ í™œìš©í•œ êµ­ì œí™” ê¸°ëŠ¥: ì˜ˆë¥¼ ë“¤ì–´ì„œ í•œêµ­ì—ì„œ ë“¤ì–´ì˜¤ë©´ í•œêµ­ì–´ë¡œ, ì˜ì–´ê¶Œì—ì„œ ë“¤ì–´ì˜¤ë©´ ì˜ì–´ë¡œ ì¶œë ¥   í™˜ê²½ë³€ìˆ˜: ë¡œì»¬, ê°œë°œ, ìš´ì˜ ë“±ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬   ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸: ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ëŠ” ëª¨ë¸ì„ í¸ë¦¬í•˜ê²Œ ì§€ì›   í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ: íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“±ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ   ApplicationContextëŠ” ë¹ˆ ê´€ë¦¬ê¸°ëŠ¥ + í¸ë¦¬í•œ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë”°ë¼ì„œ, BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ê³  ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContextë¥¼ ì‚¬ìš©í•œë‹¤.   ìŠ¤í”„ë§ ë¹ˆ   ìŠ¤í”„ë§ ë¹ˆì´ë€?   ìŠ¤í”„ë§ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ìë°” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.   ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ   ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•  ì¼ì€ ë§ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ëŸ°ê²Œ ìˆë‹¤ ì •ë„ë¡œë§Œ ì•Œì•„ë‘ì.   ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ   1 2 3 AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);  String[] beanDefinitionNames = ac.getBeanDefinitionNames();   ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸   1 2 3 4 5 6 AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);  // ac.getBean(ë¹ˆì´ë¦„, íƒ€ì…) MemberService memberService = ac.getBean(\"memberService\", MemberService.class); // ac.getBean(íƒ€ì…) MemberService memberService = ac.getBean(MemberService.class);   [ì°¸ê³ ]   #1ê³¼ #2 ì½”ë“œëŠ” ë™ì¼í•œ ì½”ë“œì´ë‹¤. í•˜ì§€ë§Œ #1ì²˜ëŸ¼ DiscountPolicyë¡œ ì“°ëŠ” ê²ƒì´ ì¢‹ë‹¤. #1 ì½”ë“œëŠ” ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•œ ì½”ë“œì´ë‹¤. DIP ì›ì¹™ì„ ì§€í‚¤ëŠ” ì½”ë“œê°€ ì¢‹ì€ ì½”ë“œì´ë‹¤. (ì—­í•  DiscountPolicy, êµ¬í˜„ rateDiscountPolicy)   1 2 3 4 5 6 7 8 9 10 11 // #1 @Bean public DiscountPolicy rateDiscountPolicy() {     return new RateDiscountPolicy(); }  // #2 @Bean public RateDiscountPolicy rateDiscountPolicy() {     return new RateDiscountPolicy(); }  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-SpringContainer-Bean/",
        "teaser": ""
      },{
        "title": "ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•      ìƒì„±ì ì£¼ì…   ìˆ˜ì •ì ì£¼ì… (setter ì£¼ì…)   í•„ë“œ ì£¼ì…   ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…   ìƒì„±ì ì£¼ì…   ìƒì„±ìë¥¼ í†µí•´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ëŠ” ë°©ë²•ì´ê³  í˜„ì¬ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤. ìƒì„±ì í˜¸ì¶œ ì‹œì ì— 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ë˜ê³  ë¶ˆë³€, í•„ìˆ˜ ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©ëœë‹¤. ë˜í•œ, ìƒì„±ìê°€ 1ê°œë§Œ ìˆìœ¼ë©´ @Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì… ëœë‹¤. (ìŠ¤í”„ë§ ë¹ˆì—ë§Œ í•´ë‹¹ë¨)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Component public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository;     private final DiscountPolicy discountPolicy;      // ìƒì„±ìê°€ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì— @Autowired ìƒëµ ê°€ëŠ¥ í•˜ë‹¤. \t\t// ìš”ì¦˜ì€ ìƒëµí•´ì„œ ë§ì´ ì‚¬ìš©í•¨     // @Autowired     public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {         this.memberRepository = memberRepository;         this.discountPolicy = discountPolicy;     } \t... }      ì°¸ê³  ë¶ˆë³€   ì¢‹ì€ ê°œë°œ ìŠµê´€ì€ ì œì•½, í•œê³„ì ì´ ìˆì–´ì•¼ í•œë‹¤.     ìƒì„±ì ì£¼ì…ì„ ê¶Œì¥í•˜ëŠ” ì´ìœ       ë¶ˆë³€            ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ê¹Œì§€ ë³€ê²½ë  ì¼ì´ ì—†ê³  ë³€í•˜ë©´ ì•ˆëœë‹¤.(ë¶ˆë³€í•´ì•¼ í•œë‹¤.)       ìˆ˜ì •ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ setXxx ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ì—´ì–´ë‘¬ì•¼ í•œë‹¤. publicì´ê¸° ë•Œë¬¸ì— ëˆ„êµ°ê°€ ì‹¤ìˆ˜ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, ë³€ê²½í•˜ë©´ ì•ˆë˜ëŠ” ë©”ì„œë“œë¥¼ ì—´ì–´ë‘ëŠ” ê²ƒì€ ì¢‹ì€ ì„¤ê³„ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.       ìƒì„±ì ì£¼ì…ì€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ë¯€ë¡œ ì´í›„ì— í˜¸ì¶œë˜ëŠ” ì¼ì´ ì—†ë‹¤. ë”°ë¼ì„œ, ë¶ˆë³€í•˜ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.           ëˆ„ë½            ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì£¼ì… ë°ì´í„°ê°€ ëˆ„ë½ ë˜ì—ˆì„ ë•Œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ì–´ë–¤ ê°’ì„ í•„ìˆ˜ë¡œ ì£¼ì…í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. (ê°€ì¥ ì¢‹ì€ ì˜¤ë¥˜ëŠ” ì»´íŒŒì¼ ì˜¤ë¥˜ì´ë‹¤.)       ìˆ˜ì •ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì‹¤í–‰ì€ ë˜ì§€ë§Œ NPE ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.           final í‚¤ì›Œë“œ            ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í•„ë“œì— finalì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ í˜¹ì‹œë¼ë„ ìƒì„±ìì— ê°’ì´ ì„¤ì •ë˜ì§€ ì•Šì•„ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ì‹œì ì— ë§‰ì•„ì¤€ë‹¤.              ì°¸ê³  ìˆœí™˜ì°¸ì¡°   Aâ†’Bâ†’Câ†’Aë¡œ ê° Beanë“¤ì˜ ìƒì„±ìê°€ ì„œë¡œë¥¼ ì˜ì¡´í•˜ëŠ” ë¬¸ì œë¥¼ ìˆœí™˜ì°¸ì¡°ë¼ í•œë‹¤. ê·¸ë¦¬ê³  ìˆœí™˜ì°¸ì¡°ê°€ ë°œìƒí•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. ì˜ì¡´ê´€ê³„ëŠ” ë‹¨ë°©í–¥ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.     ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)   setterë¼ ë¶ˆë¦¬ëŠ” í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µí•´ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì„ íƒ, ë³€ê²½ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©ë˜ë©°, ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @Component public class OrderServiceImpl implements OrderService {      private MemberRepository memberRepository;     private DiscountPolicy discountPolicy;      @Autowired     public void setMemberRepository(MemberRepository memberRepository) {         this.memberRepository = memberRepository;     }      @Autowired     public void setDiscountPolicy(DiscountPolicy discountPolicy) {         this.discountPolicy = discountPolicy;     } \t... }      ì°¸ê³    @Autowiredì˜ ê¸°ë³¸ ë™ì‘ì€ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì£¼ì…í•  ëŒ€ìƒì´ ì—†ì–´ë„ ë™ì‘í•˜ê²Œ í•˜ë ¤ë©´ @Autowired(required = false)ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.        ì°¸ê³  ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½   ìë°”ë¹ˆ í”„ë¡œí¼í‹°, ìë°”ì—ì„œëŠ” ê³¼ê±°ë¶€í„° í•„ë“œì˜ ê°’ì„ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³ , setXxx, getXxx ë¼ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°’ì„ ì½ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ê·œì¹™ì„ ë§Œë“¤ì—ˆëŠ”ë° ê·¸ê²ƒì´ ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì´ë‹¤.     í•„ë“œ ì£¼ì…   í•„ë“œì— ë°”ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì½”ë“œê°€ ê°„ê²°í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ í…ŒìŠ¤íŠ¸í•˜ê¸° í˜ë“¤ë‹¤ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì ì´ ìˆë‹¤. ë˜í•œ, DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ, ìˆœìˆ˜ ìë°”ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸ê°€ ë¶ˆê°€í•˜ë‹¤. ì´ ë°©ì‹ì€ ë˜ë„ë¡ ì‚¬ìš©í•˜ì§€ ë§ì.   1 2 3 4 5 6 7 8 9 @Component public class OrderServiceImpl implements OrderService {      @Autowired     private MemberRepository memberRepository;     @Autowired     private DiscountPolicy discountPolicy;     ... }   ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…   ì¼ë°˜ ë©”ì„œë“œë¥¼ í†µí•´ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.      ì°¸ê³    ë‹¹ì—°í•œ ì´ì•¼ê¸°ì§€ë§Œ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ì–´ì•¼ ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ ë¹ˆì´ ì•„ë‹Œ Member ê°™ì€ í´ë˜ìŠ¤ì—ì„œ @Autowired ì½”ë“œë¥¼ ì ìš©í•´ë„ ì•„ë¬´ ê¸°ëŠ¥ë„ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.     ë¡¬ë³µê³¼ ìµœì‹  íŠ¸ë Œë“œ   ë¡¬ë³µì„ ì´ìš©í•´ ìƒì„±ì ì£¼ì… ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ì„œë„ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤. ë¡¬ë¶ì—ì„œ ì œê³µí•˜ëŠ” @RequiredArgsConstructor ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ finalì´ ë¶™ì€ í•„ë“œë¥¼ ëª¨ì•„ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.   1 2 3 4 5 6 7 @Component @RequiredArgsConstructor public class OrderServiceImpl implements OrderService {      private final MemberRepository memberRepository;     private final DiscountPolicy discountPolicy; }   ìœ„ì˜ ì½”ë“œëŠ” ìƒì„±ì ì£¼ì… ì½”ë“œì™€ ì™„ì „íˆ ë™ì¼í•˜ë‹¤. ë¡¬ë³µì´ ìë°”ì˜ ì• ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¼ëŠ” ê¸°ëŠ¥ì„ ì´ìš©í•´ì„œ ì»´íŒŒì¼ ì‹œì ì— ìƒì„±ì ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤.   ìµœê·¼ì—ëŠ” ìƒì„±ìë¥¼ ë”± 1ê°œ ë‘ê³ , @Autowired ë¥¼ ìƒëµí•˜ëŠ” ë°©ë²•ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì— Lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ @RequiredArgsConstructor í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê¸°ëŠ¥ì€ ë‹¤ ì œê³µí•˜ë©´ì„œ, ì½”ë“œëŠ” ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³    @RequiredArgsConstructorëŠ” ë‹¨ìˆœíˆ ìƒì„±ì ì½”ë“œë§Œ ë§Œë“¤ì–´ì¤€ë‹¤. ìƒì„±ìê°€ í•˜ë‚˜ë§Œ ìˆì–´ì„œ @Autowiredë¥¼ ìƒëµí•´ë„ ë˜ëŠ” ê²ƒì´ì§€ @RequiredArgsConstructorê°€ @Autowired ê¹Œì§€ ìƒì„±í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.     @Autowired í•„ë“œ ëª…, @Qualifier, @Primary   ê°™ì€ íƒ€ì…ì˜ ë¹ˆì´ 2ê°œ ì´ìƒ ë“±ë¡ë˜ì—ˆì„ ë•Œ   @AutowiredëŠ” íƒ€ì…ìœ¼ë¡œ ë¹ˆì„ ì¡°íšŒí•˜ëŠ”ë° íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•  ê²½ìš° ì„ íƒëœ ë¹ˆì´ 2ê°œ ì´ìƒì´ë©´ NoUniqueBeanDefinitionException ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.   ì˜ˆ) DiscountPolicyì˜ í•˜ìœ„ íƒ€ì…ì¸ FixDiscountPolicy, RateDiscountPolicy ë‘ê°€ì§€ê°€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì„ ì–¸   1 2 @Autowired private DiscountPolicy discountPolicy;   1 2 3 4 5 @Component public class FixDiscountPolicy implements DiscountPolicy {}  @Component public class RateDiscountPolicy implements DiscountPolicy {}    ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ë„ ìˆì§€ë§Œ, í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì€ DIPë¥¼ ìœ„ë°°í•˜ê³  ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤. ê·¸ë¦¬ê³  ì´ë¦„ë§Œ ë‹¤ë¥´ê³ , ì™„ì „íˆ ë˜‘ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ 2ê°œ ìˆì„ ë•Œ í•´ê²°ì´ ì•ˆëœë‹¤. ìŠ¤í”„ë§ ë¹ˆì„ ìˆ˜ë™ ë“±ë¡í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•´ë„ ë˜ì§€ë§Œ, ì˜ì¡´ ê´€ê³„ ìë™ ì£¼ì…ì—ì„œ í•´ê²°í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•ì´ ìˆë‹¤.   ì¡°íšŒ ëŒ€ìƒ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ í•´ê²° ë°©ë²•      @Autowired í•„ë“œ ëª… ë§¤ì¹­   @Qualifier â†’ @Qualifierë¼ë¦¬ ë§¤ì¹­ â†’ ë¹ˆ ì´ë¦„ ë§¤ì¹­   @Primary ì‚¬ìš©   @Autowired í•„ë“œ ëª… ë§¤ì¹­   @AutowiredëŠ” íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ì´ë•Œ ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ í•„ë“œ ì´ë¦„, íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì´ë¦„ì„ ì¶”ê°€ ë§¤ì¹­í•œë‹¤.   í•„ë“œ ëª…ì„ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë³€ê²½   1 2 3 @Autowired // private DiscountPolicy discountPolicy; private DiscountPolicy rateDiscountPolicy;   1 2 3 4 5 6 @Autowired // discountPolicyë¥¼ rateDiscountPolicyë¡œ ë³€ê²½í•¨ public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy rateDiscountPolicy) {     this.memberRepository = memberRepository;     this.discountPolicy = rateDiscountPolicy; }   @Autowired ë§¤ì¹­ ì •ë¦¬      ìš°ì„  íƒ€ì…ìœ¼ë¡œ ë§¤ì¹­í•œë‹¤.   íƒ€ì… ë§¤ì¹­ì˜ ê²°ê³¼ê°€ 2ê°œ ì´ìƒì¼ ë•ŒëŠ” í•„ë“œëª…, íŒŒë¼ë¯¸í„°ëª…ìœ¼ë¡œ ë¹ˆ ì´ë¦„ ë§¤ì¹­í•œë‹¤.   @Qualifier ì‚¬ìš©   @QualifierëŠ” ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ë¹ˆì„ ë“±ë¡í•  ë•Œ @Qualifier(â€œë¹ˆ ì´ë¦„â€)ì„ ì§€ì •í•´ì£¼ê³  ì˜ì¡´ê´€ê³„ ì£¼ì… ì‹œ @Qualifierë¥¼ ë¶™ì—¬ì£¼ê³  ë“±ë¡í•œ ì´ë¦„ì„ ì ëŠ”ë‹¤.   ë¹ˆ ë“±ë¡ ì‹œ @Qualifier ë¶™ì—¬ì¤Œ   1 2 3 @Component @Qualifier(\"mainDiscountPolicy\") public class RateDiscountPolicy implements DiscountPolicy {}   ìƒì„±ì ìë™ ì£¼ì… ì‹œ @Qualifierë¥¼ ë¶™ì—¬ì¤Œ   1 2 3 4 5 @Autowired public OrderServiceImpl(MemberRepository memberRepository, @Qualifier(\"mainDiscountPolicy\") DiscountPolicy discountPolicy) {     this.memberRepository = memberRepository;     this.discountPolicy = discountPolicy; }   ë§Œì•½, @Qualifier(â€œmainDiscountPolicyâ€)ë¡œ ì£¼ì…í•œ ë¹ˆì„ ëª»ì°¾ëŠ”ë‹¤ë©´ mainDiscountPolicyë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ëŠ”ë‹¤. í•˜ì§€ë§Œ ê²½í—˜ìƒ @QualifierëŠ” @Qualifierë¥¼ ì°¾ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.   @Qualifier ì •ë¦¬      @Qualifierë¼ë¦¬ ë§¤ì¹­   ë¹ˆ ì´ë¦„ ë§¤ì¹­   NoSuchBeanDefinitionException ì˜ˆì™¸ ë°œìƒ   @Primary ì‚¬ìš©   @PrimaryëŠ” ìš°ì„ ìˆœìœ„ ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. @Autowired ì‹œì— ì—¬ëŸ¬ ë¹ˆì´ ë§¤ì¹­ë˜ë©´ @Primaryê°€ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.   1 2 3 4 5 6 7 // rateDiscountPolicyê°€ ìš°ì„ ê¶Œì„ ê°€ì§ @Component @Primary public class RateDiscountPolicy implements DiscountPolicy {}  @Component public class FixDiscountPolicy implements DiscountPolicy {}   @Primaryì™€ @Qualifier ì¤‘ì— ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ ê³ ë¯¼ì´ ë  ê²ƒì´ë‹¤. @Qualifierì˜ ë‹¨ì ì€ ì£¼ì… ë°›ì„ ë•Œ ì½”ë“œì— @Qualifierë¥¼ ì—¬ëŸ¬ ê³³ì— ë¶™ì—¬ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤. ë°˜ë©´ì—, @Primaryë¥¼ ì‚¬ìš©í•˜ë©´ ì´ë ‡ê²Œ @Qualifierë¥¼ ë¶™ì¼ í•„ìš”ê°€ ì—†ë‹¤.   @Primary, @Qualifier í™œìš©   ì½”ë“œì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ìˆê³ , ì½”ë“œì—ì„œ íŠ¹ë³„í•œ ê¸°ëŠ¥ìœ¼ë¡œ ê°€ë” ì‚¬ìš©í•˜ëŠ” ì„œë¸Œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ìˆë‹¤ê³  ìƒê°í•´ë³´ì. ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì€ @Primaryë¥¼ ì ìš©í•´ì„œ ì¡°íšŒí•˜ëŠ” ê³³ì—ì„œ @Qualifier ì§€ì • ì—†ì´ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•˜ê³ , ì„œë¸Œ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ ë¹ˆì„ íšë“í•  ë•ŒëŠ” @Qualifierë¥¼ ì§€ì •í•´ì„œ ëª…ì‹œì ìœ¼ë¡œ íšë“ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤. ë¬¼ë¡ , ì´ë•Œ ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•Œ @Qualifierë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì€ ìƒê´€ì—†ë‹¤.   ìš°ì„ ìˆœìœ„   ìš°ì„ ìˆœìœ„ëŠ” â€˜@Qualifier &gt; @Primary &gt; @Autowiredâ€™ ìˆœ ì´ë‹¤. @PrimaryëŠ” ê¸°ë³¸ê°’ ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²ƒì´ê³ , @QualifierëŠ” ë§¤ìš° ìƒì„¸í•˜ê²Œ ë™ì‘í•œë‹¤. ìŠ¤í”„ë§ì€ ìë™ë³´ë‹¤ëŠ” ìˆ˜ë™ì´, ë„’ì€ ë²”ìœ„ì˜ ì„ íƒê¶Œ ë³´ë‹¤ëŠ” ì¢ì€ ë²”ìœ„ì˜ ì„ íƒê¶Œì´ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì„œë„ @Qualifierê°€ ìš°ì„ ê¶Œì´ ë†’ë‹¤.      ì°¸ê³    @Primary, @Qualifierë¥¼ ì‚¬ìš©í•˜ë©´ì„œ êµ¬í˜„ì²´ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤. ì¦‰, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ë‹¤. ì´ëŠ” OCPì›ì¹™ì— ìœ„ë°°ëœë‹¤. ê¸°ì¡´ êµ¬í˜„ í´ë˜ìŠ¤ì˜ ì• ë…¸í…Œì´ì…˜ì„ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë©´ ì¢‹ê² ì§€ë§Œ ì´ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ í•œê³„ì´ë‹¤. ì´ëŸ° ê²ƒì„ íŠ¸ë ˆì´ë“œ ì˜¤í”„ë¼ í•œë‹¤. íŠ¸ë ˆì´ë“œ ì˜¤í”„ë€ í•˜ë‚˜ë¥¼ ì–»ìœ¼ë©´ ë‹¤ë¥¸ í•˜ë‚˜ë¥¼ ìƒì„ ìˆ˜ ìˆëŠ” ê´€ê³„ë¥¼ ì˜ë¯¸í•œë‹¤.     ì• ë…¸í…Œì´ì…˜ ì§ì ‘ ë§Œë“¤ê¸°   @Qualifier(â€mainDiscountPolicyâ€) ì´ë ‡ê²Œ ì ìœ¼ë©´ ì»´íŒŒì¼ì‹œ íƒ€ì… ì²´í¬ê°€ ì•ˆë˜ë¯€ë¡œ ì• ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ì–´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.      ì• ë…¸í…Œì´ì…˜ì„ ì§ì ‘ ë§Œë“œëŠ” ê²ƒì€ ì‹¤ë¬´ì—ì„œ í•œë²ˆì”© ì‚¬ìš©í•œë‹¤.     1 2 3 4 5 6 7 8 9 10 import org.springframework.beans.factory.annotation.Qualifier;  import java.lang.annotation.*;  @Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER,         ElementType.TYPE, ElementType.ANNOTATION_TYPE}) @Retention(RetentionPolicy.RUNTIME) @Documented @Qualifier(\"mainDiscountPolicy\") public @interface MainDiscountPolicy {}   1 2 3 @Component @MainDiscountPolicy public class RateDiscountPolicy implements DiscountPolicy {}   1 2 3 4 5 @Autowired public OrderServiceImpl(MemberRepository memberRepository, @MainDiscountPolicy DiscountPolicy discountPolicy) {     this.memberRepository = memberRepository;     this.discountPolicy = discountPolicy; }   ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ, List, Map   ì˜ë„ì ìœ¼ë¡œ ì •ë§ í•´ë‹¹ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‹¤ í•„ìš”í•œ ê²½ìš°ë„ ìˆë‹¤.   ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°: ì˜ˆì‹œ) í• ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ë°, í´ë¼ì´ì–¸íŠ¸ê°€ í• ì¸ì˜ ì¢…ë¥˜(rate, fix)ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŒ.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 public class AllBeanTest {      @Test     void findAllBean() {         ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class, DiscountService.class);          DiscountService discountService = ac.getBean(DiscountService.class);         Member member = new Member(1L, \"userA\", Grade.VIP);         int discountPrice = discountService.discount(member, 10000, \"fixDiscountPolicy\");          assertThat(discountService).isInstanceOf(DiscountService.class);         assertThat(discountPrice).isEqualTo(1000);          int rateDiscountPrice = discountService.discount(member, 20000, \"rateDiscountPolicy\");         assertThat(rateDiscountPrice).isEqualTo(2000);     }      static class DiscountService {          private final Map&lt;String, DiscountPolicy&gt; policyMap;         private final List&lt;DiscountPolicy&gt; policies;          public DiscountService(Map&lt;String, DiscountPolicy&gt; policyMap, List&lt;DiscountPolicy&gt; policies) {             this.policyMap = policyMap;             this.policies = policies;         }          public int discount(Member member, int price, String discountCode) {             DiscountPolicy discountPolicy = policyMap.get(discountCode);             return discountPolicy.discount(member, price);         }     }  }      Mapì„ í†µí•´ DiscountPolicy íƒ€ì…ì˜ ë¹ˆë“¤ì„ ì£¼ì…ë°›ëŠ”ë‹¤. (ì—¬ê¸°ì„œëŠ” fixDiscountPolicy, rateDiscountPolicyê°€ ì£¼ì…ë¨)   discount() ë©”ì„œë“œì— discountCodeë¡œ fixDiscountPolicyê°€ ë„˜ì–´ì˜¤ë©´ fixDiscountPolicy ë¹ˆì„ ì‹¤í–‰í•œë‹¤. rateDiscountPolicyë„ ë§ˆì°¬ê°€ì§€ë‹¤.      ì°¸ê³    DiscountServiceë¥¼ ì‚¬ìš©í•  ë•Œ @Componentë¥¼ ë¶™ì´ì§€ ì•ŠëŠ” ì´ìœ ëŠ” AnnotationConfigApplicationContext(DiscountService.class) ì½”ë“œê°€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì½”ë“œì´ê¸° ë•Œë¬¸ì´ë‹¤.     ìë™, ìˆ˜ë™ì˜ ì˜¬ë°”ë¥¸ ì‹¤ë¬´ ìš´ì˜ ê¸°ì¤€   ì‹¤ë¬´ì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ defaultë¥¼ ìë™ìœ¼ë¡œ í•œë‹¤.   ìŠ¤í”„ë§ì€ ì ì  ìë™ì„ ì„ í˜¸í•˜ëŠ” ì¶”ì„¸ì´ë‹¤. @Component ë¿ë§Œ ì•„ë‹ˆë¼ @Controller, @Service, @Repository ë“±ë„ ìë™ìœ¼ë¡œ ìŠ¤ìº”í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ ì„¤ì • ì •ë³´ë¥¼ ê´€ë¦¬í•  ë•Œ í¸ì˜ì„±ì´ ìˆë‹¤. ë˜í•œ ìë™ ë¹ˆ ë“±ë¡ì„ ì‚¬ìš©í•´ë„ OCP, DIPë¥¼ ì§€í‚¬ ìˆ˜ ìˆë‹¤.   ê·¸ëŸ¬ë©´ ìˆ˜ë™ ë¹ˆ ë“±ë¡ì€ ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?   ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í¬ê²Œ ì—…ë¬´ ë¡œì§ê³¼ ê¸°ìˆ  ì§€ì› ë¡œì§ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.   ì—…ë¬´ ë¡œì§ ë¹ˆ   ì›¹ì„ ì§€ì›í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬, í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ” ì„œë¹„ìŠ¤, ë°ì´í„° ê³„ì¸µì˜ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬ë“±ì´ ëª¨ë‘ ì—…ë¬´ ë¡œì§ì´ë‹¤. ë³´í†µ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ê°œë°œí•  ë•Œ ì¶”ê°€ë˜ê±°ë‚˜ ë³€ê²½ëœë‹¤. ì´ ê²½ìš°ì— ìë™ ë¹ˆ ë“±ë¡ì„ ê¶Œì¥í•œë‹¤.   ê¸°ìˆ  ì§€ì› ë¹ˆ   ê¸°ìˆ ì ì¸ ë¬¸ì œë‚˜ ê³µí†µ ê´€ì‹¬ì‚¬(AOP)ë¥¼ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ë‚˜, ê³µí†µ ë¡œê·¸ ì²˜ë¦¬ ì²˜ëŸ¼ ì—…ë¬´ ë¡œì§ì„ ì§€ì›í•˜ê¸° ìœ„í•œ í•˜ë¶€ ê¸°ìˆ ì´ë‚˜ ê³µí†µ ê¸°ìˆ ë“¤ì´ë‹¤. ê¸°ìˆ  ì§€ì› ë¡œì§ì€ ì—…ë¬´ ë¡œì§ê³¼ ë¹„êµí•´ì„œ ê·¸ ìˆ˜ê°€ ë§¤ìš° ì ê³ , ë³´í†µ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ì„œ ê´‘ë²”ìœ„í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ê¸°ìˆ  ì§€ì› ë¡œì§ë“¤ì€ ê°€ê¸‰ì  ìˆ˜ë™ ë¹ˆ ë“±ë¡ì„ ì‚¬ìš©í•´ì„œ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚´ëŠ” ê²ƒì´ ì¢‹ë‹¤.      ì°¸ê³  ê¸°ìˆ  ì§€ì› ë¹ˆ   objectMapper, modelMapperì— @Beanì„ ë“±ë¡í•œ ê²½ìš°ë„ ê¸°ìˆ  ì§€ì› ë¹ˆì´ë¼ í•œë‹¤. ê·¸ëŸ¬ë‚˜, ì´ëŠ” AOPëŠ” ì•„ë‹ˆë‹¤. (AOPëŠ” í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë° objectMapper, modelMapperëŠ” ì½”ë“œì— ì§ì ‘ ì‚¬ìš©í–ˆìœ¼ë¯€ë¡œ AOPê°€ ì•„ë‹ˆë‹¤.)     ì¦‰, ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê´‘ë²”ìœ„í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê¸°ìˆ  ì§€ì› ê°ì²´ëŠ” ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì„œ ì„¤ì • ì •ë³´ì— ë°”ë¡œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ë‹¤.   ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì—ì„œ ë‹¤í˜•ì„±ì„ ì ê·¹ í™œìš©í•  ë•ŒëŠ” ìˆ˜ë™ ë“±ë¡í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì•„ë˜ ì˜ˆì œë¥¼ ì‚´í´ë³´ë©´ Map&lt;String, DiscountPolicy&gt;ì— ì–´ë–¤ ë¹ˆë“¤ì´ ì£¼ì…ë ì§€ ì½”ë“œë§Œ ë³´ê³  í•œë²ˆì— ì‰½ê²Œ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤. ìë™ ë“±ë¡ì„ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ì½”ë“œë¥¼ ì°¾ì•„ë´ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 static class DiscountService {     private final Map&lt;String, DiscountPolicy&gt; policyMap;     private final List&lt;DiscountPolicy&gt; policies;      public DiscountService(Map&lt;String, DiscountPolicy&gt; policyMap, List&lt;DiscountPolicy&gt; policies) {         this.policyMap = policyMap;         this.policies = policies;     }      public int discount(Member member, int price, String discountCode) {         DiscountPolicy discountPolicy = policyMap.get(discountCode);         return discountPolicy.discount(member, price);     } }   ì´ëŸ° ê²½ìš° ìˆ˜ë™ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê±°ë‚˜ ë˜ëŠ” ìë™ìœ¼ë¡œí•˜ë©´ íŠ¹ì • íŒ¨í‚¤ì§€ì— ê°™ì´ ë¬¶ì–´ë‘ëŠ”ê²Œ ì¢‹ë‹¤. í•µì‹¬ì€ ì½”ë“œë¥¼ ë³´ê³  ë°”ë¡œ íŒŒì•…ì´ ë˜ì–´ì•¼ í•œë‹¤.   ì´ ë¶€ë¶„ì„ ë³„ë„ì˜ ì„¤ì • ì •ë³´ë¡œ ë§Œë“¤ê³  ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 @Configuration public class DiscountPolicyConfig {     @Bean     public DiscountPolicy rateDiscountPolicy() {         return new RateDiscountPolicy();     }      @Bean     public DiscountPolicy fixDiscountPolicy() {         return new FixDiscountPolicy();     } }   ì´ì²˜ëŸ¼ ë³„ë„ì˜ ì„¤ì • ì •ë³´ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ ë³„ë„ì˜ íŠ¹ì • íŒ¨í‚¤ì§€ì— ëª¨ì•„ë‘ë©´ ì½”ë“œ íŒŒì•…ì´ ìš©ì´í•˜ë‹¤.   ì°¸ê³ ë¡œ ìŠ¤í”„ë§ê³¼ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ìˆ˜ ë§ì€ ë¹ˆë“¤ì€ ì˜ˆì™¸ë‹¤. ì´ëŸ° ë¶€ë¶„ë“¤ì€ ìŠ¤í”„ë§ ìì²´ë¥¼ ì˜ ì´í•´í•˜ê³  ìŠ¤í”„ë§ì˜ ì˜ë„ëŒ€ë¡œ ì˜ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤. ë°˜ë©´ì— ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì•„ë‹ˆë¼ ë‚´ê°€ ì§ì ‘ ê¸°ìˆ  ì§€ì› ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤ë©´ ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•´ì„œ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚´ëŠ” ê²ƒì´ ì¢‹ë‹¤.   ìš”ì•½í•˜ìë©´, í¸ë¦¬í•œ ìë™ ë¹ˆ ë“±ë¡ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì§ì ‘ ë“±ë¡í•˜ëŠ” ê¸°ìˆ  ì§€ì› ê°ì²´ëŠ” ìˆ˜ë™ ë“±ë¡í•˜ì. ë‹¤í˜•ì„±ì„ ì ê·¹ í™œìš©í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ìˆ˜ë™ ë“±ë¡ì„ ê³ ë¯¼í•´ë³´ì.  ","categories": ["Spring"],
        "tags": ["Spring","Java"],
        "url": "/spring/Spring-Dependency-Injection/",
        "teaser": ""
      },{
        "title": "API ê°œë°œ ì‹œ ì£¼ì˜í•  ì  - ê¸°ë³¸",
        "excerpt":"   ì°¸ê³    Web Controller Packageì™€ API Controller PackageëŠ” ë¶„ë¦¬í•˜ëŠ”ê²Œ ì¢‹ë‹¤      ğŸ’¡ API ìš”ì²­/ì‘ë‹µì— ì—”í‹°í‹°ë¥¼ ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤.    APIì— ì—”í‹°í‹°ë¥¼ ë…¸ì¶œì‹œí‚¬ ê²½ìš° ë°œìƒí•˜ëŠ” ë¬¸ì œì       ì‹¤ë¬´ì—ì„œëŠ” íšŒì› ì—”í‹°í‹°ë¥¼ ìœ„í•œ APIê°€ ë‹¤ì–‘í•˜ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ë°, í•œ ì—”í‹°í‹°ì— ê°ê°ì˜ APIë¥¼ ìœ„í•œ ëª¨ë“  ìš”ì²­ ìš”êµ¬ì‚¬í•­ì„ ë‹´ê¸°ëŠ” ì–´ë µë‹¤.   ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ë©´ API ìŠ¤í™ì´ ë³€í•œë‹¤.       ë”°ë¼ì„œ, API ìš”ì²­ ìŠ¤í™ì— ë§ì¶”ì–´ ë³„ë„ì˜ DTOë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤.   ë“±ë¡ API ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 @RestController @RequiredArgsConstructor public class MemberApiController {      private final MemberService memberService;      @PostMapping(\"/api/v1/members\")     public CreateMemberResponse saveMemberV1(@RequestBody @Valid Member member) {         Long id = memberService.join(member);         return new CreateMemberResponse(id);     }      @PostMapping(\"/api/v2/members\")     public CreateMemberResponse saveMemberV2(@RequestBody @Valid CreateMemberRequest request) {         Member member = new Member();         member.setName(request.getName());         Long id = memberService.join(member);         return new CreateMemberResponse(id);     }      @Data     static class CreateMemberRequest {         private String name;     }      @Data     static class CreateMemberResponse {         private Long id;          public CreateMemberResponse(Long id) {             this.id = id;         }     } }   ë³„ë„ì˜ DTOë¥¼ ìƒì„±í•  ê²½ìš° ì¥ì       ì—”í‹°í‹°ì™€ í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì„ ìœ„í•œ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.   ì—”í‹°í‹°ì™€ API ìŠ¤í™ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.   ì—”í‹°í‹°ê°€ ë³€í•´ë„ API ìŠ¤í™ì´ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.      ì°¸ê³    ì—”í‹°í‹°ì—ëŠ” ë¡¬ë¶ ì• ë…¸í…Œì´ì…˜ì„ ì œí•œí•´ì„œ ì‚¬ìš©í–ˆë‹¤. (@Getter ë“±)   DTOëŠ” ë°ì´í„°ì˜ ìš”ì²­/ì‘ë‹µì„ ì£¼ëŠ” ìš©ë„ì´ê³  í¬ê²Œ ë¡œì§ì´ ìˆëŠ” ê²ƒë„ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì—”í‹°í‹°ë³´ë‹¤ ë¹„êµì  ììœ ë¡­ê²Œ ì‚¬ìš©í•œë‹¤.         (ì°¸ê³ ) JPA 1í¸ ë³µìŠµ   ë°ì´í„°ë¥¼ ìˆ˜ì •í•  ë•ŒëŠ” ë³€ê²½ê°ì§€ë¥¼ ì´ìš©í•œë‹¤.   @Transactionalì´ ìˆëŠ” ìƒíƒœì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  Transactionalì´ ëë‚œ í›„ commit ë˜ëŠ” ì‹œì ì—ì„œ ë³€ê²½ ê°ì§€ê°€ ì¼ì–´ë‚œë‹¤.   1 2 3 4 5 @Transactional public void update(Long id, String name) {     Member member = memberRepository.findOne(id);     member.setName(name); }      ì°¸ê³  MemberService ì½”ë“œì—ì„œ ë°˜í™˜ì„ Memberë¡œ í•˜ì§€ ì•Šê³  voidë¡œ í•œ ì´ìœ ?   update() ë©”ì„œë“œëŠ” ê°±ì‹ í•´ì£¼ëŠ” ë©”ì„œë“œì¸ë° Memberë¥¼ ë°˜í™˜í•´ë²„ë¦¬ë©´ ì¡°íšŒê¹Œì§€ ê°™ì´ í•˜ëŠ” ê²©ì´ë‹¤. íŠ¸ë˜í”½ì´ ë†’ì§€ ì•Šìœ¼ë©´ ë¶„ë¦¬í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ë³´í†µ íŠ¸ë˜í”½ì´ ë†’ì€ APIëŠ” ì¡°íšŒ API)     ì¡°íšŒ APIë¥¼ ë§Œë“¤ë•Œ ì—”í‹°í‹°ë¥¼ ì™¸ë¶€ì— ë…¸ì¶œí•˜ë©´ ìƒê¸°ëŠ” ë¬¸ì œ      ì‹¤ë¬´ì—ì„œëŠ” íšŒì› ì—”í‹°í‹°ë¥¼ ìœ„í•œ APIê°€ ë‹¤ì–‘í•˜ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ë°, í•œ ì—”í‹°í‹°ì— ê°ê°ì˜ APIë¥¼ ìœ„í•œ ëª¨ë“  ìš”ì²­ ìš”êµ¬ì‚¬í•­ì„ ë‹´ê¸°ëŠ” ì–´ë µë‹¤.   ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ë©´ API ìŠ¤í™ì´ ë³€í•œë‹¤.   ê¸°ë³¸ì ìœ¼ë¡œ ì—”í‹°í‹°ì˜ ëª¨ë“  ê°’ì´ ë…¸ì¶œëœë‹¤.   ì‘ë‹µ ìŠ¤í™ì„ ë§ì¶”ê¸° ìœ„í•´ ë¡œì§ì´ ì¶”ê°€ëœë‹¤. (@JsonIgnore ê°™ì€) â†’ ê·¸ëŸ¼ì—ë„ 1ë²ˆ ë¬¸ì œê°€ ë°œìƒ   ì¶”ê°€ë¡œ ì»¬ë ‰ì…˜ì„ ì§ì ‘ ë°˜í™˜í•˜ë©´ í•­í›„ API ìŠ¤í™ì„ ë³€ê²½í•˜ê¸° ì–´ë µë‹¤. (ë³„ë„ì˜ Result í´ë˜ìŠ¤ ìƒì„±ìœ¼ë¡œ í•´ê²°)   1ë²ˆ, 2ë²ˆì€ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆìœ¼ë‹ˆ ë„˜ì–´ê°€ê³  3ë²ˆì˜ ê²½ìš°ëŠ” ë°ì´í„° ì¡°íšŒ ì‹œ ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œí•  ê²½ìš° ë¹„ë°€ë²ˆí˜¸ ê°™ì€ ê°œì¸ì •ë³´ë„ ê°™ì´ ë…¸ì¶œë  ìœ„í—˜ì´ ìˆë‹¤.   4ë²ˆì˜ ê²½ìš° ì—”í‹°í‹°ë¡œ ì¡°íšŒí•˜ë©´ ì—°ê´€ê´€ê³„ë¡œ ë¬¶ì—¬ìˆëŠ” ë‹¤ë¥¸ ì—”í‹°í‹°ë“¤ë„ ê°™ì´ ë‚˜ì˜¨ë‹¤. @JsonIgnoreë¥¼ ì‚¬ìš©í•´ì„œ ì œì™¸ì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ ì—¬ëŸ¬ APIë¥¼ ë§Œë“¤ë‹¤ ë³´ë©´ ë‹¤ë¥¸ ì—”í‹°í‹°ê°€ í•„ìš”í•œ ìˆœê°„ë„ ìˆë‹¤. ì´ì²˜ëŸ¼ ì¼€ì´ìŠ¤ê°€ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤. ë˜í•œ, ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ë©´ API ìŠ¤í™ë„ ë³€ê²½ëœë‹¤.   5ë²ˆì˜ ê²½ìš° ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ë©´ Arrayë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤. ì´ëŠ” í™•ì¥ì„±ì´ ë§¤ìš° ë–¨ì–´ì§„ë‹¤. ë§Œì•½, ë°ì´í„° ë¦¬ìŠ¤íŠ¸ì™€ ì¡°íšŒí•œ ë°ì´í„° ê°œìˆ˜ë¥¼ ê°™ì´ ë°˜í™˜í•˜ê³  ì‹¶ì–´ë„ ë°ì´í„° ë¦¬ìŠ¤íŠ¸ê°€ Arrayë¡œ ë°˜í™˜ë˜ì—ˆê¸°ë•Œë¬¸ì— ë°ì´í„° ê°œìˆ˜ë¥¼ ì¶”ê°€ë¡œ ë°˜í™˜í•  ìˆ˜ ì—†ë‹¤. (í™•ì¥ì„±ì´ ë§¤ìš° ë–¨ì–´ì§„ë‹¤.)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜ [     // ì—ëŸ¬ë°œìƒ!!     //\"count\": 3,     {         \"id\": 1,         \"name\": \"new-hello\",         \"address\": null     },     {         \"id\": 2,         \"name\": \"member1\",         \"address\": {             \"city\": \"ì„œìš¸\",             \"street\": \"11\",             \"zipcode\": \"111\"         }     } ]   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // ë³„ë„ì˜ result í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ í•´ê²° {     \"count\": 3,     \"data\": [ \t      { \t          \"id\": 1, \t          \"name\": \"new-hello\", \t          \"address\": null \t      }, \t      { \t          \"id\": 2, \t          \"name\": \"member1\", \t          \"address\": { \t              \"city\": \"ì„œìš¸\", \t              \"street\": \"11\", \t              \"zipcode\": \"111\" \t          }   \t    }     ] }    ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤. ì¶”ê°€ë¡œ Result í´ë˜ìŠ¤ë¡œ ì»¬ë ‰ì…˜ì„ ê°ì‹¸ì„œ í–¥í›„ í•„ìš”í•œ í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @GetMapping(\"/api/v2/members\") public Result member2V1() {     List&lt;Member&gt; findMembers = memberService.findMembers();     List&lt;MemberDTO&gt; collect = findMembers.stream()             .map(m -&gt; new MemberDTO(m.getName()))             .collect(Collectors.toList());      return new Result(collect.size(), collect); }  @Data @AllArgsConstructor static class Result&lt;T&gt; {     private int count;     private T data; }  @Data @AllArgsConstructor static class MemberDTO {     private String name; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 {     \"count\": 3,     \"data\": [         {             \"name\": \"new-hello\"         },         {             \"name\": \"member1\"         },         {             \"name\": \"member2\"         }     ] }   API ìŠ¤í™ì€ ë…¸ì¶œí•  ê²ƒë§Œ ë…¸ì¶œí•´ì•¼í•œë‹¤. ì¦‰, API ìŠ¤í™ì€ DTOì™€ 1:1ì´ë‹¤. ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œë„ DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¢‹ë‹¤.   ì—”í‹°í‹°ëŠ” ì ˆëŒ€ ë…¸ì¶œí•˜ì§€ë§ì! ê¼­ APIì— ë§ëŠ” ìŠ¤í™ì˜ DTOë¥¼ ìƒì„±í•  ê²ƒ!  ","categories": ["Spring"],
        "tags": ["Spring","JPA"],
        "url": "/spring/SpringBoot-API-Notes/",
        "teaser": ""
      },{
        "title": "í˜ì¹˜ ì¡°ì¸ (fetch join)",
        "excerpt":" ğŸ’¡ ì‹¤ë¬´ì—ì„œ ì •ë§ ì¤‘ìš”í•˜ë‹¤. í•„ìˆ˜ì ìœ¼ë¡œ ì•Œì•„ì•¼ í•˜ëŠ” ë‚´ìš©!    í˜ì¹˜ ì¡°ì¸   í˜ì¹˜ ì¡°ì¸ì´ë€ JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë©° ì—°ê´€ëœ ì—”í‹°í‹°ë‚˜ ì»¬ë ‰ì…˜ì„ SQL í•œ ë²ˆì— í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. SQL ì¡°ì¸ ì¢…ë¥˜ ì•„ë‹ˆë©° JPAì—ì„œë§Œ ì‚¬ìš©í•œë‹¤. join fetch ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©° ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.   1 [ LEFT [OUTER] | INNER ] JOIN FETCH ì¡°ì¸ê²½ë¡œ       ì—”í‹°í‹° í˜ì¹˜ ì¡°ì¸ ì˜ˆì‹œ   1 2 3 4 5 # ê¸°ì¡´ SQL select m.*, t.* from Member m inner join Team t on m.team_id = t.id  # JPQL select m from Member m **join fetch** m.team   í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´ ì—°ê´€ëœ í…Œì´ë¸”ì„ í•œë²ˆì— ì¡°íšŒ í•  ìˆ˜ ìˆë‹¤.   ìƒí™©ë§Œ ë³´ë©´ ì¦‰ì‹œë¡œë”©ê³¼ ë¹„ìŠ·í•˜ë‹¤. ê·¸ëŸ¬ë‚˜, í˜ì¹˜ì¡°ì¸ì€ ì¿¼ë¦¬ë¥¼ ë‚´ê°€ ì›í•˜ëŠ” ë°ì´í„°ë§Œì„ í•œë²ˆì— ì¡°íšŒí•  ê²ƒì´ë¼ëŠ” ê²ƒì„ ëª…ì‹œì ìœ¼ë¡œ ë™ì ì¸ íƒ€ì´ë°ì— ì •í•  ìˆ˜ ìˆë‹¤.   ë˜í•œ, ì—°ê´€ê´€ê³„ ì„¤ì •ì´ LAZYë¡œ ë˜ì–´ìˆë‹¤ê³  í•´ë„ í˜ì¹˜ ì¡°ì¸ì„ ìš°ì„  ì‹œ í•œë‹¤.   í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš©í•˜ì—¬ 1 + N ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.       ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸   1:N ê´€ê³„ì—ì„œì˜ í˜ì¹˜ ì¡°ì¸ì´ë‹¤.      1 select t from Team t join fetch t.members;   ê²°ê³¼ë¥¼ ë³´ë©´ ì¤‘ë³µì´ ëœë‹¤. ì´ ê²½ìš° distinctë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤. JPQLì—ì„œ distinctë¥¼ ì‚¬ìš©í•˜ë©´ SQLì—ì„œì˜ distinct ê¸°ëŠ¥ ë¿ë§Œ ì•„ë‹ˆë¼, ì—”í‹°í‹°ì˜ ì¤‘ë³µê¹Œì§€ ì œê±°í•´ì¤€ë‹¤.       í˜ì¹˜ ì¡°ì¸ ì£¼ì˜ì‚¬í•­      í˜ì¹˜ ì¡°ì¸ ëŒ€ìƒì—ëŠ” ë³„ì¹­ì„ ì¤„ ìˆ˜ ì—†ë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ì—ì„œëŠ” ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ê°€ê¸‰ì  ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.   ë‘˜ ì´ìƒì˜ ì»¬ë ‰ì…˜ì€ í˜ì¹˜ ì¡°ì¸ í•  ìˆ˜ ì—†ë‹¤.   ì»¬ë ‰ì…˜ì„ í˜ì¹˜ ì¡°ì¸í•˜ë©´ í˜ì´ì§• APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-Fetch-Join/",
        "teaser": ""
      },{
        "title": "ì»¬ë ‰ì…˜ ì¡°íšŒ ìµœì í™”",
        "excerpt":"ì»¬ë ‰ì…˜ì¸ ì¼ëŒ€ë‹¤ ê´€ê³„(OneToMany)ë¥¼ ì¡°íšŒí•˜ê³ , ìµœì í™”í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì. (*ToOne ë³´ë‹¤ ì‹ ê²½ ì“¸ê²Œ ë§ë‹¤.)   [ì˜ˆì œ] Orderì™€ MemberëŠ” ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„(ì–‘ë°©í–¥), Orderì™€ DeliveryëŠ” ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„(ì–‘ë°©í–¥)ê°€ ë˜ì–´ìˆê³ , Memberì™€ DeliveryëŠ” ì§€ì—° ë¡œë”©ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì£¼ë¬¸ë‚´ì—­ì—ì„œ ì¶”ê°€ë¡œ ì£¼ë¬¸í•œ ìƒí’ˆ ì •ë³´ë¥¼ ì¶”ê°€ë¡œ ì¡°íšŒí•˜ì. Order ê¸°ì¤€ìœ¼ë¡œ ì»¬ë ‰ì…˜ì¸ OrderItem ì™€ Item ì´ í•„ìš”í•˜ë‹¤.   ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•˜ë©´ ë§ˆì°¬ê°€ì§€ë¡œ 1 + N + N ë¬¸ì œê°€ ìƒê¸´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ fetch joinì„ ì‚¬ìš©í•œë‹¤.      ì°¸ê³    DTOë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì€ ë‹¨ìˆœí•˜ê²Œ ê²‰ ê»ì§ˆ(order)ë§Œ DTOë¡œ ë§Œë“¤ë¼ëŠ”ê²Œ ì•„ë‹ˆë‹¤. ë‚´ë¶€ì˜ ì—”í‹°í‹°(orderItems)ê¹Œì§€ ëª¨ë‘ DTOë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.        ì°¸ê³    ì§€ì—° ë¡œë”©ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆìœ¼ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆëŠ” ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ê³  ì—†ìœ¼ë©´ SQLì„ ì‹¤í–‰í•œë‹¤. ë”°ë¼ì„œ ê°™ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì´ë¯¸ ë¡œë”©í•œ íšŒì› ì—”í‹°í‹°ë¥¼ ì¶”ê°€ë¡œ ì¡°íšŒí•˜ë©´ SQLì„ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.     ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜ - í˜ì¹˜ ì¡°ì¸ ìµœì í™”   í˜ì¹˜ ì¡°ì¸ ìµœì í™”   1 2 3 4 5 6 7 8 9 10 // OrderApiController.java @GetMapping(\"/api/v3/orders\") public List&lt;OrderDto&gt; ordersV3() {     List&lt;Order&gt; orders = orderRepository.findAllWithItem();      List&lt;OrderDto&gt; result = orders.stream()             .map(o -&gt; new OrderDto(o))             .collect(Collectors.toList());     return result; }   ì¼ëŒ€ë‹¤ ì¡°ì¸ì„ í•˜ë©´ ë‹¤ì— ì´ˆì ì´ ë§ì¶°ì ¸ ë°ì´í„° ê°œìˆ˜ê°€ ì¦ê°€í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¡°ì¸ë¬¸ ì•ì— í…Œì´ë¸”ì˜ rowê°€ 2, ì¡°ì¸ë¬¸ ë’¤ì— í…Œì´ë¸”ì˜ rowê°€ 4ë¼ë©´ 4ë¡œ ì¦ê°€í•œë‹¤.      JPQLì—ì„œ distinctë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ë³µì„ ì œê±°í•´ì¤€ë‹¤.   1 2 3 4 5 6 7 8 9 10 // OrderRepository.java public List&lt;Order&gt; findAllWithItem() {     return em.createQuery(             \"select distinct o from Order o\" +                     \" join fetch o.member m\" +                     \" join fetch o.delivery d\" +                     \" join fetch o.orderItems oi\" +                     \" join fetch oi.item i\", Order.class)             .getResultList(); }   SQLì˜ distinctëŠ” rowì˜ ëª¨ë“  í•„ë“œê°€ ì¤‘ë³µë˜ì–´ì•¼ ì¤‘ë³µì„ ì œê±°í•´ì¤€ë‹¤. ê·¸ëŸ¬ë‚˜, JPAì˜ distinctëŠ” JPAì—ì„œ ìì²´ì ìœ¼ë¡œ ê¸°ì¤€ì´ ë˜ëŠ” ì—”í‹°í‹°ê°€ ì¤‘ë³µì´ ë˜ë©´ ì œê±°ë¥¼ í•´ì¤€ë‹¤. ì—¬ê¸°ì„  ê¸°ì¤€ì´ ë˜ëŠ” ì—”í‹°í‹°ê°€ Order ì—”í‹°í‹°ì´ë‹¤. (from ë‹¤ìŒì— ë‚˜ì˜¤ëŠ” ì—”í‹°í‹°, root entityë¼ê³ ë„ í•œë‹¤.)      ì°¸ê³    ì‹¤ë¬´ì—ì„œ ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§¤ë•ŒëŠ” QueryDSLì„ ì´ìš©í•˜ì ë¬¸ìì—´ë¡œ ì§œëŠ” JPQLì€ ì˜¤ë¥˜ë¥¼ ì¡ê¸° ì–´ë µì§€ë§Œ QueryDSLì„ ì‚¬ìš©í•˜ë©´ ë¬¸ìì—´ ì˜¤ë¥˜, ê³µë°± ë“±ì„ ì‹ ê²½ì“°ì§€ ì•Šê³  ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.     í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ SQLì´ 1ë²ˆë§Œ ì‹¤í–‰ëœë‹¤. distinctë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ì¼ëŒ€ë‹¤ ì¡°ì¸ì´ ìˆìœ¼ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ rowê°€ ì¦ê°€í•œë‹¤. ê·¸ ê²°ê³¼ ê°™ì€ order ì—”í‹°í‹°ì˜ ì¡°íšŒ ìˆ˜ë„ ì¦ê°€í•˜ê²Œ ëœë‹¤. JPAì˜ distinctëŠ” SQLì— distinctë¥¼ ì¶”ê°€í•˜ê³ , ë”í•´ì„œ ê°™ì€ ì—”í‹°í‹°ê°€ ì¡°íšŒë˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¤‘ë³µì„ ê±¸ëŸ¬ì¤€ë‹¤. ì´ ì˜ˆì œì—ì„  orderê°€ ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸ ë•Œë¬¸ì— ì¤‘ë³µ ì¡°íšŒ ë˜ëŠ” ê²ƒì„ ë§‰ì•„ì¤€ë‹¤.   í•˜ì§€ë§Œ, í˜ì´ì§•ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì ì´ ìˆë‹¤. setFirstResult(), setMaxResults() ì ìš©ì´ ì•ˆëœë‹¤.      ì°¸ê³    ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´ í˜ì´ì§•ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ê²½ê³  ë¡œê·¸ë¥¼ ë‚¨ê¸°ë©´ì„œ ëª¨ë“  ë°ì´í„°ë¥¼ DBì—ì„œ ì½ì–´ì˜¤ê³ , ë©”ëª¨ë¦¬ì—ì„œ í˜ì´ì§• í•´ë²„ë¦°ë‹¤ (ë§¤ìš° ìœ„í—˜í•˜ë‹¤).        ì°¸ê³    ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸ì€ 1ê°œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì»¬ë ‰ì…˜ ë‘˜ ì´ìƒì— í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. ë°ì´í„°ê°€ ë¶€ì •í•©í•˜ê²Œ ì¡°íšŒë  ìˆ˜ ìˆë‹¤.     ì¼ëŒ€ë‹¤ í˜ì¹˜ì¡°ì¸ì—ì„œëŠ” í˜ì´ì§•ì„ ì ˆëŒ€ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.   í˜ì´ì§•ê³¼ í•œê³„ ëŒíŒŒ   ëŒ€ë¶€ë¶„ì˜ í˜ì´ì§• + ì»¬ë ‰ì…˜ ì—”í‹°í‹° ì¡°íšŒ ë¬¸ì œëŠ” ë‹¤ìŒì—ì„œ ì„¤ëª…í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   ë¨¼ì €, ToOne(OneToOne, ManyToOne) ê´€ê³„ë¥¼ ëª¨ë‘ í˜ì¹˜ì¡°ì¸ í•œë‹¤. ToOne ê´€ê³„ëŠ” rowìˆ˜ë¥¼ ì¦ê°€ì‹œí‚¤ì§€ ì•Šìœ¼ë¯€ë¡œ í˜ì´ì§• ì¿¼ë¦¬ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ê·¸ í›„, ì»¬ë ‰ì…˜(ToMany)ì€ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì¡°íšŒí•œë‹¤. ì§€ì—° ë¡œë”© ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ hibernate.default_batch_fetch_size, @BatchSize ë¥¼ ì ìš©í•œë‹¤.      hibernate.default_batch_fetch_size: ê¸€ë¡œë²Œ ì„¤ì •   @BatchSize: ê°œë³„ ìµœì í™”   ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì»¬ë ‰ì…˜ì´ë‚˜, í”„ë¡ì‹œ ê°ì²´ë¥¼ í•œêº¼ë²ˆì— ì„¤ì •í•œ size ë§Œí¼ IN ì¿¼ë¦¬ë¡œ ì¡°íšŒí•œë‹¤.   default_batch_fetch_size ì„¤ì •   application.yml   1 jpa.hibernate.properties.hibernate.default_batch_fetch_size: 100   ì„¤ì • í›„ ì¿¼ë¦¬ ê²°ê³¼   1 2 3 4 5 6 7 8 9 ... 2022-08-14 01:10:22.984  INFO 31396 --- [nio-8080-exec-4] p6spy                                    : #1660407022984 | took 1ms | statement | connection 8| url jdbc:h2:tcp://localhost/~/jpashop select orderitems0_.order_id as order_id5_5_1_, orderitems0_.order_item_id as order_it1_5_1_, orderitems0_.order_item_id as order_it1_5_0_, orderitems0_.count as count2_5_0_, orderitems0_.item_id as item_id4_5_0_, orderitems0_.order_id as order_id5_5_0_, orderitems0_.order_price as order_pr3_5_0_ from order_item orderitems0_ where orderitems0_.order_id in (?, ?) select orderitems0_.order_id as order_id5_5_1_, orderitems0_.order_item_id as order_it1_5_1_, orderitems0_.order_item_id as order_it1_5_0_, orderitems0_.count as count2_5_0_, orderitems0_.item_id as item_id4_5_0_, orderitems0_.order_id as order_id5_5_0_, orderitems0_.order_price as order_pr3_5_0_ from order_item orderitems0_ where orderitems0_.order_id in (4, 11); 2022-08-14 01:10:22.996 DEBUG 31396 --- [nio-8080-exec-4] org.hibernate.SQL                        :  ... 2022-08-14 01:10:22.998  INFO 31396 --- [nio-8080-exec-4] p6spy                                    : #1660407022998 | took 0ms | statement | connection 8| url jdbc:h2:tcp://localhost/~/jpashop select item0_.item_id as item_id2_3_0_, item0_.name as name3_3_0_, item0_.price as price4_3_0_, item0_.stock_quantity as stock_qu5_3_0_, item0_.artist as artist6_3_0_, item0_.etc as etc7_3_0_, item0_.author as author8_3_0_, item0_.isbn as isbn9_3_0_, item0_.actor as actor10_3_0_, item0_.director as directo11_3_0_, item0_.dtype as dtype1_3_0_ from item item0_ where item0_.item_id in (?, ?, ?, ?) select item0_.item_id as item_id2_3_0_, item0_.name as name3_3_0_, item0_.price as price4_3_0_, item0_.stock_quantity as stock_qu5_3_0_, item0_.artist as artist6_3_0_, item0_.etc as etc7_3_0_, item0_.author as author8_3_0_, item0_.isbn as isbn9_3_0_, item0_.actor as actor10_3_0_, item0_.director as directo11_3_0_, item0_.dtype as dtype1_3_0_ from item item0_ where item0_.item_id in (2, 3, 9, 10);   default_batch_fetch_sizeë¥¼ ì„¤ì •í•˜ë©´ ì¿¼ë¦¬ í˜¸ì¶œ ìˆ˜ê°€ 1 + N â†’ 1 + 1ë¡œ ìµœì í™” ëœë‹¤. ì¡°ì¸ë³´ë‹¤ DB ë°ì´í„° ì „ì†¡ëŸ‰ì´ ìµœì í™” ëœë‹¤. (Orderì™€ OrderItemì„ ì¡°ì¸í•˜ë©´ Orderê°€ OrderItem ë§Œí¼ ì¤‘ë³µí•´ì„œ ì¡°íšŒëœë‹¤. ì´ ë°©ë²•ì€ ê°ê° ì¡°íšŒí•˜ë¯€ë¡œ ì „ì†¡í•´ì•¼í•  ì¤‘ë³µ ë°ì´í„°ê°€ ì—†ë‹¤.) í˜ì¹˜ ì¡°ì¸ ë°©ì‹ê³¼ ë¹„êµí•´ì„œ ì¿¼ë¦¬ í˜¸ì¶œ ìˆ˜ê°€ ì•½ê°„ ì¦ê°€í•˜ì§€ë§Œ, DB ë°ì´í„° ì „ì†¡ëŸ‰ì´ ê°ì†Œí•œë‹¤. ì»¬ë ‰ì…˜ í˜ì¹˜ ì¡°ì¸ì€ í˜ì´ì§•ì´ ë¶ˆê°€ëŠ¥ í•˜ì§€ë§Œ ì´ ë°©ë²•ì€ í˜ì´ì§•ì´ ê°€ëŠ¥í•˜ë‹¤.   ì •ë¦¬í•˜ìë©´, ToOne ê´€ê³„ëŠ” í˜ì¹˜ ì¡°ì¸í•´ë„ í˜ì´ì§•ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ToOne ê´€ê³„ëŠ” í˜ì¹˜ì¡°ì¸ìœ¼ë¡œ ì¿¼ë¦¬ ìˆ˜ë¥¼ ì¤„ì´ê³  í•´ê²°í•˜ê³ , ë‚˜ë¨¸ì§€(ì»¬ë ‰ì…˜)ëŠ” hibernate.default_batch_fetch_sizeë¡œ ìµœì í™” í•˜ì.   @BatchSize   ê°œë³„ë¡œ ì„¤ì •í•˜ë ¤ë©´ @BatchSizeë¥¼ ì ìš©í•˜ë©´ ëœë‹¤. (ì»¬ë ‰ì…˜ì€ ì»¬ë ‰ì…˜ í•„ë“œì—, ì—”í‹°í‹°ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì— ì ìš©)   1 2 3 4 5 6 7 8 9 10 11 12 13 // Order.java  // ToMany ì¼ ë•ŒëŠ” ì—°ê´€ê´€ê³„ ìœ„ì¹˜ì— ì‘ì„±í•œë‹¤. @BatchSize(size = 1000) @OneToMany(mappedBy = \"order\", cascade = CascadeType.ALL) private List&lt;OrderItem&gt; orderItems = new ArrayList&lt;&gt;();  // ToOne ì¼ ë•ŒëŠ” ì—”í‹°í‹° class ë¶€ë¶„ì—ì„œ ì‘ì„±í•œë‹¤. @BatchSize(size = 100) @Entity @Getter @Setter public abstract class Item {}    ê·¸ëƒ¥ default_batch_fetch_size ì‚¬ìš©í•˜ì!      ì°¸ê³    default_batch_fetch_size ì˜ í¬ê¸°ëŠ” ì ë‹¹í•œ ì‚¬ì´ì¦ˆë¥¼ ê³¨ë¼ì•¼ í•˜ëŠ”ë°, 100~1000 ì‚¬ì´ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤. ì´ ì „ëµì„ SQL IN ì ˆì„ ì‚¬ìš©í•˜ëŠ”ë°, ë°ì´í„°ë² ì´ìŠ¤ì— ë”°ë¼ IN ì ˆ íŒŒë¼ë¯¸í„°ë¥¼ 1000ìœ¼ë¡œ ì œí•œí•˜ê¸°ë„ í•œë‹¤. 1000ìœ¼ë¡œ ì¡ìœ¼ë©´ í•œë²ˆì— 1000ê°œë¥¼ DBì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¶ˆëŸ¬ì˜¤ë¯€ë¡œ DB ì— ìˆœê°„ ë¶€í•˜ê°€ ì¦ê°€í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ 100ì´ë“  1000ì´ë“  ê²°êµ­ ì „ì²´ ë°ì´í„°ë¥¼ ë¡œë”©í•´ì•¼ í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê°™ë‹¤. 1000ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ìƒ ê°€ì¥ ì¢‹ì§€ë§Œ, ê²°êµ­ DBë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë“  ìˆœê°„ ë¶€í•˜ë¥¼ ì–´ë””ê¹Œì§€ ê²¬ë”œ ìˆ˜ ìˆëŠ”ì§€ë¡œ ê²°ì •í•˜ë©´ ëœë‹¤.     ì—¬ê¸°ê¹Œì§€ í•˜ë©´ JPAì™€ ê´€ë ¨ëœ ì„±ëŠ¥ìµœì í™”ëŠ” 90%ëŠ” í•´ê²°ì´ ëœë‹¤.   JPAì—ì„œ DTO ì§ì ‘ ì¡°íšŒ   ì¿¼ë¦¬ëŠ” ë£¨íŠ¸ 1ë²ˆ, ì»¬ë ‰ì…˜ N ë²ˆ ì‹¤í–‰ëœë‹¤. ToOne(N:1, 1:1) ê´€ê³„ë“¤ì„ ë¨¼ì € ì¡°íšŒí•˜ê³ , ToMany(1:N) ê´€ê³„ëŠ” ê°ê° ë³„ë„ë¡œ ì²˜ë¦¬í•œë‹¤.   ì´ëŸ° ë°©ì‹ì„ ì„ íƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.      ToOne ê´€ê³„ëŠ” ì¡°ì¸í•´ë„ ë°ì´í„° row ìˆ˜ê°€ ì¦ê°€í•˜ì§€ ì•ŠëŠ”ë‹¤.   ToMany(1:N) ê´€ê³„ëŠ” ì¡°ì¸í•˜ë©´ row ìˆ˜ê°€ ì¦ê°€í•œë‹¤.   row ìˆ˜ê°€ ì¦ê°€í•˜ì§€ ì•ŠëŠ” ToOne ê´€ê³„ëŠ” ì¡°ì¸ìœ¼ë¡œ ìµœì í™”í•˜ê¸° ì‰¬ìš°ë¯€ë¡œ í•œë²ˆì— ì¡°íšŒí•˜ê³ , ToMany ê´€ê³„ëŠ” ìµœì í™” í•˜ê¸° ì–´ë ¤ìš°ë¯€ë¡œ findOrderItems() ê°™ì€ ë³„ë„ì˜ ë©”ì„œë“œë¡œ ì¡°íšŒí•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 public List&lt;OrderQueryDto&gt; findOrderQueryDtos() {     List&lt;OrderQueryDto&gt; result = findOrders(); // query 1ë²ˆ -&gt; Nê°œ     result.forEach(o -&gt; {         List&lt;OrderItemQueryDto&gt; orderItems = findOrderItems(o.getOrderId()); // Query Në²ˆ         o.setOrderItems(orderItems);     });     return result; }  private List&lt;OrderQueryDto&gt; findOrders() {     return em.createQuery(                     \"select new jpabook.jpashop.repository.order.query.OrderQueryDto(o.id, m.name, o.orderDate, o.status, d.address)\" +                             \" from Order o\" +                             \" join o.member m\" +                             \" join o.delivery d\", OrderQueryDto.class)             .getResultList(); }  private List&lt;OrderItemQueryDto&gt; findOrderItems(Long orderId) {     return em.createQuery(                     \"select new jpabook.jpashop.repository.order.query.OrderItemQueryDto(oi.order.id, i.name, oi.orderPrice, oi.count)\" +                             \" from OrderItem oi\" +                             \" join oi.item i\" +                             \" where oi.order.id = :orderId\", OrderItemQueryDto.class             )             .setParameter(\"orderId\", orderId)             .getResultList(); }   ì»¬ë ‰ì…˜ ì¡°íšŒ ìµœì í™”   ì¿¼ë¦¬ëŠ” ë£¨íŠ¸ 1ë²ˆ, ì»¬ë ‰ì…˜ 1ë²ˆ ì‹¤í–‰ëœë‹¤. ToOne ê´€ê³„ë“¤ì„ ë¨¼ì € ì¡°íšŒí•˜ê³ , ì—¬ê¸°ì„œ ì–»ì€ ì‹ë³„ì orderIdë¡œ ToMany ê´€ê³„ì¸ OrderItemì„ í•œêº¼ë²ˆì— ì¡°íšŒí•˜ì. MAPì„ ì‚¬ìš©í•´ì„œ ë§¤ì¹­ ì„±ëŠ¥ í–¥ìƒ(O(1))   í”Œë« ë°ì´í„° ìµœì í™”   ì¿¼ë¦¬ëŠ” 1ë²ˆ ì‹¤í–‰ëœë‹¤. í•˜ì§€ë§Œ, ì¡°ì¸ìœ¼ë¡œ ì¸í•´ DBì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•˜ëŠ” ë°ì´í„°ì— ì¤‘ë³µ ë°ì´í„°ê°€ ì¶”ê°€ë˜ë¯€ë¡œ ìƒí™©ì— ë”°ë¼ ì»¬ë ‰ì…˜ ì¡°íšŒ ìµœì í™” ë³´ë‹¤ ë” ëŠë¦´ ìˆ˜ ë„ ìˆë‹¤. ë˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¶”ê°€ ì‘ì—…ì´ í¬ë‹¤. í˜ì´ì§• ë¶ˆê°€ëŠ¥í•˜ë‹¤.   ì •ë¦¬   ì—”í‹°í‹° ì¡°íšŒ ë°©ì‹ ì ‘ê·¼ ìˆœì„œ      ì—”í‹°í‹° ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ ìš°ì„ ì ‘ê·¼            í˜ì¹˜ì¡°ì¸ìœ¼ë¡œ ì¿¼ë¦¬ ìˆ˜ë¥¼ ìµœì í™”       ì»¬ë ‰ì…˜ ìµœì í™”                    í˜ì´ì§• í•„ìš” â†’ hibernate.default_batch_fetch_size , @BatchSize ë¡œ ìµœì í™”           í˜ì´ì§• í•„ìš”X â†’ í˜ì¹˜ ì¡°ì¸ ì‚¬ìš©                           ì—”í‹°í‹° ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ í•´ê²°ì´ ì•ˆë˜ë©´ DTOì¡°íšŒ ë°©ì‹ ì‚¬ìš©   DTO ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ í•´ê²°ì´ ì•ˆë˜ë©´ NativeSQL or ìŠ¤í”„ë§ JdbcTemplate      ì°¸ê³  ì—”í‹°í‹° ì¡°íšŒ ë°©ì‹ì€ í˜ì¹˜ ì¡°ì¸ì´ë‚˜, hibernate.default_batch_fetch_size , @BatchSize ê°™ì´ ì½”ë“œë¥¼ ê±°ì˜ ìˆ˜ì •í•˜ì§€ ì•Šê³ , ì˜µì…˜ë§Œ ì•½ê°„ ë³€ê²½í•´ì„œ, ë‹¤ì–‘í•œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ì‹œë„í•  ìˆ˜ ìˆë‹¤. ë°˜ë©´ì— DTOë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ë°©ì‹ì€ ì„±ëŠ¥ì„ ìµœì í™” í•˜ê±°ë‚˜ ì„±ëŠ¥ ìµœì í™” ë°©ì‹ì„ ë³€ê²½í•  ë•Œ ë§ì€ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.        ì°¸ê³  ê°œë°œìëŠ” ì„±ëŠ¥ ìµœì í™”ì™€ ì½”ë“œ ë³µì¡ë„ ì‚¬ì´ì—ì„œ ì¤„íƒ€ê¸°ë¥¼ í•´ì•¼ í•œë‹¤. í•­ìƒ ê·¸ëŸ° ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ë³´í†µ ì„±ëŠ¥ ìµœì í™”ëŠ” ë‹¨ìˆœí•œ ì½”ë“œë¥¼ ë³µì¡í•œ ì½”ë“œë¡œ ëª°ê³ ê°„ë‹¤. ì—”í‹°í‹° ì¡°íšŒ ë°©ì‹ì€ JPAê°€ ë§ì€ ë¶€ë¶„ì„ ìµœì í™” í•´ì£¼ê¸° ë•Œë¬¸ì—, ë‹¨ìˆœí•œ ì½”ë“œë¥¼ ìœ ì§€í•˜ë©´ì„œ, ì„±ëŠ¥ì„ ìµœì í™” í•  ìˆ˜ ìˆë‹¤. ë°˜ë©´ì— DTO ì¡°íšŒ ë°©ì‹ì€ SQLì„ ì§ì ‘ ë‹¤ë£¨ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ê¸° ë•Œë¬¸ì—, ë‘˜ ì‚¬ì´ì— ì¤„íƒ€ê¸°ë¥¼ í•´ì•¼ í•œë‹¤.     DTO ì¡°íšŒ ë°©ì‹ì˜ ì„ íƒì§€      DTOë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•ë„ ê°ê° ì¥ë‹¨ì´ ìˆë‹¤. V4, V5, V6ì—ì„œ ë‹¨ìˆœí•˜ê²Œ ì¿¼ë¦¬ê°€ 1ë²ˆ ì‹¤í–‰ëœë‹¤ê³  V6ì´ í•­ìƒ ì¢‹ì€ ë°©ë²•ì¸ ê²ƒì€ ì•„ë‹ˆë‹¤.   V4ëŠ” ì½”ë“œê°€ ë‹¨ìˆœí•˜ë‹¤. íŠ¹ì • ì£¼ë¬¸ í•œê±´ë§Œ ì¡°íšŒí•˜ë©´ ì´ ë°©ì‹ì„ ì‚¬ìš©í•´ë„ ì„±ëŠ¥ì´ ì˜ ë‚˜ì˜¨ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì¡°íšŒí•œ Order ë°ì´í„°ê°€ 1ê±´ì´ë©´ OrderItemì„ ì°¾ê¸° ìœ„í•œ ì¿¼ë¦¬ë„ 1ë²ˆë§Œ ì‹¤í–‰í•˜ë©´ ëœë‹¤.   V5ëŠ” ì½”ë“œê°€ ë³µì¡í•˜ë‹¤. ì—¬ëŸ¬ ì£¼ë¬¸ì„ í•œêº¼ë²ˆì— ì¡°íšŒí•˜ëŠ” ê²½ìš°ì—ëŠ” V4 ëŒ€ì‹ ì— ì´ê²ƒì„ ìµœì í™”í•œ V5 ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì¡°íšŒí•œ Order ë°ì´í„°ê°€ 1000ê±´ì¸ë°, V4 ë°©ì‹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´, ì¿¼ë¦¬ê°€ ì´ 1 + 1000ë²ˆ ì‹¤í–‰ëœë‹¤. ì—¬ê¸°ì„œ 1ì€ Order ë¥¼ ì¡°íšŒí•œ ì¿¼ë¦¬ê³ , 1000ì€ ì¡°íšŒëœ Orderì˜ row ìˆ˜ë‹¤. V5 ë°©ì‹ìœ¼ë¡œ ìµœì í™” í•˜ë©´ ì¿¼ë¦¬ê°€ ì´ 1 + 1ë²ˆë§Œ ì‹¤í–‰ëœë‹¤. ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œ 100ë°° ì´ìƒì˜ ì„±ëŠ¥ ì°¨ì´ê°€ ë‚  ìˆ˜ ìˆë‹¤.   V6ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ì ‘ê·¼ë°©ì‹ì´ë‹¤. ì¿¼ë¦¬ í•œë²ˆìœ¼ë¡œ ìµœì í™” ë˜ì–´ì„œ ìƒë‹¹íˆ ì¢‹ì•„ë³´ì´ì§€ë§Œ, Orderë¥¼ ê¸°ì¤€ìœ¼ë¡œ í˜ì´ì§•ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” ì´ì •ë„ ë°ì´í„°ë©´ ìˆ˜ë°±ì´ë‚˜, ìˆ˜ì²œê±´ ë‹¨ìœ„ë¡œ í˜ì´ì§• ì²˜ë¦¬ê°€ ê¼­ í•„ìš”í•˜ë¯€ë¡œ, ì´ ê²½ìš° ì„ íƒí•˜ê¸° ì–´ë ¤ìš´ ë°©ë²•ì´ë‹¤. ê·¸ë¦¬ê³  ë°ì´í„°ê°€ ë§ìœ¼ë©´ ì¤‘ë³µ ì „ì†¡ì´ ì¦ê°€í•´ì„œ V5ì™€ ë¹„êµí•´ì„œ ì„±ëŠ¥ ì°¨ì´ë„ ë¯¸ë¹„í•˜ë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-JPA-Collections-Performance-Optimization/",
        "teaser": ""
      },{
        "title": "JPA ì¡°íšŒ ì„±ëŠ¥ ìµœì í™”",
        "excerpt":"ì¡°íšŒ ì„±ëŠ¥ ìµœì í™” ë¶€ë¶„ì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ì‹¤ë¬´ì—ì„œ JPAë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ 100% ì´í•´í•´ì•¼ í•œë‹¤.   í˜ì¹˜ ì¡°ì¸(fetch join) (ë§í¬)   í˜ì¹˜ ì¡°ì¸ì´ë€ JPQLì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. í˜ì¹˜ ì¡°ì¸ì€ JPAì—ë§Œ ìˆëŠ” ë¬¸ë²•ìœ¼ë¡œ SQLì˜ ì¡°ì¸ ì¢…ë¥˜ì™€ëŠ” ë‹¤ë¥´ë‹¤. í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ë„ ë¬´ì‹œí•˜ê³  í”„ë¡ì‹œ ê°ì²´ê°€ ì•„ë‹Œ ì§„ì§œ ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.   ì˜ˆì œ. Orderì™€ MemberëŠ” ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„(ì–‘ë°©í–¥), Orderì™€ DeliveryëŠ” ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„(ì–‘ë°©í–¥)ê°€ ë˜ì–´ìˆê³ , Memberì™€ DeliveryëŠ” ì§€ì—° ë¡œë”©ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @GetMapping(\"/api/v2/simple-orders\") public List&lt;SimpleOrderDto&gt; ordersV2() {     List&lt;Order&gt; orders = orderRepository.findAllByString(new OrderSearch());     List&lt;SimpleOrderDto&gt; result = orders.stream()             .map(o -&gt; new SimpleOrderDto(o))             .collect(Collectors.toList());      return result; }  @Data static class SimpleOrderDto {     private Long orderId;     private String name;     private LocalDateTime orderDate;     private OrderStatus orderStatus;     private Address address;      public SimpleOrderDto(Order order) {         orderId = order.getId();         name = order.getMember().getName();         orderDate = order.getOrderDate();         orderStatus = order.getStatus();         address = order.getDelivery().getAddress();     } }   ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•˜ëŠ” ì¼ë°˜ì ì¸ ë°©ë²•ì´ë‹¤. ìœ„ì˜ ì½”ë“œëŠ” ì¿¼ë¦¬ê°€ ì´ 1 + N + Në²ˆ ì‹¤í–‰ëœë‹¤.      1ë²ˆ: Order ì¡°íšŒ 1ë²ˆ   Në²ˆ: Order â†’ Member ì§€ì—° ë¡œë”© ì¡°íšŒ Në²ˆ   Në²ˆ: Order â†’ Delivery ì§€ì—° ë¡œë”© ì¡°íšŒ Në²ˆ   ì§€ì—° ë¡œë”©ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¡°íšŒí•˜ë¯€ë¡œ, ì´ë¯¸ ì¡°íšŒëœ ê²½ìš° ì¿¼ë¦¬ë¥¼ ìƒëµí•œë‹¤. ê·¸ëŸ¬ë‚˜, ì´ ê²½ìš°ì—ëŠ” idê°’ì´ ë‹¬ëê¸° ë•Œë¬¸ì— Në²ˆ ì¡°íšŒí•œë‹¤.   ì •ë¦¬í•˜ìë©´, ì¿¼ë¦¬ê°€ 1 + N + Në²ˆ ì‹¤í–‰ë˜ëŠ” ì›ì¸ì€ JPAì˜ ì§€ì—°ë¡œë”© ë§¤ì»¤ë‹ˆì¦˜ ë•Œë¬¸ì´ë‹¤.   ê·¸ë ‡ë‹¤ë©´ ì´ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í• ê¹Œ?   í˜ì¹˜ ì¡°ì¸ ì ìš©   1 2 3 4 5 6 7 8 @GetMapping(\"/api/v3/simple-orders\") public List&lt;SimpleOrderDto&gt; ordersV3() {     List&lt;Order&gt; orders = orderRepository.findAllWithMemberDelivery();     List&lt;SimpleOrderDto&gt; result = orders.stream()             .map(o -&gt; new SimpleOrderDto(o))             .collect(toList());     return result; }   1 2 3 4 5 6 7 8 9 // memberRepositoryì— ì¶”ê°€ // jpql public List&lt;Order&gt; findAllWithMemberDelivery() {       return em.createQuery(               \"select o from Order o\" +               \" join fetch o.member m\" +               \" join fetch o.delivery d\", Order.class)              .getResultList(); }   ì—”í‹°í‹°ë¥¼ í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš©í•´ì„œ ê°€ì ¸ì˜¤ë©´ ì¿¼ë¦¬ 1ë²ˆì— ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤. í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ë„ ë¬´ì‹œí•˜ê³  í”„ë¡ì‹œ ê°ì²´ê°€ ì•„ë‹Œ ì§„ì§œ ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.      ì°¸ê³  ì›ë˜ëŠ” Listë¡œ ë°˜í™˜í•˜ë©´ ì•ˆë˜ê³  Resultë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•´ì•¼ í•œë‹¤. ì§€ê¸ˆì€ ì˜ˆì œì´ê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ ì§„í–‰í•œë‹¤.     JPAì—ì„œ DTO ì§ì ‘ ì¡°íšŒ   DTOë¡œ ë°”ë¡œ ì¡°íšŒí•˜ë©´ ì„ íƒí•œ ì»¬ëŸ¼ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ì¸ SQLì„ ì‚¬ìš©í•  ë•Œì²˜ëŸ¼ ì›í•˜ëŠ” ê°’ì„ ì„ íƒí•´ì„œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. new ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ JPQLì˜ ê²°ê³¼ë¥¼ DTOë¡œ ì¦‰ì‹œ ë³€í™˜í•œë‹¤. ì„ íƒí•œ ì»¬ëŸ¼ë§Œ ê°€ì ¸ì˜¤ë©´ ì„±ëŠ¥ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ ë¦¬í¬ì§€í† ë¦¬ ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   1 2 3 4 @GetMapping(\"/api/v4/simple-orders\") public List&lt;OrderSimpleQueryDto&gt; ordersV4() {     return orderSimpleQueryRepository.findOrderDtos(); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Repository @RequiredArgsConstructor public class OrderSimpleQueryRepository {      private final EntityManager em;      public List&lt;OrderSimpleQueryDto&gt; findOrderDtos() {         return em.createQuery(                         \"select new jpabook.jpashop.repository.order.simplequery.OrderSimpleQueryDto(o.id, m.name, o.orderDate, o.status, d.address) \" +                                 \" from Order o\" +                                 \" join o.member m\" +                                 \" join o.delivery d\", OrderSimpleQueryDto.class)                 .getResultList();     } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @Data public class OrderSimpleQueryDto {     private Long orderId;     private String name;     private LocalDateTime orderDate;     private OrderStatus orderStatus;     private Address address;      public OrderSimpleQueryDto(Long orderId, String name, LocalDateTime orderDate, OrderStatus orderStatus, Address address) {         this.orderId = orderId;         this.name = name;         this.orderDate = orderDate;         this.orderStatus = orderStatus;         this.address = address;     } }   DTO ì¡°íšŒ ì „ìš© ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë§Œë“  ì´ìœ ëŠ” ìœ ì§€ë³´ìˆ˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•˜ëŠ” í•µì‹¬ ë¡œì§ê³¼ íŠ¹ì • APIì— ì˜ì¡´ì ì¸ ë¡œì§ì˜ ë¼ì´í”„ ì‚¬ì´í´ì€ ë‹¤ë¥´ë‹¤. ë”°ë¼ì„œ, ì—”í‹°í‹° ë°˜í™˜ ë¡œì§ê³¼ DTO ë°˜í™˜ ë¡œì§ì„ ë¶„ë¦¬í•˜ëŠ”ê²Œ ì¢‹ë‹¤.      OrderRepository: ì—”í‹°í‹°ë§Œ ì¡°íšŒ, íŠ¹ì • APIì— ì˜ì¡´ì ì´ì§€ ì•Šë‹¤.   OrderSimpleQueryRepository: DTO ì¡°íšŒ ì „ìš©, íŠ¹ì • APIì— ì˜ì¡´ì ì´ë‹¤.   ì¿¼ë¦¬ ë°©ì‹ ì„ íƒ ê¶Œì¥ ìˆœì„œ      ìš°ì„  ì—”í‹°í‹°ë¥¼ DTOë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí•œë‹¤.   í•„ìš”í•˜ë©´ í˜ì¹˜ ì¡°ì¸ìœ¼ë¡œ ì„±ëŠ¥ì„ ìµœì í™” í•œë‹¤. ëŒ€ë¶€ë¶„ì˜ ì„±ëŠ¥ ì´ìŠˆê°€ í•´ê²°ëœë‹¤.   ê·¸ë˜ë„ ì•ˆë˜ë©´ DTOë¡œ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.   ìµœí›„ì˜ ë°©ë²•ì€ JPAê°€ ì œê³µí•˜ëŠ” ë„¤ì´í‹°ë¸Œ SQLì´ë‚˜ ìŠ¤í”„ë§ JDBC Templateì„ ì‚¬ìš©í•´ì„œ SQLì„ ì§ì ‘ ì‚¬ìš©í•œë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-JPA-Performance-Optimization/",
        "teaser": ""
      },{
        "title": "OSIVì™€ ì„±ëŠ¥ ìµœì í™”",
        "excerpt":"OSIV(Open Session In View)   OSIVë€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë·°ê¹Œì§€ ì—´ì–´ë‘ëŠ” ê¸°ëŠ¥ì´ë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì§€ë˜ë©´ ì—”í‹°í‹°ë„ ì˜ì† ìƒíƒœë¡œ ìœ ì§€ëœë‹¤. ë·°ê¹Œì§€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì‚´ì•„ìˆë‹¤ë©´ ë·°ì—ì„œë„ ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•  ìˆ˜ê°€ ìˆë‹¤.   í•˜ì´ë²„ë„¤ì´íŠ¸ì—ì„œëŠ” OSIV(Open Session In View), JPAì—ì„œëŠ” Open EntityManager In Viewë¼ í•œë‹¤. í•˜ì§€ë§Œ, ê´€ë¡€ìƒ OSIVë¼ í•œë‹¤. OSIVë¥¼ ì•Œì•„ì•¼í•œë‹¤. ì´ê²ƒì„ ëª¨ë¥´ë©´ ì¥ì• ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.   OSIV ë™ì‘ ì›ë¦¬   ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ê°€ ì œê³µí•˜ëŠ” OSIVëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ëŠ” OSIVë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ì‚¬ìš©ìì˜ ìš”ì²­ ì‹œì ì—ì„œ ìƒì„±ì´ ë˜ì§€ë§Œ, ë°ì´í„°ë¥¼ ì“°ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” íŠ¸ëœì­ì…˜ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŠ¸ëœì­ì…˜ì´ ì¼ì–´ë‚œë‹¤.      ì°¸ê³  JPAê°€ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¤ê³  ë°˜í™˜í•˜ëŠ” ì‹œì ?   JPAì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ê³¼ ë°€ì ‘í•œ ì—°ê´€ì´ ìˆë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ 1:1ë¡œ ì“°ë©´ì„œ ë™ì‘í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ì–¸ì œ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¬ê¹Œ? ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•  ë•Œ JPAì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¨ë‹¤. ê·¸ë¦¬ê³  ì–¸ì œ ì»¤ë„¥ì…˜ì„ ë°˜í™˜í• ê¹Œ? OSIVê°€ ONì¼ ë•ŒëŠ” ëª¨ë“  ì‘ë‹µì´ ëë‚˜ê³ ë‚˜ë©´ ë°˜í™˜ë˜ê³  OSIVê°€ OFFì¼ ë•ŒëŠ” íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë˜ëŠ” ì‹œì ì— ê°™ì´ ì¢…ë£Œëœë‹¤.     OSIV ON         spring.jpa.open-in-view : true, ê¸°ë³¸ê°’   spring.jpa.open-in-viewì˜ ê°’ì„ ê¸°ë³¸ê°’(true)ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— warn ë¡œê·¸ê°€ ë‚¨ëŠ”ë‹¤. í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…ì„ Service ê³„ì¸µì—ì„œ ëë‚´ì§€ ì•Šê³ ë„ ë Œë”ë§ ì‹œ ìë™ìœ¼ë¡œ í•´ê²°í•˜ê²Œ í•´ì£¼ëŠ” ì¥ì ì´ ìˆëŠ” OSIV ì „ëµì— ì™œ ê²½ê³ ë¥¼ ì¤„ê¹Œ?   1 2022-08-16 13:41:55.714  WARN 38189 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning   OSIV ì „ëµì€ íŠ¸ëœì­ì…˜ ì‹œì‘ì²˜ëŸ¼ ìµœì´ˆ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ ì‹œì‘ ì‹œì ë¶€í„° API ì‘ë‹µì´ ëë‚  ë•Œ ê¹Œì§€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ìœ ì§€í•œë‹¤. ê·¸ë˜ì„œ ì§€ê¸ˆê¹Œì§€ View Templateì´ë‚˜ API ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§€ì—° ë¡œë”©ì´ ê°€ëŠ¥í–ˆë˜ ê²ƒì´ë‹¤.   ì§€ì—° ë¡œë”©ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì‚´ì•„ìˆì–´ì•¼ ê°€ëŠ¥í•˜ê³ , ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ìœ ì§€í•œë‹¤. ì´ê²ƒ ìì²´ê°€ í° ì¥ì ì´ë‹¤.   ê·¸ëŸ°ë° ì´ ì „ëµì€ ë„ˆë¬´ ì˜¤ëœì‹œê°„ë™ì•ˆ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ì‹¤ì‹œê°„ íŠ¸ë˜í”½ì´ ì¤‘ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì»¤ë„¥ì…˜ì´ ëª¨ìë„ ìˆ˜ ìˆë‹¤.(ì»¤ë„¥ì…˜ì´ ë§ˆë¥¸ë‹¤ê³  í‘œí˜„.) ì´ê²ƒì€ ê²°êµ­ ì¥ì• ë¡œ ì´ì–´ì§„ë‹¤.   ì˜ˆë¥¼ ë“¤ì–´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì™¸ë¶€ APIë¥¼ í˜¸ì¶œí•˜ë©´ ì™¸ë¶€ API ëŒ€ê¸° ì‹œê°„ ë§Œí¼ ì»¤ë„¥ì…˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ ëª»í•˜ê³ , ìœ ì§€í•´ì•¼ í•œë‹¤. OSIVì˜ ì¹˜ëª…ì ì¸ ë‹¨ì ì´ë‹¤.   OSIV OFF         spring.jpa.open-in-view : false, OSIV ì¢…ë£Œ   OSIVë¥¼ ë„ë©´ íŠ¸ëœì­ì…˜ì„ ì¢…ë£Œí•  ë•Œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‹«ê³ (em.flush(), em.commit()), ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ë„ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ, ì»¤ë„¥ì…˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚­ë¹„í•˜ì§€ ì•ŠëŠ”ë‹¤.   OSIVë¥¼ ë„ë©´ ëª¨ë“  ì§€ì—°ë¡œë”©ì„ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ì§€ê¸ˆê¹Œì§€ ì‘ì„±í•œ ë§ì€ ì§€ì—° ë¡œë”© ì½”ë“œë¥¼ íŠ¸ëœì­ì…˜ ì•ˆìœ¼ë¡œ ë„£ì–´ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤. ê·¸ë¦¬ê³  view templateì—ì„œ ì§€ì—°ë¡œë”©ì´ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. ê²°ë¡ ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì´ ëë‚˜ê¸° ì „ì— ì§€ì—° ë¡œë”©ì„ ê°•ì œë¡œ í˜¸ì¶œí•´ ë‘ì–´ì•¼ í•œë‹¤.   OSIVë¥¼ OFF ì‹œí‚¨ ìƒíƒœì—ì„œ Controllerì—ì„œ ì§€ì—° ë¡œë”©ì„ í•  ê²½ìš° ì—ëŸ¬ ë¡œê·¸   1 2 3 4 5 6 7 8 org.hibernate.LazyInitializationException: could not initialize proxy [jpabook.jpashop.domain.Member#1] - no Session \tat org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:170) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:310) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:45) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:95) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat jpabook.jpashop.domain.Member$HibernateProxy$fTKfJLZN.getName(Unknown Source) ~[main/:na] \tat jpabook.jpashop.api.OrderApiController.ordersV1(OrderApiController.java:33) ~[main/:na] ...   í•´ê²° ë°©ì•ˆì€ OSIVë¥¼ ON í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì§€ì—°ë¡œë”©ì„ í•˜ê±°ë‚˜, í˜ì¹˜ ì¡°ì¸ì„ ì“°ëŠ” ë°©ë²•ì´ ìˆë‹¤.   ì»¤ë©˜ë“œì™€ ì¿¼ë¦¬ ë¶„ë¦¬   ì‹¤ë¬´ì—ì„œ OSIVë¥¼ ëˆ ìƒíƒœë¡œ ë³µì¡ì„±ì„ ê´€ë¦¬í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì´ ìˆë‹¤. ë°”ë¡œ Commandì™€ Queryë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.   ë³´í†µ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ íŠ¹ì • ì—”í‹°í‹° ëª‡ ê°œë¥¼ ë“±ë¡í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì„±ëŠ¥ì´ í¬ê²Œ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ°ë° ë³µì¡í•œ í™”ë©´ì„ ì¶œë ¥í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ëŠ” í™”ë©´ì— ë§ì¶”ì–´ ì„±ëŠ¥ì„ ìµœì í™” í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. í•˜ì§€ë§Œ ê·¸ ë³µì¡ì„±ì— ë¹„í•´ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ì— í° ì˜í–¥ì„ ì£¼ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ë˜ì„œ í¬ê³  ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•œë‹¤ë©´, ì´ ë‘˜ì˜ ê´€ì‹¬ì‚¬ë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•˜ëŠ” ì„ íƒì€ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¶©ë¶„íˆ ì˜ë¯¸ ìˆë‹¤.   ë‹¨ìˆœí•˜ê²Œ ì„¤ëª…í•´ì„œ ë‹¤ìŒì²˜ëŸ¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.      OrderService            OrderService: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§       OrderQueryService: í™”ë©´ì´ë‚˜ APIì— ë§ì¶˜ ì„œë¹„ìŠ¤ (ì£¼ë¡œ ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜ ì‚¬ìš©)           ë³´í†µ ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ íŠ¸ëœì­ì…˜ì„ ìœ ì§€í•œë‹¤. ë‘ ì„œë¹„ìŠ¤ ëª¨ë‘ íŠ¸ëœì­ì…˜ì„ ìœ ì§€í•˜ë©´ì„œ ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³    ê³ ê° ì„œë¹„ìŠ¤ì˜ ì‹¤ì‹œê°„ API(íŠ¸ë˜í”½ì´ ë§ì€ ê²½ìš°)ëŠ” OSIVë¥¼ ë„ê³ , ADMIN ì²˜ëŸ¼ ì»¤ë„¥ì…˜ì„ ë§ì´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê³³ì—ì„œëŠ” OSIVë¥¼ ì¼œëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œì„ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.        ì°¸ê³  ì»¤ë§¨ë“œì™€ ì¿¼ë¦¬ì˜ ë¶„ë¦¬   Command Query Separation(CQS)ë¥¼ ì˜ë¯¸í•˜ë©° DBì˜ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ëª…ë ¹ê³¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” íŒ¨í„´ì´ë‹¤. ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œ í–ˆì„ ë•Œ, ë‚´ë¶€ì—ì„œ ë³€ê²½(ì‚¬ì´ë“œ ì´í™íŠ¸)ê°€ ì¼ì–´ë‚˜ëŠ” ë©”ì„œë“œì¸ì§€, ì•„ë‹ˆë©´ ë‚´ë¶€ì—ì„œ ë³€ê²½ì´ ì „í˜€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì¸ì§€ ëª…í™•íˆ ë¶„ë¦¬í•˜ëŠ” ê²ƒ. ê¶Œì¥í•˜ëŠ” ë°©ë²•ì€ insertëŠ” idë§Œ ë°˜í™˜í•˜ê³ (ì•„ë¬´ê²ƒë„ ì—†ìœ¼ë©´ ì¡°íšŒê°€ ì•ˆë˜ë‹ˆ), updateëŠ” ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•Šê³ , ì¡°íšŒëŠ” ë‚´ë¶€ì˜ ë³€ê²½ì´ ì—†ëŠ” ë©”ì„œë“œë¡œ ì„¤ê³„í•˜ë©´ ì¢‹ë‹¤. ì´ ê°œë…ì€ ê°œë°œ ì „ë°˜ì— ê¸°ë³¸ê°œë…ìœ¼ë¡œ ê¹”ê³  ê°€ëŠ” ê²ƒì´ ì¢‹ë‹¤.        ì°¸ê³  CQRS íŒ¨í„´   CQRS íŒ¨í„´ì´ë€, ìš°ë¦¬ê°€ ë³´í†µ ì´ì•¼ê¸°í•˜ëŠ” CRUD(Create, Read, Update, Delete)ì—ì„œ CUD(Command)ì™€ R(Query)ì„ êµ¬ë¶„í•˜ìëŠ” ì´ì•¼ê¸°ë‹¤. êµ¬ë¶„í•˜ëŠ” ì´ìœ ëŠ”, ìš°ë¦¬ê°€ Databaseë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê³  ì²˜ë¦¬ë¥¼ í•˜ê²Œ ë˜ë©´ ì´ë¯¸ ê·¸ ì‚¬ì´ì— ë°ì´í„°ê°€ ë³€ê²½ì´ ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. CQRSëŠ” ì´ëŸ° ë³€ê²½ ê°€ëŠ¥ì„±ì„ ì¸ì •í•˜ê³  ì–´ì°¨í”¼ Readì™€ CUD ì‚¬ì´ì—ëŠ” delayê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŒì„ ì¸ì •í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ Rê³¼ CUDë¥¼ êµ¬ë¶„í•¨ìœ¼ë¡œì¨ ì–»ëŠ” ì´ì ì„ ì„¤ëª…í•˜ëŠ” ê²ƒì´ CQRSíŒ¨í„´ì´ë‹¤.    ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-OSIV/",
        "teaser": ""
      },{
        "title": "Auditing (ê³µí†µ ë§¤í•‘ ì •ë³´)",
        "excerpt":"@MappedSuperclass   ê³µí†µ ë§¤í•‘ ì •ë³´ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•œë‹¤. í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ í´ë˜ìŠ¤ëŠ” í…Œì´ë¸”ë¡œ ìƒì„±í•˜ì§€ ì•Šê³  í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìƒì†í•œ ì—”í‹°í‹°ì˜ í´ë˜ìŠ¤ë¡œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤. ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒ í´ë˜ìŠ¤ ê¶Œì¥í•œë‹¤.  í…Œì´ë¸”ê³¼ ê´€ê³„ ì—†ê³ , ë‹¨ìˆœíˆ ì—”í‹°í‹°ê°€ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë§¤í•‘ ì •ë³´ë¥¼ ëª¨ìœ¼ëŠ” ì—­í• ì„ í•˜ë©° ì£¼ë¡œ ë“±ë¡ì¼, ìˆ˜ì •ì¼, ë“±ë¡ì, ìˆ˜ì •ì ê°™ì€ ì „ì²´ ì—”í‹°í‹°ì—ì„œ ê³µí†µìœ¼ë¡œ ì ìš©í•˜ëŠ” ì •ë³´ë¥¼ ëª¨ì„ ë•Œ ì‚¬ìš©í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 @MappedSuperclass @EntityListeners(value = {AuditingEntityListener.class}) @Getter abstract class BaseEntity {      @CreatedDate     @Column(name = \"created_at\", updatable = false)     private LocalDateTime createdAt;      @LastModifiedDate     @Column(name = \"updated_at\")     private LocalDateTime updatedAt; }   ì—”í‹°í‹° ê°ì²´ì— ì–´ë–¤ ë³€í™”ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ê°ì§€í•˜ëŠ” ë¦¬ìŠ¤ë„ˆê°€ ìˆë‹¤. JPA ë‚´ë¶€ì—ì„œ ì—”í‹°í‹° ê°ì²´ê°€ ìƒì„±/ë³€ê²½ë˜ëŠ” ê²ƒì„ ê°ì§€í•˜ëŠ” ì—­í• ì€ AuditingEntityListenerë¡œ ì´ë£¨ì–´ì§„ë‹¤.   @CreatedDate ëŠ” ìƒì„±ì‹œê°„, @LastModifiedDate ëŠ” ìµœì¢… ìˆ˜ì • ì‹œê°„ì„ ì²˜ë¦¬ ì†ì„±ìœ¼ë¡œ insertable, updateable ë“±ì´ ìˆëŠ”ë° updateable = false ë¡œ ì§€ì •í•˜ë©´ ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜í•  ë•Œ create_at ì»¬ëŸ¼ê°’ì€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.   AuditingEntityListenerë¥¼ í™œì„±í™”ì‹œí‚¤ê¸° ìœ„í•´ í”„ë¡œì íŠ¸ì˜Â @EnableJpaAuditingÂ ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.   1 2 3 4 5 6 7 8 @SpringBootApplication @EnableJpaAuditing public class BoardApplication {      public static void main(String[] args) {         SpringApplication.run(BoardApplication.class, args);     } }   ì •ë¦¬í•˜ìë©´, @EnableJpaAuditing ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • í´ë˜ìŠ¤ì— ì ìš©í•˜ê³  @EntityListeners(AuditingEntityListener.class)ëŠ” ì—”í‹°í‹°ì— ì ìš©í•œë‹¤.   Auditing   ì‘ì„±ì¼, ìˆ˜ì •ì¼ì€ ëŒ€ë¶€ë¶„ì˜ ì—”í‹°í‹°ì—ì„œ í•„ìš”í•˜ë‹¤. ê·¸ëŸ¬ë‚˜, ì‘ì„±ì, ìˆ˜ì •ìì˜ ê²½ìš° í•„ìš” ì—†ì„ ê²½ìš°ë¥¼ ìƒê°í•´ ë¶„ë¦¬í•´ì„œ ì‘ì„±í•˜ì.   1 2 3 4 5 6 7 8 9 10 11 12 @EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseEntity extends BaseTimeEntity {      @CreatedBy     @Column(updatable = false)     private String createdBy;      @LastModifiedBy     private String lastModifiedBy; }   1 2 3 4 5 6 7 8 9 10 11 12 @EntityListeners(AuditingEntityListener.class) @MappedSuperclass @Getter public class BaseTimeEntity {      @CreatedDate     @Column(updatable = false)     private LocalDateTime createdDate;      @LastModifiedDate     private LocalDateTime lastModifiedDate; }   1 2 3 4 5 6 7 8 9 10 11 12 13 @EnableJpaAuditing @SpringBootApplication public class DataJpaApplication {  \tpublic static void main(String[] args) { \t\tSpringApplication.run(DataJpaApplication.class, args); \t}  \t@Bean \tpublic AuditorAware&lt;String&gt; auditorProvider() { \t\treturn () -&gt; Optional.of(UUID.randomUUID().toString()); \t} }   ë“±ë¡ì, ìˆ˜ì •ìë¥¼ ì²˜ë¦¬í•´ì£¼ëŠ” AuditorAware ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•œë‹¤. (ì‹¤ë¬´ì—ì„œëŠ” ì„¸ì…˜ ì •ë³´ë‚˜, ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ë¡œê·¸ì¸ ì •ë³´ì—ì„œ IDë¥¼ ë°›ëŠ”ë‹¤.)      ì°¸ê³  ì‹¤ë¬´ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ì—”í‹°í‹°ëŠ” ë“±ë¡ì‹œê°„, ìˆ˜ì •ì‹œê°„ì´ í•„ìš”í•˜ì§€ë§Œ, ë“±ë¡ì, ìˆ˜ì •ìëŠ” ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ê·¸ë˜ì„œ ìœ„ì™€ ê°™ì´ Base íƒ€ì…ì„ ë¶„ë¦¬í•˜ê³ , ì›í•˜ëŠ” íƒ€ì…ì„ ì„ íƒí•´ì„œ ìƒì†í•œë‹¤.        ì°¸ê³  ì €ì¥ì‹œì ì— ë“±ë¡ì¼, ë“±ë¡ìëŠ” ë¬¼ë¡ ì´ê³ , ìˆ˜ì •ì¼, ìˆ˜ì •ìë„ ê°™ì€ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤. ë°ì´í„°ê°€ ì¤‘ë³µ ì €ì¥ë˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ì´ë ‡ê²Œ í•´ë‘ë©´ ë³€ê²½ ì»¬ëŸ¼ë§Œ í™•ì¸í•´ë„ ë§ˆì§€ë§‰ì— ì—…ë°ì´íŠ¸í•œ ìœ ì €ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ í¸ë¦¬í•˜ë‹¤. ì´ë ‡ê²Œ í•˜ì§€ ì•Šìœ¼ë©´ ë³€ê²½ ì»¬ëŸ¼ì´ null ì¼ë•Œ ë“±ë¡ ì»¬ëŸ¼ì„ ë˜ ì°¾ì•„ì•¼ í•œë‹¤. ì°¸ê³ ë¡œ ì €ì¥ì‹œì ì— ì €ì¥ë°ì´í„°ë§Œ ì…ë ¥í•˜ê³  ì‹¶ìœ¼ë©´ @EnableJpaAuditing(modifyOnCreate = false) ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.    ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-Auditing/",
        "teaser": ""
      },{
        "title": "ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ì™€ ì—”í‹°í‹° ë§¤ë‹ˆì €",
        "excerpt":"ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬   ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ë”± í•œ ë²ˆë§Œ ìƒì„±í•˜ê³  ê³µìœ í•´ì„œ ì‚¬ìš©í•œë‹¤.   ì—”í‹°í‹° ë§¤ë‹ˆì €   ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ì—ì„œ ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±í•œë‹¤.   ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•´ì„œ ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë“±ë¡, ìˆ˜ì •, ì‚­ì œ, ì¡°íšŒ ë“± ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” DB ì»¤ë„¥ì…˜ê³¼ ë°€ì ‘í•œ ê´€ê³„ê°€ ìˆìœ¼ë¯€ë¡œ ì“°ë ˆë“œê°„ì— ê³µìœ í•˜ê±°ë‚˜ ì¬ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. JPAì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì€ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   @PersistenceContextë¥¼ í†µí•´ EntityManagerë¥¼ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•œë‹¤.   1 2 @PersistenceContext EntityManager em;          JPA ë™ì‘ ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 import javax.persistence.EntityManager; import javax.persistence.EntityManagerFactory; import javax.persistence.EntityTransaction; import javax.persistence.Persistence;  public class JpaMain {      public static void main(String[] args) {         // ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±         EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"hello\");         // ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±         EntityManager em = emf.createEntityManager();          //íŠ¸ëœì­ì…˜         EntityTransaction tx = em.getTransaction();         tx.begin();          //code         try {             ...             tx.commit();         } catch (Exception e) {             tx.rollback();         } finally {             em.close(); // ì—”í‹°í‹° ë§¤ë‹ˆì € ì¢…ë£Œ         }          emf.close();// ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ì¢…ë£Œ     } }  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-EntityManger/",
        "teaser": ""
      },{
        "title": "í”ŒëŸ¬ì‹œ",
        "excerpt":"ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ë‚´ìš©ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜, íŠ¸ëœì­ì…˜ ì»¤ë°‹ ë  ë•Œ í”ŒëŸ¬ì‹œê°€ ë°œìƒí•œë‹¤.   í”ŒëŸ¬ì‹œ ë°œìƒ      ë³€ê²½ ê°ì§€   ìˆ˜ì •ëœ ì—”í‹°í‹° ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ë“±ë¡   ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡ (ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ì¿¼ë¦¬)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í”ŒëŸ¬ì‹œí•˜ëŠ” ë°©ë²•      ì°¸ê³     ì§ì ‘ í”ŒëŸ¬ì‹œë¥¼ í• ì¼ì€ ë§ì´ ì—†ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì‹œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì— ì•Œê³ ëŠ” ìˆì–´ì•¼ í•œë‹¤.        em.flush() - ì§ì ‘ í˜¸ì¶œ   íŠ¸ëœì­ì…˜ ì»¤ë°‹ - í”ŒëŸ¬ì‹œ ìë™ í˜¸ì¶œ   JPQL ì¿¼ë¦¬ ì‹¤í–‰ - í”ŒëŸ¬ì‹œ ìë™ í˜¸ì¶œ   1 2 3 4 5 6 7 Member member = new Member(200L, \"member200\"); em.persist(member); em.flush();  System.out.println(\"=============================\");  tx.commit();   1 2 3 4 5 6 7 8 9 Hibernate:      /* insert hellojpa.Member         */ insert          into             Member             (name, id)          values             (?, ?) =============================      ì°¸ê³  flush()ë¥¼ í•˜ê²Œ ë˜ë©´ 1ì°¨ ìºì‹œê°€ ì§€ì›Œì§ˆê¹Œ?   No! flush()ëŠ” ë‹¨ìˆœíˆ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ DBì— ë°˜ì˜í•˜ëŠ” ì—­í• ë§Œ í•œë‹¤.     JPQL ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ í”ŒëŸ¬ì‹œê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ì´ìœ    1 2 3 4 5 6 7 em.persist(memberA); em.persist(memberB); em.persist(memberC);  // ì¤‘ê°„ì— JPQL ì‹¤í–‰ query = em.createQuery(\"select m from Member m\", Member.class); List&lt;Member&gt; members= query.getResultList();   persist()ë¥¼ í•´ë„ ë°ì´í„°ë² ì´ìŠ¤ì— insert ë˜ëŠ” ì‹œì ì€ íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì´ë¯€ë¡œ ì›ë˜ ê°™ìœ¼ë©´ JPQLë¡œ ì¡°íšŒ ì‹œ ë°ì´í„°ê°€ ì¡°íšŒë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ JPAì—ì„œ JPQL ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ flush() í›„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ì–´ìˆë‹¤.   í”ŒëŸ¬ì‹œ ëª¨ë“œ ì˜µì…˜      FlushModeType.AUTO: ì»¤ë°‹ì´ë‚˜ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ë•Œ í”ŒëŸ¬ì‹œ (ê¸°ë³¸ê°’)   FlushModeType.COMMIT: ì»¤ë°‹í•  ë•Œë§Œ í”ŒëŸ¬ì‹œ   1 em.setFlushMode(FlushModeType.COMMIT);   ì •ë¦¬      í”ŒëŸ¬ì‹œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ìš°ì§€ ì•ŠëŠ”ë‹¤.   í”ŒëŸ¬ì‹œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ë‚´ìš©ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë™ê¸°í™”(Insert) í•´ì¤€ë‹¤   íŠ¸ëœì­ì…˜ì´ë¼ëŠ” ì‘ì—… ë‹¨ìœ„ê°€ ì¤‘ìš”, ì»¤ë°‹ ì§ì „ì—ë§Œ ë™ê¸°í™” í•˜ë©´ ëœë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-Flush/",
        "teaser": ""
      },{
        "title": "ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ê³¼ mappedBy",
        "excerpt":"ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Entity public class Member {     ...     @ManyToOne     @JoinColumn(name = \"TEAM_ID\")     private Team team; }  @Entity public class Team {     ...     @OneToMany(mappedBy = \"team\")     // ì´ˆê¸°í™” ì‹œì¼œë†“ìœ¼ë©´ add í• ë•Œ ì˜¤ë¥˜ê°€ ì•ˆë‚˜ê¸° ë•Œë¬¸ì— ê´€ë¡€ë¡œ ì´ë ‡ê²Œ ì“´ë‹¤     private List&lt;Member&gt; members = new ArrayList&lt;&gt;(); }   1 2 3 4 5 // memberê°€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ // ì¡°íšŒ Team findTeam = em.find(Team.class, team.getId());  // ì—­ë°©í–¥ ì¡°íšŒ int memberSize = findTeam.getMembers().size();   ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ê³¼ mappedBy   mappedByë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„  ê°ì²´ì™€ í…Œì´ë¸”ê°„ì— ì—°ê´€ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.      ê°ì²´ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„   ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œì´ë‹¤. ê°ì²´ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°í•˜ë ¤ë©´ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ 2ê°œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.   Memberì™€ Teamìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ë©´, ê°ì²´ ì—°ê´€ê´€ê³„ëŠ” íšŒì›ì—ì„œ íŒ€ì„ ì°¸ì¡°í•˜ëŠ” ì—°ê´€ê´€ê³„(ë‹¨ë°©í–¥)ì™€ íŒ€ì—ì„œ íšŒì›ì„ ì°¸ì¡°í•˜ëŠ” ì—°ê´€ê´€ê³„(ë‹¨ë°©í–¥) ì´ 2ê°œì˜ ê°ì²´ ì—°ê´€ê´€ê³„ê°€ ìˆë‹¤.   í…Œì´ë¸”ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„   í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•œë‹¤.   Memberì™€ Teamìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ë©´, í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ëŠ” íšŒì›, íŒ€ì˜ ì—°ê´€ê´€ê³„ê°€ 1ê°œì´ë‹¤. MEMBER.TEAM_ID ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§„ë‹¤.(ì–‘ìª½ìœ¼ë¡œ ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.)   ì—¬ê¸°ì„œ, ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ í•„ìš”í•œ ì´ìœ ê°€ ë‚˜ì˜¨ë‹¤.   ê°ì²´ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” ì°¸ì¡°ê°’ì´ 2ê°œì´ë‹¤. Memberì— ìˆëŠ” Team ê°’ì´ ì—…ë°ì´íŠ¸ ë˜ì—ˆì„ ë•Œì™€ Teamì— ìˆëŠ” Memberê°’ì´ ì—…ë°ì´íŠ¸ ë˜ì—ˆì„ ë•Œ ì–´ë–¤ ì™¸ë˜í‚¤ ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì•¼í• ì§€ ë”œë ˆë§ˆê°€ ì˜¨ë‹¤.   ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸(Owner)   ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™   ê°ì²´ì˜ ë‘ ê´€ê³„ ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤. ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬(ë“±ë¡, ìˆ˜ì •) í•  ìˆ˜ ìˆê³  ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë‹¤. ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì— mappedBy ì†ì„±ì„ ë„£ì–´ì¤€ë‹¤.   ê·¸ë ‡ë‹¤ë©´, ëˆ„êµ¬ë¥¼ ì£¼ì¸ìœ¼ë¡œ í•´ì•¼í• ê¹Œ?   ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ í•œë‹¤. ì˜ˆì‹œì—ì„œëŠ” Member.teamì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤. DB ì…ì¥ì—ì„œ ë³´ë©´ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì´ N, ì™¸ë˜í‚¤ê°€ ì—†ëŠ” ê³³ì´ 1 ì´ë‹¤. ì¦‰, N ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ë˜ë©´ ëœë‹¤.   ì–‘ë°©í–¥ ë§¤í•‘ ì‹œ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜   ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ê³  ê°€ì¥ í”íˆ í•˜ëŠ” ì‹¤ìˆ˜ëŠ” ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì—ëŠ” ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šê³  ì£¼ì¸ì´ ì•„ë‹Œ ê³³ì—ë§Œ ê°’ì„ ì…ë ¥í•˜ëŠ” ê²ƒì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 Member member = new Member(); member.setName(\"member1\"); em.persist(member);  Team team = new Team(); team.setName(\"TeamA\");  // ì£¼ì¸ì´ ì•„ë‹Œ ê³³ë§Œ ì—°ê´€ê´€ê³„ ì„¤ì • team.getMembers().add(member);  em.persist(team);   ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ ì£¼ì¸ì´ ì•„ë‹Œ ê³³ì—ë§Œ ê°’ì„ ì €ì¥ í›„ Member í…Œì´ë¸”ì„ ì¡°íšŒí•˜ë©´ ì™¸ë˜í‚¤ì¸ TEAM_ID ê°’ì´ nullë¡œ ì €ì¥ëœë‹¤. teamì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— memberê°’ì„ ë„£ì–´ì¤˜ë„ JPAì—ì„œ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ì‹œ í•œ ë²ˆ ê°•ì¡°í•˜ì§€ë§Œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.   1 2 3 team.getMembers().add(member); // ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì„¤ì •! member.setTeam(team)   ê·¸ë ‡ë‹¤ë©´, ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì—ë§Œ ê°’ì„ ì €ì¥í•˜ê³  ì£¼ì¸ì´ ì•„ë‹Œ ê³³ì—ëŠ” ê°’ì„ ì €ì¥í•˜ì§€ ì•Šì•„ë„ ë ê¹Œ?   ìˆœìˆ˜í•œ ê°ì²´ê¹Œì§€ ê³ ë ¤í•œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„   ê²°ë¡ ë¶€í„° ì–˜ê¸°í•˜ìë©´ ìˆœìˆ˜ ê°ì²´ ìƒíƒœë¥¼ ê³ ë ¤í•´ì„œ í•­ìƒ ì–‘ìª½ì— ê°’ì„ ì„¤ì •í•˜ì. JPAì…ì¥ì—ì„œ ë³´ë©´ member.setTeam(team)ë§Œ í•´ì£¼ëŠ”ê²Œ ë§ì§€ë§Œ, ê°ì²´ì§€í–¥ì˜ ì…ì¥ì—ì„œ ë³´ë©´ ì–‘ìª½ì— ê°’ì„ ë‹¤ ì¤˜ì•¼í•œë‹¤.   ì–‘ìª½ì„ ë‹¤ ì„¤ì •í•´ì£¼ë‹¤ë³´ë©´ ì‚¬ëŒì´ê¸° ë•Œë¬¸ì— ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œë¥¼ ì´ìš©í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 public class Member {     ...     @ManyToOne     @JoinColumn(name = \"TEAM_ID\")     private Team team;  \t\t// ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ     public void changeTeam(Team team) {         this.team = team;         team.getMembers().add(this);     } }   1 2 3 4 5 6 7 8 9 10 11 Team team = new Team(); team.setName(\"TeamA\"); em.persist(team);  Member member = new Member(); member.setUsername(\"member1\"); member.changeTeam(team); //ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ em.persist(member);  em.flush(); em.clear();   ê·¸ ë°–ì˜ ì–‘ë°©í–¥ ë§¤í•‘ ì‹œì— ì£¼ì˜í•  ì ì€ ë¬´í•œ ë£¨í”„ë¥¼ ì¡°ì‹¬í•´ì•¼ í•œë‹¤.   ì˜ˆë¥¼ ë“¤ë©´, toString(), lombok, JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆëŠ”ë° ìš°ì„ , lombokì˜ toString()ì€ ê°€ê¸‰ì  ì‚¬ìš©í•˜ì§€ ë§ì. ë˜í•œ, APIë¥¼ ë§Œë“¤ë•Œ ì—”í‹°í‹°ëŠ” ë°˜ë“œì‹œ DTOë¡œ ë³€ê²½í•´ì„œ ë°˜í™˜í•´ì•¼ í•œë‹¤. (ì‹¤ì œ ì‹¤ë¬´ì—ì„œëŠ” ê°€ê¸‰ì  controllerì—ì„œ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.)   ì–‘ë°©í–¥ ë§¤í•‘ ì •ë¦¬   ë‹¨ë°©í–¥ ë§¤í•‘ë§Œìœ¼ë¡œë„ ì´ë¯¸ ì—°ê´€ê´€ê³„ ë§¤í•‘ì€ ì™„ë£Œëœ ê²ƒì´ê³  ì–‘ë°©í–¥ ë§¤í•‘ì€ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì¡°íšŒ(ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰) ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ê²ƒ ë¿ì´ë‹¤. (JPQLì—ì„œ ì—­ë°©í–¥ìœ¼ë¡œ íƒìƒ‰í•  ì¼ì´ ë§ë‹¤.)   ë‹¨ë°©í–¥ ë§¤í•‘ì„ ì˜ í•˜ê³  ì–‘ë°©í–¥ì€ í•„ìš”í•  ë•Œ ì¶”ê°€í•´ë„ ëœë‹¤. (í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.) ì¦‰, ì„¤ê³„ ì‹œ ë‹¨ë°©í–¥ìœ¼ë¡œ ì„¤ê³„ í›„ ì–‘ë°©í–¥ì€ ê°œë°œí•˜ë©´ì„œ í•„ìš”í•  ë•Œ ì¶”ê°€í•œë‹¤. ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ì™¸ë˜í‚¤ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •í•œë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-MappedBy/",
        "teaser": ""
      },{
        "title": "ORMê³¼ JPA, Hibernate",
        "excerpt":"ORM   ORMì´ë€ Object(ê°ì²´)ì™€ DBì˜ í…Œì´ë¸”ì„ ë§¤í•‘í•˜ì—¬ ë°ë””í„°ë¥¼ ê°ì²´í™”í•˜ëŠ” ê¸°ìˆ ì„ ë§í•œë‹¤. ORMì„ ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ë°˜ë³µì ì¸ SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ ìƒì‚°ì„±ì´ ë†’ì•„ì§€ê³  DBMSì— ì¢…ì†ì ì´ì§€ ì•Šë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, ì¿¼ë¦¬ê°€ ë³µì¡í•´ì§€ë©´ ORMìœ¼ë¡œ í‘œí˜„í•˜ëŠ”ë° í•œê³„ê°€ ìˆê³ , ì„±ëŠ¥ì´ raw queryì— ë¹„í•´ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   JPA   JPAë€ ìë°” ORM ê¸°ìˆ ì— ëŒ€í•œ API í‘œì¤€ ëª…ì„¸ë¥¼ ì˜ë¯¸í•œë‹¤. JPAëŠ” ORMì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª¨ì•„ë‘” ê²ƒì´ë©°, JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” JPAë¥¼ êµ¬í˜„í•œ Hibernate, EclipseLink, DataNucleus ê°™ì€ ORM í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   HibernateëŠ” JPAì˜ êµ¬í˜„ì²´ì´ë‹¤. ì¦‰, JPAëŠ” ì¸í„°í˜ì´ìŠ¤ê³  HibernateëŠ” JPAë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬í˜„ì²´ì´ë‹¤. ë§ì€ êµ¬í˜„ì²´ ì¤‘ì—ì„œ Hibernateë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.   JPAë¥¼ ì‚¬ìš©í•˜ë©´ SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ê³  ê°ì²´ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤. ë˜í•œ, ìœ ì§€ë³´ìˆ˜ë„ ìš©ì´í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, ì•ì—ì„œ ë§í•œ ORMì˜ ë‹¨ì ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì¿¼ë¦¬ê°€ ë³µì¡í•´ì§€ë©´ í•œê³„ê°€ ìˆë‹¤. JPAì—ì„œëŠ” ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ JPQL, QueryDSL ë“±ì„ ì‚¬ìš©í•˜ê±°ë‚˜ í•œ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ Mybatisì™€ JPAë¥¼ ê°™ì´ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.      ì°¸ê³  SQL Mapper Objectì™€ SQLì˜ í•„ë“œë¥¼ ë§¤í•‘í•˜ì—¬ ë°ì´í„°ë¥¼ ê°ì²´í™” í•˜ëŠ” ê¸°ìˆ ì´ë‹¤. SQLë¬¸ì„ ì§ì ‘ ì‘ì„±í•˜ê³  ì¿¼ë¦¬ ìˆ˜í–‰ ê²°ê³¼ë¥¼ ì–´ë– í•œ ê°ì²´ì— ë§¤í•‘í• ì§€ ë°”ì¸ë”© í•˜ëŠ” ë°©ë²•ì´ë©°, DBMSì— ì¢…ì†ì ì¸ ë¬¸ì œê°€ ìˆë‹¤. ì£¼ë¡œ JdbcTemplate, MyBatis ë“±ì—ì„œ ì‚¬ìš©í•œë‹¤.     Hibernate ê³µì‹ ë¬¸ì„œ   Your relational data. Objectively. - Hibernate ORM  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-ORM-JPA-Hibernate/",
        "teaser": ""
      },{
        "title": "ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸",
        "excerpt":"JPAì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ 2ê°€ì§€      ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ë§¤í•‘í•˜ê¸°(ORM, Object Relation Mapping)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸   JPAë¥¼ ì´í•´í•˜ëŠ”ë° ê°€ì¥ ì¤‘ìš”í•œ ìš©ì–´ì´ë‹¤.   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë€ ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½ì´ë¼ëŠ” ëœ»ì´ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ DB ì‚¬ì´ì—ì„œ ê°ì²´ë¥¼ ë³´ê´€í•˜ëŠ” ê°€ìƒì˜ DB ê°™ì€ ì—­í• ì„ í•œë‹¤. (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë…¼ë¦¬ì ì¸ ê°œë…. ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.) ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.   ì—”í‹°í‹°ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥   1 entityManager.persist(entity);   J2SE í™˜ê²½   ì—”í‹°í‹° ë§¤ë‹ˆì €ì™€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ 1:1      J2EE, ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ ê°™ì€ ì»¨í…Œì´ë„ˆ í™˜ê²½   ì—”í‹°í‹° ë§¤ë‹ˆì €ì™€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ N:1         ì°¸ê³  J2SE(Standard Edition)   ê¸°ë³¸ì ì¸ Javaì˜ ê°œë°œ/ì‹¤í–‰ í™˜ê²½ìœ¼ë¡œ Javaì–¸ì–´ë¥¼ ì´ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜(Application), ì• í”Œë¦¿(Applet) ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸(Component) ë“±ì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•˜ëŠ” í”Œë«í¼ì´ë‹¤.        ì°¸ê³  Java EE(Enterprise Edition)   ìë°” ì—”í„°í”„ë¼ì´ì¦ˆ ì—ë””ì…˜ì€ ìë°”ë¥¼ ì´ìš©í•œ ì„œë²„ì¸¡ ê°œë°œì„ ìœ„í•œ í”Œë«í¼ì´ë‹¤. Java EEëŠ” í‘œì¤€ í”Œë«í¼ì¸ Java SEë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë²„ë¥¼ ìœ„í•œ í”Œë«í¼ì´ë‹¤. ì „ì‚¬ì  ì°¨ì›(ëŒ€ê·œëª¨ì˜ ë™ì‹œ ì ‘ì†ê³¼ ìœ ì§€ê°€ ê°€ëŠ¥í•œ ë‹¤ì–‘í•œ ì‹œìŠ¤í…œì˜ ì—°ë™ ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì´ì¹­)ì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ë„êµ¬ë¡œ EJB, JSP, Servlet, JNDI ê°™ì€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ë©° WAS(Web Application Server)ë¥¼ ì´ìš©í•œ í”„ë¡œê·¸ë¨ ê°œë°œ ì‹œ ì‚¬ìš©ëœë‹¤.         ì—”í‹°í‹°ì˜ ìƒëª…ì£¼ê¸°   ë¹„ì˜ì†(new/transient)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœì´ë©° ê°ì²´ë¥¼ ìƒì„±ë§Œ í•œ ìƒíƒœì´ë‹¤.   1 2 3 4 //ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†)  Member member = new Member();  member.setId(\"member1\");  member.setUsername(\"íšŒì›1\");   ì˜ì†(managed)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ìƒíƒœì´ë‹¤. ì—”í‹°í‹°ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ìƒíƒœ   1 2 3 4 5 6 7 8 9 10 //ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†)  Member member = new Member();  member.setId(\"member1\");  member.setUsername(â€œíšŒì›1â€);  EntityManager em = emf.createEntityManager(); em.getTransaction().begin();  //ê°ì²´ë¥¼ ì €ì¥í•œ ìƒíƒœ(ì˜ì†) em.persist(member);   ì˜ì† ìƒíƒœì—ì„œëŠ” ë°”ë¡œ DBì— ì €ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤. íŠ¸ëœì­ì…˜ì˜ commit ì‹œì ì— ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆëŠ” ì •ë³´ë“¤ì´ DBì— ì €ì¥ëœë‹¤.   ì¤€ì˜ì†(detached)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì—ˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœì´ë‹¤.   1 2 //íšŒì› ì—”í‹°í‹°ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬, ì¤€ì˜ì† ìƒíƒœ  em.detach(member);   ì‚­ì œ(removed)   ì‚­ì œëœ ìƒíƒœ, ì‹¤ì œ DB ì‚­ì œë¥¼ ìš”ì²­í•œ ìƒíƒœì´ë‹¤.   1 2 //ê°ì²´ë¥¼ ì‚­ì œí•œ ìƒíƒœ(ì‚­ì œ)  em.remove(member);      1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 package hellojpa;  import javax.persistence.EntityManager; import javax.persistence.EntityManagerFactory; import javax.persistence.EntityTransaction; import javax.persistence.Persistence;  public class JpaMain {      public static void main(String[] args) {         EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"hello\");          EntityManager em = emf.createEntityManager();          //íŠ¸ëœì­ì…˜         EntityTransaction tx = em.getTransaction();         tx.begin();          //code         try {             //ë¹„ì˜ì†             Member member = new Member();             member.setId(100L);             member.setName(\"HelloJPA\");              //ì˜ì†             System.out.println(\"=== BEFORE ===\");             em.persist(member);             System.out.println(\"=== AFTER ===\");              tx.commit();         } catch (Exception e) {             tx.rollback();         } finally {             em.close();         }          emf.close();     } }   1 2 3 4 5 6 7 8 9 10 === BEFORE === === AFTER === Hibernate:      /* insert hellojpa.Member         */ insert          into             Member             (name, id)          values             (?, ?)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ì´ì    1ì°¨ ìºì‹œ   ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ ë°”ë¡œ DBì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 1ì°¨ ìºì‹œë¥¼ ë¨¼ì € ì¡°íšŒí•œë‹¤. ì´í›„ DBë¥¼ ì¡°íšŒí•˜ì—¬ ë°ì´í„°ê°€ ìˆë‹¤ë©´ 1ì°¨ ìºì‹œì— ì €ì¥í•˜ê³  ë°˜í™˜í•œë‹¤. ì‚¬ìš©ìê°€ 10ëª… ìˆë‹¤ê³  í–ˆì„ ë•Œ 1ì°¨ ìºì‹œë¥¼ ê³µìœ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ê°ê° ê°œë³„ì˜ 1ì°¨ ìºì‹œë¥¼ ê°€ì§€ê³  ìˆë‹¤. ë”°ë¼ì„œ, ì„±ëŠ¥ ìƒ í° ì¥ì ì€ ì—†ë‹¤. (ë§¤ì»¤ë‹ˆì¦˜ì˜ ì´ì ì´ ìˆëŠ” ê²ƒ..)      1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // ì—”í‹°í‹°ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†) Member member = new Member(); member.setId(2L); member.setName(\"HelloJPA\");  System.out.println(\"=== BEFORE ===\"); // ì—”í‹°í‹°ë¥¼ ì˜ì† // 1ì°¨ ìºì‹œì— ì €ì¥ë¨ em.persist(member); System.out.println(\"=== AFTER ===\");  // 1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— selectë¬¸ì´ ì—†ë‹¤ Member findMember = em.find(Member.class, 2L);  System.out.println(\"findMember.id = \" + findMember.getId()); System.out.println(\"findMember.name = \" + findMember.getName());   1 2 3 4 5 6 7 8 9 10 11 12 === BEFORE === === AFTER === findMember.id = 2 findMember.name = HelloJPA Hibernate:      /* insert hellojpa.Member         */ insert          into             Member             (name, id)          values             (?, ?)   ì˜ì† ì—”í‹°í‹°ì˜ ë™ì¼ì„± ë³´ì¥   1 2 3 4 5 6 // DBì—ì„œ ì¡°íšŒ í›„ 1ì°¨ ìºì‹œì— ì €ì¥ Member findMember1 = em.find(Member.class, 2L); // 1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ Member findMember2 = em.find(Member.class, 2L);  System.out.println(\"result = \" + (findMember1 == findMember2));   1 2 3 4 5 6 7 8 9 Hibernate:      select         member0_.id as id1_0_0_,         member0_.name as name2_0_0_      from         Member member0_      where         member0_.id=? result = true   íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 EntityManager em = emf.createEntityManager();  EntityTransaction tx = em.getTransaction(); tx.begin(); // íŠ¸ëœì­ì…˜ ì‹œì‘  Member member1 = new Member(150L, \"A\"); Member member2 = new Member(160L, \"B\");  em.persist(member1); em.persist(member2); // ì—¬ê¸°ê¹Œì§€ Insert ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤. // 1ì°¨ ìºì‹œì—ë§Œ ì €ì¥ System.out.println(\"============================\");  // ì»¤ë°‹í•˜ëŠ” ìˆœê°„ ë°ì´í„°ë² ì´ìŠ¤ì— Insert ì¿¼ë¦¬ë¥¼ ë³´ë‚¸ë‹¤ tx.commit();   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ============================ Hibernate:      /* insert hellojpa.Member         */ insert          into             Member             (name, id)          values             (?, ?) Hibernate:      /* insert hellojpa.Member         */ insert          into             Member             (name, id)          values             (?, ?)         ë³€ê²½ ê°ì§€(dirty check)   ë³€ê²½ ê°ì§€ë€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆëŠ” ì—”í‹°í‹°ê°€ ë³€ê²½ë  ë•Œ ì´ë£¨ì–´ì§„ë‹¤. ì—”í‹°í‹°ë¥¼ ìˆ˜ì • í›„ íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹ë˜ê³  flush()ê°€ í˜¸ì¶œë˜ë©´ ì—”í‹°í‹°ì™€ ìŠ¤ëƒ…ìƒ·ì„ ë¹„êµí•œë‹¤. ë¹„êµí–ˆì„ë•Œ ê°’ì´ ë‹¤ë¥´ë‹¤ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ update ì¿¼ë¦¬ë¬¸ì„ ë³´ë‚¸ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 EntityManager em = emf.createEntityManager(); EntityTransaction transaction = em.getTransaction(); transaction.begin(); // [íŠ¸ëœì­ì…˜] ì‹œì‘  // ì˜ì† ì—”í‹°í‹° ì¡°íšŒ Member memberA = em.find(Member.class, \"memberA\");  // ì˜ì† ì—”í‹°í‹° ë°ì´í„° ìˆ˜ì • memberA.setUsername(\"hi\"); memberA.setAge(10);  //em.update(member) ì´ëŸ° ì½”ë“œê°€ ìˆì–´ì•¼ í•˜ì§€ ì•Šì„ê¹Œ?  transaction.commit(); // [íŠ¸ëœì­ì…˜] ì»¤ë°‹         ì°¸ê³  ìŠ¤ëƒ…ìƒ· ê°’ì„ ì½ì–´ ì˜¬ë•Œ ìµœì´ˆ ì‹œì ì˜ ë°ì´í„°    ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-PersistenceContext/",
        "teaser": ""
      },{
        "title": "ì¦‰ì‹œ ë¡œë”©ê³¼ ì§€ì—° ë¡œë”©",
        "excerpt":"Memberë¥¼ ì¡°íšŒí•  ë•Œ Teamë„ í•¨ê»˜ ì¡°íšŒí•´ì•¼ í• ê¹Œ?   ì§€ì—° ë¡œë”© LAZYì„ ì‚¬ìš©í•´ì„œ í”„ë¡ì‹œë¡œ ì¡°íšŒ   ì§€ì—°ë¡œë”©ì€ ì—°ê´€ëœ ê²ƒ(Team)ì„ í”„ë¡ì‹œë¡œ ê°€ì ¸ì˜¨ë‹¤.         1 2 3 4 5 6 7 public class Member {     ...      @ManyToOne(fetch = FetchType.LAZY)     @JoinColumn(name = \"TEAM_ID\")     private Team team; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 Team team = new Team(); team.setName(\"teamA\");  em.persist(team);  Member member1 = new Member(); member1.setUsername(\"member1\"); member1.setTeam(team); em.persist(member1);  em.flush(); em.clear();  // Memberë§Œ ì¡°íšŒ Member m = em.find(Member.class, member1.getId());  // Teamì€ Proxy System.out.println(\"m = \" + m.getTeam().getClass());  System.out.println(\"===================\"); // ì´ë• ì¡°íšŒ ì•ˆë¨. ì•„ë˜ ì²˜ëŸ¼ ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•Œ m.getTeam(); // Team ì¡°íšŒ m.getTeam().getName(); System.out.println(\"===================\");   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 Hibernate:      /* insert jpabook.jpashop.domain.Team         */ insert          into             Team             (name, TEAM_ID)          values             (?, ?) Hibernate:      /* insert jpabook.jpashop.domain.Member         */ insert          into             Member             (createdBy, createdDate, lastModifiedBy, modifiedDate, city, name, street, TEAM_ID, username, zipcode, MEMBER_ID)          values             (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_      from         Member member0_      where         member0_.MEMBER_ID=? m = class jpabook.jpashop.domain.Team$HibernateProxy$Y5Aao7FO =================== Hibernate:      select         team0_.TEAM_ID as team_id1_7_0_,         team0_.name as name2_7_0_      from         Team team0_      where         team0_.TEAM_ID=? ===================   Memberì™€ Teamì„ ìì£¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ë©´?   ì¦‰ì‹œ ë¡œë”© EAGERë¥¼ ì‚¬ìš©í•´ì„œ í•¨ê»˜ ì¡°íšŒ         1 2 3 4 5 6 7 public class Member {     ...      @ManyToOne(fetch = FetchType.EAGER)     @JoinColumn(name = \"TEAM_ID\")     private Team team; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 Hibernate:      /* insert jpabook.jpashop.domain.Team         */ insert          into             Team             (name, TEAM_ID)          values             (?, ?) Hibernate:      /* insert jpabook.jpashop.domain.Member         */ insert          into             Member             (createdBy, createdDate, lastModifiedBy, modifiedDate, city, name, street, TEAM_ID, username, zipcode, MEMBER_ID)          values             (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_,         team1_.TEAM_ID as team_id1_7_1_,         team1_.name as name2_7_1_      from         Member member0_      left outer join         Team team1_              on member0_.TEAM_ID=team1_.TEAM_ID      where         member0_.MEMBER_ID=? m = class jpabook.jpashop.domain.Team =================== ===================   í”„ë¡ì‹œì™€ ì¦‰ì‹œë¡œë”© ì£¼ì˜   ì‹¤ë¬´ì—ì„  ê°€ê¸‰ì  ì§€ì—° ë¡œë”©ë§Œ ì‚¬ìš©í•˜ê³  ì¦‰ì‹œë¡œë”©ì€ ë¬´ì¡°ê±´ ì“°ì§€ë§ì. ì¦‰ì‹œ ë¡œë”©ì„ ì ìš©í•˜ë©´ ì˜ˆìƒí•˜ì§€ ëª»í•œ SQLì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. ë˜í•œ, ì¦‰ì‹œ ë¡œë”©ì€ JPQLì—ì„œ N+1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤. @ManyToOne, @OneToOneì€ defaultê°€ ì¦‰ì‹œ ë¡œë”©ì´ë¯€ë¡œ LAZYë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. @OneToMany, @ManyToManyëŠ” defaultê°€ ì§€ì—° ë¡œë”©ì´ë‹¤.   [ì°¸ê³ ] JPQLì˜ N+1 ë¬¸ì œ   ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì—°ê´€ê´€ê³„ì— ìˆëŠ” ì—”í‹°í‹°ë¥¼ ëª¨ë‘ Join í•˜ì—¬ select ì¿¼ë¦¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê·¸ëŸ¬ë‚˜, JPQLì€ SQL ê·¸ëŒ€ë¡œ ë²ˆì—­ë˜ë¯€ë¡œ EAGERë¡œ ì„¤ì •í•´ë„ Memberë§Œ ë¨¼ì € select í•œ í›„, Member ì—”í‹°í‹°ì— Teamì´ ì—°ê´€ê´€ê³„ë¡œ ì„¤ì •ë˜ìˆìœ¼ë‹ˆ Teamë„ select í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 Team team = new Team(); team.setName(\"teamA\"); em.persist(team);  Member member1 = new Member(); member1.setUsername(\"member1\"); member1.setTeam(team); em.persist(member1);  em.flush(); em.clear();  // em.find()ëŠ” pkë¥¼ ì§€ì •í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™” ê°€ëŠ¥ // Member m = em.find(Member.class, member1.getId());  List&lt;Member&gt; members = em.createQuery(\"select m from Member m\", Member.class)                     .getResultList();  // SQL: select * from Member; // SQL: select * from Team where Team_id = member.team.id;   ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒ!   Memberê°€ 1,2,3â€¦N ìˆë‹¤ë©´ ê·¸ì— í•´ë‹¹í•˜ëŠ” Teamì„ ì¡°íšŒí•˜ê¸° ìœ„í•´ Në²ˆ ì¿¼ë¦¬ ë‚ ë¦¼   ìµœì´ˆì˜ ì¿¼ë¦¬ê°€ 1ì´ë©´ ì´ì— í•´ë‹¹í•˜ëŠ” ì—°ê´€ê´€ê³„ì˜ ì¿¼ë¦¬ë¥¼ Në²ˆ ë‚ ë¦°ë‹¤ê³  í•˜ì—¬ N+1ì´ë¼í•¨   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 Team team = new Team(); team.setName(\"teamA\"); em.persist(team);  Team teamB = new Team(); teamB.setName(\"teamB\"); em.persist(teamB);  Member member1 = new Member(); member1.setUsername(\"member1\"); member1.setTeam(team); em.persist(member1);  Member member2 = new Member(); member2.setUsername(\"member2\"); member2.setTeam(teamB); em.persist(member2);  em.flush(); em.clear();  List&lt;Member&gt; members = em.createQuery(\"select m from Member m\", Member.class)                     .getResultList();   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 Hibernate:      /* select         m      from         Member m */ select             member0_.MEMBER_ID as member_i1_4_,             member0_.createdBy as createdb2_4_,             member0_.createdDate as createdd3_4_,             member0_.lastModifiedBy as lastmodi4_4_,             member0_.modifiedDate as modified5_4_,             member0_.city as city6_4_,             member0_.name as name7_4_,             member0_.street as street8_4_,             member0_.TEAM_ID as team_id11_4_,             member0_.username as username9_4_,             member0_.zipcode as zipcode10_4_          from             Member member0_ Hibernate:      select         team0_.TEAM_ID as team_id1_7_0_,         team0_.name as name2_7_0_      from         Team team0_      where         team0_.TEAM_ID=? Hibernate:      select         team0_.TEAM_ID as team_id1_7_0_,         team0_.name as name2_7_0_      from         Team team0_      where         team0_.TEAM_ID=?   JPQLì„ ì‚¬ìš©í•´ Memberë¥¼ ì¡°íšŒ(1)í–ˆì§€ë§Œ Memberì— í•´ë‹¹í•˜ëŠ” ê°œìˆ˜(N)ë§Œí¼ Teamì„ ì¡°íšŒí•œë‹¤. ì´ë¥¼ N + 1 ë¬¸ì œë¼ê³  í•œë‹¤.   N+1ì„ í•´ê²°í•˜ëŠ” ë°©ë²•   ì¼ë‹¨ Lazyë¡œ ë‹¤ ì„¤ì •. 3ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë° ëŒ€ë¶€ë¶„ fetch ì¡°ì¸ ì‚¬ìš©í•´ì„œ í•´ê²°í•¨   1 2 List&lt;Member&gt; members = em.createQuery(\"select m from Member m join fetch m.team\", Member.class)                     .getResultList();   ì§€ì—°ë¡œë”©ì„ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•  ë•Œ   ëª¨ë“  ì—°ê´€ê´€ê³„ì— ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•˜ê³  ì‹¤ë¬´ì—ì„œ ì¦‰ì‹œ ë¡œë”©ì„ ì‚¬ìš©í•˜ì§€ ë§ì. JPQL fetch ì¡°ì¸ì´ë‚˜, ì—”í‹°í‹° ê·¸ë˜í”„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë¼! (ë’¤ì—ì„œ ì„¤ëª…) ì¦‰ì‹œ ë¡œë”©ì€ ìƒìƒí•˜ì§€ ëª»í•œ ì¿¼ë¦¬ê°€ ë‚˜ê°„ë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-LazyLoading/",
        "teaser": ""
      },{
        "title": "í”„ë¡ì‹œ",
        "excerpt":"Memberë¥¼ ì¡°íšŒí•  ë•Œ Teamë„ í•¨ê»˜ ì¡°íšŒí•´ì•¼ í• ê¹Œ?      Memberì™€ Teamì´ ë‘˜ë‹¤ í•„ìš”í•œ ê²½ìš°ë„ ìˆì§€ë§Œ Memberë§Œ í•„ìš”í•  ê²½ìš°ì—” Teamê¹Œì§€ ì¡°íšŒí•˜ëŠ”ê±´ ë¶ˆí•„ìš”í•œ ê³¼ì •ì´ë‹¤.   í”„ë¡ì‹œ   ì§€ì—° ë¡œë”©ì„ ì´í•´í•˜ë ¤ë©´ í”„ë¡ì‹œì˜ ê°œë…ì— ëŒ€í•´ ëª…í™•í•˜ê²Œ ì´í•´í•´ì•¼ í•œë‹¤. JPAì—ëŠ” em.find()ì™€ em.getReference() ë©”ì„œë“œê°€ ìˆë‹¤. em.find()ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•´ì„œ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œì´ê³  em.getReference()ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ê°€ì§œ(í”„ë¡ì‹œ) ì—”í‹°í‹° ê°ì²´ë¥¼ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œì´ë‹¤. (í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ì§œë¥¼ ì¡°íšŒí•œë‹¤.)      [ì˜ˆì‹œ] em.find()   1 2 3 4 5 6 7 8 9 10 11 12 Member member = new Member(); member.setUsername(\"hello\");  em.persist(member);  // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê¹¨ë—í•´ì§ em.flush(); em.clear();  Member findMember = em.find(Member.class, member.getId()); System.out.println(\"findMember.id = \" + findMember.getId()); System.out.println(\"findMember.username = \" + findMember.getUsername());   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 Hibernate:      call next value for hibernate_sequence Hibernate:      /* insert jpabook.jpashop.domain.Member         */ insert          into             Member             (createdBy, createdDate, lastModifiedBy, modifiedDate, city, name, street, username, zipcode, MEMBER_ID)          values             (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_,         team1_.TEAM_ID as team_id1_7_1_      from         Member member0_      left outer join         Team team1_              on member0_.TEAM_ID=team1_.TEAM_ID      where         member0_.MEMBER_ID=? findMember.id = 1 findMember.username = hello   [ì˜ˆì‹œ] em.getReference() ë§Œ ì‘ì„± í–ˆì„ ë•Œ: ì¡°íšŒ ì•ˆí•¨   1 2 3 4 5 6 7 8 9 Member member = new Member(); member.setUsername(\"hello\");  em.persist(member);  em.flush(); em.clear();  Member findMember = em.getReference(Member.class, member.getId());   1 2 3 4 5 6 7 8 9 10 Hibernate:      call next value for hibernate_sequence Hibernate:      /* insert jpabook.jpashop.domain.Member         */ insert          into             Member             (createdBy, createdDate, lastModifiedBy, modifiedDate, city, name, street, username, zipcode, MEMBER_ID)          values             (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)   [ì˜ˆì‹œ] em.getReference() í›„ println í–ˆì„ ë•Œ   1 2 3 4 5 6 7 8 9 10 11 12 13 Member member = new Member(); member.setUsername(\"hello\");  em.persist(member);  em.flush(); em.clear(); // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê¹¨ë—í•´ì§  Member findMember = em.getReference(Member.class, member.getId()); System.out.println(\"findMember = \" + findMember); System.out.println(\"findMember.id = \" + findMember.getId()); System.out.println(\"findMember.username = \" + findMember.getUsername());   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 Hibernate:      /* insert jpabook.jpashop.domain.Member         */ insert          into             Member             (createdBy, createdDate, lastModifiedBy, modifiedDate, city, name, street, username, zipcode, MEMBER_ID)          values             (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_,         team1_.TEAM_ID as team_id1_7_1_      from         Member member0_      left outer join         Team team1_              on member0_.TEAM_ID=team1_.TEAM_ID      where         member0_.MEMBER_ID=? findMember = jpabook.jpashop.domain.Member@6bcb12e6 findMember.id = 1 findMember.username = hello   ìœ„ì˜ ì˜ˆì œë¥¼ ì‚´í´ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´ í”„ë¡ì‹œëŠ” ì—°ê´€ëœ ê°ì²´ë¥¼ ì²˜ìŒë¶€í„° DBì—ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— DBì—ì„œ ì¡°íšŒí•œë‹¤.   í”„ë¡ì‹œ êµ¬ì¡°   í”„ë¡ì‹œ í´ë˜ìŠ¤ëŠ” ì‹¤ì œ í´ë˜ìŠ¤(ì—”í‹°í‹°)ë¥¼ ìƒì† ë°›ì•„ì„œ ë§Œë“¤ì–´ì ¸ ì‹¤ì œ í´ë˜ìŠ¤ì™€ ê²‰ ëª¨ì–‘ì´ ê°™ë‹¤. ë”°ë¼ì„œ, ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œëŠ” ì§„ì§œ ê°ì²´ì¸ì§€ í”„ë¡ì‹œ ê°ì²´ì¸ì§€ êµ¬ë¶„í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë©´ ëœë‹¤. (ì´ë¡ ìƒ)      í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ì°¸ì¡°(target)ë¥¼ ë³´ê´€í•˜ê³  ìˆë‹¤ê°€ í”„ë¡ì‹œ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ë©´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤.      í”„ë¡ì‹œ ê°ì²´ì˜ ì´ˆê¸°í™”   1 2 3 4 Member member = em.getReference(Member.class, \"id1\");  // ì‹¤ì œ ê°’ì„ í˜¸ì¶œí•  ë•Œ ì´ˆê¸°í™”ê°€ ì§„í–‰ë¨ member.getName();      getName()ì„ ë¶ˆëŸ¬ì˜´. ì²˜ìŒì—” Member targetì— ê°’ì´ ì—†ìŒ   ê°’ì´ ì—†ìœ¼ë¯€ë¡œ JPAê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì‹¤ì œ ì—”í‹°í‹° ìƒì„±ì„ ìš”ì²­í•¨(ì´ˆê¸°í™”)   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ DBë¥¼ ì¡°íšŒ   ì‹¤ì œ DB ê°ì²´ë¥¼ ê°€ì ¸ì˜´   MemberProxyì— ìˆëŠ” targetì— ì—”í‹°í‹°ë¥¼ ì—°ê²°í•´ì¤Œ      í”„ë¡ì‹œì˜ íŠ¹ì§•   í”„ë¡ì‹œ ê°ì²´ëŠ” ì²˜ìŒ ì‚¬ìš©í•  ë•Œ í•œ ë²ˆë§Œ ì´ˆê¸°í™”ëœë‹¤. í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™” í•  ë•Œ, í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ë°”ë€ŒëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì´ˆê¸°í™”ë˜ë©´ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ì„œ ì‹¤ì œ ì—”í‹°í‹°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.   í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ì—”í‹°í‹°ë¥¼ ìƒì†ë°›ì€ ê°ì²´ì´ë‹¤. ë”°ë¼ì„œ, íƒ€ì… ì²´í¬ ì‹œ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.(instance of ì‚¬ìš©)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 Member member1 = new Member(); member1.setUsername(\"member1\"); em.persist(member1);  Member member2 = new Member(); member2.setUsername(\"member2\"); em.persist(member2);  em.flush(); em.clear();  Member m1 = em.find(Member.class, member1.getId()); Member m2 = em.getReference(Member.class, member2.getId());  System.out.println(\"m1 == m2: \" + (m1.getClass() == m2.getClass())); System.out.println(\"m1 == m2: \" + (m1 instanceof Member)); System.out.println(\"m1 == m2: \" + (m2 instanceof Member));   1 2 3 m1 == m2: false m1 == m2: true m1 == m2: true   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì°¾ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆìœ¼ë©´ em.getReference()ë¥¼ í˜¸ì¶œí•´ë„ ì‹¤ì œ ì—”í‹°í‹° ë°˜í™˜í•œë‹¤.   [ì˜ˆì‹œ] ì—”í‹°í‹° ì¡°íšŒ í›„ Proxy ê°ì²´ ì¡°íšŒí•  ë•Œ   1 2 3 4 5 Member m1 = em.find(Member.class, member1.getId()); System.out.println(\"m1 = \" + m1.getClass());  Member reference = em.getReference(Member.class, member1.getId()); System.out.println(\"reference = \" + reference.getClass());   1 2 m1 = class jpabook.jpashop.domain.Member reference = class jpabook.jpashop.domain.Member   [ì˜ˆì‹œ] Proxy ê°ì²´ ì¡°íšŒ í›„ ì—”í‹°í‹° ì¡°íšŒ í•  ë•Œ   1 2 3 4 5 6 7 8 9 Member refMember = em.getReference(Member.class, member1.getId()); System.out.println(\"refMember = \" + refMember.getClass());  // Memberë¥¼ ê°€ì ¸ì˜¬ ê²ƒ ê°™ì§€ë§Œ ìœ„ì—ì„œ Proxyë¥¼ í•œë²ˆ í˜¸ì¶œí–ˆê¸° ë•Œë¬¸ì— // em.findë¥¼ í•´ë„ Proxyë¥¼ ê°€ì ¸ì˜¨ë‹¤ Member findMember = em.find(Member.class, member1.getId()); System.out.println(\"findMember = \" + findMember.getClass());  System.out.println(\"refMember == findMember: \" + (refMember == findMember));   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 refMember = class jpabook.jpashop.domain.Member$HibernateProxy$VJEp6TpB Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_,         team1_.TEAM_ID as team_id1_7_1_      from         Member member0_      left outer join         Team team1_              on member0_.TEAM_ID=team1_.TEAM_ID      where         member0_.MEMBER_ID=? findMember = class jpabook.jpashop.domain.Member$HibernateProxy$VJEp6TpB refMember == findMember: true   ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ì—†ëŠ” ì¤€ì˜ì† ìƒíƒœì¼ ë•Œ, í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. (í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” org.hibernate.LazyInitializationException ì˜ˆì™¸ë¥¼ í„°íŠ¸ë¦¼)   1 2 3 4 5 6 7 8 Member refMember = em.getReference(Member.class, member1.getId()); System.out.println(\"refMember = \" + refMember.getClass());  // ì¤€ì˜ì† ìƒíƒœë¡œ ì „í™˜ em.detach(refMember);  // í”„ë¡ì‹œ ì´ˆê¸°í™” refMember.getUsername();   1 2 3 4 5 6 7 8 refMember = class jpabook.jpashop.domain.Member$HibernateProxy$jeLlOsNZ org.hibernate.LazyInitializationException: could not initialize proxy [jpabook.jpashop.domain.Member#1] - no Session \tat org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:176) \tat org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:322) \tat org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:45) \tat org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:95) \tat jpabook.jpashop.domain.Member$HibernateProxy$jeLlOsNZ.getUsername(Unknown Source) \tat jpabook.jpashop.JpaMain.main(JpaMain.java:38)   í”„ë¡ì‹œ í™•ì¸   í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ˆê¸°í™” ì—¬ë¶€ í™•ì¸í•˜ë ¤ë©´ PersistenceUnitUtil.isLoaded(Object entity) ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.   1 2 3 4 5 6 7 8 Member refMember = em.getReference(Member.class, member1.getId()); System.out.println(\"refMember = \" + refMember.getClass());  System.out.println(\"isLoaded = \" + emf.getPersistenceUnitUtil().isLoaded(refMember));  // í”„ë¡ì‹œ ì´ˆê¸°í™” ì‹œí‚´ refMember.getUsername(); System.out.println(\"isLoaded = \" + emf.getPersistenceUnitUtil().isLoaded(refMember));   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 refMember = class jpabook.jpashop.domain.Member$HibernateProxy$4UHDPuSB isLoaded = false Hibernate:      select         member0_.MEMBER_ID as member_i1_4_0_,         member0_.createdBy as createdb2_4_0_,         member0_.createdDate as createdd3_4_0_,         member0_.lastModifiedBy as lastmodi4_4_0_,         member0_.modifiedDate as modified5_4_0_,         member0_.city as city6_4_0_,         member0_.name as name7_4_0_,         member0_.street as street8_4_0_,         member0_.TEAM_ID as team_id11_4_0_,         member0_.username as username9_4_0_,         member0_.zipcode as zipcode10_4_0_,         team1_.TEAM_ID as team_id1_7_1_      from         Member member0_      left outer join         Team team1_              on member0_.TEAM_ID=team1_.TEAM_ID      where         member0_.MEMBER_ID=? isLoaded = true   í”„ë¡ì‹œ í´ë˜ìŠ¤ í™•ì¸ ë°©ë²•ì€ entity.getClass().getName() ì¶œë ¥í•´ë³´ë©´ ëœë‹¤. í´ë˜ìŠ¤ ëª… ë’¤ì— ..javasist.. ë˜ëŠ” HibernateProxyâ€¦ì´ ë¶™ì–´ìˆìœ¼ë©´ í”„ë¡ì‹œì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.   í”„ë¡ì‹œ ê°•ì œ ì´ˆê¸°í™”ëŠ” org.hibernate.Hibernate.initialize(entity);ë¥¼ í†µí•´ í•  ìˆ˜ ìˆë‹¤.   ì°¸ê³ ë¡œ JPA í‘œì¤€ì€ ê°•ì œ ì´ˆê¸°í™” ë©”ì†Œë“œê°€ ì—†ë‹¤. ë”°ë¼ì„œ, ê°•ì œë¡œ ì´ˆê¸°í™”í•˜ë ¤ë©´ member.getName()ì²˜ëŸ¼ í”„ë¡ì‹œì˜ ë©”ì†Œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ëœë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-Proxy/",
        "teaser": ""
      },{
        "title": "íƒ€ì„ë¦¬í”„(thymleaf)",
        "excerpt":"ê³µì‹ ì‚¬ì´íŠ¸   Tutorial: Using Thymeleaf   íƒ€ì„ë¦¬í”„ íŠ¹ì§•   1. ì„œë²„ ì‚¬ì´ë“œ HTML ë Œë”ë§ (SSR)   íƒ€ì„ë¦¬í”„ëŠ” ë°±ì—”ë“œ ì„œë²„ì—ì„œ HTMLì„ ë™ì ìœ¼ë¡œ ë Œë”ë§ í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤.   ë°±ì—”ë“œ ê°œë°œìë¼ë©´ jsp, thymeleaf ì¤‘ í•˜ë‚˜ëŠ” ì•Œì•„ë‘ëŠ”ê²Œ ì¢‹ë‹¤!   2. ë„¤ì¸„ëŸ´ í…œí”Œë¦¿   íƒ€ì„ë¦¬í”„ëŠ” ìˆœìˆ˜ HTMLì„ ìµœëŒ€í•œ ìœ ì§€í•˜ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.   íƒ€ì„ë¦¬í”„ë¡œ ì‘ì„±í•œ íŒŒì¼ì€ HTMLì„ ìœ ì§€í•˜ê¸° ë•Œë¬¸ì— ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ì„ ì§ì ‘ ì—´ì–´ë„ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆê³ , ì„œë²„ë¥¼ í†µí•´ ë·° í…œí”Œë¦¿ì„ ê±°ì¹˜ë©´ ë™ì ìœ¼ë¡œ ë³€ê²½ëœ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   JSPë¥¼ í¬í•¨í•œ ë‹¤ë¥¸ ë·° í…œí”Œë¦¿ë“¤ì€ í•´ë‹¹ íŒŒì¼ì„ ì—´ë©´, ì˜ˆë¥¼ ë“¤ì–´ì„œ JSP íŒŒì¼ ìì²´ë¥¼ ê·¸ëŒ€ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ë³´ë©´ JSP ì†ŒìŠ¤ì½”ë“œì™€ HTMLì´ ë’¤ì£½ë°•ì£½ ì„ì—¬ì„œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì •ìƒì ì¸ HTML ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ë‹¤. ì˜¤ì§ ì„œë²„ë¥¼ í†µí•´ì„œ JSPê°€ ë Œë”ë§ ë˜ê³  HTML ì‘ë‹µ ê²°ê³¼ë¥¼ ë°›ì•„ì•¼ í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ë°˜ë©´ì—, íƒ€ì„ë¦¬í”„ë¡œ ì‘ì„±ëœ íŒŒì¼ì€ í•´ë‹¹ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ë„ ì •ìƒì ì¸ HTML ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¬¼ë¡  ì´ ê²½ìš° ë™ì ìœ¼ë¡œ ê²°ê³¼ê°€ ë Œë”ë§ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ HTML ë§ˆí¬ì—… ê²°ê³¼ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ íŒŒì¼ë§Œ ì—´ì–´ë„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ì´ë ‡ê²Œ ìˆœìˆ˜ HTMLì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ë·° í…œí”Œë¦¿ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íƒ€ì„ë¦¬í”„ì˜ íŠ¹ì§•ì„ ë„¤ì¸„ëŸ´ í…œí”Œë¦¿(natural templates)ì´ë¼ í•œë‹¤.   3. ìŠ¤í”„ë§ í†µí•© ì§€ì›   íƒ€ì„ë¦¬í”„ëŠ” ìŠ¤í”„ë§ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©ë˜ê³ , ìŠ¤í”„ë§ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì§€ì›í•œë‹¤.       ë¼ì´ë¸ŒëŸ¬ë¦¬   íƒ€ì„ë¦¬í”„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€   1 implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'   HTMLì— íƒ€ì„ë¦¬í”„ ì‚¬ìš© ì„ ì–¸   1 &lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;       ê¸°ë³¸ í‘œí˜„ì‹   1 th:   íƒœê·¸ ì•ˆì˜ ê°’ì„ ì„œë²„ì—ì„œ ì „ë‹¬ ë°›ì€ ê°’ì— ë”°ë¼ì„œ í‘œí˜„í•˜ê³ ì í•  ë•Œ ì‚¬ìš©       í…ìŠ¤íŠ¸ ì¶œë ¥   th:text   1 &lt;span th:text=\"${data}\"&gt;   íƒœê·¸ì˜ ì†ì„±ì— ê¸°ëŠ¥ì„ ì •ì˜í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥   [[â€¦]]   1 &lt;li&gt;ì»¨í…ì¸  ì•ˆì—ì„œ ì§ì ‘ ì¶œë ¥í•˜ê¸° = [[${data}]]&lt;/li&gt;   íƒœê·¸ì˜ ì†ì„±ì´ ì•„ë‹Œ ì½˜í…ì¸  ì˜ì—­ì•ˆì—ì„œ ì§ì ‘ ë°ì´í„° ì¶œë ¥   1 2 3 4 5 6 7 8 9 10 11 12 &lt;!-- ${data} = â€œHello &lt;b&gt;Spring&lt;/b&gt;â€ --&gt;  &lt;h1&gt;text vs utext&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;th:text = &lt;span th:text=\"${data}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;th:utext = &lt;span th:utext=\"${data}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h1&gt;&lt;span th:inline=\"none\"&gt;[[...]] vs [(...)]&lt;/span&gt;&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;&lt;span th:inline=\"none\"&gt;[[...]] = &lt;/span&gt;[[${data}]]&lt;/li&gt;   &lt;li&gt;&lt;span th:inline=\"none\"&gt;[(...)] = &lt;/span&gt;[(${data})]&lt;/li&gt; &lt;/ul&gt;      th:utextì™€ [(â€¦)]ì€ Unesacpe í•´ì¤€ë‹¤.      ì°¸ê³     Escape(ì´ìŠ¤ì¼€ì´í”„) HTMLì—ì„œ ì´ìŠ¤ì¼€ì´í”„í•œë‹¤ëŠ” ê²ƒì€, ëª‡ê°€ì§€ íŠ¹ë³„í•œ ë¬¸ìë“¤ì„ êµì²´í•˜ëŠ” ê²ƒì´ë‹¤. &lt;, &gt;, â€œ, &amp;ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹í•œë‹¤. (&lt; â†’ &lt;, &gt; â†’ &gt;)        ì£¼ì˜   ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë‹¤ ë³´ë©´ escapeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ HTMLì´ ì •ìƒ ë Œë”ë§ ë˜ì§€ ì•ŠëŠ” ìˆ˜ ë§ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. escapeë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ê³ , ê¼­ í•„ìš”í•œ ë•Œë§Œ unescapeë¥¼ ì‚¬ìš©í•˜ì.     SpringEL   Object   1 2 3 &lt;li&gt;${user.username} = &lt;span th:text=\"${user.username}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${user['username']} = &lt;span th:text=\"${user['username']}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${user.getUsername()} = &lt;span th:text=\"${user.getUsername()}\"&gt;&lt;/span&gt;&lt;/li&gt;   List   1 2 3 &lt;li&gt;${users[0].username} = &lt;span th:text=\"${users[0].username}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${users[0]['username']} = &lt;span th:text=\"${users[0]['username']}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${users[0].getUsername()} = &lt;span th:text=\"${users[0].getUsername()}\"&gt;&lt;/span&gt;&lt;/li&gt;   Map   1 2 3 &lt;li&gt;${userMap['userA'].username} = &lt;span th:text=\"${userMap['userA'].username}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${userMap['userA']['username']} = &lt;span th:text=\"${userMap['userA']['username']}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;li&gt;${userMap['userA'].getUsername()} = &lt;span th:text=\"${userMap['userA'].getUsername()}\"&gt;&lt;/span&gt;&lt;/li&gt;   ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸ (th:with)   1 2 3 &lt;div th:with=\"first=${users[0]}\"&gt;   &lt;p&gt;ì²˜ìŒ ì‚¬ëŒì˜ ì´ë¦„ì€ &lt;span th:text=\"${first.username}\"&gt;&lt;/span&gt;&lt;/p&gt; &lt;/div&gt;       ê¸°ë³¸ ê°ì²´ë“¤   1 2 3 4 5 6 7 8 9 10 11 12 @GetMapping(\"/basic-objects\") public String basicObjects(HttpSession session) {     session.setAttribute(\"sessionData\", \"Hello Session\");     return \"basic/basic-objects\"; }  @Component(\"helloBean\") static class HelloBean {     public String hello(String data) {         return \"Hello\" + data;     } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 &lt;h1&gt;ì‹ ê¸°ë³¸ ê°ì²´ (Expression Basic Objects)&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;request = &lt;span th:text=\"${#request}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;response = &lt;span th:text=\"${#response}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;session = &lt;span th:text=\"${#session}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;servletContext = &lt;span th:text=\"${#servletContext}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;locale = &lt;span th:text=\"${#locale}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h1&gt;í¸ì˜ ê°ì²´&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;Request Parameter = &lt;span th:text=\"${param.paramData}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;session = &lt;span th:text=\"${session.sessionData}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;spring bean = &lt;span th:text=\"${@helloBean.hello('Spring!')}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt;       ìœ í‹¸ë¦¬í‹° ê°ì²´ì™€ ë‚ ì§œ   íƒ€ì„ë¦¬í”„ ìœ í‹¸ë¦¬í‹° ê°ì²´ë“¤      #message : ë©”ì‹œì§€, êµ­ì œí™” ì²˜ë¦¬   #uris : URI ì´ìŠ¤ì¼€ì´í”„ ì§€ì›   #dates : java.util.Date ì„œì‹ ì§€ì›   #calendars : java.util.Calendar ì„œì‹ ì§€ì›   #temporals : ìë°”8 ë‚ ì§œ ì„œì‹ ì§€ì›   #numbers : ìˆ«ì ì„œì‹ ì§€ì›   #strings : ë¬¸ì ê´€ë ¨ í¸ì˜ ê¸°ëŠ¥   #objects : ê°ì²´ ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ   #bools : boolean ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ   #arrays : ë°°ì—´ ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ   #lists , #sets , #maps : ì»¬ë ‰ì…˜ ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ   #ids : ì•„ì´ë”” ì²˜ë¦¬ ê´€ë ¨ ê¸°ëŠ¥ ì œê³µ, ë’¤ì—ì„œ ì„¤ëª…   ìë°”8 ë‚ ì§œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 &lt;h1&gt;LocalDateTime&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;default = &lt;span th:text=\"${localDateTime}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;yyyy-MM-dd HH:mm:ss = &lt;span th:text=\"${#temporals.format(localDateTime, 'yyyy-MM-dd HH:mm:ss')}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h1&gt;LocalDateTime - Utils&lt;/h1&gt; &lt;ul&gt;   &lt;li&gt;${#temporals.day(localDateTime)} = &lt;span th:text=\"${#temporals.day(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.month(localDateTime)} = &lt;span th:text=\"${#temporals.month(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.monthName(localDateTime)} = &lt;span th:text=\"${#temporals.monthName(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.monthNameShort(localDateTime)} = &lt;span th:text=\"${#temporals.monthNameShort(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.year(localDateTime)} = &lt;span th:text=\"${#temporals.year(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.dayOfWeek(localDateTime)} = &lt;span th:text=\"${#temporals.dayOfWeek(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.dayOfWeekName(localDateTime)} = &lt;span th:text=\"${#temporals.dayOfWeekName(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.dayOfWeekNameShort(localDateTime)} = &lt;span th:text=\"${#temporals.dayOfWeekNameShort(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.hour(localDateTime)} = &lt;span th:text=\"${#temporals.hour(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.minute(localDateTime)} = &lt;span th:text=\"${#temporals.minute(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.second(localDateTime)} = &lt;span th:text=\"${#temporals.second(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;${#temporals.nanosecond(localDateTime)} = &lt;span th:text=\"${#temporals.nanosecond(localDateTime)}\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt;       URL ë§í¬   1 2 &lt;!-- /hello --&gt; &lt;li&gt;&lt;a th:href=\"@{/hello}\"&gt;basic url&lt;/a&gt;&lt;/li&gt;   1 2 3 4 5 6 @GetMapping(\"/link\") public String link(Model model) {     model.addAttribute(\"param1\", \"data1\");     model.addAttribute(\"param2\", \"data2\");     return \"basic/link\"; }   1 2 3 4 5 6 7 8 9 10 11 &lt;h1&gt;URL ë§í¬&lt;/h1&gt; &lt;ul&gt;   &lt;!-- /hello --&gt;   &lt;li&gt;&lt;a th:href=\"@{/hello}\"&gt;basic url&lt;/a&gt;&lt;/li&gt;   &lt;!-- /hello?param1=data1&amp;param2=data2 --&gt;   &lt;li&gt;&lt;a th:href=\"@{/hello(param1=${param1}, param2=${param2})}\"&gt;hello query param&lt;/a&gt;&lt;/li&gt;   &lt;!-- /hello/data1/data2 --&gt;   &lt;li&gt;&lt;a th:href=\"@{/hello/{param1}/{param2}(param1=${param1}, param2=${param2})}\"&gt;path variable&lt;/a&gt;&lt;/li&gt;   &lt;!-- /hello/data1?param2=data2 --&gt;   &lt;li&gt;&lt;a th:href=\"@{/hello/{param1}(param1=${param1}, param2=${param2})}\"&gt;path variable + query parameter&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;       Literals   1 2 3 4 5 6 7 8 9 &lt;h1&gt;ë¦¬í„°ëŸ´&lt;/h1&gt; &lt;ul&gt;   &lt;!--ì£¼ì˜! ë‹¤ìŒ ì£¼ì„ì„ í’€ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•¨--&gt;   &lt;!--    &lt;li&gt;\"hello world!\" = &lt;span th:text=\"hello world!\"&gt;&lt;/span&gt;&lt;/li&gt;--&gt;   &lt;li&gt;'hello' + ' world!' = &lt;span th:text=\"'hello' + ' world!'\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;'hello world!' = &lt;span th:text=\"'hello world!'\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;'hello ' + ${data} = &lt;span th:text=\"'hello ' + ${data}\"&gt;&lt;/span&gt;&lt;/li&gt;   &lt;li&gt;ë¦¬í„°ëŸ´ ëŒ€ì²´ |hello ${data}| = &lt;span th:text=\"|hello ${data}|\"&gt;&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt;      ì£¼ì˜ íƒ€ì„ë¦¬í”„ì—ì„œ ë¬¸ì ë¦¬í„°ëŸ´ì€ í•­ìƒ â€˜(ì‘ì€ ë”°ì˜´í‘œ)ë¡œ ê°ì‹¸ì•¼ í•œë‹¤.     ì†ì„± ê°’ ì„¤ì •   ì†ì„± ì„¤ì •   1 2 3 &lt;input type=\"text\" name=\"mock\" th:name=\"userA\"/&gt; &lt;!-- ë Œë”ë§ í›„ --&gt; &lt;input type=\"text\" name=\"userA\"/&gt;   ì†ì„± ì¶”ê°€   1 2 3 - th:attrappend = &lt;input type=\"text\" class=\"text\" th:attrappend=\"class=' large'\"/&gt;&lt;br/&gt; - th:attrprepend = &lt;input type=\"text\" class=\"text\" th:attrprepend=\"class='large'\"/&gt;&lt;br/&gt; - th:classappend = &lt;input type=\"text\" class=\"text\" th:classappend=\"large\"/&gt;&lt;br/&gt;   checked ì²˜ë¦¬   1 2 3 4 5 6 7 - checked o &lt;input type=\"checkbox\" name=\"active\" th:checked=\"true\"/&gt;&lt;br/&gt;  &lt;!-- th:checked ëŠ” ê°’ì´ false ì¸ ê²½ìš° checked ì†ì„± ìì²´ë¥¼ ì œê±° --&gt; - checked x &lt;input type=\"checkbox\" name=\"active\" th:checked=\"false\"/&gt;&lt;br/&gt;  &lt;!-- ì´ ê²½ìš°ì—ë„ checked ì†ì„±ì´ ìˆê¸° ë•Œë¬¸ì— checked ì²˜ë¦¬ê°€ ë˜ì–´ë²„ë¦°ë‹¤. --&gt; - checked=false &lt;input type=\"checkbox\" name=\"active\" checked=\"false\"/&gt;&lt;br/&gt;       ë°˜ë³µ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 &lt;tr th:each=\"user, userStat : ${users}\"&gt;   &lt;td th:text=\"${userStat.count}\"&gt;username&lt;/td&gt;   &lt;td th:text=\"${user.username}\"&gt;username&lt;/td&gt;   &lt;td th:text=\"${user.age}\"&gt;0&lt;/td&gt;   &lt;td&gt;     index = &lt;span th:text=\"${userStat.index}\"&gt;&lt;/span&gt;     count = &lt;span th:text=\"${userStat.count}\"&gt;&lt;/span&gt;     size = &lt;span th:text=\"${userStat.size}\"&gt;&lt;/span&gt;     even? = &lt;span th:text=\"${userStat.even}\"&gt;&lt;/span&gt;     odd? = &lt;span th:text=\"${userStat.odd}\"&gt;&lt;/span&gt;     first? = &lt;span th:text=\"${userStat.first}\"&gt;&lt;/span&gt;     last? = &lt;span th:text=\"${userStat.last}\"&gt;&lt;/span&gt;     current = &lt;span th:text=\"${userStat.current}\"&gt;&lt;/span&gt;   &lt;/td&gt; &lt;/tr&gt;   1 2 3 4 &lt;tr th:each=\"user, userStat : ${users}\"&gt;  &lt;!-- ìœ„ì™€ ê°™ì€ í‘œí˜„ --&gt; &lt;tr th:each=\"user : ${users}\"&gt;       ì¡°ê±´ë¶€ í‰ê°€   if, unless   1 2 &lt;span th:text=\"'ë¯¸ì„±ë…„ì'\" th:if=\"${user.age lt 20}\"&gt;&lt;/span&gt; &lt;span th:text=\"'ë¯¸ì„±ë…„ì'\" th:unless=\"${user.age ge 20}\"&gt;&lt;/span&gt;   ë§Œì•½ ì¡°ê±´ì´ falseì¸ ê²½ìš° â€¦ ë¶€ë¶„ ìì²´ê°€ ë Œë”ë§ ë˜ì§€ ì•Šê³  ì‚¬ë¼ì§„ë‹¤.   switch   1 2 3 4 5 6 7 8 9 &lt;tr th:each=\"user, userStat : ${users}\"&gt;   &lt;td th:text=\"${userStat.count}\"&gt;1&lt;/td&gt;   &lt;td th:text=\"${user.username}\"&gt;username&lt;/td&gt;   &lt;td th:switch=\"${user.age}\"&gt;     &lt;span th:case=\"10\"&gt;10ì‚´&lt;/span&gt;     &lt;span th:case=\"20\"&gt;20ì‚´&lt;/span&gt;     &lt;span th:case=\"*\"&gt;ê¸°íƒ€&lt;/span&gt;   &lt;/td&gt; &lt;/tr&gt;       ì£¼ì„   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 &lt;h1&gt;1. í‘œì¤€ HTML ì£¼ì„&lt;/h1&gt; &lt;!-- íƒ€ì„ë¦¬í”„ê°€ ë Œë”ë§ í•˜ì§€ ì•Šê³ , ê·¸ëŒ€ë¡œ ë‚¨ê²¨ë‘”ë‹¤. --&gt; &lt;!-- &lt;span th:text=\"${data}\"&gt;html data&lt;/span&gt;  --&gt;  &lt;h1&gt;2. íƒ€ì„ë¦¬í”„ íŒŒì„œ ì£¼ì„&lt;/h1&gt; &lt;!-- ë Œë”ë§ì—ì„œ ì£¼ì„ ë¶€ë¶„ì„ ì œê±°í•œë‹¤. --&gt; &lt;!--/* [[${data}]] */--&gt;  &lt;!--/*--&gt; &lt;span th:text=\"${data}\"&gt;html data&lt;/span&gt; &lt;!--*/--&gt;  &lt;h1&gt;3. íƒ€ì„ë¦¬í”„ í”„ë¡œí† íƒ€ì… ì£¼ì„&lt;/h1&gt; &lt;!-- HTML íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ì—´ì–´ë³´ë©´ ì£¼ì„ì²˜ë¦¬ê°€ ë˜ì§€ë§Œ, íƒ€ì„ë¦¬í”„ë¥¼ ë Œë”ë§ í•œ ê²½ìš°ì—ë§Œ ë³´ì´ëŠ” ê¸°ëŠ¥ --&gt; &lt;!--/*/ &lt;span th:text=\"${data}\"&gt;html data&lt;/span&gt; /*/--&gt;          ë¸”ë¡   &lt;th:block&gt; ì€ HTML íƒœê·¸ê°€ ì•„ë‹Œ íƒ€ì„ë¦¬í”„ì˜ ìœ ì¼í•œ ìì²´ íƒœê·¸   1 2 3 4 5 &lt;th:block th:each=\"user : ${users}\"&gt;   &lt;div&gt;     ì‚¬ìš©ì ì´ë¦„1 &lt;span th:text=\"${user.username}\"&gt;&lt;/span&gt;   &lt;/div&gt; &lt;/th:block&gt;       ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¸ë¼ì¸   1 &lt;script th:inline=\"javascript\"&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 &lt;!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¸ë¼ì¸ ì‚¬ìš© ì „ --&gt; &lt;script&gt;     var username= [[${user.username}]];     var age= [[${user.age}]];      //ìë°”ìŠ¤í¬ë¦½íŠ¸ ë‚´ì¶”ëŸ´ í…œí”Œë¦¿     var username2= /*[[${user.username}]]*/ \"test username\";      //ê°ì²´     var user= [[${user}]]; &lt;/script&gt;  &lt;!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¸ë¼ì¸ ì‚¬ìš© í›„ --&gt; &lt;script th:inline=\"javascript\"&gt;     var username= [[${user.username}]];     var age= [[${user.age}]];      //ìë°”ìŠ¤í¬ë¦½íŠ¸ ë‚´ì¶”ëŸ´ í…œí”Œë¦¿     var username2= /*[[${user.username}]]*/ \"test username\";      //ê°ì²´     var user= [[${user}]]; &lt;/script&gt;          í…œí”Œë¦¿ ì¡°ê°   th:fragment ê°€ ìˆëŠ” íƒœê·¸ëŠ” ë‹¤ë¥¸ê³³ì— í¬í•¨ë˜ëŠ” ì½”ë“œ ì¡°ê°ìœ¼ë¡œ ì´í•´í•˜ë©´ ëœë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 &lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt; &lt;head th:fragment=\"common_header(title,links)\"&gt;    &lt;title th:replace=\"${title}\"&gt;ë ˆì´ì•„ì›ƒ íƒ€ì´í‹€&lt;/title&gt;    &lt;!-- ê³µí†µ --&gt;   &lt;link rel=\"stylesheet\" type=\"text/css\" media=\"all\" th:href=\"@{/css/awesomeapp.css}\"&gt;   &lt;link rel=\"shortcut icon\" th:href=\"@{/images/favicon.ico}\"&gt;   &lt;script type=\"text/javascript\" th:src=\"@{/sh/scripts/codebase.js}\"&gt;&lt;/script&gt;    &lt;!-- ì¶”ê°€ --&gt;   &lt;th:block th:replace=\"${links}\" /&gt; &lt;/head&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 &lt;!DOCTYPE html&gt; &lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;  &lt;head th:replace=\"template/layout/base :: common_header(~{::title},~{::link})\"&gt;   &lt;title&gt;ë©”ì¸ íƒ€ì´í‹€&lt;/title&gt;   &lt;link rel=\"stylesheet\" th:href=\"@{/css/bootstrap.min.css}\"&gt;   &lt;link rel=\"stylesheet\" th:href=\"@{/themes/smoothness/jquery-ui.css}\"&gt; &lt;/head&gt;  &lt;body&gt; ë©”ì¸ ì»¨í…ì¸  &lt;/body&gt; &lt;/html&gt;  ","categories": ["Spring"],
        "tags": ["Spring","Thymeleaf"],
        "url": "/spring/Spring-Thymeleaf/",
        "teaser": ""
      },{
        "title": "Querydsl ì„¤ì •",
        "excerpt":"Querydsl ì„¤ì •   springboot, gradle ë²„ì „ì— ë”°ë¼ Querydsl ì„¤ì • ë°©ë²•ì´ ë§ì´ ë‹¤ë¥´ë‹¤. ì£¼ì˜í•˜ì!      SpringBoot version: 2.7.3   gradle: 7.5   gradle.build  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 // 1. querydsl version ì •ë³´ ì¶”ê°€ buildscript { \text { \t\tqueryDslVersion = \"5.0.0\" \t} }  plugins { \tid 'org.springframework.boot' version '2.7.3' \tid 'io.spring.dependency-management' version '1.0.13.RELEASE' \t// 2. querydsl plugins ì¶”ê°€ \tid \"com.ewerk.gradle.plugins.querydsl\" version \"1.0.10\" \tid 'java' }  group = 'study' version = '0.0.1-SNAPSHOT' sourceCompatibility = '11'  configurations { \tcompileOnly { \t\textendsFrom annotationProcessor \t} }  repositories { \tmavenCentral() }  dependencies { \timplementation 'org.springframework.boot:spring-boot-starter-data-jpa' \timplementation 'org.springframework.boot:spring-boot-starter-web'  \t// 3. querydsl dependencies ì¶”ê°€ \timplementation \"com.querydsl:querydsl-jpa:${queryDslVersion}\" \timplementation \"com.querydsl:querydsl-apt:${queryDslVersion}\"  \tcompileOnly 'org.projectlombok:lombok' \truntimeOnly 'com.h2database:h2' \tannotationProcessor 'org.projectlombok:lombok' \ttestImplementation 'org.springframework.boot:spring-boot-starter-test' }  tasks.named('test') { \tuseJUnitPlatform() }  // 4. querydsl ì¶”ê°€ ì‹œì‘ // querydsl ì—ì„œ ì‚¬ìš©í•  ê²½ë¡œ ì„¤ì • def querydslDir = \"$buildDir/generated/querydsl\" // JPA ì‚¬ìš© ì—¬ë¶€ì™€ ì‚¬ìš©í•  ê²½ë¡œë¥¼ ì„¤ì • querydsl { \tjpa = true \tquerydslSourcesDir = querydslDir } // build ì‹œ ì‚¬ìš©í•  sourceSet ì¶”ê°€ sourceSets { \tmain.java.srcDir querydslDir } // querydsl ì´ compileClassPath ë¥¼ ìƒì†í•˜ë„ë¡ ì„¤ì • configurations { \tquerydsl.extendsFrom compileClasspath } // querydsl ì»´íŒŒì¼ ì‹œ ì‚¬ìš©í•  ì˜µì…˜ ì„¤ì • compileQuerydsl { \toptions.annotationProcessorPath = configurations.querydsl } //querydsl ì¶”ê°€ ë   ê²€ì¦ìš© Q íƒ€ì… ìƒì„±   Gradle IntelliJ ì‚¬ìš©ë²•      Gradle â†’ Tasks â†’ build â†’ clean   Gradle â†’ Tasks â†’ other â†’ compileQuerydsl   Gradle ì½˜ì†” ì‚¬ìš©ë²•      ./gradlew clean compileQuerydsl   ./gradlew clean compileJava   Q íƒ€ì… ìƒì„± í™•ì¸      build â†’ generated â†’ querydsl            study.querydsl.entity.QHello.java íŒŒì¼ì´ ìƒì„±ë˜ì–´ ìˆì–´ì•¼ í•¨              ì°¸ê³    Qíƒ€ì…ì€ ì»´íŒŒì¼ ì‹œì ì— ìë™ ìƒì„±ë˜ë¯€ë¡œ ë²„ì „ê´€ë¦¬(GIT)ì— í¬í•¨í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ì•ì„œ ì„¤ì •ì—ì„œ ìƒì„± ìœ„ì¹˜ë¥¼ gradle build í´ë” ì•„ë˜ ìƒì„±ë˜ë„ë¡ í–ˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ë„ ìì—°ìŠ¤ëŸ½ê²Œ í•´ê²°ëœë‹¤. (ëŒ€ë¶€ë¶„ gradle build í´ë”ë¥¼ gitì— í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.)     Querydsl Qíƒ€ì…ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @SpringBootTest @Transactional class QuerydslApplicationTests {      @Autowired     EntityManager em;      @Test     void contextLoads() {         Hello hello = new Hello();         em.persist(hello);          JPAQueryFactory query = new JPAQueryFactory(em); //        QHello qHello = new QHello(\"h\");         QHello qHello = QHello.hello;          Hello result = query                 .selectFrom(qHello)                 .fetchOne();          assertThat(result).isEqualTo(hello);         assertThat(result.getId()).isEqualTo(hello.getId());     } }    Querydsl ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬      querydsl-apt: Querydsl ê´€ë ¨ ì½”ë“œ ìƒì„± ê¸°ëŠ¥ ì œê³µ, Qíƒ€ì… ìƒì„±í•´ì¤€ë‹¤.   querydsl-jpa: querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬, ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ì‘ì„±ì„ ë„ì™€ì¤€ë‹¤.   Querydsl ì‘ì„±   ê¸°ë³¸ ì„¤ì •   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @SpringBootTest @Transactional @Commit public class QuerydslTests {      @Autowired     EntityManager em;      JPAQueryFactory queryFactory;      @BeforeEach     void before() {         queryFactory = new JPAQueryFactory(em);     }  }   ê¸°ë³¸ Q-í´ë˜ìŠ¤ ì‚¬ìš© ë°©ë²•   ë³„ì¹­ ì§ì ‘ ì§€ì •   1 2 3 4 5 6 7 8 @Test void startQuerydsl1() {     QMember m = new QMember(\"m\");      queryFactory             .selectFrom(m)             .where(m.username.eq(\"username1\")); }   ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©   1 2 3 4 5 6 7 @Test void startQuerydsl2() {      queryFactory             .selectFrom(QMember.member)             .where(QMember.member.username.eq(\"username1\")); }   ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ static importì™€ í•¨ê»˜ ì‚¬ìš©   1 2 3 4 5 6 7 8 9 import static study.querydsl.entity.QMember.*;  @Test void startQuerydsl3() {      queryFactory             .selectFrom(member)             .where(member.username.eq(\"username1\")); }      ì°¸ê³ . ê°™ì€ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë©´ ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì.    ","categories": ["JPA"],
        "tags": ["JPA","Querydsl","í™˜ê²½ì„¤ì •"],
        "url": "/jpa/JPA-Querydsl-Settings/",
        "teaser": ""
      },{
        "title": "í”„ë¡œì ì…˜(Projection), DTOë¡œ ì¡°íšŒí•˜ëŠ” ë°©ë²•",
        "excerpt":"í”„ë¡œì ì…˜   í”„ë¡œì ì…˜ì´ë€ select ëŒ€ìƒì„ ì§€ì •í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.   í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ íŠœí”Œì´ë‚˜ DTOë¡œ ì¡°íšŒí•´ì•¼ í•œë‹¤.   ë‹¨ì¼ í”„ë¡œì ì…˜ ì¡°íšŒ   1 2 3 4 5 6 7 @Test void simpleProjection() {     List&lt;String&gt; result = queryFactory             .select(member.username)             .from(member)             .fetch(); }   í”„ë¡œì ì…˜ ëŒ€ìƒì´ ì—¬ëŸ¬ê°œ - íŠœí”Œ ì¡°íšŒ   1 2 3 4 5 6 7 8 9 10 @Test void tupleProjection() {     List&lt;Tuple&gt; result = queryFactory             .select(member.username, member.age)             .from(member)             .fetch();     for (Tuple tuple : result) {         String name = tuple.get(member.username);     } }   í”„ë¡œì ì…˜ íƒ€ì…ì´ 2ê°œ ì´ìƒì¸ ê²½ìš°ì— Tupleì´ ë°˜í™˜ëœë‹¤.      ì£¼ì˜   íŠœí”Œì€ Querydslì˜ Tuple ê°ì²´ì´ë‹¤. ë”°ë¼ì„œ, JPAì— ì¢…ì†ì ì´ê¸° ë•Œë¬¸ì— Repository ë¶€ë¶„ì—ì„œë§Œ ì‚¬ìš©í•˜ê³  ê·¸ ì´í›„ëŠ” DTOë¡œ ë°›ëŠ”ê²Œ ì¢‹ë‹¤.     í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜, DTO ì¡°íšŒ   Querydslì—ì„œ DTOë¡œ í”„ë¡œì ì…˜ì„ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì€ 4ê°€ì§€ê°€ ìˆë‹¤.      setterë¥¼ í†µí•´ ê°’ì„ ì£¼ì…   í•„ë“œì— ì§ì ‘ ì£¼ì…   ìƒì„±ìë¥¼ í†µí•œ ì£¼ì…   @QueryProjectionë¥¼ í†µí•œ ì£¼ì…   ìˆœìˆ˜ JPAì—ì„œ DTO ì¡°íšŒ   ìˆœìˆ˜ JPAì—ì„œ DTOë¥¼ ì¡°íšŒí•  ë•ŒëŠ” new ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤. DTOì˜ package ì´ë¦„ì„ ë‹¤ ì ì–´ì¤˜ì•¼í•´ì„œ ì§€ì €ë¶„í•˜ë©° ìƒì„±ì ë°©ì‹ë§Œ ì§€ì›í•œë‹¤.   1 2 3 4 5 @Test void findDtoByJPQL() {     List&lt;MemberDto&gt; result = em.createQuery(\"select new study.querydsl.dto.MemberDto(m.username, m.age) from Member m\",  MemberDto.class)             .getResultList(); }   í”„ë¡œí¼í‹° ì ‘ê·¼ - setter   MemberDTOì˜ ê¸°ë³¸ ìƒì„±ìë¡œ ê°ì²´ë¥¼ ìƒì„± í›„, ë™ì¼í•œ í•„ë“œëª…ì„ ê°€ì§„ íŒŒë¼ë¯¸í„°ì— í•œí•´ setterë¡œ ê°’ì„ ì…‹íŒ…í•œë‹¤.   1 2 3 4 5 6 7 8 9 @Test void findDtoBySetter() {     List&lt;MemberDto&gt; result = queryFactory             .select(Projections.bean(MemberDto.class,                     member.username,                     member.age))             .from(member)             .fetch(); }   í•„ë“œ ì§ì ‘ ì ‘ê·¼   setterë‚˜ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë°”ë¡œ í•„ë“œì— ê°’ì„ ì£¼ì…í•œë‹¤. ì—­ì‹œ í•„ë“œëª…ì´ ë™ì¼í•œ íŒŒë¼ë¯¸í„°ì— í•œí•´ ë™ì‘í•œë‹¤.   1 2 3 4 5 6 7 8 9 @Test void findDtoByField() {     List&lt;MemberDto&gt; result = queryFactory             .select(Projections.fields(MemberDto.class,                     member.username,                     member.age))             .from(member)             .fetch(); }   ìƒì„±ì ì‚¬ìš©   MemberDTOì˜ ìƒì„±ìë¥¼ ì´ìš©í•´ ê°ì²´ë¥¼ ì…‹íŒ…í•œë‹¤. ë§Œì•½, íŒŒë¼ë¯¸í„°ì— ë§ëŠ” ìƒì„±ìê°€ ì—†ëŠ” ê²½ìš°, ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.   1 2 3 4 5 6 7 8 9 @Test void findDtoByConstructor() {     List&lt;MemberDto&gt; result = queryFactory             .select(Projections.constructor(MemberDto.class,                     member.username,                     member.age))             .from(member)             .fetch(); }   í•„ë“œëª…ê³¼ íŒŒë¼ë¯¸í„°ëª…ì´ ë‹¤ë¥¸ ê²½ìš°   1 2 3 4 5 6 @Data public class UserDto {      private String name; // username     private int age; // age }   fields ì‚¬ìš© - as()   1 2 3 4 5 6 7 8 9 10 11 12 @Test void findUserDto() {     List&lt;UserDto&gt; result = queryFactory             .select(Projections.fields(UserDto.class,                     member.username.as(\"name\"),                     ExpressionUtils.as(JPAExpressions                             .select(memberSub.age.max())                             .from(memberSub), \"age\")             ))             .from(member)             .fetch(); }      í”„ë¡œí¼í‹°ë‚˜, í•„ë“œ ì ‘ê·¼ ìƒì„± ë°©ì‹ì—ì„œ ì´ë¦„ì´ ë‹¤ë¥¼ ë•Œ í•´ê²° ë°©ì•ˆ   ExpressionUtils.as(source,alias): í•„ë“œë‚˜, ì„œë¸Œ ì¿¼ë¦¬ì— ë³„ì¹­ ì ìš©   username.as(â€œmemberNameâ€): í•„ë“œì— ë³„ì¹­ ì ìš©   construct ì‚¬ìš©   ìƒì„±ìë¥¼ ì‚¬ìš©í• ë•ŒëŠ” UserDtoì— @NoArgsConstructor, @AllArgsConstructorë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 9 @Test void findUserDtoByConstructor() {     List&lt;UserDto&gt; result = queryFactory             .select(Projections.constructor(UserDto.class,                     member.username,                     member.age))             .from(member)             .fetch(); }   @QueryProjection   ìœ„ì˜ 3ê°€ì§€ ë°©ë²•ë³´ë‹¤ @QueryProjectionë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ê¹”ë”í•œ ë°©ë²•ì´ë‹¤. ìƒì„±ìì— @QueryProjection ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Data @NoArgsConstructor public class MemberDto {      private String username;     private int age;      @QueryProjection     public MemberDto(String username, int age) {         this.username = username;         this.age = age;     } }    ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€ í›„ ./gradlew compileQuerydsl ì‹¤í–‰í•œë‹¤. Qí´ë˜ìŠ¤íŒŒì¼(QMemberDto)ì´ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 @Test void findDtoByQueryProjection() {     List&lt;MemberDto&gt; result = queryFactory             .select(new QMemberDto(member.username,member.age))             .from(member)             .fetch();      for (MemberDto memberDto : result) {         System.out.println(\"memberDto = \" + memberDto);     } }   ì•ì„œ ì‚¬ìš©í–ˆë˜ ìƒì„±ì ë°©ë²•ì€ ì»´íŒŒì¼ì—ì„œ ì²´í¬í•˜ì§€ ëª»í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤. ë°˜ë©´ì—, ì´ ë°©ë²•ì€ ì»´íŒŒì¼ëŸ¬ë¡œ íƒ€ì…ì„ ì²´í¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ì´ë‹¤. ë‹¤ë§Œ, DTOì— QueryDSL ì–´ë…¸í…Œì´ì…˜ì„ ìœ ì§€í•´ì•¼ í•˜ëŠ” ì ê³¼ DTOê¹Œì§€ Q íŒŒì¼ì„ ìƒì„±í•´ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì¦‰, DTOê°€ Querydslì— ë…ë¦½ì ì´ì§€ ëª»í•˜ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA","Querydsl"],
        "url": "/jpa/JPA-Projection-DTO/",
        "teaser": ""
      },{
        "title": "equalsì™€ hashCode",
        "excerpt":"equalsì™€ hashCodeë€?   equalsì™€ hashCodeëŠ” Object í´ë˜ìŠ¤ì— ì •ì˜ë˜ì–´ ìˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ëª¨ë“  ê°ì²´ëŠ” Object í´ë˜ìŠ¤ì— ì •ì˜ëœ equalsì™€ hashCode í•¨ìˆ˜ë¥¼ ìƒì†ë°›ê³  ìˆë‹¤.   equals(Object obj)   ë§¤ê°œë³€ìˆ˜ë¡œ ê°ì²´ì˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë°›ì•„ì„œ ë¹„êµí•˜ì—¬ ê·¸ ê²°ê³¼ë¥¼ booleanìœ¼ë¡œ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.   Object í´ë˜ìŠ¤ì— ì •ì˜ë˜ì–´ ìˆëŠ” equals ë©”ì„œë“œ   1 2 3 public voolean equals(Object obj) {     return (this==obj); }   ë‘ ê°ì²´ì˜ ê°™ê³  ë‹¤ë¦„ì„ ì°¸ì¡°ë³€ìˆ˜ì˜ ê°’ìœ¼ë¡œ íŒë‹¨í•˜ë©° ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°ì²´ë¥¼ equals ë©”ì„œë“œë¡œ ë¹„êµí•˜ë©´ í•­ìƒ falseë¥¼ ê²°ê³¼ë¡œ ì–»ê²Œ ëœë‹¤. ì¦‰, 2ê°œì˜ ê°ì²´ê°€ ê°€ë¦¬í‚¤ëŠ” ê³³ì´ ë™ì¼í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œì¼ ê²½ìš°ì—ë§Œ trueë¥¼ ë°˜í™˜í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class EqualsEx {     public static void main(String[] args) {         Value v1 = new Value(10);         Value v2 = new Value(10);         if(v1.equals(v2))             System.out.println(\"v1ê³¼ v2ëŠ” ê°™ìŠµë‹ˆë‹¤.\");         else             System.out.println(\"v1ê³¼ v2ëŠ” ë‹¤ë¦…ë‹ˆë‹¤.\");                  v2 = v1;         if(v1.equals(v2))             System.out.println(\"v1ê³¼ v2ëŠ” ê°™ìŠµë‹ˆë‹¤.\");         else             System.out.println(\"v1ê³¼ v2ëŠ” ë‹¤ë¦…ë‹ˆë‹¤.\");     } }  class Value {     int value;      Value(int value) {         this.value = value;     } }   ì‹¤í–‰ê²°ê³¼   1 2 v1ê³¼ v2ëŠ” ë‹¤ë¦…ë‹ˆë‹¤. v1ê³¼ v2ëŠ” ê°™ìŠµë‹ˆë‹¤.   hashCode()   hashCode ë©”ì„œë“œëŠ” í•´ì‹±ê¸°ë²•ì— ì‚¬ìš©ë˜ëŠ” í•´ì‹œí•¨ìˆ˜ë¥¼ êµ¬í˜„í•œ ê²ƒì´ë‹¤. í•´ì‹±ì€ ë°ì´í„°ê´€ë¦¬ê¸°ë²• ì¤‘ì˜ í•˜ë‚˜ì¸ë° ë‹¤ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ëŠ” ë° ìœ ìš©í•˜ë‹¤. í•´ì‹œí•¨ìˆ˜ëŠ” ì°¾ê³ ìí•˜ëŠ” ê°’ì„ ì…ë ¥í•˜ë©´ ê·¸ ê°’ì´ ì €ì¥ëœ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” í•´ì‹œì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤.   ì¼ë°˜ì ìœ¼ë¡œ í•´ì‹œì½”ë“œê°€ ê°™ì€ ë‘ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ì§€ë§Œ, Object í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì„œë“œëŠ” ê°ì²´ì˜ ì£¼ì†Œê°’ì„ ì´ìš©í•´ì„œ í•´ì‹œì½”ë“œë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°ì²´ëŠ” ê²°ì½” ê°™ì€ í•´ì‹œì½”ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.   equalsì™€ hashCodeëŠ” ì™œ ê°™ì´ ì •ì˜í•´ì•¼ í• ê¹Œ?   ë™ì¼í•œ ê°ì²´ëŠ” ë™ì¼í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë¯€ë¡œ ë™ì¼í•œ ê°ì²´ëŠ” ë™ì¼í•œ í•´ì‹œì½”ë“œë¥¼ ê°€ì ¸ì•¼ í•œë‹¤. ë”°ë¼ì„œ, equals() ë©”ì„œë“œì™€ hashCode() ë©”ì„œë“œë¥¼ ê°™ì´ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•œë‹¤.   ë§Œì¼, hashCode ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Object í´ë˜ìŠ¤ì— ì •ì˜ëœ ëŒ€ë¡œ ëª¨ë“  ê°ì²´ê°€ ì„œë¡œ ë‹¤ë¥¸ í•´ì‹œì½”ë“œ ê°’ì„ ê°€ì§ˆ ê²ƒì´ë‹¤.   ê²°ë¡ ì€ hashCodeë¥¼ equalsì™€ í•¨ê»˜ ì¬ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ hash ê°’ì„ ì‚¬ìš©í•˜ëŠ” Collection(HashSet, HashMap, HashTable)ì„ ì‚¬ìš©í•  ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   Collectionì€ ê°ì²´ê°€ ë…¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ì§€ ë¹„êµí• ë•Œ ê¸°ì¤€ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. hashCode() ë©”ì„œë“œì˜ ë¦¬í„´ê°’ì´ ì¼ì¹˜í•˜ê³  equals() ë©”ì„œë“œì˜ ë¦¬í„´ê°’ì´ trueë©´ ë…¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ ê°ì²´ë¼ê³  íŒë‹¨í•œë‹¤.   hashCode() ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ Object í´ë˜ìŠ¤ì˜ hashCode() ë©”ì„œë“œê°€ ì‚¬ìš©ëœë‹¤.   Object í´ë˜ìŠ¤ì˜ hashCode() ë©”ì„œë“œëŠ” ê°ì²´ì˜ ê³ ìœ í•œ ì£¼ì†Œ ê°’ì„ int ê°’ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ì„ ë¦¬í„´í•œë‹¤. ë‘ ê°œì˜ ê°ì²´ëŠ” equalsë¡œ ë¹„êµë„ í•˜ê¸° ì „ì— ì„œë¡œ ë‹¤ë¥¸ hashCode ë©”ì„œë“œì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ì¸í•´ ë‹¤ë¥¸ ê°ì²´ë¡œ íŒë‹¨ëœ ê²ƒì´ë‹¤.   ë”°ë¼ì„œ, ê°ì²´ì˜ ì •í™•í•œ ë™ë“± ë¹„êµë¥¼ ìœ„í•´ì„œëŠ” equals() ë©”ì„œë“œì™€ hashCode() ë©”ì„œë“œë¥¼ ê°™ì´ ì¬ì •ì˜í•´ì•¼ í•œë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-equalsAndHashCode/",
        "teaser": ""
      },{
        "title": "ì²´í¬ ì˜ˆì™¸, ì–¸ì²´í¬ ì˜ˆì™¸",
        "excerpt":"ì˜ˆì™¸ì˜ ì¢…ë¥˜      ì—ëŸ¬ (Error)   ì˜ˆì™¸ (Exception)            ì²´í¬ ì˜ˆì™¸ (Check Exception)       ì–¸ì²´í¬ ì˜ˆì™¸ (Uncheck Exception)              ì—ëŸ¬(Error)   java.lang.Error í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ë“¤ì´ë‹¤. ë©”ëª¨ë¦¬ ë¶€ì¡±, ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ë“±ê³¼ ê°™ì´ ì‹œìŠ¤í…œì´ ë¹„ì •ìƒì ì¸ ìƒí™©ì¸ ê²½ìš°ì— ì‚¬ìš©í•œë‹¤. (í”„ë¡œê·¸ë¨ ì½”ë“œì— ì˜í•´ì„œ ìˆ˜ìŠµ ë  ìˆ˜ ì—†ëŠ” ì‹¬ê°í•œ ì˜¤ë¥˜) ì°¸ê³ ë¡œ Errorë„ ì–¸ì²´í¬ ì˜ˆì™¸ì´ë‹¤.   ì˜ˆì™¸(Exception)   java.lang.Exception í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ë“¤ì´ë‹¤. ê°œë°œìê°€ ì˜ˆì™¸ë¥¼ ëŒ€ë¹„í•´ ì ì ˆí•œ ì½”ë“œë¥¼ ë¯¸ë¦¬ ì‘ì„±í•˜ì—¬ í”„ë¡œê·¸ë¨ì˜ ë¹„ì •ìƒì ì¸ ì¢…ë£Œë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤. (í”„ë¡œê·¸ë¨ ì½”ë“œì— ì˜í•´ì„œ ìˆ˜ìŠµë  ìˆ˜ ìˆëŠ” ë‹¤ì†Œ ë¯¸ì•½í•œ ì˜¤ë¥˜)   ì˜ˆì™¸ ê¸°ë³¸ ê·œì¹™   ì˜ˆì™¸ì˜ ê¸°ë³¸ ê·œì¹™ 2ê°€ì§€      ì˜ˆì™¸ë¥¼ ì¡ì•„(catch)ì„œ ì²˜ë¦¬í•˜ê±°ë‚˜ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤ë©´ ë°–ìœ¼ë¡œ ë˜ì ¸ì•¼(throws)í•œë‹¤.   ì˜ˆì™¸ë¥¼ ì¡ê±°ë‚˜ ë˜ì§ˆ ë•Œ ì§€ì •í•œ ì˜ˆì™¸ ë¿ë§Œ ì•„ë‹ˆë¼ ê·¸ ì˜ˆì™¸ì˜ ìì‹ë“¤ë„ í•¨ê»˜ ì²˜ë¦¬ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Exceptionë¥¼ ì¡ìœ¼ë©´ í•˜ìœ„ ì˜ˆì™¸(SQLException ë“±)ë„ ëª¨ë‘ ì¡ì„ ìˆ˜ ìˆë‹¤.   ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ë©´ ì´í›„ì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì´ ì •ìƒ íë¦„ìœ¼ë¡œ ë™ì‘í•˜ê³  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ë©´ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ ê³„ì† ë˜ì§€ê²Œ ëœë‹¤.            ì°¸ê³  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³  ê³„ì† ë˜ì§€ë©´ ì–´ë–»ê²Œ ë ê¹Œ?           ìë°” main() ì“°ë ˆë“œì˜ ê²½ìš° ì˜ˆì™¸ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ë©´ì„œ ì‹œìŠ¤í…œì´ ì¢…ë£Œëœë‹¤.     ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° ì—¬ëŸ¬ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì˜ˆì™¸ ë•Œë¬¸ì— ì‹œìŠ¤í…œì´ ì¢…ë£Œë˜ë©´ ì•ˆëœë‹¤. WASê°€ í•´ë‹¹ ì˜ˆì™¸ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ”ë° ì£¼ë¡œ ì‚¬ìš©ìì—ê²Œ ê°œë°œìê°€ ì§€ì •í•œ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.       ì˜ˆì™¸ëŠ” ì²´í¬ ì˜ˆì™¸ì™€ ì–¸ì²´í¬ ì˜ˆì™¸ë¡œ êµ¬ë¶„ëœë‹¤.   ì²´í¬ ì˜ˆì™¸(Check Exception)   ì²´í¬ ì˜ˆì™¸ëŠ” RuntimeException í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì§€ ì•ŠëŠ” ì˜ˆì™¸ í´ë˜ìŠ¤ë“¤ì´ë‹¤. Exceptionê³¼ ê·¸ í•˜ìœ„ ì˜ˆì™¸ëŠ” ëª¨ë‘ ì»´íŒŒì¼ëŸ¬ê°€ ì²´í¬í•˜ëŠ” ì²´í¬ ì˜ˆì™¸ì´ë‹¤. (ë‹¨, RuntimeExceptionì€ ì˜ˆì™¸ë¡œ í•œë‹¤.) ì²´í¬ ì˜ˆì™¸ëŠ” ë³µêµ¬ê°€ ê°€ëŠ¥í•œ ì˜ˆì™¸ì´ë¯€ë¡œ ë°˜ë“œì‹œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ í•¨ê»˜ ì‘ì„±í•´ì•¼ í•œë‹¤. ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” catch ë¬¸ìœ¼ë¡œ ì¡ê±°ë‚˜ throwsë¡œ ì˜ˆì™¸ë¥¼ ìì‹ ì„ í˜¸ì¶œí•œ í´ë˜ìŠ¤ë¡œ ë˜ì§€ëŠ” ë°©ë²•ì´ ìˆë‹¤. ë§Œì•½, ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.   ì˜ˆ) IOException, SQLException ë“±   ì²´í¬ ì˜ˆì™¸ëŠ” ê°œë°œìê°€ ì‹¤ìˆ˜ë¡œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ëˆ„ë½í•˜ì§€ ì•Šë„ë¡ ì»´íŒŒì¼ëŸ¬ê°€ ë„ì™€ì¤€ë‹¤. í•˜ì§€ë§Œ ê°œë°œìê°€ ëª¨ë“  ì²´í¬ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•´ì£¼ì–´ì•¼ í•˜ë¯€ë¡œ ë²ˆê±°ë¡­ê³  ì‹ ê²½ì“°ì§€ ì•Šê³  ì‹¶ì€ ì˜ˆì™¸ê¹Œì§€ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   ë˜í•œ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë“¤ì€ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ê°€ ë§ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ SQLExceptionê³¼ ê°™ì€ ì²´í¬ ì˜ˆì™¸ë¥¼ catchí•´ë„ ì¿¼ë¦¬ë¥¼ ìˆ˜ì •í•˜ì—¬ ì¬ë°°í¬í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë³µêµ¬ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ ì‹¤ì œ ê°œë°œì—ì„œëŠ” ëŒ€ë¶€ë¶„ ì–¸ì²´í¬ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•œë‹¤.   ì–¸ì²´í¬ ì˜ˆì™¸(Uncheck Exception)   RuntimeException í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ì˜ˆì™¸ í´ë˜ìŠ¤ë“¤ì€ ë³µêµ¬ ê°€ëŠ¥ì„±ì´ ì—†ëŠ” ì˜ˆì™¸ë“¤ì´ë¯€ë¡œ ì»´íŒŒì¼ëŸ¬ê°€ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì–¸ì²´í¬ ì˜ˆì™¸ ë˜ëŠ” ëŸ°íƒ€ì„ ì˜ˆì™¸ë¼ê³  í•œë‹¤. ì–¸ì²´í¬ ì˜ˆì™¸ëŠ” ì—ëŸ¬(Error)ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ë„ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ëŸ°íƒ€ì„ ì˜ˆì™¸ëŠ” ì˜ˆìƒì¹˜ ëª»í–ˆë˜ ìƒí™©ì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ êµ³ì´ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ¬í•œ ì  ë•Œë¬¸ì— ìƒë‹¹íˆ í¸ë¦¬í•˜ì§€ë§Œ ì»´íŒŒì¼ëŸ¬ê°€ ì˜ˆì™¸ë¥¼ ì¡ì•„ì£¼ì§€ ì•Šìœ¼ë¯€ë¡œ ê°œë°œìê°€ ì‹¤ìˆ˜ë¡œ ì˜ˆì™¸ë¥¼ ëˆ„ë½í•  ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.   ì˜ˆ) NullPointerException, IllegalArgumentException ë“±   ì²´í¬ ì˜ˆì™¸ vs ì–¸ì²´í¬ ì˜ˆì™¸   ì–¸ì²´í¬ ì˜ˆì™¸ëŠ” ì²´í¬ ì˜ˆì™¸ì™€ ê¸°ë³¸ì ìœ¼ë¡œ ë™ì¼í•˜ì§€ë§Œ ì°¨ì´ê°€ ìˆë‹¤ë©´ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ì„ ë•Œ ì˜ˆì™¸ë¥¼ ë°–ìœ¼ë¡œ ë˜ì§€ëŠ” ë¶€ë¶„ì— ìˆë‹¤. ì´ ë¶€ë¶„ì„ í•„ìˆ˜ë¡œ ì„ ì–¸í•´ì•¼ í•˜ëŠ”ê°€ ìƒëµí•  ìˆ˜ ìˆëŠ”ê°€ì˜ ì°¨ì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 // ì²´í¬ ì˜ˆì™¸, ë°˜ë“œì‹œ throws ì…ë ¥ public void callThrow() throws MycheckedException {     repository.call(); }  // ì–¸ì²´í¬ ì˜ˆì™¸, throws ìƒëµ ê°€ëŠ¥ public void callThrow() throws MyUncheckedException { // public void callThrow() {     repository.call(); }  ","categories": ["Java"],
        "tags": ["Java","Spring"],
        "url": "/java/Java-Check-Uncheck-Exception/",
        "teaser": ""
      },{
        "title": "ì¸ì¦ê³¼ ì¸ê°€",
        "excerpt":"ì¸ì¦ê³¼ ì¸ê°€ë€?   ì¸ì¦   (ì‹ë³„ê°€ëŠ¥í•œ ì •ë³´ë¡œ) ì„œë¹„ìŠ¤ì— ë“±ë¡ëœ ìœ ì €ì˜ ì‹ ì›ì„ ì…ì¦í•˜ëŠ” ê³¼ì •   ì¸ê°€   ê¶Œí•œì— ëŒ€í•œ í—ˆê°€, ì¸ì¦ëœ ì‚¬ìš©ìì— ëŒ€í•œ ìì› ì ‘ê·¼ ê¶Œí•œ í™•ì¸   ê²°êµ­, ì¸ì¦ì´ ì¸ê°€ë³´ë‹¤ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤.   ì¸ì¦ì˜ ë°©ë²•      ì¸ì¦í•˜ê¸° Request Header   ì¸ì¦ ìœ ì§€í•˜ê¸° Browser   ì•ˆì „í•˜ê²Œ ì¸ì¦í•˜ê¸° Server   íš¨ìœ¨ì ìœ¼ë¡œ ì¸ì¦í•˜ê¸° Token   ë‹¤ë¥¸ ì±„ë„ë¡œ ì¸ì¦í•˜ê¸° OAuth       HTTPëŠ” ë¬´ìƒíƒœì„±ì´ë¼ëŠ” ê²ƒì´ ë§¤ìš°ì¤‘ìš”   ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ìš”ì²­ê³¼ ì´ ë‹¤ìŒ ìš”ì²­ì´ ì—°ê´€ê´€ê³„ê°€ ì—†ë‹¤ê³  ìƒê°í•˜ëŠ” ê²ƒì„ ë¬´ìƒíƒœì„±(Stateless)       í´ë¼ì´ì–¸íŠ¸(ì‚¬ìš©ì)ëŠ” ì„œë²„(ë„¤ì´ë²„)ì— ì´ë¯¸ íšŒì›ê°€ì…ì´ ë¼ ìˆëŠ” ìƒíƒœë¼ê³  ê°€ì •í•œë‹¤.   Request Headerë¥¼ í™œìš©í•œ ë¡œê·¸ì¸   ì‚¬ìš©ìëŠ” ì•„ë˜ì˜ ì£¼ì†Œë¥¼ í†µí•´ì„œ ì„œë²„ì— ë¡œê·¸ì¸ì„ ìš”ì²­í•œë‹¤.   1 http://user:1q2w3e!@www.naver.com/login   ë¸Œë¼ìš°ì €ëŠ” ìœ„ì˜ urlì—ì„œ ì‚¬ìš©ì ì •ë³´(id, pw)ë¥¼ íŒŒì‹±í•œ í›„ Base64 ì¸ì½”ë”ë¥¼ ì´ìš©í•´ ì¸ì½”ë”©í•œë‹¤. ê·¸ë¦¬ê³  ì¸ì½”ë”©í•œ ë¬¸ìì—´ì„ ìš”ì²­ í—¤ë” Authorizationì— ë„£ì–´ì„œ ë³´ë‚´ì¤€ë‹¤.   1 Authorization: Base dGE2fjdsfGsdkfjs3lssfdQ   ê·¸ í›„ ì„œë²„ì— ìš”ì²­ì„ í•˜ë©´ ì„œë²„ê°€ DBì— ìˆëŠ” ê°’ê³¼ ë¹„êµí•˜ì—¬ ìœ íš¨í•œì§€ í™•ì¸ í›„ ì‘ë‹µì„ í•´ì¤€ë‹¤.   ë¬¸ì œì    ì‚¬ìš©ìê°€ ë§¤ë²ˆ ì¸ì¦ì„ í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìê°€ ê²Œì‹œíŒì—ì„œ ê¸€ì„ ì“¸ë•Œ ë¡œê·¸ì¸ì„ í•œë²ˆ í–ˆë‹¤. ê·¸ëŸ°ë° ì‘ì„±í•œ ê¸€ì„ ìˆ˜ì •í•˜ê³  ì‹¶ì–´ì¡Œë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸ì„ í•´ì•¼í•œë‹¤.   ì´ëŸ¬í•œ ë¬¸ì œì ì„ ê°œì„ í•˜ê¸° ìœ„í•´ Browserì— ìˆëŠ” Storageë¥¼ ì‚¬ìš©í•œë‹¤.   Browserë¥¼ í™œìš©í•œ ë¡œê·¸ì¸   Storageì˜ ì¢…ë¥˜ì—ëŠ” ë¡œì»¬ìŠ¤í† ë¦¬ì§€, ì„¸ì…˜ìŠ¤í† ë¦¬ì§€, ì¿ í‚¤ê°€ ìˆëŠ”ë° ì´ ì¤‘ ì¿ í‚¤ë¡œ ì„¤ëª….   ì¿ í‚¤ì— ì‚¬ìš©ì ì •ë³´(ID/PW)ë¥¼ ë„£ê³  ì¸ì¦ì´ í•„ìš”í• ë•Œë§ˆë‹¤ ì„œë²„ë¡œ ë³´ë‚´ì¤€ë‹¤. ë§¤ìš° í¸ë¦¬í•˜ì£ ! ê·¼ë° í•´ì»¤ë„ ê°™ì´ í¸ë¦¬í•¨ ã…ã…;   ë¬¸ì œì    ìŠ¤í† ë¦¬ì§€ì— ì‚¬ìš©ì ì •ë³´ê°€ ìˆìœ¼ë‹ˆ í•´ì»¤ê°€ ê°€ì ¸ê°€ê¸° ë§¤ìš° í¸í•˜ê³  í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ë³´ì•ˆì— ì·¨ì•½í•˜ë‹¤ëŠ” ì ì´ ë§¤ìš° í° ë‹¨ì ì´ë‹¤.   ì´ëŸ° ë‘ê°€ì§€ ë‹¨ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ (ë³´ì•ˆì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´) ì„¸ì…˜ì´ë¼ëŠ” ê°œë…ì´ ë„ì…ë˜ì—ˆë‹¤.   Sessionì„ í™œìš©í•œ ë¡œê·¸ì¸   ì„¸ì…˜ì€ ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì‹ë³„ìì™€ ëœë¤í•œ ë¬¸ìì—´ë¡œ ì„¸ì…˜ IDë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ì‘ë‹µ í—¤ë”ì— ë„˜ê²¨ì¤€ë‹¤.   ì´ì œ í´ë¼ì´ì–¸íŠ¸ ìª½ì— ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— í•´ì»¤ê°€ ì •ë³´ë¥¼ ê°€ì ¸ê°€ë„ í¬ê²ŒëŠ” ìœ„í—˜í•˜ì§€ ì•Šë‹¤. ë˜í•œ, ì„¸ì…˜ì˜ ë§Œë£Œê¸°ê°„ì„ ì •í•  ìˆ˜ ìˆì–´ ë§Œë£Œê¸°ê°„ì´ ì§€ë‚˜ê²Œ ë  ê²½ìš°ì—” í•´ì»¤ê°€ ì •ë³´ë¥¼ ê°€ì ¸ê°€ë”ë¼ë„ ìœ íš¨í•˜ì§€ ì•Šë‹¤ëŠ”ê²Œ ì¥ì ì´ë‹¤.   ê·¸ë¦¬ê³  ì„¸ì…˜ê´€ë¦¬ëŠ” ì„œë²„ì—ì„œ í•˜ê¸°ë•Œë¬¸ì— ì„¸ì…˜ì´ íƒˆì·¨ë˜ë©´ ì„œë²„ì—ì„œ ì‚­ì œí•´ë²„ë¦¬ë©´ ë” ì´ìƒ ì´ ì„¸ì…˜ì„ ì´ìš©í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤ëŠ” ë³´ì•ˆìƒ ì´ì ì´ ìˆë‹¤.   ê·¸ëŸ¬ë‚˜, ì´ ë°©ë²•ë„ ë¬¸ì œê°€ ìˆë‹¤.   ë¬¸ì œì    ì„œë²„ë¥¼ ì¦ì„¤í•  ê²½ìš°ì´ë‹¤. ì„œë²„ê°€ ì—¬ëŸ¬ê°œ ìƒê¸°ë©´ ë¡œë“œë°¸ëŸ°ì„œê°€ í•„ìš”í•˜ë‹¤. ìš”ì²­ì„ ë³´ë‚´ê³  ë¡œë“œë°¸ëŸ°ì„œê°€ ì„œë²„3ìœ¼ë¡œ ì¸ì¦ì„ ì§„í–‰í–ˆë‹¤. ì´ì œ ì„¸ì…˜ì€ ì„œë²„ 3ì— ìˆë‹¤. ê·¸ëŸ°ë° ê°™ì€ ì‚¬ìš©ìê°€ ë‹¤ì‹œ ì–´ë– í•œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ë° ë¡œë“œë°¸ëŸ°ì„œê°€ ì„œë²„2ë¡œ ìš”ì²­ì„ ë³´ëƒˆë‹¤. ì„œë²„2ì—ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ì¸ì¦ì •ë³´ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   ì´ ë¬¸ì œëŠ” ì„œë²„ í•˜ë‚˜í•˜ë‚˜ ìì²´ì—ì„œ ì„¸ì…˜ì„ ê´€ë¦¬í•´ì„œ ìƒê¸´ ë¬¸ì œì´ë‹¤.   Session Storageë¥¼ í™œìš©í•´ ë¬¸ì œì  í•´ê²°   ì´ ë¬¸ì œë¥¼ í•´ê²°í•œ ë°©ë²•ì€ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ë¥¼ ë”°ë¡œ ë‘”ë‹¤. ëª¨ë“  ì„œë²„ì˜ ì„¸ì…˜ì— ëŒ€í•œ ì •ë³´ëŠ” ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì— ìˆë‹¤.   ê·¸ëŸ°ë° ì´ ë°©ë²•ë„ ë¬¸ì œê°€ ìˆë‹¤. (ã… ã… ) í´ë¼ì´ì–¸íŠ¸ê°€ ë§ì„ ê²½ìš° ë¬¸ì œê°€ ìƒê¸´ë‹¤. ìˆ˜ ë§ì€ ì„¸ì…˜ì„ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ í•˜ë‚˜ì—ì„œ ê´€ë¦¬í•˜ë¯€ë¡œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.   ì´ì œ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?   ì§€ê¸ˆê¹Œì§€ í´ë¼ì´ì–¸íŠ¸, ì„œë²„, ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì— ëª¨ë‘ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ êµ¬ì„±ì„ í•´ë´¤ë‹¤.   í•˜ì§€ë§Œ ëª¨ë‘ ë¬¸ì œê°€ ìƒê²¼ë‹¤. ê·¸ ì´ìœ ëŠ” HTTPì™€ ì„œë²„ìì²´ê°€ ì§€í–¥í•˜ëŠ” Rest APIê°€ ë¬´ìƒíƒœì„±ì„ ê¸°ì´ˆë¡œ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ°ë° ì¸ì¦ê³¼ ì¸ê°€ëŠ” ìƒíƒœì„±ì´ë‹¤. ë‘ íŒ¨ëŸ¬ë‹¤ì„ì´ ì¶©ëŒí•œë‹¤. ì´ íŒ¨ëŸ¬ë‹¤ì„ì„ í•´ì†Œí•´ì•¼ ë¬¸ì œê°€ í•´ê²°ëœë‹¤.   ì´ì œ ì‚¬ìš©ìì •ë³´ë¥¼ ì •ë³´ì˜ íë¦„ì— ë§¡ê²¨ë³´ì. ì •ë³´ì˜ íë¦„ì€ ìš”ì²­/ì‘ë‹µì„ ì˜ë¯¸í•œë‹¤.   ì¦‰, ìš”ì²­ê³¼ ì‘ë‹µì— ì‚¬ìš©ì ì •ë³´ë¥¼ ë‹´ëŠ”ë‹¤. ì´ë¥¼ í† í°ì„ í™œìš©í•œ ì¸ì¦ê³¼ ì¸ê°€ë°©ë²•ì´ë¼ í•œë‹¤.   Tokenì„ í™œìš©í•œ ë¡œê·¸ì¸   JWT(Json Web Token)ë¥¼ ì´ìš©í•œë‹¤.   JWTì— ëŒ€í•´ ê°„ë‹¨í•œê²Œ ì„¤ëª…í•˜ë©´ ì‹œí¬ë¦¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ JWTë¥¼ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ì‹œí¬ë¦¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ JWTì˜ ì¸ì¦ê³¼ì •ì„ ê±°ì¹œë‹¤.   JWT ë‚´ì—ëŠ” ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‘ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë¦¬ê³  ì‹œí¬ë¦¿ í‚¤ê°€ ì¤‘ìš”í•œ ë§Œí¼ ë…¸ì¶œë˜ë©´ JWT í† í° ìì²´ë„ ëë‚œë‹¤. ê·¸ë˜ì„œ í† í°ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì‹œí¬ë¦¿ í‚¤ë¥¼ ì„œë²„ ë‚´ë¶€ì— ì˜ ê´€ë¦¬í•´ì•¼ í•œë‹¤.   í† í°(JWT) í™œìš©í•˜ê¸°   í´ë¼ì´ì–¸íŠ¸ê°€ ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚´ê³  DBê°€ ìœ íš¨ì„±ì„ í™•ì¸í•œë‹¤. ì´ì „ì—ëŠ” ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì™€ ì—°ê²°ì„ í–ˆì—ˆëŠ”ë° ì´ì œëŠ” ì‹œí¬ë¦¿ í‚¤ë¥¼ ì´ìš©í•´ í† í°ì„ ìƒì„±í•œë‹¤.   ìƒì„±í•œ í† í°ì€ í—¤ë”ì— ë„£ì–´ì„œ ì´ í‚¤ë¥¼ ì´ìš©í•´ ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ëŠ” í˜•íƒœê°€ ëœë‹¤.   í† í°ì— ëŒ€í•´ ì¢€ë” ì•Œì•„ë³´ë©´   í´ë¼ì´ì–¸íŠ¸ê°€ í† í°ì„ ê°€ì§€ê³  ì„œë²„ì— ìš”ì²­ì„ í–ˆë‹¤. ê·¸ëŸ¬ë©´ ì„œë²„ëŠ” í† í°ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ë³¸ì¸ì´ ê°€ì§„ ì‹œí¬ë¦¿ í‚¤ë¡œ ì§„í–‰í•œë‹¤. ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ë²„ë¦¬ê³  ìœ íš¨í•˜ë‹¤ë©´ í† í°ì„ ë””ì½”ë”©í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ë¥¼ íŒŒì•…í•œë‹¤. (ë””ì½”ë”©ì´ ì‰½ê¸° ë•Œë¬¸ì— ì ˆëŒ€ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ìœ¼ë©´ ì•ˆëœë‹¤.)   í† í°ì—ëŠ” ì´ë¦„, ë§Œë£Œì‹œê¸°, ê¶Œí•œì— ê´€í•œ ì •ë³´ê°€ ìˆë‹¤.   ì¦‰, ì‹œí¬ë¦¿í‚¤ë¥¼ í†µí•´ì„œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µê³¼í•œ í† í°ì€ ì´ë¯¸ ì¸ì¦ì„ ë°›ì€ í† í°ì´ë¼ëŠ” ê²ƒì´ë‹¤.   í† í°ì˜ ì¥ì    ì„œë²„ê°€ ì—¬ëŸ¬ëŒ€ ìˆì–´ë„ ê°ê°ì˜ ì„œë²„ì— ìˆëŠ” ì‹œí¬ë¦¿ í‚¤ë¡œ ì¸ì¦ì„ ì§„í–‰í•˜ë©´ ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ì´ ì¥ì ì´ ì¡°ê¸ˆ ë” ë‚˜ì•„ê°€ì„œëŠ” í™•ì¥ì„±ê³¼ë„ ì—°ê²°ë˜ëŠ”ë° 3ëŒ€ì˜€ë˜ ì„œë²„ë¥¼ 5ëŒ€ë¡œ ëŠ˜ë ¤ë„ ìˆ˜ì •ì—†ì´ ë˜‘ê°™ì´ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. ì¦‰, í™•ì¥ì„±ì— ìš©ì´í•˜ë‹¤.   í•˜ì§€ë§Œ ë˜ ë‹¨ì ì´ ìˆë‹¤.   í•´í‚¹ì„ ë‹¹í•  ìˆ˜ ìˆë‹¤. ì•¡ì„¸ìŠ¤ í† í°ì„ íƒˆì·¨ ë‹¹í•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ë§‰ê¸° ìœ„í•´ ë§Œë£Œê¸°í•œì„ ì •í•œë‹¤. ë§Œë£Œê¸°í•œì´ ì§€ë‚˜ë©´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë‹¤ì‹œ ë°œê¸‰ ë°›ì•„ì•¼ í•˜ëŠ”ë° ì´ ë¶€ë¶„ì´ ê·€ì°®ìœ¼ë‹ˆê¹Œ ë¦¬í”„ë ˆì‹œ í† í° ê°œë…ì´ ë‚˜ì˜¨ë‹¤.   íë¦„ ì •ë¦¬   ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚´ë©´ ì‹œí¬ë¦¿ í‚¤ë¥¼ í†µí•´ í† í°ì„ ìƒì„±í•œë‹¤. ì´ ë•Œ ì„œë²„ëŠ” ì•¡ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í°ì„ ê°™ì´ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  ì•¡ì„¸ìŠ¤ í† í°ì€ ì €ì¥í•˜ì§€ ì•Šê³  ë¦¬í”„ë ˆì‹œ í† í°ë§Œ ì €ì¥ì†Œì— ì €ì¥í•œë‹¤. ê·¸ ë‹¤ìŒ ì´ ë‘˜ì„ í•œë²ˆì— ì‘ë‹µí—¤ë”ë¡œ ë³´ë‚´ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì•¡ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í°ì„ ëª¨ë‘ ì €ì¥í•˜ê³  ìˆë‹¤.   ì‹œê°„ì´ í˜ëŸ¬ ì•¡ì„¸ìŠ¤ í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ê³  ê°€ì •í•˜ì. ì‚¬ìš©ìëŠ” ì•¡ì„¸ìŠ¤ í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ë„ ëª¨ë¥´ê³  ì•Œ í•„ìš”ë„ ì—†ë‹¤. ì‚¬ìš©ìëŠ” ì•¡ì„¸ìŠ¤ í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ëª¨ë¥¸ì²´ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì„œë²„ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•Œë¦°ë‹¤. ì´ì œ ë¸Œë¼ìš°ì €ëŠ” ìë™ìœ¼ë¡œ ì•¡ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í°ì„ í•¨ê»˜ ì„œë²„ë¡œ ë³´ë‚¸ë‹¤. ì„œë²„ëŠ” ë¦¬í”„ë ˆì‹œ í† í°ì´ ìœ íš¨í•˜ë‹¤ë©´ ìƒˆë¡œ ê°±ì‹ í•œ ì•¡ì„¸ìŠ¤ í† í°ì„ í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚´ê²Œ ëœë‹¤. ê·¸ëŸ¬ë©´ ì´ì œ í´ë¼ì´ì–¸íŠ¸ì—ë„ ì—…ë°ì´íŠ¸ëœ ì•¡ì„¸ìŠ¤ í† í°ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨   ê²°ë¡    í† í°ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•˜ê¸°ì— ë”°ë¡œ ì„¸ì…˜ì„ ë‘˜ í•„ìš”ê°€ ì—†ë‹¤. íš¨ìœ¨ì„±ì´ ì¢‹ì•„ì§€ê³  DBê¹Œì§€ ê°€ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì— ì†ë„ê°€ ë¹ ë¥´ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ í† í°ë„ ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ëŒ€ìƒì´ê¸° ë•Œë¬¸ì— ë³´ì•ˆì— ìˆì–´ì„œ ì‹ ê²½ì„ ì¨ì•¼í•œë‹¤.  ","categories": ["Web"],
        "tags": ["Web"],
        "url": "/web/Web-Authentication-Authorization/",
        "teaser": ""
      },{
        "title": "OAuth 2.0",
        "excerpt":"    ì›¹ ì„œí•‘ì„ í•˜ë‹¤ë³´ë©´ Google, Facebook ë“±ì˜ ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤. í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ê°„í¸í•˜ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆìœ¼ë©° ì—°ë™ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Google, Facebook ë“±ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ê°„í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.   ì´ ë•Œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œì´ ë°”ë¡œ OAuthë‹¤.   OAuthë€   OAuthëŠ” ì¸í„°ë„· ì‚¬ìš©ìë“¤ì´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œê³µí•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ ìƒì˜ ìì‹ ë“¤ì˜ ì •ë³´ì— ëŒ€í•´ ì›¹ì‚¬ì´íŠ¸ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” ê³µí†µì ì¸ ìˆ˜ë‹¨ìœ¼ë¡œì„œ ì‚¬ìš©ë˜ëŠ” ì ‘ê·¼ ìœ„ì„ì„ ìœ„í•œ ê°œë°©í˜• í‘œì¤€ì´ë‹¤.      OAuthì—ëŠ” 3ê°€ì§€ ì£¼ì²´ê°€ ìˆë‹¤.      ì‚¬ìš©ì, User: ë‚´ ì‚¬ì´íŠ¸ë¥¼ ì´ìš©í•˜ê³ ì í•˜ëŠ” ì‚¬ìš©ì   ë‚´ ì‚¬ì´íŠ¸, mine: xxxxx.com   ê·¸ë“¤ì˜ ì„œë¹„ìŠ¤, Their: Google, Facebook, Twitter ë“±      OAuthë¥¼ ì´ìš©í•˜ë©´ ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ê°€ ê·¸ë“¤ì´ ë§Œë“  ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆë‹¤.   UserëŠ” mineì„ í†µí•´ accessTokenìœ¼ë¡œ ê·¸ë“¤ì˜ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ìµœì¢…ì ìœ¼ë¡œëŠ” OAuthë¥¼ í†µí•´ accessTokenì„ ì–»ì–´ë‚¼ ìˆ˜ ìˆë‹¤.   OAuth ì£¼ìš” ìš©ì–´   OAuthì—ëŠ” 3ê°€ì§€ ì£¼ì²´ê°€ ìˆë‹¤ê³  í–ˆë‹¤. 3ê°€ì§€ ì£¼ì²´ë¥¼ OAuth ìš©ì–´ì— ë§ê²Œ í•´ì„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.      ì‚¬ìš©ì(User) â‡’ Resource Owner   ë‚´ ì‚¬ì´íŠ¸(mine) â‡’ Client   ê·¸ë“¤ì˜ ì„œë¹„ìŠ¤(Their) â‡’ Resource Server   Resource Server, Resource Owner, Client ì´ ì„¸ê°€ì§€ì˜ ê´€ê³„ê°€ OAuthì˜ í•µì‹¬ì´ë‹¤.       Resource Owner   ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ì‚¬ìš©ì, ìì›ì„ ì†Œìœ í•œ ì‚¬ëŒ (ìì›ì€ ê°œì¸ì •ë³´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.)   Client   ê°œì¸ì´ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„   Resource Server   ì‚¬ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì„œë²„ (Google, Facebook ë“±)   Authorization Server   ì¸ì¦ê³¼ ê´€ë ¨ëœ ì²˜ë¦¬ë¥¼ ì „ë‹´í•˜ëŠ” ì„œë²„   ê³µì‹ ë©”ë‰´ì–¼ì—ì„œëŠ” Resource Serverì™€ Authorization Serverë¥¼ êµ¬ë¶„í•˜ì—¬ ë³´ì—¬ì£¼ì§€ë§Œ ìš°ë¦¬ëŠ” í•©ì³ì„œ Resource Serverë¼ê³  ë¶€ë¥´ê² ë‹¤.   OAuth2.0 ë“±ë¡   Clientê°€ Resource Serverë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„  Resource Serverì—ê²Œ ì‚¬ì „ì— ìŠ¹ì¸ì„ ë°›ì•„ì•¼í•œë‹¤. ì´ë¥¼ ë“±ë¡(Register)í•œë‹¤ê³  í•˜ë©°, ì„œë¹„ìŠ¤(Google, Facebook ë“±)ë§ˆë‹¤ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ë‹¤ë¥´ë‹¤.   í•˜ì§€ë§Œ ì•„ë˜ ì„¸ê°€ì§€ ìš”ì†Œë¥¼ ê³µí†µì ìœ¼ë¡œ ê°–ëŠ”ë‹¤.   client id, client secret, authorized redirect URIs   Client ID   ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•˜ëŠ” ì‹ë³„ì IDë¥¼ ì˜ë¯¸í•œë‹¤.   Client Secret   ì‹ë³„í•˜ëŠ” ê°’ì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸. ì¦‰, Client IDì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ì´ë‹¤. Client IDëŠ” ì™¸ë¶€ì— ë…¸ì¶œë  ìˆ˜ ìˆìœ¼ë‚˜ Client Secretì€ ì ˆëŒ€ ì™¸ë¶€ì— ë…¸ì¶œë˜ë©´ ì•ˆëœë‹¤.   Authorized redirect URIs   authorizedëŠ” â€˜ê¶Œí•œì„ ë¶€ì—¬í•˜ë‹¤â€™ë¼ëŠ” ëœ»ì´ë‹¤.   Resource Serverë§Œ ê°–ëŠ” ì •ë³´ì´ë©° Clientì— ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚˜ì¤‘ì— Authorized codeë¥¼ ì „ë‹¬í•˜ëŠ” í†µë¡œì´ë‹¤. ë‚˜ì¤‘ì— Clinet â†”Â Resource Server ìœ íš¨ì„± ê²€ì‚¬ì—ì„œ ì´ redirect URIsë„ ì²´í¬ë˜ë©° í•´ë‹¹ ì£¼ì†Œê°€ ì•„ë‹ ê²½ìš° Resource ServerëŠ” í•´ë‹¹ Clientê°€ ì•„ë‹ˆë¼ê³  íŒë‹¨í•œë‹¤.   Scope   Resource Serverì—ì„œ ì‚¬ì „ì— ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ë¯¸ë¦¬ ì •ì˜í•œ ê¸°ëŠ¥   Resource Ownerì˜ ìŠ¹ì¸   ë“±ë¡ì„ í†µí•´ Resource ServerëŠ” client id, client secret, redirectURLì„ ì•Œê²Œ ë˜ì—ˆê³ , ClientëŠ” client idì™€ client secretì„ ì•Œê²Œ ë˜ì—ˆë‹¤.      Resource Serverì— 4ê°€ì§€ ê¸°ëŠ¥ì´ ìˆë‹¤ê³  ê°€ì •í•˜ê³  ê°ê°ì˜ ê¸°ëŠ¥ì„ A, B, C, Dë¼ê³  í• ë•Œ clientëŠ” Resource Serverì˜ ëª¨ë“  ê¸°ëŠ¥ì´ í•„ìš”í•œê²Œ ì•„ë‹ˆê³  Bì™€ C ê¸°ëŠ¥ë§Œ í•„ìš”í•˜ë‹¤ê³  í•˜ë‹¤ê³  ê°€ì •í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ëª¨ë“  ê¸°ëŠ¥ì— ëŒ€í•œ ì¸ì¦ì„ ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼ ìµœì†Œí•œì˜ ì¸ì¦ë§Œ ë°›ëŠ”ê²Œ íš¨ìœ¨ì ì´ë‹¤.   Resource Ownerê°€ Clientì— ì ‘ì†í•œë‹¤. ì´ë•Œ Resource Serverì˜ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì¸ í˜ì´ìŠ¤ë¶ ê¸€ì“°ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤ê³  ê°€ì •í•˜ì. ê·¸ë ‡ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ â€˜í˜ì´ìŠ¤ë¶ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ê¸°â€™ë¼ëŠ” í˜ì´ì§€ê°€ ë³´ì´ê²Œ ëœë‹¤.      ë²„íŠ¼ì˜ ë§í¬ëŠ” ì•„ë˜ì™€ ê°™ë‹¤. ì´ ë§í¬ë¥¼ í†µí•´ Resource OwnerëŠ” Resource Serverë¡œ ì ‘ì†í•˜ê²Œ ëœë‹¤.   1 http://resource.server/?client_id=1&amp;scope=B,C&amp;redirect_uri=http://client/callback   Resource ServerëŠ” Resource Ownerì˜ í˜„ì¬ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤. ë¡œê·¸ì¸ì´ ì•ˆë˜ì–´ìˆìœ¼ë©´ ë¡œê·¸ì¸ì„ ìš”ì²­í•œë‹¤. ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ë©´ ê·¸ë•Œì„œì•¼ ìš”ì²­í•œ ë§í¬ì˜ client idì™€ redirect URLë¥¼ Resource Serverì˜ client idì™€ redirect URLê³¼ ë¹„êµí•œë‹¤. ê°™ë‹¤ë©´ Resource Ownerì—ê²Œ scopeì— í•´ë‹¹í•˜ëŠ” ê¸°ëŠ¥ì„ ë¶€ì—¬í•  ê²ƒì¸ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ì „ì†¡í•œë‹¤. (í–¥í›„ redirect_urië¥¼ í†µí•´ì„œ Resource ServerëŠ” Clientì—ê²Œ ì„ì‹œë¹„ë°€ë²ˆí˜¸ì¸ Authorization codeë¥¼ ì œê³µí•œë‹¤.)      í—ˆìš©ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ (Resource Ownerì—ì„œ Resource Serverë¡œ ìš”ì²­) Resource Serverì— user id, scope ì €ì¥ë¨      Resource Serverì˜ ìŠ¹ì¸   ì„ì‹œë¹„ë°€ë²ˆí˜¸ì¸ authorization codeë¥¼ Redirect URLì„ í†µí•´ Resource Serverì—ì„œ Resource Ownerì—ê²Œ ì „ì†¡í•œë‹¤.      í—¤ë”ì— Location ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì„ redirectionì´ë¼ê³  í•œë‹¤. (ì—¬ê¸°ì„œ ?code=3ì€ authorization code ì´ë‹¤.) Resource Serverê°€ Resource Ownerì˜ ì›¹ ë¸Œë¼ìš°ì €ì—ê²Œ ì € ì£¼ì†Œ(http://client/callback?code=3)ë¡œ ì´ë™í•˜ë¼ê³  ëª…ë ¹í•œ ê²ƒì´ë‹¤.      Resource Ownerì˜ ì›¹ ë¸Œë¼ìš°ì €ëŠ” Locationì˜ í—¤ë”ê°’ì— ì˜í•´ì„œ ì‚¬ìš©ìê°€ ì¸ì‹í•˜ì§€ë„ ëª»í•˜ê²Œ ì£¼ì†Œ(http://client/callback?code=3)ë¡œ redirect í•œë‹¤. ì£¼ì†Œ ì¤‘ ?code=3ì„ í†µí•´ ClientëŠ” authorization code ê°’ì´ 3ì´ë¼ëŠ” ê²ƒì„ ì•Œê²Œ ëœë‹¤.      ClientëŠ” Resource Ownerë¥¼ í†µí•˜ì§€ ì•Šê³  Resource Serverë¡œ ì§ì ‘ ì ‘ê·¼í•œë‹¤. ì§ì ‘ ì ‘ê·¼í• ë•Œ authorization codeì™€ client id, client secret ê°’ì„ ê°™ì´ ì „ì†¡í•œë‹¤. ì´ì œ Resource ServerëŠ” authorization codeì™€ client id, client secret ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì¼ì¹˜í•˜ë©´ access tokenì„ ë°œê¸‰í•œë‹¤. ê·¸ë¦¬ê³  í•„ìš”ì—†ì–´ì§„ Authorization codeëŠ” ì§€ìš´ë‹¤.   ê·¸ë ‡ê²Œ í† í°ì„ ë°›ì€ ClientëŠ” ì‚¬ìš©ìì—ê²Œ ìµœì¢…ì ìœ¼ë¡œ ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  ì‘ë‹µí•œë‹¤.      OAuthì˜ ëª©ì ì€ ìµœì¢…ì ìœ¼ë¡œ Access Tokenì„ ë°œê¸‰í•˜ëŠ” ê²ƒì´ë‹¤.     ì´ì œ ClientëŠ” Resource Serverì˜ APIë¥¼ ìš”ì²­í•´ Resource Ownerì˜ IDì™€ ê°™ì€ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  Access Tokenì˜ ê¸°ê°„ì´ ë§Œë£Œë˜ë©´ Refresh Tokenì„ ì´ìš©í•´ì„œ Access Tokenì„ ì¬ë°œê¸‰ ë°›ëŠ”ë‹¤.   OAuth íë¦„ ì •ë¦¬         Resource OwnerëŠ” ì„œë¹„ìŠ¤(client)ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ ë¡œê·¸ì¸ í˜ì´ì§€ì— ì ‘ê·¼í•œë‹¤.   ê·¸ëŸ¼ ì„œë¹„ìŠ¤(Client)ëŠ” Resource Ownerì—ê²Œ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì œê³µí•˜ê²Œ ëœë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ìëŠ” â€˜êµ¬ê¸€/í˜ì´ìŠ¤ë¶ìœ¼ë¡œ ë¡œê·¸ì¸â€™ ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤.        Resource Ownerê°€ ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ê²Œ ë˜ë©´ íŠ¹ì •í•œ urlì´ êµ¬ê¸€/í˜ì´ìŠ¤ë¶ ì„œë²„ìª½ìœ¼ë¡œ ë³´ë‚´ì§€ê²Œ ëœë‹¤.       (íŠ¹ì •í•œ url: http://resource.server/?client_id=1&amp;scope=B,C&amp;redirect_uri=http://client/callback)            Resource Ownerê°€ ë³´ë‚¸ client_idì™€ redirect_urië¥¼ Resource Serverì— ë“±ë¡ëœ ì •ë³´ì™€ ë¹„êµí•œë‹¤. í™•ì¸ì´ ì™„ë£Œë˜ë©´ Resource Serverë¡œ ë¶€í„° ì „ìš© ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤€ë‹¤.                   ID/PWë¡œ ë¡œê·¸ì¸ì„ í•˜ê²Œë˜ë©´ Clientê°€ ì‚¬ìš©í•˜ë ¤ëŠ” ê¸°ëŠ¥(scope)ì— ëŒ€í•´ Resource Ownerì˜ ë™ì˜(ìŠ¹ì¸)ì„ ìš”ì²­í•œë‹¤. ì¦‰, scopeì— í•´ë‹¹ë˜ëŠ” ê¶Œí•œì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¶€ì—¬í•  ê²ƒì¸ì§€ ì‚¬ìš©ìì—ê²Œ ì¬ì°¨ í™•ì¸í•œë‹¤.              ìœ„ ì´ë¯¸ì§€ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ë‹¤.       â€˜ClientëŠ” Resource Ownerë¥¼ ëŒ€ì‹ í•´ í•´ë‹¹ ê¸°ëŠ¥(scope)ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ë™ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?â€™       ë™ì˜ë¥¼ ëˆ„ë¥´ë©´ Resource OwnerëŠ” Clientê°€ í•´ë‹¹ ê¸°ëŠ¥ ì‚¬ìš©ì— ìœ„ì„í–ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.       í•˜ì§€ë§Œ, ì´ë¯¸ Ownerê°€ Clientì—ê²Œ ê¶Œí•œ ìŠ¹ì¸ì„ í–ˆë”ë¼ë„ ì•„ì§ Serverê°€ í—ˆë½í•˜ì§€ ì•Šì•˜ë‹¤. ë”°ë¼ì„œ, Resource Serverë„ Clientì—ê²Œ ê¶Œí•œ ìŠ¹ì¸ì„ í•˜ê¸°ìœ„í•´ Authorization codeë¥¼ Redirect URLì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µí•˜ê³    ì‚¬ìš©ìëŠ” ê·¸ëŒ€ë¡œ Clientì—ê²Œ ë‹¤ì‹œ ë³´ë‚¸ë‹¤.   ì´ì œ Clientê°€ Resource Serverì—ê²Œ ì§ì ‘ url(client_id, client_secret, authorization code ë“±)ì„ ë³´ë‚¸ë‹¤.   ê·¸ëŸ¼ Resource ServerëŠ” Clientê°€ ì „ë‹¬í•œ ì •ë³´ë“¤ì„ ë¹„êµí•´ì„œ ì¼ì¹˜í•œë‹¤ë©´, Access Tokenì„ ë°œê¸‰í•œë‹¤. ê·¸ë¦¬ê³  í•„ìš”ì—†ì–´ì§„ Authorization codeëŠ” ì§€ìš´ë‹¤.   ê·¸ë ‡ê²Œ í† í°ì„ ë°›ì€ ClientëŠ” ì‚¬ìš©ìì—ê²Œ ìµœì¢…ì ìœ¼ë¡œ ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  ì‘ë‹µí•œë‹¤.  ","categories": ["Web"],
        "tags": ["Web"],
        "url": "/web/Web-OAuth/",
        "teaser": ""
      },{
        "title": "JWT, OAuth2.0, Security",
        "excerpt":"    SpringBoot í™˜ê²½ì—ì„œ Spring Securityë¥¼ ì´ìš©í•œ ì¸ì¦/ì¸ê°€ë¥¼ êµ¬í˜„í•  ê²ƒ, OAuth2.0 ì¸ì¦ì„ í†µí•´ JWTí† í°ì„ ë°œê¸‰í•´ì¤„ ê²ƒì´ë‹¤. ì´í›„ ì„œë²„ì— ìš”ì²­í•  ë•Œ ë°œê¸‰í•œ í† í°ì„ Request Headerì— ì…ë ¥í•˜ì—¬ ìš”ì²­í•œë‹¤.   ì‘ì„±í•œ ì½”ë“œ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.      ì‚¬ì „ ì‘ì—…           ì¸ì¦ì´ ì •ìƒì²˜ë¦¬ ë˜ì—ˆì„ ê²½ìš° ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¥¼ ì‘ì„±í•œë‹¤.       1 2 3 4 5 6 7 8 9 10  @RestController  @RequestMapping(\"/members\")  @RequiredArgsConstructor  public class MemberController {           @GetMapping      public String MyPage() {          return \"myPage\";      }  }                OAuthë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‚¬ì „ì— ë°œê¸‰í•œ client_id, client_secret, callback urië¥¼ application.ymlì— ì‘ì„±í•œë‹¤. client_secretê°’ì€ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ê³µê°œí•´ì„œëŠ” ì•ˆëœë‹¤.       1 2 3 4 5 6 7 8 9 10 11  spring:    jwt:      secretKey: ****    security:      oauth2:        client:          registration:            github:              client-id: ****              client-secret: ******              redirect-uri: http://localhost:8080/login/oauth2/code/github           OAuth ê´€ë ¨ ì½”ë“œ      OAuth2Attribute   CustomOAuth2UserService   OAuth2SuccessHandler   OAuth2Attribute   OAuth ì¸ì¦ í›„ ë³´ë‚´ì£¼ëŠ” ë°ì´í„°ê°€ ì¸ì¦ ì„œë²„ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì´ê³³ì—ì„œ ë³„ë„ì˜ ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 package com.smtd.smtdApi.github.common;  import lombok.AccessLevel; import lombok.Builder; import lombok.Getter; import lombok.ToString;  import java.util.HashMap; import java.util.Map;  @ToString @Builder(access = AccessLevel.PRIVATE) @Getter public class OAuth2Attribute {     private Map&lt;String, Object&gt; attributes;     private String attributeKey;     private String email;     private String name;      public static OAuth2Attribute of(String provider, String attributeKey,                                      Map&lt;String, Object&gt; attributes) {         switch (provider) {             case \"github\":                 return ofGithub(attributeKey, attributes);             default:                 throw new RuntimeException();         }     }      private static OAuth2Attribute ofGithub(String attributeKey,                                             Map&lt;String, Object&gt; attributes) {         return OAuth2Attribute.builder()                 .name((String) attributes.get(\"name\"))                 .email((String) attributes.get(\"email\"))                 .attributes(attributes)                 .attributeKey(attributeKey)                 .build();     }      public Map&lt;String, Object&gt; convertToMap() {         Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();         map.put(\"id\", attributeKey);         map.put(\"key\", attributeKey);         map.put(\"name\", name);         map.put(\"email\", email);          return map;     } }   CustomOAuth2UserService   OAuth2UserService ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ì´ë‹¤. OAuth ì¸ì¦ì„ ì™„ë£Œí•˜ê³  ë°›ì€ ë°ì´í„°ë¡œ ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì¸ì¦ ì •ë³´ë¥¼ ìƒì„±í•´ì¤€ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 package com.smtd.smtdApi.github.common;  import lombok.extern.slf4j.Slf4j; import org.springframework.security.core.authority.SimpleGrantedAuthority; import org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService; import org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest; import org.springframework.security.oauth2.client.userinfo.OAuth2UserService; import org.springframework.security.oauth2.core.OAuth2AuthenticationException; import org.springframework.security.oauth2.core.user.DefaultOAuth2User; import org.springframework.security.oauth2.core.user.OAuth2User; import org.springframework.stereotype.Service;  import java.util.Collections;  @Slf4j @Service public class CustomOAuth2UserService implements OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {      @Override     public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {          OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; oAuth2UserService = new DefaultOAuth2UserService();         OAuth2User oAuth2User = oAuth2UserService.loadUser(userRequest);          String registrationId = userRequest.getClientRegistration().getRegistrationId();         String userNameAttributeName = userRequest.getClientRegistration()                 .getProviderDetails().getUserInfoEndpoint().getUserNameAttributeName();          OAuth2Attribute oAuth2Attribute =                 OAuth2Attribute.of(registrationId, userNameAttributeName, oAuth2User.getAttributes());          log.info(\"{}\", oAuth2Attribute);          var memberAttribute = oAuth2Attribute.convertToMap();          return new DefaultOAuth2User(                 Collections.singleton(new SimpleGrantedAuthority(\"ROLE_USER\")),                 memberAttribute, \"email\");     } }   OAuth2SuccessHandler   OAuth ë¡œê·¸ì¸ ì„±ê³µ í•¸ë“¤ëŸ¬ì—ì„œ í† í°ì„ ìƒì„±í•˜ì—¬ íšŒì›ê°€ì…, ë¡œê·¸ì¸ ì²˜ë¦¬í•˜ê³  Response Headerì— í† í°ì„ ì¶”ê°€í•´ì„œ Clientë¡œ ë³´ë‚´ì¤€ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 package com.smtd.smtdApi.github.common;  import com.fasterxml.jackson.databind.ObjectMapper; import com.smtd.smtdApi.github.dto.MemberDTO; import com.smtd.smtdApi.github.dto.MemberRequestMapper; import com.smtd.smtdApi.github.dto.TokenDTO; import com.smtd.smtdApi.github.entity.Member; import com.smtd.smtdApi.github.repository.MemberRepository; import lombok.RequiredArgsConstructor; import lombok.extern.slf4j.Slf4j; import org.springframework.security.core.Authentication; import org.springframework.security.oauth2.core.user.OAuth2User; import org.springframework.security.web.authentication.AuthenticationSuccessHandler; import org.springframework.stereotype.Component;  import javax.servlet.ServletException; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.util.Optional;  @Slf4j @RequiredArgsConstructor @Component public class OAuth2SuccessHandler implements AuthenticationSuccessHandler {      private final JwtTokenProvider jwtTokenProvider;     private final MemberRequestMapper memberRequestMapper;     private final ObjectMapper objectMapper;     private final MemberRepository memberRepository;      @Override     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {         OAuth2User oAuth2User = (OAuth2User) authentication.getPrincipal();         MemberDTO memberDTO = memberRequestMapper.toDTO(oAuth2User);         TokenDTO token = null;         Optional&lt;Member&gt; findMember = memberRepository.findByEmail(memberDTO.getEmail());         if (findMember.isPresent()) {             token = TokenDTO.builder()                     .refreshToken(findMember.get().getRefreshToken())                     .build();             log.info(\"{} ë¡œê·¸ì¸\", findMember.get().getEmail());         } else {             token = jwtTokenProvider.createToken(memberDTO.getEmail(), \"USER\");             log.info(\"{}\", token);             Member member = Member.builder()                     .email(memberDTO.getEmail())                     .name(memberDTO.getName())                     .refreshToken(token.getRefreshToken())                     .build();             memberRepository.save(member);             log.info(\"{} íšŒì›ê°€ì…\", memberDTO.getEmail());         }          writeTokenResponse(response, token);     }      private void writeTokenResponse(HttpServletResponse response, TokenDTO token) throws IOException {         response.setContentType(\"text/html;charset=UTF-8\");          response.addHeader(\"Auth\", token.getAccessToken());         response.addHeader(\"Refresh\", token.getRefreshToken());         response.setContentType(\"application/json;charset=UTF-8\");          var writer = response.getWriter();         writer.println(objectMapper.writeValueAsString(token));         writer.flush();     } }   Token ê´€ë ¨ ì½”ë“œ      TokenDTO   JwtTokenProvider   JwtAuthenticationFilter   TokenController   TokenDTO   Access Tokenê³¼ Refresh Tokenìœ¼ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 package com.smtd.smtdApi.github.dto;  import lombok.*;  @ToString @NoArgsConstructor @AllArgsConstructor @Getter @Builder public class TokenDTO {      private String accessToken;     private String refreshToken; }   JwtTokenProvider   Access Tokenê³¼ Refresh Tokenì„ ë°œê¸‰í•˜ê³  í† í° ê°’ì´ ìœ íš¨í•œì§€ ê²€ì¦í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 package com.smtd.smtdApi.github.common;  import com.smtd.smtdApi.github.dto.TokenDTO; import com.smtd.smtdApi.github.entity.Member; import com.smtd.smtdApi.github.repository.MemberRepository; import io.jsonwebtoken.*; import lombok.RequiredArgsConstructor; import org.springframework.beans.factory.annotation.Value; import org.springframework.security.authentication.UsernamePasswordAuthenticationToken; import org.springframework.security.core.Authentication; import org.springframework.security.core.authority.SimpleGrantedAuthority; import org.springframework.stereotype.Component;  import javax.annotation.PostConstruct; import java.util.Arrays; import java.util.Base64; import java.util.Date; import java.util.Optional;  @Component @RequiredArgsConstructor public class JwtTokenProvider {      @Value(\"${spring.jwt.secretKey}\")     private String secretKey;      private long tokenValidTime = 1000L * 60 * 60 * 3; // 3ì‹œê°„     private long refreshTokenValidTime = 1000L * 60 * 60 * 24 * 7; // 7ì¼      private final MemberRepository memberRepository;      @PostConstruct     protected void init() {         secretKey = Base64.getEncoder().encodeToString(secretKey.getBytes());     }      /**      * jwt token ë°œê¸‰      */     public TokenDTO createToken(String email, String role) {         Claims claims = Jwts.claims().setSubject(email);         claims.put(\"role\", role);         Date now = new Date();          return new TokenDTO(                 Jwts.builder()                         .setClaims(claims)                         .setIssuedAt(now)                         .setExpiration(new Date(now.getTime() + tokenValidTime))                         .signWith(SignatureAlgorithm.HS256, secretKey)                         .compact(),                 Jwts.builder()                         .setClaims(claims)                         .setIssuedAt(now)                         .setExpiration(new Date(now.getTime() + refreshTokenValidTime))                         .signWith(SignatureAlgorithm.HS256, secretKey)                         .compact());     }      // í† í°ì´ ìœ íš¨í•œì§€ í™•ì¸     public Authentication getAuthentication(String token) {         Optional&lt;Member&gt; findMember = memberRepository.findByEmail(getMemberEmail(token));         Member member = findMember.get();         return new UsernamePasswordAuthenticationToken(member, \"\",                 Arrays.asList(new SimpleGrantedAuthority(\"ROLE_USER\")));     }      // ì´ë©”ì¼ ë””ì½”ë”©     public String getMemberEmail(String token) {         try {             return Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token).getBody().getSubject();         } catch (ExpiredJwtException e) {             return e.getClaims().getSubject();         }     }      // í† í°ì˜ ë§Œë£Œ ì—¬ë¶€ í™•ì¸     public boolean validateTokenExpiration(String token) {         try {             Jws&lt;Claims&gt; claims = Jwts.parser().setSigningKey(secretKey).parseClaimsJws(token);             return !claims.getBody().getExpiration().before(new Date());         } catch (Exception e) {             return false;         }     } }   JwtAuthenticationFilter   ë°œê¸‰ë°›ì€ í† í°ì„ ì´ìš©í•´ Security ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” í•„í„°ë¥¼ ë§Œë“ ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 package com.smtd.smtdApi.github.common;  import lombok.RequiredArgsConstructor; import lombok.extern.slf4j.Slf4j; import org.springframework.security.core.Authentication; import org.springframework.security.core.context.SecurityContextHolder; import org.springframework.util.StringUtils; import org.springframework.web.filter.GenericFilterBean;  import javax.servlet.FilterChain; import javax.servlet.ServletException; import javax.servlet.ServletRequest; import javax.servlet.ServletResponse; import javax.servlet.http.HttpServletRequest; import java.io.IOException;  @RequiredArgsConstructor @Slf4j public class JwtAuthenticationFilter extends GenericFilterBean {      private final JwtTokenProvider jwtTokenProvider;      /**      * JWT í† í° ê²€ì¦      */     @Override     public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {         String token = ((HttpServletRequest) request).getHeader(\"Auth\");          if (token != null &amp;&amp; jwtTokenProvider.validateTokenExpiration(token)) {             if (StringUtils.hasText(token) &amp;&amp; jwtTokenProvider.validateTokenExpiration(token)) {                 Authentication auth = jwtTokenProvider.getAuthentication(token);                 SecurityContextHolder.getContext().setAuthentication(auth);             } else {                 log.debug(\"ìœ íš¨í•œ JWT í† í°ì´ ì—†ìŠµë‹ˆë‹¤.\");             }          }         chain.doFilter(request, response);     } }   TokenController   Access Tokenì´ ë§Œë£Œë˜ì—ˆì„ ê²½ìš° Refresh Tokenì„ ì´ìš©í•´ Access Tokenì„ ì¬ë°œê¸‰ ë°›ëŠ”ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 package com.smtd.smtdApi.github.controller;  import com.smtd.smtdApi.github.dto.TokenDTO; import com.smtd.smtdApi.github.service.MemberService; import lombok.RequiredArgsConstructor; import lombok.extern.slf4j.Slf4j; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController;  import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse;  @RequiredArgsConstructor @RestController @RequestMapping(\"/token\") @Slf4j public class TokenController {      private final MemberService memberService;      @GetMapping(\"/expired\")     public String auth() {         throw new RuntimeException();     }      @GetMapping(\"/refresh\")     public String refreshAuth(HttpServletRequest request, HttpServletResponse response) {         String refreshToken = request.getHeader(\"Refresh\");          TokenDTO newToken = memberService.refresh(refreshToken);          response.addHeader(\"Auth\", newToken.getAccessToken());         response.addHeader(\"Refresh\", newToken.getRefreshToken());         response.setContentType(\"application/json;charset=UTF-8\");          return \"HAPPY NEW TOKEN\";     } }   Security      SecurityConfig   SecurityConfig   OAuth ë¡œê·¸ì¸ì„ í™œì„±í™”í•˜ê³  ì•ì„œ ë§Œë“  ì„œë¹„ìŠ¤ì™€ ì¸ì¦ì´ ì„±ê³µí•˜ë©´ ì²˜ë¦¬í•  Handlerë¥¼ ë“±ë¡í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 package com.smtd.smtdApi.github.common;  import lombok.RequiredArgsConstructor; import org.springframework.context.annotation.Bean; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity; import org.springframework.security.config.http.SessionCreationPolicy; import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder; import org.springframework.security.web.SecurityFilterChain; import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;  @EnableWebSecurity @RequiredArgsConstructor public class SecurityConfig {      private final JwtTokenProvider jwtTokenProvider;     private final CustomOAuth2UserService oAuth2UserService;     private final OAuth2SuccessHandler successHandler;      @Bean     public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {         http                 .httpBasic().disable()                 .csrf().disable()                 .formLogin().disable()                 .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)                 .and()                 .authorizeRequests()                 .antMatchers(\"/auth/**\", \"/login\", \"/token/**\").permitAll()                 .anyRequest().authenticated()                 .and()                 .addFilterBefore(new JwtAuthenticationFilter(jwtTokenProvider), UsernamePasswordAuthenticationFilter.class)                 .oauth2Login().loginPage(\"/token/expired\")                 .successHandler(successHandler)                 .userInfoEndpoint().userService(oAuth2UserService);          http.addFilterBefore(new JwtAuthenticationFilter(jwtTokenProvider), UsernamePasswordAuthenticationFilter.class);         return http.build();     }      @Bean     public BCryptPasswordEncoder encodePassword() {         return new BCryptPasswordEncoder();     } }   í…ŒìŠ¤íŠ¸      http://localhost:8080/oauth2/authorization/githubë¡œ ë¡œê·¸ì¸ ì‹œë„            ì²˜ìŒ ë¡œê·¸ì¸í•˜ëŠ” ìœ ì €ì—ê² ì„œë²„ì—ì„œ Access Tokenê³¼ Refresh Tokenì„ ë°œê¸‰í•´ì¤€ë‹¤.                         ê¸°ì¡´ì— ë¡œê·¸ì¸ì„ í•œì  ìˆëŠ” ìœ ì €ì—ê² ê¸°ì¡´ì˜ Refresh Tokenë§Œ ë³´ì—¬ì¤€ë‹¤.                       ìƒˆë¡œ ë°œê¸‰ë°›ì€ AccessTokenê³¼ RefreshTokenìœ¼ë¡œ í˜ì´ì§€ ì ‘ì† (Auth: Access Token, Refresh: Refresh Token)                   AccessTokenì´ ë§Œë£Œë˜ë©´ ì—ëŸ¬ ë°œìƒ                   RefreshTokenì„ í†µí•´ ìƒˆë¡œìš´ AccessTokenê³¼ RefreshTokenì„ ì¬ë°œê¸‰ ë°›ìŒ. Header ê°’ì„ í™•ì¸í•˜ë©´ í† í°ê°’ì„ í™•ì¸ í•  ìˆ˜ ìˆìŒ             ","categories": ["Spring"],
        "tags": ["Spring","JWT","OAuth"],
        "url": "/spring/Spring-JWT-OAuth-Security/",
        "teaser": ""
      },{
        "title": "JDBC",
        "excerpt":"JDBC ë“±ì¥ë°°ê²½   ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì»¤ë„¥ì…˜ ì—°ê²°, SQL ì „ë‹¬, ê²°ê³¼ ì‘ë‹µì„ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.              ì»¤ë„¥ì…˜ ì—°ê²°: ì£¼ë¡œ TCP/IPë¥¼ ì‚¬ìš©í•´ì„œ ì»¤ë„¥ì…˜ì„ ì—°ê²°            SQL ì „ë‹¬: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” DBê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” SQLì„ ì—°ê²°ëœ ì»¤ë„¥ì…˜ì„ í†µí•´ DBì— ì „ë‹¬            ê²°ê³¼ ì‘ë‹µ: DBëŠ” ì „ë‹¬ëœ SQLì„ ìˆ˜í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ì‘ë‹µí•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì‘ë‹µ ê²°ê³¼ë¥¼ í™œìš©í•¨       ì´ë•Œ ë¬¸ì œì ì€ ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë°©ë²•, SQLì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•, ê²°ê³¼ë¥¼ ì‘ë‹µ ë°›ëŠ” ë°©ë²•ì´ ëª¨ë‘ ë‹¤ë¥´ë‹¤ëŠ” ì ì´ë‹¤. ë§Œì•½, DBë¥¼ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ DBë¡œ ë³€ê²½í•˜ê²Œ ë˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ê°œë°œëœ DB ì‚¬ìš© ì½”ë“œë„ ë³€ê²½í•´ì•¼ í•œë‹¤. ë˜í•œ, ê°œë°œìê°€ ê°ê°ì˜ DBë§ˆë‹¤ ì»¤ë„¥ì…˜ ì—°ê²°, SQL ì „ë‹¬, ê²°ê³¼ë¥¼ ì‘ë‹µ ë°›ëŠ” ë°©ë²•ì„ ìƒˆë¡œ í•™ìŠµí•´ì•¼ í•œë‹¤.   ì´ëŸ° ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ JDBCë¼ëŠ” ìë°” í‘œì¤€ì´ ë“±ì¥í–ˆë‹¤.   JDBCë€?   JDBC(Java Database Connectivity)ëŠ” ìë°”ì—ì„œ DBì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë°” APIì´ë‹¤. (ìë°” í‘œì¤€)      JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ëŠ” ëŒ€í‘œì ìœ¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ê¸°ëŠ¥ì„ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•˜ì—¬ ì œê³µí•œë‹¤.      java.sql.Connection: ì—°ê²°   java.sql.Statement: SQLì„ ë‹´ì€ ë‚´ìš©   java.sql.ResultSet: SQL ìš”ì²­ ì‘ë‹µ   JDBC ë“œë¼ì´ë²„   JDBC ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°ê°ì˜ DB ë²¤ë”(íšŒì‚¬)ì—ì„œ ìì‹ ì˜ DBì— ë§ê²Œ êµ¬í˜„í•´ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µí•˜ëŠ”ë° ì´ê²ƒì„ JDBC ë“œë¼ì´ë²„ë¼ í•œë‹¤.   ì´ì œ JDBCì˜ ë“±ì¥ìœ¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ DB ë³€ê²½ ì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ DB ì‚¬ìš© ì½”ë“œë„ ë³€ê²½í•´ì•¼ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.   ë‹¤ë¥¸ ì¢…ë¥˜ì˜ DBë¡œ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´ JDBC êµ¬í˜„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. ë˜í•œ, ê°œë°œìê°€ DBë§ˆë‹¤ í•™ìŠµí•´ì•¼í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤. ê°œë°œìëŠ” ì´ì œ JDBC í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ë²•ë§Œ í•™ìŠµí•˜ë©´ ëœë‹¤.   JDBC ì‚¬ìš©ë°©ë²•   DBì— ì—°ê²°í•˜ë ¤ë©´ JDBCê°€ ì œê³µí•˜ëŠ” DriverManager.getConnection()ë¥¼ ì‚¬ìš©í•œë‹¤.   1 2 3 4 import java.sql.Connection; import java.sql.DriverManager;  Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);   JDBC DriverManager ì—°ê²° ì´í•´   JDBCê°€ ì œê³µí•˜ëŠ” DriverManagerëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë“±ë¡ëœ DB ë“œë¼ì´ë²„ë“¤ì„ ê´€ë¦¬í•˜ê³  ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.     ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-JDBC/",
        "teaser": ""
      },{
        "title": "JDBCì™€ ìµœì‹  ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ (SQL Mapper, ORM)",
        "excerpt":"ìµœê·¼ì—ëŠ” JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ SQL Mapper, ORMì„ í†µí•´ JDBCë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   SQL Mapper   SQL MapperëŠ” JDBCë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. SQL ì‘ë‹µ ê²°ê³¼ë¥¼ ê°ì²´ë¡œ í¸ë¦¬í•˜ê²Œ ë³€í™˜í•´ì£¼ê³  JDBCì˜ ë°˜ë³µ ì½”ë“œë¥¼ ì œê±°í•´ì¤€ë‹¤. í•˜ì§€ë§Œ ê°œë°œìê°€ ì§ì ‘ SQLì„ ì‘ì„±í•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ JdbcTemplate, MyBatisê°€ SQL Mapperì— í•´ë‹¹í•œë‹¤.      ORM ê¸°ìˆ    ORM(Object Relational Mapper)ì€ ê°ì²´ë¥¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ë§¤í•‘í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤. ORM ë•ë¶„ì— ê°œë°œìëŠ” SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ, ê°œë°œì ëŒ€ì‹  ORM ê¸°ìˆ ì´ SQLì„ ë™ì ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤. ëŒ€í‘œì ìœ¼ë¡œ JPA, í•˜ì´ë²„ë„¤ì´íŠ¸, ì´í´ë¦½ìŠ¤ ë§í¬ê°€ ìˆë‹¤.   ì´ ì¤‘ì—ì„œ JPAëŠ” ìë°” ì§„ì˜ì˜ ORM í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ê³  ì´ê²ƒì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì´ í•˜ì´ë²„ë„¤ì´íŠ¸ì™€ ì´í´ë¦½ìŠ¤ ë§í¬ê°€ ìˆë‹¤. ì£¼ë¡œ í•˜ì´ë²„ë„¤ì´íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.      ê·¸ë ‡ë‹¤ë©´ SQL Mapperê³¼ ORM ê¸°ìˆ  ì¤‘ ì–´ëŠ ê²ƒì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?   SQL MapperëŠ” SQLë§Œ ì§ì ‘ ì‘ì„±í•˜ë©´ ë‚˜ë¨¸ì§€ ë²ˆê±°ë¡œìš´ ì¼ì€ SQL Mapperê°€ ëŒ€ì‹  í•´ê²°í•´ì¤€ë‹¤. ORM ê¸°ìˆ ì€ SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ì„œ ê°œë°œ ìƒì‚°ì„±ì´ ë†’ë‹¤. í¸ë¦¬í•œ ë°˜ë©´ ì‰¬ìš´ ê¸°ìˆ ì€ ì•„ë‹ˆë¯€ë¡œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ê¹Šì´ìˆëŠ” í•™ìŠµì´ í•„ìš”í•˜ë‹¤.   SQL Mapperì™€ ORM ê¸°ìˆ ì€ ëª¨ë‘ JDBCë¥¼ ì‚¬ìš©í•œë‹¤. JDBCê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œê³  ê¸°ë³¸ ì›ë¦¬ë¥¼ ì•Œì•„ì•¼ í•´ë‹¹ ê¸°ìˆ ì„ ë” ê¹Šì´ ìˆê²Œ ì´í•´í•  ìˆ˜ ìˆê³  ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ê·¼ë³¸ì ì¸ ë¬¸ì œë¥¼ ì°¾ì•„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-SQLMapper-ORM/",
        "teaser": ""
      },{
        "title": "ì»¤ë„¥ì…˜ í’€",
        "excerpt":"ì»¤ë„¥ì…˜ í’€ ë“±ì¥ë°°ê²½   JDBC ë“œë¼ì´ë²„ë¥¼ í†µí•´ DB ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ê³¼ì •ì€ ë§¤ìš° ë³µì¡í•˜ë‹¤. ì•„ë˜ëŠ” DB ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ê³¼ì •ì´ë‹¤.         ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì€ DB ë“œë¼ì´ë²„ë¥¼ í†µí•´ ì»¤ë„¥ì…˜ ì¡°íšŒ   DB ë“œë¼ì´ë²„ëŠ” DBì™€ TCP/IP ì»¤ë„¥ì…˜ì„ ì—°ê²°í•¨. (ì´ ê³¼ì •ì—ì„œ 3 way handshake ê°™ì€ TCP/IP ì—°ê²°ì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ë™ì‘ì´ ë°œìƒí•¨)   DB ë“œë¼ì´ë²„ëŠ” TCP/IP ì»¤ë„¥ì…˜ì´ ì—°ê²°ë˜ë©´ ID, PWì™€ ê¸°íƒ€ ë¶€ê°€ì •ë³´ë¥¼ DBì— ì „ë‹¬   DBëŠ” ID, PWë¥¼ í†µí•´ ë‚´ë¶€ ì¸ì¦ì„ ì™„ë£Œí•˜ê³ , ë‚´ë¶€ì— DB ì„¸ì…˜ì„ ìƒì„±   DBëŠ” ì»¤ë„¥ì…˜ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ì‘ë‹µì„ ë³´ëƒ„   DB ë“œë¼ì´ë²„ëŠ” ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•¨   ì´ì²˜ëŸ¼ ì»¤ë„¥ì…˜ì„ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒì€ ê³¼ì •ë„ ë³µì¡í•˜ê³  ì‹œê°„ë„ ë§ì´ ì†Œìš”ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì‘ë‹µ ì†ë„ì— ì˜í–¥ì„ ì¤€ë‹¤.   ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•œë‹¤.   ì»¤ë„¥ì…˜ í’€   ì»¤ë„¥ì…˜ í’€ì´ë€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ DB ì—°ê²°ì„ ìœ„í•´ ë¯¸ë¦¬ ì¼ì •ìˆ˜ì˜ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ í’€ì— ë³´ê´€í–ˆë‹¤ê°€ ì‚¬ìš©ìì˜ ìš”ì²­ì´ ë°œìƒí•˜ë©´ í’€ì— ìƒì„±ë˜ì–´ ìˆëŠ” ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ê³  ì‚¬ìš©ìê°€ ì‚¬ìš©ì´ ëë‚˜ë©´ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ë‹¤ì‹œ í’€ì— ë°˜í™˜í•˜ì—¬ ë³´ê´€í•˜ëŠ” ê²ƒì´ë‹¤.   ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.      ì»¤ë„¥ì…˜ í’€ ì´ˆê¸°í™”: ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•˜ëŠ” ì‹œì ì— ì»¤ë„¥ì…˜ í’€ì€ í•„ìš”í•œ ë§Œí¼ ì»¤ë„¥ì…˜ì„ ë¯¸ë¦¬ í™•ë³´í•´ì„œ í’€ì— ë³´ê´€í•œë‹¤. ì„œë¹„ìŠ¤ì˜ íŠ¹ì§•ê³¼ ìŠ¤í™ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ ê¸°ë³¸ê°’ì€ 10ì´ë‹¤.   ì»¤ë„¥ì…˜ í’€ì˜ ì—°ê²° ìƒíƒœ: ì»¤ë„¥ì…˜ í’€ì— ë“¤ì–´ìˆëŠ” ì»¤ë„¥ì…˜ì€ TCP/IPë¡œ DBì™€ ì»¤ë„¥ì…˜ì´ ì—°ê²°ë˜ì–´ ìˆëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— ì–¸ì œë“ ì§€ ì¦‰ì‹œ SQLì„ DBì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.   ì»¤ë„¥ì…˜ í’€ ì‚¬ìš©            ì»¤ë„¥ì…˜ í’€ì„ í†µí•´ ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ì»¤ë„¥ì…˜ì„ ê°ì²´ ì°¸ì¡°ë¡œ ê°€ì ¸ì™€ ì‚¬ìš©í•œë‹¤.       ì»¤ë„¥ì…˜ í’€ì— ì»¤ë„¥ì…˜ì„ ìš”ì²­í•˜ë©´ ì»¤ë„¥ì…˜ í’€ì€ ìì‹ ì´ ê°€ì§€ê³  ìˆëŠ” ì»¤ë„¥ì…˜ ì¤‘ì— í•˜ë‚˜ë¥¼ ë°˜í™˜í•œë‹¤.       ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì€ ì»¤ë„¥ì…˜ í’€ì—ì„œ ë°›ì€ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•´ SQLì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•œë‹¤.       ì»¤ë„¥ì…˜ì„ ëª¨ë‘ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ í•´ë‹¹ ì»¤ë„¥ì…˜ì„ ì»¤ë„¥ì…˜ í’€ì— ë°˜í™˜í•œë‹¤. ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ ì»¤ë„¥ì…˜ì„ ì¢…ë£Œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì»¤ë„¥ì…˜ì´ ì‚´ì•„ìˆëŠ” ìƒíƒœë¡œ ì»¤ë„¥ì…˜ í’€ì— ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì´ë‹¤.           ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•´ì„œ ì–»ëŠ” ì´ì    ì„œë²„ì˜ ë¶€í•˜ë¥¼ ì¤„ì—¬ì£¼ê³  ì„œë²„ì˜ í•œì •ì ì¸ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì»¤ë„¥ì…˜ í’€ì€ ì„œë²„ë‹¹ ìµœëŒ€ ì»¤ë„¥ì…˜ ìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆê³  DBì— ë¬´í•œì • ì—°ê²°ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ ë§ì•„ì£¼ì–´ DBë¥¼ ë³´í˜¸í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì ì ˆí•œ ì»¤ë„¥ì…˜ í’€ ìˆ«ìëŠ” ì„œë¹„ìŠ¤ì˜ íŠ¹ì§•ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ìŠ¤í™, DB ì„œë²„ ìŠ¤í™ì— ë”°ë¼ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ì„œ ì •í•´ì•¼ í•œë‹¤.   ì»¤ë„¥ì…˜ í’€ ì˜¤í”ˆì†ŒìŠ¤   ì»¤ë„¥ì…˜ í’€ì€ ì´ì ì´ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œëŠ” í•­ìƒ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ì»¤ë„¥ì…˜ í’€ì€ ê°œë…ì ìœ¼ë¡œ ë‹¨ìˆœí•˜ì—¬ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ, ì‚¬ìš©ë„ í¸ë¦¬í•˜ê³  ì„±ëŠ¥ë„ ë›°ì–´ë‚œ ì˜¤í”ˆì†ŒìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ ë§ì•„ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤. ëŒ€í‘œì  ì»¤ë„¥ì…˜ í’€ ì˜¤í”ˆì†ŒìŠ¤ëŠ” commons-dbcp2, tomcat-jdbc pool, HikariCP ë“±ì´ ìˆë‹¤. ì„±ëŠ¥ê³¼ ì‚¬ìš©ì˜ í¸ë¦¬í•¨ ì¸¡ë©´ì—ì„œ ìµœê·¼ì—ëŠ” HikariCPë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.   HikariCP   JDBCì˜ ì»¤ë„¥ì…˜ í’€ í”„ë ˆì„ì›Œí¬ë¡œ ê°€ë²¼ìš´ ìš©ëŸ‰ê³¼ ë¹ ë¥¸ ì†ë„ê°€ ì¥ì ì´ë‹¤. SpringBootëŠ” ì»¤ë„¥ì…˜ í’€ ê´€ë¦¬ë¥¼ ìœ„í•´ HikariCPë¥¼ ì‚¬ìš©í•œë‹¤.   HikariCP ë™ì‘ ì›ë¦¬      ìŠ¤ë ˆë“œê°€ ì»¤ë„¥ì…˜ì„ ìš”ì²­í•œë‹¤.   ì´ì „ì— ì‚¬ìš©í–ˆë˜ ì»¤ë„¥ì…˜ ì •ë³´ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸   ì´ì „ì— ì‚¬ìš©í–ˆë˜ ì»¤ë„¥ì…˜ ëª©ë¡ ì¤‘ ì‚¬ìš© ê°€ëŠ¥í•œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸   ì „ì²´ ì»¤ë„¥ì…˜ ëª©ë¡ ì¤‘ ì‚¬ìš© ê°€ëŠ¥í•œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸   2, 3, 4ë¥¼ ìˆœì„œëŒ€ë¡œ ë™ì‘í•˜ë©° ìœ íš¨í•œ ì»¤ë„¥ì…˜ ì¡´ì¬ ì‹œ ë°”ë¡œ ë°˜í™˜í•œë‹¤.   ìœ íš¨í•œ ì»¤ë„¥ì…˜ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ HandOffQueueë¥¼ Pollingí•˜ë©´ì„œ ì»¤ë„¥ì…˜ì„ ë°˜ë‚©í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.   ì»¤ë„¥ì…˜ì„ ë°˜ë‚©í•˜ë©´ ì»¤ë„¥ì…˜ í’€ì€ HandOffQueueì— ë°˜ë‚©ëœ ì»¤ë„¥ì…˜ì„ ì‚½ì…í•˜ê³  ì“°ë ˆë“œëŠ” ì»¤ë„¥ì…˜ì„ íšë“í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-ConnectionPool/",
        "teaser": ""
      },{
        "title": "DataSource (ë°ì´í„° ì†ŒìŠ¤)",
        "excerpt":"DataSource ì´í•´   ì»¤ë„¥ì…˜ì„ ì–»ëŠ” ë°©ë²•ì€ DriverManagerë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì„œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ê³¼ ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.   ìš°ë¦¬ê°€ ì•ì„œ JDBCë¡œ ê°œë°œí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì²˜ëŸ¼ DriverManagerë¥¼ í†µí•´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ë‹¤ê°€ ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•(HikariCP ê°™ì€)ìœ¼ë¡œ ë³€ê²½í•˜ë ¤ë©´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤. ì˜ì¡´ê´€ê³„ê°€ DriverManagerì—ì„œ HikariCPë¡œ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì´ë‹¤.   ë”°ë¼ì„œ, ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•ì„ ì¶”ìƒí™”í•´ì•¼ í•œë‹¤.   ìë°”ì—ì„œëŠ” ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ javax.sql.DataSourceë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì¦‰, DataSourceëŠ” ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•ì„ ì¶”ìƒí™”í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.      ëŒ€ë¶€ë¶„ì˜ ì»¤ë„¥ì…˜ í’€ì€ DataSource ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¯¸ë¦¬ êµ¬í˜„í•´ë‘ì–´ ì¶”ìƒí™”í–ˆë‹¤. ë”°ë¼ì„œ, DBCP2 ì»¤ë„¥ì…˜ í’€, HikariCP ì»¤ë„¥ì…˜ í’€ì˜ ì½”ë“œë¥¼ ì§ì ‘ ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ DataSource ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì„ ì‘ì„±í•˜ë©´ ëœë‹¤. ì»¤ë„¥ì…˜ í’€ êµ¬í˜„ ê¸°ìˆ ì„ ë³€ê²½í•˜ê³  ì‹¶ìœ¼ë©´ í•´ë‹¹ êµ¬í˜„ì²´ë¡œ ë³€ê²½í•˜ë©´ ëœë‹¤.   DriverManagerëŠ” DataSource ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì§ì ‘ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ DriverManagerë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ DataSourceê¸°ë°˜ì˜ ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ë©´ ê´€ë ¨ ì½”ë“œë¥¼ ë‹¤ ê³ ì³ì•¼ í•˜ëŠ”ë° ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ì€ DriverManagerë„ DataSourceë¥¼ í†µí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ DriverManagerDataSourceë¼ëŠ” DataSourceë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤.   DriverManagerë¥¼ í†µí•´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•   1 2 3 4 5 6 7 @Test void driverManager() throws SQLException {     Connection con1 = DriverManager.getConnection(URL,USERNAME,PASSWORD);     Connection con2 = DriverManager.getConnection(URL,USERNAME,PASSWORD);     log.info(\"connection={}, class={}\", con1, con1.getClass());     log.info(\"connection={}, class={}\", con2, con2.getClass()); }   DriverManagerDataSourceë¥¼ í†µí•´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Test void dataSourceDriverManager() throws SQLException {     // DriverManagerDataSourceëŠ” DataSourceë¥¼ êµ¬í˜„í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. (28, 29 ê°™ì€ ì½”ë“œ)     // DataSource dataSource = new DriverManagerDataSource(URL, USERNAME, PASSWORD);     DriverManagerDataSource dataSource = new DriverManagerDataSource(URL,USERNAME,PASSWORD);      useDataSource(dataSource); }  private void useDataSource(DataSource dataSource) throws SQLException {     Connection con1 = dataSource.getConnection();     Connection con2 = dataSource.getConnection();     log.info(\"connection={}, class={}\", con1, con1.getClass());     log.info(\"connection={}, class={}\", con2, con2.getClass()); }   ê¸°ì¡´ DriverManagerì™€ DataSourceë¥¼ í†µí•´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ë°©ë²•ì€ ë¹„ìŠ·í•´ë³´ì´ì§€ë§Œ í° ì°¨ì´ê°€ ìˆë‹¤. DriverManagerëŠ” ì»¤ë„¥ì…˜ì„ íšë“í•  ë•Œë§ˆë‹¤ URL, USERNAME, PASSWORD ê°™ì€ íŒŒë¼ë¯¸í„°ë¥¼ ê³„ì† ì „ë‹¬í•´ì•¼ í•œë‹¤. ë°˜ë©´, DataSourceëŠ” ì²˜ìŒ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œë§Œ í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ê³  ì»¤ë„¥ì…˜ì„ íšë“í•  ë•ŒëŠ” dataSource.getConnection()ë§Œ í˜¸ì¶œí•˜ë©´ ëœë‹¤.   ê²°ê³¼ì ìœ¼ë¡œ ì„¤ì •ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬í•œ ê²ƒì´ë‹¤.   ì„¤ì •ê³¼ ì‚¬ìš©ì˜ ë¶„ë¦¬   ì„¤ì •: DataSourceë¥¼ ë§Œë“¤ê³  í•„ìš”í•œ ì†ì„±ë“¤ì„ ì‚¬ìš©í•´ì„œ URL, USERNAME, PASSWORD ê°™ì€ ë¶€ë¶„ì„ ì…ë ¥í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ë ‡ê²Œ ì„¤ì •ê³¼ ê´€ë ¨ëœ ì†ì„±ë“¤ì€ í•œê³³ì— ìˆëŠ” ê²ƒì´ í–¥í›„ ë³€ê²½ì— ë” ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆë‹¤.   ì‚¬ìš©: ì„¤ì •ì€ ì‹ ê²½ì“°ì§€ ì•Šê³  DataSourceì˜ getConnection()ë§Œ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.   DataSource ì ìš©   DataSourceë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•œë‹¤.(ì˜ì¡´ê´€ê³„ ì£¼ì…, DI+OCP) DataSourceëŠ” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— DriverManagerDataSourceì—ì„œ HikariDataSourceë¡œ ë³€ê²½ë˜ì–´ë„ í•´ë‹¹ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 /**  * JDBC - DataSource ì‚¬ìš©. JdbcUtils ì‚¬ìš©  */ @Slf4j public class MemberRepositoryV1 {      private final DataSource dataSource;      public MemberRepositoryV1(DataSource dataSource) {         this.dataSource = dataSource;     }      //save()...     //findById()...     //update()....     //delete()....      private void close(Connection con, Statement stmt, ResultSet rs) {         JdbcUtils.closeResultSet(rs);         JdbcUtils.closeStatement(stmt);         JdbcUtils.closeConnection(con);     }      private Connection getConnection() throws SQLException {         Connection con = dataSource.getConnection();         log.info(\"get connection={}, class={}\", con, con.getClass());         return con;     } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @Slf4j class MemberRepositoryV1Test {      MemberRepositoryV1 repository;      @BeforeEach     void beforeEach() {         // ê¸°ë³¸ DriverManager - í•­ìƒ ìƒˆë¡œìš´ ì»¤ë„¥ì…˜ì„ íšë“         // DriverManagerDataSource dataSource = new DriverManagerDataSource(URL, USERNAME, PASSWORD);          // ì»¤ë„¥ì…˜ í’€ë§         HikariDataSource dataSource = new HikariDataSource();         dataSource.setJdbcUrl(URL);         dataSource.setUsername(USERNAME);         dataSource.setPassword(PASSWORD);          repository = new MemberRepositoryV1(dataSource);     }      ... }   DriverManagerDataSource ì‚¬ìš©   DriverManagerDataSourceë¥¼ ì‚¬ìš©í•˜ë©´ conn0~5 ë²ˆí˜¸ë¥¼ í†µí•´ì„œ í•­ìƒ ìƒˆë¡œìš´ ì»¤ë„¥ì…˜ì´ ìƒì„±ë˜ì–´ì„œ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.      1 2 3 4 5 6 get connection=conn0: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection get connection=conn1: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection get connection=conn2: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection get connection=conn3: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection get connection=conn4: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection get connection=conn5: url=jdbc:h2:.. user=SA class=class org.h2.jdbc.JdbcConnection   HikariDataSource ì‚¬ìš©   ë°˜ë©´ì—, ì»¤ë„¥ì…˜ í’€ ì‚¬ìš© ì‹œ conn0 ì»¤ë„¥ì…˜ì´ ì¬ì‚¬ìš©ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.         ì°¸ê³  HikariDataSource   HikariDataSourceëŠ” HikariCPë¡œë¶€í„° ì»¤ë„¥ì…˜ì„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” DataSourceì˜ êµ¬í˜„ì²´ì´ë‹¤.    HikariDataSourceë¥¼ ë§Œë“  ë’¤ getConnection()ì„ í•˜ê²Œ ë˜ë©´ HikariDataSource ë‚´ì— HikariPoolì´ë¼ëŠ” í´ë˜ìŠ¤ë¡œë¶€í„° ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.     ì°¸ê³  ë§í¬   HikariCP ì»¤ë„¥ì…˜ í’€ ìµœì  ê°¯ìˆ˜ êµ¬í•˜ê¸°  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-DataSource/",
        "teaser": ""
      },{
        "title": "DB ë½(Lock)",
        "excerpt":"DB ë½ (Lock)   ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì—¬ëŸ¬ ì‚¬ìš©ìë“¤ì´ ê°™ì€ ë°ì´í„°ë¥¼ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ìƒí™©ì—ì„œ ë°ì´í„°ì˜ ë¬´ê²°ì„±ê³¼ ì¼ê´€ì„±ì„ ì§€í‚¤ê¸° ìœ„í•´ ë½ì„ ì‚¬ìš©í•œë‹¤.   ì˜ˆë¥¼ ë“¤ì–´, ì„¸ì…˜ 1ì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ëŠ” ë™ì•ˆ ì•„ì§ ì»¤ë°‹ì„ ìˆ˜í–‰í•˜ì§€ ì•Šì•˜ëŠ”ë°, ì„¸ì…˜ 2ì—ì„œ ë™ì‹œì— ê°™ì€ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê²Œ ë˜ë©´ íŠ¸ëœì­ì…˜ì˜ ì›ìì„±ì´ ê¹¨ì§„ë‹¤. ë˜í•œ, ì„¸ì…˜ 1ì´ ì¤‘ê°„ì— ë¡¤ë°±í•˜ê²Œ ë˜ë©´ ì„¸ì…˜ 2ëŠ” ì˜ëª»ëœ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë½(Lock)ì´ë¼ëŠ” ê°œë…ì„ ì œê³µí•œë‹¤.   ì„¸ì…˜ 1ê³¼ ì„¸ì…˜ 2ê°€ ê°™ì€ ë°ì´í„° ë³€ê²½ì„ ì‹œë„í•œë‹¤ê³  ê°€ì •í•´ë³´ì.      ì„¸ì…˜ 1ì´ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ë°ì´í„° ë³€ê²½ì„ ì‹œë„í•˜ë©´ ì´ë•Œ ë¡œìš°ì˜ ë½ì„ íšë“í•´ì•¼ í•œë‹¤. ë¹„ìŠ·í•œ ì‹œì ì— ì„¸ì…˜ 2ê°€ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ì„¸ì…˜ 1ê³¼ ê°™ì€ ë°ì´í„°ë¥¼ ë³€ê²½ ì‹œë„ í•œë‹¤. ì´ë•Œ í•´ë‹¹ ë¡œìš°ì˜ ë½ì„ ë¨¼ì € íšë“í•´ì•¼ í•˜ëŠ”ë° ë½ì´ ì—†ìœ¼ë¯€ë¡œ(ì„¸ì…˜ 1ì´ ë½ì„ ê°€ì§€ê³  ìˆìŒ) ë½ì´ ëŒì•„ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ë©° ë½ ëŒ€ê¸° ì‹œê°„ì´ ë„˜ì–´ê°€ë©´ ë½ íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì„¸ì…˜ 1ì´ ì»¤ë°‹ì„ ìˆ˜í–‰í•œë‹¤. ì»¤ë°‹ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ ë½ë„ ë°˜í™˜í•œë‹¤. ë½ì„ íšë“í•˜ê¸° ìœ„í•´ ëŒ€ê¸°í•˜ë˜ ì„¸ì…˜ 2ê°€ ë½ì„ íšë“í•˜ê³  ë°ì´í„° ë³€ê²½ì„ ì‹œë„í•œë‹¤.   DB ë½ ì¢…ë¥˜   DB ë½ì˜ ì¢…ë¥˜ì—ëŠ” ê³µìœ  ë½, Shared Lock (Read Lock)ê³¼ ë² íƒ€ ë½, Exclusive Lock (Write Lock)ì´ ìˆë‹¤.   ê³µìœ  ë½   ê³µìœ  ë½ì€ ë°ì´í„°ë¥¼ ì½ì„ ë•Œ ì‚¬ìš©ë˜ëŠ” ë½ì´ë‹¤. Read Lockì´ë¼ê³ ë„ ë¶ˆë¦°ë‹¤. ê³µìœ  Lockì€ ê³µìœ  Lock ë¼ë¦¬ëŠ” ë™ì‹œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, í•˜ë‚˜ì˜ ë°ì´í„°ë¥¼ ì½ëŠ” ê²ƒì€ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ê³µìœ  ë½ì´ ì„¤ì •ëœ ë°ì´í„°ì— ë² íƒ€ ë½ì€ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.   ë² íƒ€ ë½   ë² íƒ€ ë½ì€ ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•Œ ì‚¬ìš©ë˜ë©° íŠ¸ëœì­ì…˜ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ìœ ì§€ëœë‹¤. ë² íƒ€ë½ì€ ë½ì´ í•´ì œë  ë•Œê¹Œì§€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜(ì½ê¸° í¬í•¨)ì€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.   ë½ì˜ ì„¤ì • ë²”ìœ„      ë°ì´í„°ë² ì´ìŠ¤: ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë½ì„ í•œë‹¤. ì¦‰, 1ê°œì˜ ì„¸ì…˜ë§Œì´ DBì˜ ë°ì´í„°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ ê¸°ëŠ¥ì€ ë³´í†µ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì‚¬ìš©í•  ë• ì£¼ìš”í•œ DBì˜ ì—…ë°ì´íŠ¸ì— ì‚¬ìš©í•œë‹¤.   íŒŒì¼: DB íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë½ì„ ì„¤ì •í•œë‹¤. íŒŒì¼ì´ë€ í…Œì´ë¸”, row ë“±ê³¼ ê°™ì€ ì‹¤ì œ ë°ì´í„°ê°€ ì“°ì—¬ì§€ëŠ” ë¬¼ë¦¬ì ì¸ ì €ì¥ì†Œì´ë‹¤.   í…Œì´ë¸”: í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ë½ì„ ì„¤ì •í•œë‹¤. í…Œì´ë¸”ì˜ ëª¨ë“  í–‰ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë“±ì˜ ì „ì²´ í…Œì´ë¸”ì— ì˜í–¥ì„ ì£¼ëŠ” ë³€ê²½ì„ ìˆ˜í–‰ í•  ë•Œ ìœ ìš©í•˜ë‹¤. ì¦‰, DDL(create, alter, drop ë“±)êµ¬ë¬¸ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©° DDL Lockì´ë¼ê³ ë„ í•œë‹¤.   í˜ì´ì§€ì™€ ë¸”ëŸ­: íŒŒì¼ì˜ ì¼ë¶€ì¸ í˜ì´ì§€ì™€ ë¸”ë¡ì„ ê¸°ì¤€ìœ¼ë¡œ Lockì„ ì„¤ì •í•œë‹¤. ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.   ì»¬ëŸ¼: ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ Lockì„ ì„¤ì •í•œë‹¤. ì´ í˜•ì‹ì€ ë½ ì„¤ì • ë° í•´ì œì˜ ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ ë“¤ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.   í–‰: í–‰ ìˆ˜ì¤€ì˜ Lockì€ 1ê°œì˜ í–‰ì„ ê¸°ì¤€ìœ¼ë¡œ ë½ì„ ì„¤ì •í•œë‹¤. DML(select, insert, update, delete)ì— ëŒ€í•œ ë½ìœ¼ë¡œ ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë½ì´ë‹¤.   ë¸”ë¡œí‚¹(Blocking)   ë¸”ë¡œí‚¹ì€ Lockê°„(ë² íƒ€-ë² íƒ€, ë² íƒ€-ê³µìœ )ì˜ ê²½í•©ì´ ë°œìƒí•˜ì—¬ íŠ¹ì • íŠ¸ëœì­ì…˜ì´ ì‘ì—…ì„ ì§„í–‰í•˜ì§€ ëª»í•˜ê³  ë©ˆì¶°ì„  ìƒíƒœë¥¼ ë§í•œë‹¤. ê³µìœ ë½ë¼ë¦¬ëŠ” ë¸”ë¡œí‚¹ì´ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ ë² íƒ€ë½ì€ ë¸”ë¡œí‚¹ì´ ë°œìƒí•œë‹¤. ë¸”ë¡œí‚¹ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œëŠ” ì´ì „ì˜ íŠ¸ëœì­ì…˜ì´ ì™„ë£Œ(commit or rollback)ë˜ì–´ì•¼ í•œë‹¤. ë’¤ì— ë“¤ì–´ì˜¨ íŠ¸ëœì­ì…˜ì€ ì´ì „ íŠ¸ëœì­ì…˜ì´ ë§ˆë¬´ë¦¬ë˜ì–´ì•¼ ì´í›„ ì§„í–‰ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŸ° ê²½í•©ì€ ì„±ëŠ¥ì— ì¢‹ì§€ ì•Šì€ ì˜í–¥ì„ ì£¼ë¯€ë¡œ ê²½í•©ì„ ìµœì†Œí™” í•´ì•¼ í•œë‹¤.   ë¸”ë¡œí‚¹ í•´ê²° ë°©ì•ˆ      í•œ íŠ¸ëœì­ì…˜ì˜ ê¸¸ì´ë¥¼ ì§§ê²Œí•˜ì—¬ ê²½í•©ì˜ í™•ë¥ ì„ ì¤„ì¸ë‹¤.   ì²˜ìŒë¶€í„° ì„¤ê³„í•  ë•Œ ê°™ì€ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ìˆ˜í–‰ë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤.   íŠ¸ëœì­ì…˜ ê²©ë¦¬ì„± ìˆ˜ì¤€ì„ ë¶ˆí•„ìš”í•˜ê²Œ ìƒí–¥ ì¡°ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.   ì¿¼ë¦¬ë¥¼ ì˜¤ëœì‹œê°„ ì¡ì•„ë‘ì§€ ì•Šë„ë¡ ì ì ˆí•œ íŠœë‹ì„ ì§„í–‰í•œë‹¤.   êµì°©ìƒíƒœ(DeadLock)   êµì°©ìƒíƒœëŠ” ë‘ íŠ¸ëœì­ì…˜ì´ ê°ê° Lock ì„¤ì •ëœ ìƒíƒœì—ì„œ ì„œë¡œì˜ ë½ì— ì ‘ê·¼í•˜ì—¬ ê°’ì„ ì–»ì–´ì˜¤ë ¤ê³  í•  ë•Œ ì´ë¯¸ ê°ê°ì˜ íŠ¸ëœì­ì…˜ì— ì˜í•´ ë½ì´ ì„¤ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì–‘ìª½ íŠ¸ëœì­ì…˜ ëª¨ë‘ ì˜ì›íˆ ì²˜ë¦¬ê°€ ë˜ì§€ ì•Šê²Œ ë˜ëŠ” ìƒíƒœë¥¼ ë§í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ íŠ¸ëœì­ì…˜ AëŠ” master í…Œì´ë¸”ì˜ 5ë²ˆ ë¡œìš°ë¥¼ ìˆ˜ì •í•˜ê³  detail í…Œì´ë¸”ì˜ 5ë²ˆ ë¡œìš°ë¥¼ ìˆ˜ì •í•œë‹¤. íŠ¸ëœì­ì…˜ BëŠ” detail í…Œì´ë¸”ì˜ 5ë²ˆ ë¡œìš°ë¥¼ ìˆ˜ì •í•˜ê³  master í…Œì´ë¸”ì˜ 5ë²ˆ ë¡œìš°ë¥¼ ìˆ˜ì •í•œë‹¤. íŠ¸ëœì­ì…˜ A,B ëª¨ë‘ ë½ì´ ì„¤ì •ë˜ì–´ êµì°©ìƒíƒœ(ë°ë“œë½)ê°€ ëœë‹¤.   êµì°©ìƒíƒœê°€ ë°œìƒí•˜ë©´ DBMSê°€ ë‘˜ ì¤‘ í•œ íŠ¸ëœì­ì…˜ì— ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤. êµì°©ìƒíƒœê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ì„œëŠ” ì ‘ê·¼ ìˆœì„œë¥¼ ë™ì¼í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ masterë¥¼ ì—…ë°ì´íŠ¸ í•œ í›„ detailì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì ‘ê·¼ ìˆœì„œë¥¼ ë™ì¼í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.   DB ë½, ì¡°íšŒ   ì¼ë°˜ì ì¸ ì¡°íšŒëŠ” ë½ì„ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ì¡°íšŒ ì‹œì ì— ë½ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆë‹¤. íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œì ê¹Œì§€ í•´ë‹¹ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ë³€ê²½í•˜ì§€ ëª»í•˜ë„ë¡ ê°•ì œë¡œ ë§‰ì•„ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.   ì´ëŸ´ ë•ŒëŠ” select for update êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì¡°íšŒ ì‹œì ì— ë½ì„ ê°€ì ¸ê°€ë²„ë¦¬ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ì„¸ì…˜ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. ë¬¼ë¡  ì´ ê²½ìš°ë„ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•˜ë©´ ë½ì„ ë°˜ë‚©í•œë‹¤.      ì°¸ê³  select for update ì˜ˆì‹œ   SELECT * FROM book WHERE id=1 FOR UPDATE;    ","categories": ["DB"],
        "tags": ["DB"],
        "url": "/db/DB-Lock/",
        "teaser": ""
      },{
        "title": "íŠ¸ëœì­ì…˜",
        "excerpt":"íŠ¸ëœì­ì…˜ì´ë€   íŠ¸ëœì­ì…˜ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€ê²½ì‹œí‚¤ê¸° ìœ„í•´ ìˆ˜í–‰í•˜ëŠ” ì‘ì—… ë‹¨ìœ„ì´ë‹¤. ëª¨ë“  ì‘ì—…ì´ ì„±ê³µí•´ì„œ DBì— ì •ìƒ ë°˜ì˜í•˜ëŠ” ê²ƒì„ ì»¤ë°‹(commit)ì´ë¼ í•˜ê³ , ì‘ì—… ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•´ì„œ ê±°ë˜ ì´ì „ìœ¼ë¡œ ë˜ëŒë¦¬ëŠ” ê²ƒì„ ë¡¤ë°±(rollback)ì´ë¼ í•œë‹¤.   íŠ¸ëœì­ì…˜ íŠ¹ì§•, ACID      ì›ìì„±(Atomicity): íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì‹¤í–‰í•œ ì‘ì—…ë“¤ì€ ë§ˆì¹˜ í•˜ë‚˜ì˜ ì‘ì—…ì¸ ê²ƒì²˜ëŸ¼ ëª¨ë‘ ì„±ê³µí•˜ê±°ë‚˜ ëª¨ë‘ ì‹¤íŒ¨í•´ì•¼ í•œë‹¤. (All or Nothing)   ì¼ê´€ì„±(Consistency): ëª¨ë“  íŠ¸ëœì­ì…˜ì€ ì¼ê´€ì„± ìˆëŠ” DB ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ DBì—ì„œ ì •í•œ ë¬´ê²°ì„± ì œì•½ ì¡°ê±´ì„ í•­ìƒ ë§Œì¡±í•´ì•¼ í•œë‹¤.   ë…ë¦½ì„±, ê²©ë¦¬ì„±(Isolation): ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” íŠ¸ëœì­ì…˜ë“¤ì´ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ ê²©ë¦¬í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë™ì‹œì— ê°™ì€ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ì§€ ëª»í•˜ë„ë¡ í•´ì•¼ í•œë‹¤. ê²©ë¦¬ì„±ì€ ë™ì‹œì„±ê³¼ ê´€ë ¨ëœ ì„±ëŠ¥ ì´ìŠˆë¡œ ì¸í•´ íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€(Isolation level)ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.   ì˜ì†ì„±, ì§€ì†ì„±(Durability): íŠ¸ëœì­ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ëë‚´ë©´ ê·¸ ê²°ê³¼ê°€ í•­ìƒ ê¸°ë¡ë˜ì–´ì•¼ í•œë‹¤. ì¤‘ê°„ì— ì‹œìŠ¤í…œì— ë¬¸ì œê°€ ë°œìƒí•´ë„ DB ë¡œê·¸ ë“±ì„ ì‚¬ìš©í•´ì„œ ì„±ê³µí•œ íŠ¸ëœì­ì…˜ ë‚´ìš©ì„ ë³µêµ¬í•´ì•¼ í•œë‹¤.      ì°¸ê³  ë¬´ê²°ì„±(Integrity)   ë¬´ê²°ì„±ì´ë€ ë°ì´í„°ì˜ ì •í™•ì„±, ì¼ê´€ì„±ì„ ì˜ë¯¸í•œë‹¤.   ë°ì´í„°ì— ê²°í•¨ì´ ì—†ëŠ” ìƒíƒœ. ì¦‰, ë°ì´í„°ë¥¼ ì •í™•í•˜ê³  ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.        ì°¸ê³  ë¬´ê²°ì„± ì œì•½ ì¡°ê±´(Integrity Constraint)   ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì´ë€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì •í™•ì„±, ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì €ì¥, ì‚­ì œ, ìˆ˜ì • ë“±ì„ ì œì•½í•˜ê¸° ìœ„í•œ ì¡°ê±´ì„ ëœ»í•œë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì£¼ ëª©ì ì´ë‹¤.     íŠ¸ëœì­ì…˜ì€ ì›ìì„±, ì¼ê´€ì„±, ì§€ì†ì„±ì„ ë³´ì¥í•œë‹¤. ë¬¸ì œëŠ” ê²©ë¦¬ì„±ì¸ë° íŠ¸ëœì­ì…˜ ê°„ì— ê²©ë¦¬ì„±ì„ ì™„ë²½íˆ ë³´ì¥í•˜ë ¤ë©´ íŠ¸ëœì­ì…˜ì„ ê±°ì˜ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ë° ì´ë ‡ê²Œ í•˜ë©´ ë™ì‹œ ì²˜ë¦¬ ì„±ëŠ¥ì´ ë§¤ìš° ë‚˜ë¹ ì§„ë‹¤. ì´ëŸ° ë¬¸ì œë¡œ ì¸í•´ ANSI í‘œì¤€ì€ íŠ¸ëœì­ì…˜ì˜ ê²©ë¦¬ ìˆ˜ì¤€ì„ 4ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì •ì˜í–ˆë‹¤.   íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ - Isolation level      READ UNCOMMITED(ì»¤ë°‹ë˜ì§€ ì•Šì€ ì½ê¸°)   READ COMMITTED(ì»¤ë°‹ëœ ì½ê¸°) - ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©   REPEATABLE READ(ë°˜ë³µ ê°€ëŠ¥í•œ ì½ê¸°)   SERIALIZABLE(ì§ë ¬í™” ê°€ëŠ¥)   ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° êµ¬ì¡°ì™€ DB ì„¸ì…˜   íŠ¸ëœì­ì…˜ì„ ì´í•´í•˜ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ ì—°ê²° êµ¬ì¡°ì™€ DB ì„¸ì…˜ì— ëŒ€í•´ ì•Œì•„ë³´ì.   ì‚¬ìš©ìëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„(WAS)ë‚˜ DB ì ‘ê·¼ íˆ´ ê°™ì€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ DB ì„œë²„ì— ì—°ê²°ì„ ìš”ì²­í•˜ê³  ì»¤ë„¥ì…˜ì„ ë§ºê²Œ ë˜ë©´ DB ì„œë²„ëŠ” ë‚´ë¶€ì— ì„¸ì…˜ì´ë¼ëŠ” ê²ƒì„ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ì•ìœ¼ë¡œ í•´ë‹¹ ì»¤ë„¥ì…˜ì„ í†µí•œ ëª¨ë“  ìš”ì²­ì€ ì´ ì„¸ì…˜ì„ í†µí•´ì„œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤. ì¦‰, ê°œë°œìê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ SQLì„ ì „ë‹¬í•˜ë©´ í˜„ì¬ ì»¤ë„¥ì…˜ì— ì—°ê²°ëœ ì„¸ì…˜ì´ SQLì„ ì‹¤í–‰í•œë‹¤.      ì„¸ì…˜ì€ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ì»¤ë°‹, ë¡¤ë°±ì„ í†µí•´ íŠ¸ëœì­ì…˜ì„ ì¢…ë£Œí•œë‹¤. ê·¸ë¦¬ê³  ì´í›„ì— ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìê°€ ì»¤ë„¥ì…˜ì„ ë‹«ìœ¼ë©´ ì„¸ì…˜ì€ ì¢…ë£Œëœë‹¤. ì»¤ë„¥ì…˜ í’€ì´ 10ê°œì˜ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ë©´ ì„¸ì…˜ë„ 10ê°œê°€ ìƒì„±ëœë‹¤.   íŠ¸ëœì­ì…˜ ì´í•´   ë°ì´í„° ë³€ê²½ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ê·¸ ê²°ê³¼ë¥¼ ë°˜ì˜í•˜ë ¤ë©´ ì»¤ë°‹ ëª…ë ¹ì–´ì¸ commitì„ í˜¸ì¶œí•˜ê³ , ê²°ê³¼ë¥¼ ë°˜ì˜í•˜ê³  ì‹¶ì§€ ì•Šìœ¼ë©´ ë¡¤ë°± ëª…ë ¹ì–´ì¸ rollbackì„ í˜¸ì¶œí•˜ë©´ ëœë‹¤.   ì»¤ë°‹ì„ í˜¸ì¶œí•˜ê¸° ì „ê¹Œì§€ëŠ” ì„ì‹œë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œ ì„¸ì…˜(ì‚¬ìš©ì)ì—ê²Œë§Œ ë³€ê²½ ë°ì´í„°ê°€ ë³´ì´ê³  ë‹¤ë¥¸ ì„¸ì…˜(ì‚¬ìš©ì)ì—ê²ŒëŠ” ë³€ê²½ ë°ì´í„°ê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.   ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ëª¨ë‘ ê°™ì€ ì›ë¦¬ë¡œ ë™ì‘í•˜ë©° ì•ìœ¼ë¡œëŠ” ë“±ë¡, ìˆ˜ì •, ì‚­ì œë¥¼ ê°„ë‹¨íˆ ë³€ê²½ì´ë¼ëŠ” ë‹¨ì–´ë¡œ í‘œí˜„í•˜ê² ë‹¤.   íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìë™ ì»¤ë°‹ê³¼ ìˆ˜ë™ ì»¤ë°‹ì„ ì´í•´í•´ì•¼ í•œë‹¤.   íŠ¸ëœì­ì…˜ ìë™/ìˆ˜ë™ ì»¤ë°‹   ìë™ ì»¤ë°‹   ìë™ ì»¤ë°‹ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ê°ê°ì˜ ì¿¼ë¦¬ ì‹¤í–‰ ì§í›„ì— ìë™ìœ¼ë¡œ ì»¤ë°‹ì„ í˜¸ì¶œí•œë‹¤. ì»¤ë°‹ì´ë‚˜ ë¡¤ë°±ì„ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” í¸ë¦¬í•¨ì´ ìˆì§€ë§Œ ì¿¼ë¦¬ë¥¼ í•˜ë‚˜ ì‹¤í–‰í•  ë•Œ ë§ˆë‹¤ ìë™ìœ¼ë¡œ ì»¤ë°‹ì´ ë˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ì„ ì œëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ, ì»¤ë°‹ê³¼ ë¡¤ë°±ì„ í˜¸ì¶œí•˜ë©´ì„œ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ë ¤ë©´ ìë™ ì»¤ë°‹ì„ ë„ê³  ìˆ˜ë™ ì»¤ë°‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   ìˆ˜ë™ ì»¤ë°‹   ë³´í†µ ìë™ ì»¤ë°‹ ëª¨ë“œê°€ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœ ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì—, ìˆ˜ë™ ì»¤ë°‹ ëª¨ë“œë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œë‹¤ê³  í‘œí˜„í•  ìˆ˜ ìˆë‹¤. ìˆ˜ë™ ì»¤ë°‹ ì„¤ì •ì„ í•˜ë©´ ì´í›„ì— ê¼­ commit, rollbackì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤.   1 2 3 4 5 6 // ìë™ ì»¤ë°‹ ëª¨ë“œ ì„¤ì • set autocommit true;  // ìˆ˜ë™ ì»¤ë°‹ ëª¨ë“œ ì„¤ì • set autocommit false; commit;  ","categories": ["DB"],
        "tags": ["DB"],
        "url": "/db/DB-Transaction/",
        "teaser": ""
      },{
        "title": "íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €(ì¶”ìƒí™”, ë™ê¸°í™”)",
        "excerpt":"íŠ¸ëœì­ì…˜ ì¶”ìƒí™”   íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ (JDBC, JPA ë“±)ë§ˆë‹¤ ë‹¤ë¥´ë‹¤. ë”°ë¼ì„œ ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ ì´ ë³€ê²½ë˜ë©´ ì„œë¹„ìŠ¤ ì½”ë“œë„ ë³€ê²½í•´ì•¼ í•˜ë¯€ë¡œ OCP ì›ì¹™ì„ ìœ„ë°˜í•˜ê³  ìœ ì§€ë³´ìˆ˜ ì¸¡ë©´ì—ì„œë„ ì¢‹ì§€ ì•Šë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•œë‹¤.   íŠ¸ëœì­ì…˜ ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤   íŠ¸ëœì­ì…˜ì€ ë‹¨ìˆœí•˜ë‹¤. íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ìˆ˜í–‰ì´ ëë‚˜ë©´ ì»¤ë°‹, ë¡¤ë°±í•˜ë©´ ëœë‹¤.   1 2 3 4 5 public interface TxManager {     begin();     commit();     rollback(); }   íŠ¸ëœì­ì…˜ì„ ì¶”ìƒí™”í•˜ë©´ ì„œë¹„ìŠ¤ëŠ” íŠ¹ì • íŠ¸ëœì­ì…˜ ê¸°ìˆ ì— ì§ì ‘ ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê²Œ ëœë‹¤.(DI) ë”°ë¼ì„œ, OCP ì›ì¹™ì„ ì§€í‚¤ê²Œ ëœë‹¤. íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ ì½”ë“œë¥¼ ì „í˜€ ë³€ê²½í•˜ì§€ ì•Šê³  íŠ¸ëœì­ì…˜ ê¸°ìˆ ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.      ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ ì¶”ìƒí™”   ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ ì¶”ìƒí™” ê¸°ìˆ ì„ íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì € ê°ì²´ë¥¼ í†µí•´ ì œê³µí•œë‹¤. ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ ì¶”ìƒí™”ì˜ í•µì‹¬ì€ PlatformTransactionManager ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.   PlatformTransactionManager ì¸í„°í˜ì´ìŠ¤   1 2 3 4 5 6 7 8 9 10 package org.springframework.transaction;  public interface PlatformTransactionManager extends TransactionManager {     // íŠ¸ëœì­ì…˜ ì‹œì‘     TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException;     // íŠ¸ëœì­ì…˜ ì»¤ë°‹     void commit(TransactionStatus status) throws TransactionException;     // íŠ¸ëœì­ì…˜ ë¡¤ë°±     void rollback(TransactionStatus status) throws TransactionException; }   íŠ¸ëœì­ì…˜ ë™ê¸°í™”   íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €ì˜ ì—­í• ì€ í¬ê²Œ 2ê°€ì§€ ì´ë‹¤.      íŠ¸ëœì­ì…˜ ì¶”ìƒí™” (ìœ„ì—ì„œ ì–¸ê¸‰)   ë¦¬ì†ŒìŠ¤ ë™ê¸°í™”   ë¦¬ì†ŒìŠ¤ ë™ê¸°í™”   íŠ¸ëœì­ì…˜ì„ ìœ ì§€í•˜ë ¤ë©´ íŠ¸ëœì­ì…˜ì˜ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì„ ìœ ì§€í•´ì•¼ í•œë‹¤.   ê°™ì€ ì»¤ë„¥ì…˜ì„ ë™ê¸°í™”(ë§ì¶”ì–´ ì‚¬ìš©)í•˜ê¸° ìœ„í•´ ì´ì „ì—ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì»¤ë„¥ì…˜ì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆìœ¼ë‚˜ ì´ ë°©ë²•ì€ ì½”ë“œê°€ ì§€ì €ë¶„í•˜ê³  ì»¤ë„¥ì…˜ì„ ë„˜ê¸°ëŠ” ë©”ì„œë“œì™€ ë„˜ê¸°ì§€ ì•ŠëŠ” ë©”ì„œë“œë¥¼ ì¤‘ë³µí•´ì„œ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ë“± ì—¬ëŸ¬ê°€ì§€ ë‹¨ì ë“¤ì´ ë§ë‹¤.   ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ë¥¼ ì œê³µí•œë‹¤. íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ëŠ” ì“°ë ˆë“œ ë¡œì»¬(ThreadLocal)ì„ ì‚¬ìš©í•´ì„œ ì»¤ë„¥ì…˜ì„ ë™ê¸°í™” í•´ì¤€ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë©€í‹° ì“°ë ˆë“œ ìƒí™©ì—ì„œë„ ì•ˆì „í•˜ê²Œ ì»¤ë„¥ì…˜ì„ ë™ê¸°í™” í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì»¤ë„¥ì…˜ì´ í•„ìš”í•˜ë©´ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì»¤ë„¥ì…˜ì„ íšë“í•˜ë©´ ëœë‹¤.      ì°¸ê³  ì“°ë ˆë“œ ë¡œì»¬   ì—¬ëŸ¬ê°œì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•  ë•Œ, í•´ë‹¹ ì“°ë ˆë“œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ ì €ì¥ì†Œë¥¼ ì˜ë¯¸í•œë‹¤. ThreadLocal í´ë˜ìŠ¤ëŠ” ì˜¤ì§ í•œ ì“°ë ˆë“œì— ì˜í•´ ì½ê³ /ì“°ì—¬ì§ˆ ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.     íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì € ë™ì‘ íë¦„      í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ìœ¼ë¡œ ì„œë¹„ìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•œë‹¤.      ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ transactionManager.getTransaction()ì„ í˜¸ì¶œí•´ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œë‹¤.   íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´ ë¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì´ í•„ìš”í•˜ë‹¤. íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €ëŠ” ë‚´ë¶€ì—ì„œ ë°ì´í„°ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•œë‹¤.   ì»¤ë„¥ì…˜ì„ ìˆ˜ë™ ì»¤ë°‹ ëª¨ë“œë¡œ ë³€ê²½í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œë‹¤.   ì»¤ë„¥ì…˜ì„ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ì— ë³´ê´€í•œë‹¤.   íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ëŠ” ì“°ë ˆë“œ ë¡œì»¬ì— ì»¤ë„¥ì…˜ì„ ë³´ê´€í•œë‹¤. ì´ì œ ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì— ì•ˆì „í•˜ê²Œ ì»¤ë„¥ì…˜ì„ ë³´ê´€í•  ìˆ˜ ìˆë‹¤.   ì„œë¹„ìŠ¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•˜ë©´ì„œ ë¦¬í¬ì§€í† ë¦¬ì˜ ë©”ì„œë“œë“¤ì„ í˜¸ì¶œí•œë‹¤. ì´ë•Œ ì»¤ë„¥ì…˜ì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤.   ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œë“¤ì€ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ëœ ì»¤ë„¥ì…˜ì´ í•„ìš”í•˜ë‹¤. ë¦¬í¬ì§€í† ë¦¬ëŠ” DataSourceUtils.getConnection()ì„ ì‚¬ìš©í•´ì„œ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ì— ë³´ê´€ëœ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•œë‹¤. ì´ ê³¼ì •ì„ í†µí•´ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ê°™ì€ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•˜ê³ , íŠ¸ëœì­ì…˜ë„ ìœ ì§€ëœë‹¤.   íšë“í•œ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•´ì„œ SQLì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë‹¬í•´ì„œ ì‹¤í–‰í•œë‹¤.   íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €ë¥¼ ì ìš©í•œ ì½”ë“œ   1 2 3 4 5 6 7 8 /**  * MemberRepositoryV3  */ // ì»¤ë„¥ì…˜ì„ ì–»ì„ ë•Œ DataSourceUtils.getConnection(dataSource);  // ì»¤ë„¥ì…˜ì„ ë‹«ì„ ë•Œ, ìœ ì§€í•  ë•Œ DataSourceUtils.releaseConnection(con, dataSource);   íŠ¸ëœì­ì…˜ ë™ê¸°í™”ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ DataSourceUtilsë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   DataSourceUtils.getConnection()ì€ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ê°€ ê´€ë¦¬í•˜ëŠ” ì»¤ë„¥ì…˜ì´ ìˆìœ¼ë©´ í•´ë‹¹ ì»¤ë„¥ì…˜ì„ ë°˜í™˜í•˜ê³  ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì»¤ë„¥ì…˜ì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.   ì»¤ë„¥ì…˜ì„ con.close()ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ë‹«ì•„ë²„ë¦¬ë©´ ì»¤ë„¥ì…˜ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ, DataSourceUtils.releaseConnection()ë¥¼ ì‚¬ìš©í•œë‹¤. DataSourceUtils.releaseConnection()ì„ ì‚¬ìš©í•˜ë©´ íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë™ê¸°í™”ëœ ì»¤ë„¥ì…˜ì€ ì»¤ë„¥ì…˜ì„ ë‹«ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©° íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë§¤ë‹ˆì €ê°€ ê´€ë¦¬í•˜ëŠ” ì»¤ë„¥ì…˜ì´ ì—†ëŠ” ê²½ìš° í•´ë‹¹ ì»¤ë„¥ì…˜ì„ ë‹«ëŠ”ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 @Slf4j @RequiredArgsConstructor public class MemberServiceV3_1 {      private final PlatformTransactionManager transactionManager;     private final MemberRepositoryV3 memberRepository;      public void accountTransfer(String fromId, String toId, int money) {         // íŠ¸ëœì­ì…˜ ì‹œì‘, íŠ¸ëœì­ì…˜ ìƒíƒœê°’ì„ ë°˜í™˜         TransactionStatus status = transactionManager.getTransaction(new DefaultTransactionDefinition());          try {             // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§             bizLogic(fromId, toId, money);             transactionManager.commit(status); // ì„±ê³µ ì‹œ commit         } catch (Exception e) {             transactionManager.rollback(status); //ì‹¤íŒ¨ ì‹œ rollback             throw new IllegalStateException(e);         }         // transactionManagerê°€ commit, rollback í•  ë•Œ close í•´ì£¼ë¯€ë¡œ ë”°ë¡œ close í•´ì¤„ í•„ìš” ì—†ë‹¤.     }      ... }   PlatformTransactionManager íŠ¸ëœì­ì…˜ ë§¤ë‹ˆì €ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤. PlatformTransactionManagerì€ ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— JDBC ê¸°ìˆ ì—ì„œ JPAë¡œ ë³€ê²½í•´ë„ ë¬¸ì œê°€ ì—†ë‹¤. new DefaultTransactionDefinition()ì€ íŠ¸ëœì­ì…˜ê³¼ ê´€ë ¨ëœ ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 @BeforeEach void before() {     DriverManagerDataSource dataSource = new DriverManagerDataSource(URL, USERNAME, PASSWORD);     // PlatformTransactionManagerì˜ êµ¬í˜„ì²´     DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(dataSource);     postRepository = new PostRepositoryV3(dataSource);     // PlatformTransactionManagerì— transactionManager ì£¼ì…     postService = new PostServiceV3_1(transactionManager, postRepository); }  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-TransactionManager/",
        "teaser": ""
      },{
        "title": "ìŠ¤í”„ë§ AOP",
        "excerpt":"AOPë€?   AOP(Aspect Oriented Programming)ëŠ” ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ë¼ê³  í•˜ë©° ìë°”ì™€ ê°™ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(OOP)ì„ ë”ìš± OOP ë‹µê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.   AOPëŠ” ì—¬ëŸ¬ ê°œì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì™¸ì— ê³µí†µìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” ë¡œê·¸ ì¶œë ¥, ë³´ì•ˆ ì²˜ë¦¬, ì˜ˆì™¸ ì²˜ë¦¬ ê°™ì€ ì½”ë“œë¥¼ ë³„ë„ë¡œ ë¶„ë¦¬í•´ì„œ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ë¬¶ëŠ” ëª¨ë“ˆí™”ì˜ ê°œë…ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.   AOPì—ì„œ ê´€ì ì€ í•µì‹¬ì ì¸ ê´€ì ê³¼ ë¶€ê°€ì ì¸ ê´€ì ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.   í•µì‹¬ì ì¸ ê´€ì ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì˜ë¯¸í•˜ê³ , ë¶€ê°€ì ì¸ ê´€ì ì€ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œë¥¼ ì˜ë¯¸í•œë‹¤.   MVC íŒ¨í„´ì˜ íŠ¹ì„±ìƒ, ì»¨íŠ¸ë¡¤ëŸ¬ â†’ ì„œë¹„ìŠ¤ â†’ DAO(Mapper) ìˆœìœ¼ë¡œ ì‘ë™í•œë‹¤. í•„ìˆ˜ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” ë¡œê·¸, ë³´ì•ˆ, íŠ¸ëœì­ì…˜, ì˜ˆì™¸ ì²˜ë¦¬ì™€ ê°™ì€ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì´ ê°ê°ì˜ í•µì‹¬ ê¸°ëŠ¥ë§ˆë‹¤ ì¶”ê°€ëœë‹¤ë©´ ì½”ë“œê°€ ë§¤ìš° ê¸¸ì–´ì§„ë‹¤.   AOPëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê´€ì ì´ë¼ëŠ” ê°œë…ì„ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   ë¶€ê°€ì ì¸ ê´€ì ì—ì„œëŠ” í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì–´ë–¤ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ì— ëŒ€í•´ ì „í˜€ ì•Œ í•„ìš” ì—†ê³  í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì•ˆì—ì„œ í•„ìš”í•œ ì‹œì ì— ë¶€ê°€ì ì¸ ê´€ì ì´ í¬í•¨ë˜ê¸°ë§Œ í•˜ë©´ ë˜ëŠ” ê²ƒì´ë‹¤.      ì™¼ìª½: ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°, ì˜¤ë¥¸ìª½, ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°   ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë‹¬ë¦¬ ë¶€ê°€ì ì¸ ê´€ì ì´ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë°”ê¹¥ì— í¬í•¨ë˜ì–´ ìˆë‹¤. AOPë¥¼ ì ìš©í•˜ë©´ ë¡œê·¸, ë³´ì•ˆ, íŠ¸ëœì­ì…˜, ì˜ˆì™¸ ì²˜ë¦¬ì™€ ê°™ì€ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì„ ì¼ì¼ì´ ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.   AOP ìš©ì–´   ê´€ì (Aspect)   ê³µí†µì ìœ¼ë¡œ ì •ì˜ë  ê¸°ëŠ¥ì„ ì˜ë¯¸í•œë‹¤. ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì •ì˜í•œ ì½”ë“œì¸ ì–´ë“œë°”ì´ìŠ¤ì™€ ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì–´ëŠ ê³³ì— ì ìš©í• ì§€ ê²°ì •í•˜ëŠ” í¬ì¸íŠ¸ì»·ì˜ ì¡°í•©ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.   ì–´ë“œë°”ì´ìŠ¤(Advice)   ì‹¤ì œë¡œ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.   í¬ì¸íŠ¸ì»·(Pointcut)   ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì ìš©í•  ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ì„ ë³„í•˜ëŠ” ê³¼ì •ì´ë‚˜ ê·¸ ê¸°ëŠ¥ì„ ì •ì˜í•œ ëª¨ë“ˆì„ ì˜ë¯¸í•œë‹¤. ì •ê·œí‘œí˜„ì‹ì´ë‚˜ AspectJ ë¬¸ë²•ì„ ì‚¬ìš©í•´ì„œ ì–´ë–¤ ì¡°ì¸ í¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ê²°ì •í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Java-AOP/",
        "teaser": ""
      },{
        "title": "íŠ¸ëœì­ì…˜ AOP",
        "excerpt":"íŠ¸ëœì­ì…˜ AOP   íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œì˜ ì¤‘ë³µê³¼ ìˆœìˆ˜ ìë°”ì½”ë“œë¥¼ ì‚­ì œ í•˜ê¸° ìœ„í•´ íŠ¸ëœì­ì…˜ ì¶”ìƒí™”, íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ì„ ë„ì…í–ˆë‹¤. íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ ë•ë¶„ì— íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ë°˜ë³µ ì½”ë“œëŠ” í•´ê²°í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜, ì„œë¹„ìŠ¤ ê³„ì¸µì— ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‚¨ê¸´ë‹¤ëŠ” ëª©í‘œëŠ” ì•„ì§ ë‹¬ì„±í•˜ì§€ ëª»í–ˆë‹¤. ì´ëŸ´ ë•Œ ìŠ¤í”„ë§ AOPë¥¼ í†µí•´ í”„ë¡ì‹œë¥¼ ë„ì…í•˜ë©´ ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³    ìŠ¤í”„ë§ AOPì™€ í”„ë¡ì‹œì— ëŒ€í•´ì„œëŠ” @Transactionalì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ì´ AOPë¥¼ ì‚¬ìš©í•´ì„œ íŠ¸ëœì­ì…˜ì„ í¸ë¦¬í•˜ê²Œ ì²˜ë¦¬í•´ì¤€ë‹¤ ì •ë„ë¡œ ì´í•´í•˜ì     í”„ë¡ì‹œë¥¼ í†µí•œ ë¬¸ì œ í•´ê²°   í”„ë¡ì‹œë¥¼ ë„ì…í•˜ê¸° ì „ì—ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ì§€ë§Œ, í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ê°ì²´ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤. íŠ¸ëœì­ì…˜ í”„ë¡ì‹œê°€ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë¡œì§ì„ ëª¨ë‘ ê°€ì ¸ê°€ê³  íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œ í›„ì— ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ëŒ€ì‹  í˜¸ì¶œí•œë‹¤. íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ ë•ë¶„ì— ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤.      íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡ì‹œ ì½”ë“œë¥¼ ìŠ¤í”„ë§ì´ ë§Œë“¤ì–´ì¤€ë‹¤. try, catch ê°™ì€ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê³  ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤€ë‹¤. íŠ¸ëœì­ì…˜ í”„ë¡ì‹œì—ì„œ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µì´ ì™”ì„ ë•Œ ì„±ê³µí–ˆìœ¼ë©´ commit, ì–¸ì²´í¬(ëŸ°íƒ€ì„) ì˜ˆì™¸ê°€ ì˜¬ ê²½ìš° rollbackì„ í•œë‹¤.   íŠ¸ëœì­ì…˜ í”„ë¡ì‹œ ì ìš©í•œ ì„œë¹„ìŠ¤ ì½”ë“œ ì˜ˆì‹œ   1 2 3 4 5 6 public class Service {     public void logic() {         //íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œ ì œê±°, ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‚¨ìŒ         bizLogic(fromId, toId, money);     } }   ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ AOP   ìŠ¤í”„ë§ AOPë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì„œ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•´ë„ ë˜ì§€ë§Œ ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ AOPë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ëª¨ë“  ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. íŠ¸ëœì­ì…˜ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê³³ì— @Transactional ì• ë…¸í…Œì´ì…˜ë¥¼ ë¶™ì—¬ì£¼ë©´ íŠ¸ëœì­ì…˜ í”„ë¡ì‹œë¥¼ ì ìš©í•´ì¤€ë‹¤.   1 2 3 4 5 6 import org.springframework.transaction.annotation.Transactional  @Transactional public void accountTransfer(String fromId, String toId, int money) throws SQLException {     bizLogic(fromId, toId, money); }   ì´ì œ ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‚¨ê³  íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œëŠ” ëª¨ë‘ ì œê±°ë˜ì—ˆë‹¤.   @Transactionalì€ ë©”ì„œë“œì— ë¶™ì—¬ë„ ë˜ê³ , í´ë˜ìŠ¤ì— ë¶™ì—¬ë„ ëœë‹¤. í´ë˜ìŠ¤ì— ë¶™ì´ë©´ ì™¸ë¶€ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•œ public ë©”ì„œë“œê°€ AOP ì ìš© ëŒ€ìƒì´ ëœë‹¤.   ì´í›„ ì„œë¹„ìŠ¤ ì½”ë“œì—ì„œ service.getClass()ë¥¼ ì¶œë ¥í•˜ë©´ EnhancerBySpringCGLIB.. ë¼ëŠ” ë¶€ë¶„ì„ í†µí•´ í”„ë¡ì‹œ(CGLIB)ê°€ ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.         ì°¸ê³    ìŠ¤í”„ë§ AOPë¥¼ ì ìš©í•˜ë ¤ë©´ ì–´ë“œë°”ì´ì €, í¬ì¸íŠ¸ì»·, ì–´ë“œë°”ì´ìŠ¤ê°€ í•„ìš”í•¨. ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ AOP ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‹¤ìŒ í´ë˜ìŠ¤ë¥¼ ì œê³µ. ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ë¹ˆë“¤ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìë™ìœ¼ë¡œ ë“±ë¡ë¨.         ì–´ë“œë°”ì´ì €: BeanFactoryTransactionAttributeSourceAdvisor     í¬ì¸íŠ¸ì»·: TransactionAttributeSourcePointcut     ì–´ë“œë°”ì´ìŠ¤: TransactionInterceptor       ì„ ì–¸ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬ vs í”„ë¡œê·¸ë˜ë° ë°©ì‹ íŠ¸ëœì­ì…˜ ê´€ë¦¬   ì„ ì–¸ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬ëŠ” @Transactional ì• ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•´ì„œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë©°, í”„ë¡œê·¸ë˜ë° ë°©ì‹ íŠ¸ëœì­ì…˜ ê´€ë¦¬ëŠ” íŠ¸ëœì­ì…˜ ê´€ë ¨ ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.   ì„ ì–¸ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬ê°€ í”„ë¡œê·¸ë˜ë° ë°©ì‹ì— ë¹„í•´ ê°„ê²°í•˜ê³  ì‹¤ìš©ì ì´ê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œëŠ” ëŒ€ë¶€ë¶„ ì„ ì–¸ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-TransactionAOP/",
        "teaser": ""
      },{
        "title": "íŠ¸ëœì­ì…˜ í…œí”Œë¦¿",
        "excerpt":"íŠ¸ëœì­ì…˜ í…œí”Œë¦¿   íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ JDBCì˜ ê°™ì€ íŒ¨í„´ì´ ë°˜ë³µë˜ëŠ” ê²ƒì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.   íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´ try, catch, finallyë¥¼ í¬í•¨í•œ ì„±ê³µì‹œ ì»¤ë°‹, ì‹¤íŒ¨ì‹œ ë¡¤ë°± ì½”ë“œê°€ ë°˜ë³µëœë‹¤.   ì´ëŸ° í˜•íƒœëŠ” ê°ê°ì˜ ì„œë¹„ìŠ¤ì—ì„œ ë°˜ë³µë˜ë©° ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¿ì´ë‹¤. ì´ë•Œ í…œí”Œë¦¿ ì½œë°± íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì¤‘ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.   í…œí”Œë¦¿ ì½œë°± íŒ¨í„´ì„ ì ìš©í•˜ë ¤ë©´ í…œí”Œë¦¿ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•˜ëŠ”ë° ìŠ¤í”„ë§ì€ TransactionTemplateë¼ëŠ” í…œí”Œë¦¿ í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤.   1 2 3 4 5 6 7 public class TransactionTemplate {     private PlatformTransactionManager transactionManager;     // ì‘ë‹µê°’ì´ ìˆì„ ë•Œ ì‚¬ìš©     public &lt;T&gt; T execute(TransactionCallback&lt;T&gt; action){..}     // ì‘ë‹µê°’ì´ ì—†ì„ ë•Œ ì‚¬ìš©     void executeWithoutResult(Consumer&lt;TransactionStatus&gt; action){..} }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /**  * íŠ¸ëœì­ì…˜ - íŠ¸ëœì­ì…˜ í…œí”Œë¦¿  */ @Slf4j public class MemberServiceV3_2 {      //    private final PlatformTransactionManager transactionManager;     private final TransactionTemplate txTemplate;     private final MemberRepositoryV3 memberRepository;      public MemberServiceV3_2(PlatformTransactionManager transactionManager, MemberRepositoryV3 memberRepository) {         this.txTemplate = new TransactionTemplate(transactionManager);         this.memberRepository = memberRepository;     }      public void accountTransfer(String fromId, String toId, int money) {         txTemplate.executeWithoutResult((status) -&gt; {             // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§             try {                 bizLogic(fromId, toId, money);             } catch (Exception e) {                 throw new IllegalStateException(e);             }         });     }      ... }   íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ ë•ë¶„ì— íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ì»¤ë°‹í•˜ê±°ë‚˜ ë¡¤ë°±í•˜ëŠ” ì½”ë“œê°€ ëª¨ë‘ ì œê±°ë˜ì—ˆë‹¤. íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì •ìƒ ìˆ˜í–‰ë˜ë©´ ì»¤ë°‹í•˜ê³  ì–¸ì²´í¬ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë¡¤ë°±í•œë‹¤. ê·¸ ì™¸ì˜ ê²½ìš°ì—” ì»¤ë°‹í•œë‹¤. SQLException ì²´í¬ ì˜ˆì™¸ëŠ” ì–¸ì²´í¬ ì˜ˆì™¸ë¡œ ë°”ê¾¸ì–´ ë˜ì§„ë‹¤.   íŠ¸ëœì­ì…˜ í…œí”Œë¦¿ì„ í†µí•´ JDBC ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìˆì—ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì•„ì§ë„ ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì½”ë“œê°€ ì¡´ì¬í•œë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ í•µì‹¬ ê¸°ëŠ¥ì´ê³  íŠ¸ëœì­ì…˜ì€ ë¶€ê°€ ê¸°ëŠ¥ì´ë‹¤. ì´ë ‡ê²Œ ë‘ ê´€ì‹¬ì‚¬ë¥¼ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì—ì„œ ì²˜ë¦¬í•˜ë©´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤. ì„œë¹„ìŠ¤ ë¡œì§ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ìˆì–´ì•¼ í•œë‹¤. ì´ ë¬¸ì œë¥¼ íŠ¸ëœì­ì…˜ AOPë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-TransactionTemplate/",
        "teaser": ""
      },{
        "title": "Git commit ë¡œê·¸ ìˆ˜ì •",
        "excerpt":"ì§ì „ì— ì‘ì„±í•œ commit ë³€ê²½   ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥í•˜ê³  ìˆ˜ì •í•œ ë‹¤ìŒ :wq ë¡œ ì €ì¥   1 git commit --amend   ì´ì „ì— ì‘ì„±í•œ commit ë³€ê²½   1 git rebase -i &lt;commit&gt;   ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì»¤ë°‹ ëª©ë¡ì´ í‘œì‹œëœë‹¤. ê·¸ ì¤‘ì—ì„œ ìˆ˜ì •í•˜ë ¤ëŠ” ì»¤ë°‹ì„ ì°¾ì•„ ê·¸ í–‰ì˜ pick ë¬¸ìë¥¼ editìœ¼ë¡œ ë³€ê²½í•˜ê³  ì €ì¥, ì¢…ë£Œí•œë‹¤.   ê·¸ í›„ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥í•˜ì—¬ commit ë³€ê²½í•œë‹¤.   1 git commit --amend   ë§ˆì§€ë§‰ìœ¼ë¡œ â€“continueì˜µì…˜ì„ ì§€ì •í•˜ì—¬ rebaseë¥¼ ì‹¤í–‰í•œë‹¤.   1 git rebase --continue   commit ë‚ ì§œ ë³€ê²½   1 2 3 4 5 # ë§ˆì§€ë§‰ Commit ë‚ ì§œë¥¼ í˜„ì¬ ë‚ ì§œë¡œ ì„¤ì • git commit --amend --no-edit --date \"$(date)\"  # ë§ˆì§€ë§‰ Commit ë‚ ì§œë¥¼ ì„ì˜ì˜ ë‚ ì§œë¡œ ì„¤ì • git commit --amend --no-edit --date \"Mon 20 Aug 2018 20:19:19 KST\"   author ë³€ê²½   1) commit ë§Œ í–ˆì„ ë•Œ   1 git commit --amend --author=\"yessm621 &lt;yessm621@gmail.com&gt;\"  ","categories": ["Git"],
        "tags": ["Git"],
        "url": "/git/Git-GitCommitModify/",
        "teaser": ""
      },{
        "title": "ì–¸ì²´í¬ ì˜ˆì™¸ ì‚¬ìš©ê³¼ ì˜ˆì™¸ ì‚¬ìš© ì‹œ ì£¼ì˜ì ",
        "excerpt":"ì–¸ì²´í¬ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ    í˜„ì¬ íŠ¸ë Œë“œëŠ” ì–¸ì²´í¬ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ê³  ì²´í¬ ì˜ˆì™¸ëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.   ì²´í¬ ì˜ˆì™¸ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ì˜ˆì™¸ ëˆ„ë½ì„ ì²´í¬í•´ì£¼ê¸° ë•Œë¬¸ì— ê°œë°œìê°€ ì‹¤ìˆ˜í•˜ëŠ” ê²ƒì„ ë§‰ì•„ì¤€ë‹¤. ì´ëŸ¬í•œ ì ì„ ë³´ì•˜ì„ ë•Œ ì²´í¬ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì–¸ì²´í¬ ì˜ˆì™¸ë³´ë‹¤ ì•ˆì „í•˜ê³  ì¢‹ì•„ë³´ì´ëŠ”ë° ì™œ ì²´í¬ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ê¹Œ?   ì²´í¬ ì˜ˆì™¸ì˜ ë¬¸ì œì  2ê°€ì§€      ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸: ëŒ€ë¶€ë¶„ì˜ ì˜ˆì™¸ëŠ” ë³µêµ¬ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ê³µí†µìœ¼ë¡œ ì˜¤ë¥˜ ë¡œê·¸ë¥¼ ë‚¨ê¸°ê³  ê°œë°œìê°€ í•´ë‹¹ ì˜¤ë¥˜ë¥¼ ë¹ ë¥´ê²Œ ì¸ì§€í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.   ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ë¬¸ì œ: ì²´í¬ ì˜ˆì™¸ëŠ” ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸ì´ë‹¤. ì»´íŒŒì¼ëŸ¬ê°€ ì˜ˆì™¸ë¥¼ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ë„ throwsë¥¼ í†µí•´ ë˜ì§€ëŠ” ì˜ˆì™¸ë¥¼ ì„ ì–¸í•´ì•¼ í•œë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë‚˜ ì„œë¹„ìŠ¤ì—ì„œ JDBC ê¸°ìˆ ì„ ì˜ì¡´í•˜ê²Œ ë˜ì–´ OCP, DIë¥¼ ì§€í‚¤ì§€ ëª»í•œë‹¤. (JDBC ê¸°ìˆ ì—ì„œ JPAë¡œ ë³€ê²½ ì‹œ ì˜ˆì™¸ì²˜ë¦¬ ê´€ë ¨ ì½”ë“œë¥¼ ëª¨ë‘ ë³€ê²½í•´ì•¼ í•œë‹¤)   ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì–¸ì²´í¬(ëŸ°íƒ€ì„) ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•œë‹¤.   ëŸ°íƒ€ì„ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸ì— ëŒ€í•´ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ë‹¤. (ì¼ê´€ì„± ìˆê²Œ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤) ë˜í•œ, ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì˜ˆì™¸ì— ëŒ€í•´ì„  ë¬´ì‹œí•˜ë©´ ë˜ë¯€ë¡œ ì˜ˆì™¸ë¥¼ ê°•ì œë¡œ ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ JDBC ê¸°ìˆ ì„ ì˜ì¡´í•˜ë‹¤ê°€ JPAë¡œ ë³€ê²½í•˜ì—¬ë„ ì˜í–¥ì´ ì—†ë‹¤.   ì²´í¬ ì˜ˆì™¸ ì‚¬ìš© í…ŒìŠ¤íŠ¸   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 @Test void checked() {     Controller controller = new Controller();     assertThatThrownBy(() -&gt; controller.request())             .isInstanceOf(Exception.class); }  static class Controller {     Service service = new Service();      public void request() throws SQLException, ConnectException {         service.logic();     } }  static class Service {     Repository repository = new Repository();     NetworkClient networkClient = new NetworkClient();      public void logic() throws SQLException, ConnectException {         repository.call();         networkClient.call();     } }   ì–¸ì²´í¬ ì˜ˆì™¸ ì‚¬ìš© í…ŒìŠ¤íŠ¸   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @Test void unchecked() {     Controller controller = new Controller();     assertThatThrownBy(() -&gt; controller.request())             .isInstanceOf(Exception.class);             // .isInstanceOf(RuntimeSQLException.class); }  static class Controller {     Service service = new Service();      public void request() {         service.logic();     } }  static class Service {     Repository repository = new Repository();     NetworkClient networkClient = new NetworkClient();      public void logic() {         repository.call();         networkClient.call();     } }   ì˜ˆì™¸ í¬í•¨ê³¼ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤   ì¤‘ìš”í•œ ë‚´ìš©! ì‹¤ë¬´ì—ì„œ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜ì´ë‹¤.   ì˜ˆì™¸ë¥¼ ì „í™˜í•  ë•Œ ê¸°ì¡´ ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•œë‹¤. (ì˜ˆë¥¼ ë“¤ë©´ ì²´í¬ ì˜ˆì™¸ë¥¼ ì–¸ì²´í¬ ì˜ˆì™¸ë¡œ ì „í™˜í•  ë•Œ) ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ í™•ì¸í•  ë•Œ ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   1 2 3 4 5 6 7 8 9 10 @Test void printEx() {     Controller controller = new Controller();     try {         controller.request();     } catch (Exception e) { //        e.printStackTrace();         log.info(\"ex\", e);     } }   ë¡œê·¸ë¥¼ ì¶œë ¥í•  ë•Œ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ì— ì˜ˆì™¸ë¥¼ ë„£ì–´ì£¼ë©´ ë¡œê·¸ì— ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤. System.outìœ¼ë¡œë„ ì¶œë ¥ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„  ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤.   1 2 3 4 5 6 7 // ë¡œê·¸ ì¶œë ¥ // ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ì— exë¥¼ ì „ë‹¬. log.info(\"message={}\", \"message\", ex) log.info(\"ex\", ex)  // System.outìœ¼ë¡œ ì¶œë ¥ e.printStackTrace()      ì°¸ê³  ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë€?   í”„ë¡œê·¸ë¨ì´ ì‹œì‘ëœ ì‹œì ë¶€í„° í˜„ì¬ ìœ„ì¹˜ê¹Œì§€ì˜ ë©”ì„œë“œ í˜¸ì¶œ ëª©ë¡ì´ë‹¤. ì´ëŠ” ì˜ˆì™¸ê°€ ì–´ë””ì„œ ë°œìƒí–ˆëŠ”ì§€ ì•Œë ¤ì£¼ê¸° ìœ„í•´ JVMì´ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.     ê¸°ì¡´ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš°   1 2 3 4 5 6 7 public void call() {     try {         runSQL();     } catch (SQLException e) {         throw new RuntimeSQLException(e); //ê¸°ì¡´ ì˜ˆì™¸(e) í¬í•¨      } }   1 2 3 4 5 6 7 8 9 10 23:35:32.280 [main] INFO hello.jdbc.exception.basic.UnCheckedAppTest - ex hello.jdbc.exception.basic.UnCheckedAppTest$RuntimeSQLException: java.sql.SQLException: ex \tat hello.jdbc.exception.basic.UnCheckedAppTest$Repository.call(UnCheckedAppTest.java:59) \tat hello.jdbc.exception.basic.UnCheckedAppTest$Service.logic(UnCheckedAppTest.java:43) \tat hello.jdbc.exception.basic.UnCheckedAppTest$Controller.request(UnCheckedAppTest.java:34) \tat hello.jdbc.exception.basic.UnCheckedAppTest.printEx(UnCheckedAppTest.java:24) \tCaused by: java.sql.SQLException: ex \tat hello.jdbc.exception.basic.UnCheckedAppTest$Repository.runSQL(UnCheckedAppTest.java:64) \tat hello.jdbc.exception.basic.UnCheckedAppTest$Repository.call(UnCheckedAppTest.java:57) \t... 72 common frames omitted   ê¸°ì¡´ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ë©´ RuntimeSQLException ë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì¡´ì— ë°œìƒí•œ java.sql.SQLExceptionê³¼ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ê¸°ì¡´ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ì§€ ì•ŠëŠ” ê²½ìš°   1 2 3 4 5 6 7 public void call() {     try {         runSQL();     } catch (SQLException e) {         throw new RuntimeSQLException(); //ê¸°ì¡´ ì˜ˆì™¸(e) ì œì™¸      } }   1 2 3 4 5 6 23:52:52.921 [main] INFO hello.jdbc.exception.basic.UnCheckedAppTest - ex hello.jdbc.exception.basic.UnCheckedAppTest$RuntimeSQLException: null \tat hello.jdbc.exception.basic.UnCheckedAppTest$Repository.call(UnCheckedAppTest.java:60) \tat hello.jdbc.exception.basic.UnCheckedAppTest$Service.logic(UnCheckedAppTest.java:44) \tat hello.jdbc.exception.basic.UnCheckedAppTest$Controller.request(UnCheckedAppTest.java:35) \tat hello.jdbc.exception.basic.UnCheckedAppTest.printEx(UnCheckedAppTest.java:24)   ê¸°ì¡´ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ì¡´ì— ë°œìƒí•œ java.sql.SQLExceptionê³¼ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ê³  ë³€í™˜í•œ RuntimeSQLExceptionë¶€í„° ì˜ˆì™¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë§Œì•½, ì‹¤ì œ DBì— ì—°ë™í–ˆë‹¤ë©´ DBì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ëŠ” ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   1 ğŸ’¡ ì˜ˆì™¸ë¥¼ ì „í™˜í•  ë•ŒëŠ” ê¼­ ê¸°ì¡´ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ì.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-UncheckedExceptionUsed/",
        "teaser": ""
      },{
        "title": "JDBC Template",
        "excerpt":"í…œí”Œë¦¿ íŒ¨í„´   í…œí”Œë¦¿ íŒ¨í„´ì´ë€ ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ë™ì¼í•˜ë©´ì„œ ë¶€ë¶„ì ìœ¼ë¡œ ë‹¤ë¥¸ êµ¬ë¬¸ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ ì½”ë“œì˜ ì¤‘ë³µì„ ìµœì†Œí™” í•  ë•Œ ìœ ìš©í•œ íŒ¨í„´ì´ë‹¤.   JDBC Template   JDBC í…œí”Œë¦¿ì€ JDBCì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” APIì´ë‹¤. ìŠ¤í”„ë§ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ Data Access í…œí”Œë¦¿ìœ¼ë¡œ ì¿¼ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. JDBC í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ JDBCë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë°œìƒí•˜ëŠ” ë°˜ë³µ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   JDBC ë°˜ë³µ ë¬¸ì œ      ì»¤ë„¥ì…˜ ì¡°íšŒ, ì»¤ë„¥ì…˜ ë™ê¸°í™”   PreparedStatement ìƒì„± ë° íŒŒë¼ë¯¸í„° ë°”ì¸ë”©   ì¿¼ë¦¬ ì‹¤í–‰   ê²°ê³¼ ë°”ì¸ë”©   ì˜ˆì™¸ ë°œìƒ ì‹œ ìŠ¤í”„ë§ ì˜ˆì™¸ ë³€í™˜ê¸° ì‹¤í–‰   ë¦¬ì†ŒìŠ¤ ì¢…ë£Œ   ë¦¬í¬ì§€í† ë¦¬ì˜ ê°ê°ì˜ ë©”ì„œë“œë¥¼ ì‚´í´ë³´ë©´ ìƒë‹¹íˆ ë§ì€ ë¶€ë¶„ì´ ë°˜ë³µë˜ëŠ”ë° ì´ëŸ° ë°˜ë³µì„ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ë°”ë¡œ í…œí”Œë¦¿ ì½œë°± íŒ¨í„´ì´ë‹¤. ë˜í•œ, ìŠ¤í”„ë§ì€ JDBCì˜ ë°˜ë³µ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ JdbcTemplateì´ë¼ëŠ” í…œí”Œë¦¿ ì œê³µí•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 /**  * JdbcTemplate ì‚¬ìš©  */ @Slf4j public class MemberRepositoryV5 implements MemberRepository {      private final JdbcTemplate template;      public MemberRepositoryV5(DataSource dataSource) {         this.template = new JdbcTemplate(dataSource);     }      @Override     public Member save(Member member) {         String sql = \"insert into member(member_id, money) values (?, ?)\";         template.update(sql, member.getMemberId(), member.getMoney());         return member;     }      @Override     public Member findById(String memberId) {         String sql = \"select * from member where member_id =?\";         return template.queryForObject(sql, memberRowMapper(), memberId);     }      private RowMapper&lt;Member&gt; memberRowMapper() {         return (rs, rowNum) -&gt; {             Member member = new Member();             member.setMemberId(rs.getString(\"member_id\"));             member.setMoney(rs.getInt(\"money\"));             return member;         };     }      ... }   JdbcTemplateì€ JDBCë¡œ ê°œë°œí•  ë•Œ ë°œìƒí•˜ëŠ” ë°˜ë³µì„ ëŒ€ë¶€ë¶„ í•´ê²°í•œë‹¤. ë˜í•œ, ì§€ê¸ˆê¹Œì§€ í•™ìŠµí–ˆë˜ íŠ¸ëœì­ì…˜ì„ ìœ„í•œ ì»¤ë„¥ì…˜ ë™ê¸°í™”ì™€ ì˜ˆì™¸ ë°œìƒ ì‹œ ìŠ¤í”„ë§ ì˜ˆì™¸ ë³€í™˜ê¸°ë„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•´ì£¼ë¯€ë¡œ ë”°ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring","DB"],
        "url": "/spring/Spring-JdbcTemplate/",
        "teaser": ""
      },{
        "title": "ëŒë‹¤ì‹(Lambda Expression)",
        "excerpt":"ì§€ë„¤ë¦­ìŠ¤(Generics)ì˜ ë“±ì¥ê³¼ ëŒë‹¤ì‹(Lambda Expression)ì˜ ë“±ì¥ìœ¼ë¡œ ì¸í•´ ìë°”ëŠ” ìƒˆë¡œìš´ ë³€í™”ë¥¼ ë§ì´í–ˆë‹¤. ê·¸ ì¤‘ ëŒë‹¤ì‹ì— ëŒ€í•´ ì•Œì•„ë³´ê² ë‹¤.   ëŒë‹¤ì‹ì´ë€?   ëŒë‹¤ì‹(Lambda Expression)ì´ë€ ë©”ì„œë“œë¥¼ í•˜ë‚˜ì˜ ì‹ìœ¼ë¡œ í‘œí˜„í•œ ê²ƒì´ë‹¤. ëŒë‹¤ì‹ì€ í•¨ìˆ˜ë¥¼ ê°„ëµí•˜ë©´ì„œë„ ëª…í™•í•œ ì‹ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ë©”ì„œë“œë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë©”ì„œë“œì˜ ì´ë¦„ê³¼ ë°˜í™˜ê°’ì´ ì—†ì–´ì§€ê¸° ë•Œë¬¸ì—, ëŒë‹¤ì‹ì€ ìµëª… í•¨ìˆ˜ë¼ê³ ë„ í•œë‹¤.   ëŒë‹¤ì‹ì€ ê°„ê²°í•˜ë©´ì„œë„ ì´í•´í•˜ê¸° ì‰½ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ë˜í•œ, ë©”ì„œë“œëŠ” í´ë˜ìŠ¤ì— í¬í•¨ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìˆì§€ë§Œ ëŒë‹¤ì‹ì€ íŠ¹ë³„í•œ ì œì•½ ì—†ì´ ëŒë‹¤ì‹ ìì²´ë§Œìœ¼ë¡œë„ ì´ ë©”ì„œë“œì˜ ì—­í• ì„ ëŒ€ì‹ í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³  ë©”ì„œë“œì™€ í•¨ìˆ˜ì˜ ì°¨ì´   ë©”ì„œë“œëŠ” í•¨ìˆ˜ì™€ ê°™ì€ ì˜ë¯¸ì´ì§€ë§Œ, íŠ¹ì • í´ë˜ìŠ¤ì— ë°˜ë“œì‹œ ì†í•´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìˆë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì˜ í•¨ìˆ˜ì™€ ê°™ì€ ì˜ë¯¸ì˜ ë‹¤ë¥¸ ìš©ì–´ë¥¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•œ ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì´ì œ ë‹¤ì‹œ ëŒë‹¤ì‹ì„ í†µí•´ ë©”ì„œë“œê°€ í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ ê¸°ëŠ¥ì„ í•˜ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.     ëŒë‹¤ì‹ ì‘ì„±í•˜ê¸°   ëŒë‹¤ì‹ì€ ìµëª… í•¨ìˆ˜ ë‹µê²Œ ë©”ì„œë“œì—ì„œ ì´ë¦„ê³¼ ë°˜í™˜íƒ€ì…ì„ ì œê±°í•˜ê³  ë§¤ê°œë³€ìˆ˜ ì„ ì–¸ë¶€ì™€ ëª¸í†µ{} ì‚¬ì´ì— â†’ ë¥¼ ì¶”ê°€í•œë‹¤.   1 2 3 4 5 6 7 ë°˜í™˜í‹°ì… ë©”ì†Œë“œëª… (ë§¤ê°œë³€ìˆ˜, ...) { \t  ì‹¤í–‰ë¬¸ }  (ë§¤ê°œë³€ìˆ˜, ...) -&gt; { \t  ì‹¤í–‰ë¬¸ }   1 2 3 4 5 6 7 int max(int a, int b) {     return a &gt; b ? a : b; }  (int a, int b) -&gt; {     return a &gt; b ? a : b; }   ë°˜í™˜ê°’ì´ ìˆëŠ” ë©”ì„œë“œì˜ ê²½ìš°, returnë¬¸ ëŒ€ì‹  ì‹ìœ¼ë¡œ ëŒ€ì‹  í•  ìˆ˜ ìˆë‹¤. ì‹ì˜ ì—°ì‚°ê²°ê³¼ê°€ ìë™ì ìœ¼ë¡œ ë°˜í™˜ê°’ì´ ëœë‹¤. ì´ë•ŒëŠ” ë¬¸ì¥ì´ ì•„ë‹Œ ì‹ì´ë¯€ë¡œ ëì— ;ì„ ë¶™ì´ì§€ ì•ŠëŠ”ë‹¤.   1 2 3 4 5 (int a, int b) {     return a &gt; b ? a : b; }  (int a, int b) -&gt; a &gt; b ? a : b   ëŒë‹¤ì‹ì— ì„ ì–¸ëœ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì€ ì¶”ë¡ ì´ ê°€ëŠ¥í•œ ê²½ìš°ëŠ” ìƒëµí•  ìˆ˜ ìˆëŠ”ë°, ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ìƒëµê°€ëŠ¥í•˜ë‹¤. ëŒë‹¤ì‹ì— ë°˜í™˜íƒ€ì…ì´ ì—†ëŠ” ì´ìœ ë„ í•­ìƒ ì¶”ë¡ ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.   1 2 3 (int a, int b) -&gt; a &gt; b ? a : b  (a, b) -&gt; a &gt; b ? a : b   ëŒë‹¤ì‹ì˜ ì¥ì ê³¼ ë‹¨ì    ëŒë‹¤ì‹ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œê°€ ê°„ê²°í•´ì§€ê³  ê°€ë…ì„±ì´ ë†’ì•„ì§„ë‹¤.   í•˜ì§€ë§Œ ë””ë²„ê¹…ì´ ì–´ë ¤ìš°ë©° ì¬ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ëŒë‹¤ë¥¼ ìì£¼ ì‚¬ìš©í•˜ë©´ ë¹„ìŠ·í•œ í•¨ìˆ˜ê°€ ì¤‘ë³µ ìƒì„±ë˜ì–´ ì½”ë“œê°€ ì§€ì €ë¶„í•´ ì§ˆ ìˆ˜ ìˆë‹¤. ë˜í•œ, ì¬ê·€ë¡œ ë§Œë“¤ ê²½ìš°ì— ë¶€ì í•©í•˜ë‹¤. ê²°êµ­, ìƒí™©ì— ë”°ë¼ í•„ìš”ì— ë§ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-LambdaExpression/",
        "teaser": ""
      },{
        "title": "[CentOS] vi í¸ì§‘ê¸° ê¾¸ë¯¸ê¸°",
        "excerpt":"vi í¸ì§‘ê¸°ë¥¼ ì´ì˜ê²Œ ê¾¸ë©°ë³´ê² ë‹¤.   ìš°ì„  vimì„ ì„¤ì¹˜í•˜ê³  aliasë¥¼ ì„¤ì •í•´ vië¥¼ vimìœ¼ë¡œ ë³€ê²½í•˜ê² ë‹¤.   ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ vim ì„¤ì¹˜í•œë‹¤.   1 yum install vim   alias ì„¤ì •í•˜ê¸° ìœ„í•´ .bashrc íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.   1 viÂ ~/.bashrc   ì•„ë˜ ì½”ë“œë¥¼ ë„£ê³  :wqë¡œ ì €ì¥í•˜ê³  ë‚˜ì˜¨ë‹¤.   1 aliasÂ vi='vim'   ìˆ˜ì •í•œ .bashrc íŒŒì¼ì„ ì ìš©í•œë‹¤.   1 source ~/.bashrc   ì´ì œ Syntax Highlightingì„ ì„¤ì •í•˜ê¸° ìœ„í•´ colorschemeë¥¼ ì„ íƒí•œë‹¤. í•„ìëŠ” jellybeans í…Œë§ˆë¥¼ ì„ íƒí–ˆë‹¤.   ì•„ë˜ ê²½ë¡œì— ì„ íƒí•œ colorschemeë¥¼ ë„£ëŠ”ë‹¤.   (ë‹¤ìš´ë¡œë“œ ë§í¬) jellybeans.vim   1  cd /usr/share/vim/vim74/colors/      ì°¸ê³    macì—ì„œ ì ìš©í•  ë•ŒëŠ” ~/.vim/colors í´ë”ì— í…Œë§ˆë¥¼ ë„£ìœ¼ë©´ ëœë‹¤.     ê·¸ë¦¬ê³  root ê²½ë¡œì— ìˆëŠ” .vimrc íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤. (ì—†ìœ¼ë©´ ìƒˆë¡œ ë§Œë“¤ì–´ë„ ëœë‹¤.)   1 vi ~/.vimrc   .vimrc íŒŒì¼ì— ì•„ë˜ ë‚´ìš© ì…ë ¥í•˜ê³  :wqë¡œ ì €ì¥í•˜ê³  ë‚˜ì˜¨ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 set hlsearch \" ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… set nu \" ì¤„ë²ˆí˜¸ set autoindent \" ìë™ ë“¤ì—¬ì“°ê¸° set scrolloff=2 set wildmode=longest,list set ts=4 \"tag select set sts=4 \"st select set sw=1 \" ìŠ¤í¬ë¡¤ë°” ë„ˆë¹„ set autowrite \" ë‹¤ë¥¸ íŒŒì¼ë¡œ ë„˜ì–´ê°ˆ ë•Œ ìë™ ì €ì¥ set autoread \" ì‘ì—… ì¤‘ì¸ íŒŒì¼ ì™¸ë¶€ì—ì„œ ë³€ê²½ë¬ì„ ê²½ìš° ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜´ set cindent \" Cì–¸ì–´ ìë™ ë“¤ì—¬ì“°ê¸° set bs=eol,start,indent set history=256 set laststatus=2 \" ìƒíƒœë°” í‘œì‹œ í•­ìƒ \"set paste \" ë¶™ì—¬ë„£ê¸° ê³„ë‹¨í˜„ìƒ ì—†ì• ê¸° set shiftwidth=4 \" ìë™ ë“¤ì—¬ì“°ê¸° ë„ˆë¹„ ì„¤ì • set showmatch \" ì¼ì¹˜í•˜ëŠ” ê´„í˜¸ í•˜ì´ë¼ì´íŒ… set smartcase \" ê²€ìƒ‰ì‹œ ëŒ€ì†Œë¬¸ì êµ¬ë³„ set smarttab set smartindent set softtabstop=4 set tabstop=4 set ruler \" í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ í‘œì‹œ set incsearch set statusline=\\ %&lt;%l:%v\\ [%P]%=%a\\ %h%m%r\\ %F\\  \" ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •ëœ ê³³ì— ì»¤ì„œë¥¼ ìœ„ì¹˜í•¨ au BufReadPost * \\ if line(\"'\\\"\") &gt; 0 &amp;&amp; line(\"'\\\"\") &lt;= line(\"$\") | \\ exe \"norm g`\\\"\" | \\ endif \" íŒŒì¼ ì¸ì½”ë”©ì„ í•œêµ­ì–´ë¡œ if $LANG[0]=='k' &amp;&amp; $LANG[1]=='o' set fileencoding=korea endif \" êµ¬ë¬¸ ê°•ì¡° ì‚¬ìš© if has(\"syntax\")  syntax on endif  colorscheme jellybeans   ì´ì œ ì•„ë˜ì™€ ê°™ì´ ë³´ê¸° ì¢‹ì€ vi í¸ì§‘ê¸°ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.     ","categories": ["Linux"],
        "tags": ["Linux"],
        "url": "/linux/Linux-Vi-Editor/",
        "teaser": ""
      },{
        "title": "[Mac] Django í”„ë¡œì íŠ¸ ì…‹íŒ… ì¤‘ mysqlclient ì˜¤ë¥˜",
        "excerpt":"Django í”„ë¡œì íŠ¸ë¥¼ ì…‹íŒ…í•˜ëŠ” ì¤‘ì— mysqlclient íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.   ì›ì¸ì„ ì°¾ì•„ë³´ë˜ ì¤‘ mysqlclient íŒ¨í‚¤ì§€ì˜ ë²„ì „ì— ë”°ë¼ pythonì˜ ë²„ì „ì„ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë³´ê³  python ë²„ì „ì„ 3.9ì—ì„œ 3.7ë¡œ ë‚®ì¶°ì£¼ì—ˆë‹¤.   brew ì„¤ì¹˜ëœ ìƒíƒœì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ python3.7 ë²„ì „ ì„¤ì¹˜   1 brew install python@3.7   python 3.7 ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸   1 python3   ì„¤ì¹˜í•œ íŒŒì´ì¬ ê²½ë¡œë¥¼ .bash_profileì— í™˜ê²½ë³€ìˆ˜ ë“±ë¡í•´ì•¼ í•œë‹¤.   1 vi ~/.bash_profile   ì•„ë˜ ë‚´ìš©ì„ .bash_profileì— ì…ë ¥í•˜ê³  :wq ë¡œ ì €ì¥í•˜ê³  ë‚˜ì˜´   1 2 export PATH=/usr/local/opt/python@3.7/libexec/bin:$PATH export LDFLAGS=\"-L/usr/local/opt/python@3.7/lib\"   í„°ë¯¸ë„ì„ ê»ë‹¤ ì¼œë„ ì ìš©ë˜ë„ë¡ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥   1 source ~/.bash_profile   ìƒˆë¡œìš´ í„°ë¯¸ë„ì„ ì—´ì–´ í™˜ê²½ë³€ìˆ˜ê°€ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ë©´ ëë‚œë‹¤.   ë§Œì•½, ìƒˆë¡œìš´ í„°ë¯¸ë„ì„ ì—´ì—ˆëŠ”ë° ì ìš©ì´ ì•ˆëœë‹¤ë©´ zsh ë¬¸ì œì¼ ìˆ˜ ìˆë‹¤. (í•„ìì˜ ê²½ìš°ê°€ ê·¸ë¬ë‹¤.)   í„°ë¯¸ë„ í…Œë§ˆê°€ zshì˜€ëŠ”ë°, zshì˜ ê²½ìš°ì—” í„°ë¯¸ë„ì´ ì‹¤í–‰ë  ë•Œ ~/.zshrcë¥¼ ì‹¤í–‰í•œë‹¤ê³  í•œë‹¤. .zshrcì—ëŠ” íŒŒì´ì¬ê³¼ ê´€ë ¨ëœ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆ ë‹¹ì—°íˆ ì´ˆê¸°í™” ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ë°–ì— ì—†ë‹¤.   ë”°ë¼ì„œ, .bash_profileì„ ìˆ˜ì •í•˜ë©´ .zshrcì—ì„œë„ ìˆ˜ì •ë˜ë„ë¡ ì„¤ì •í•˜ì.   1 vi ~/.zshrc   .zshrcì— ì•„ë˜ ë‚´ìš©ì„ ì…ë ¥ í›„ :wq ëª…ë ¹ì–´ë¥¼ í†µí•´ ì €ì¥í•˜ê³  ë‚˜ì˜¨ë‹¤.   1 2 3 if [ -f ~/.bash_profile ]; then \t. ~/.bash_profile fi   í™˜ê²½ë³€ìˆ˜ë¥¼ ì ìš©í•œë‹¤.   1 source ~/.zshrc   ë§Œì•½ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´,   1 compinit:503: no such file or directory: /usr/local/share/zsh/site-functions/_brew_services   ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ í•´ê²°   1 brew cleanup   ë‹¤ì‹œ í„°ë¯¸ë„ì„ ìƒˆë¡œ ì—´ì–´ì„œ í™˜ê²½ë³€ìˆ˜ê°€ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.  ","categories": ["Mac"],
        "tags": ["Mac","MySQL","Python"],
        "url": "/mac/Mac-MysqlClient/",
        "teaser": ""
      },{
        "title": "Github ì ‘ì†ì„ ìœ„í•œ SSH í‚¤ ìƒì„± ë° ë“±ë¡",
        "excerpt":"   ì°¸ê³    MAC m1 ë¶€í„°ëŠ” ì´ ë°©ë²•ì´ ì•„ë‹Œ token ì¸ì¦ ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•´ì•¼ í•œë‹¤ê³  í•œë‹¤..     SSH í‚¤   Githubì„ ì‚¬ìš©í•  ë•Œ SSH í‚¤ë¥¼ ë“±ë¡í•˜ëŠ” ì´ìœ    ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ Gitì„ ì‚¬ìš©í•  ê²½ìš°ì—” SSHê°€ ì—†ì–´ë„ ìƒê´€ì—†ë‹¤. í•˜ì§€ë§Œ, Git ì„œë²„ì— ì½”ë“œë¥¼ Cloneí•˜ê±°ë‚˜ Push í•  ë•Œ SSH í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤.   SSHë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” (ë¡œì»¬ì´ ì•„ë‹Œ)ë‹¤ë¥¸ ì„œë²„ì— ëª…ë ¹ì–´ë¥¼ ì „ë‹¬í•˜ê³  ê²°ê³¼ë¥¼ ë°›ì•„ ë³¼ ë•Œ ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ í†µì‹ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. SSHëŠ” ì—¬ëŸ¬ê°€ì§€ ì¸ì¦ ë°©ë²•ì„ ì œê³µí•˜ëŠ”ë° ê·¸ ì¤‘ì—ì„œë„ í¸ë¦¬ì„±ì´ë‚˜ ì•ˆì •ì„± ë©´ì—ì„œ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì´ ê³µê°œí‚¤ ì¸ì¦ ë°©ì‹ì´ë‹¤.   ê³µê°œí‚¤ ì¸ì¦ ë°©ì‹   ê³µê°œí‚¤ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ë ¤ë©´ ê³µê°œí‚¤ì™€ ê°œì¸í‚¤ í•œìŒì„ ë§Œë“ ë‹¤. ê³µê°œí‚¤ëŠ” ì ‘ì†í•˜ê³ ì í•˜ëŠ” ì„œë²„ì— ë“±ë¡í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. ì‚¬ìš©ìëŠ” ê°œì¸í‚¤ë¥¼ í†µí•´ SSHì— ì ‘ì†í•˜ê³  ì—°ê²° ìš”ì²­ì„ ë°›ì€ SSH ì„œë²„ì—ì„œ ì„œë²„ì— ë“±ë¡ëœ ê³µê°œí‚¤ ì¤‘ ìš”ì²­ ë°›ì€ ê°œì¸í‚¤ì™€ ë§¤ì¹˜ë˜ëŠ” ê³µê°œí‚¤ê°€ ìˆëŠ”ì§€ ì°¾ê³  ìˆë‹¤ë©´ ì¸ì¦ì— ì„±ê³µí•˜ê³  ì„œë²„ì— ì ‘ì†ëœë‹¤. (ì—†ë‹¤ë©´ ì¸ì¦ì— ì‹¤íŒ¨í•œë‹¤.) ê³µê°œí‚¤ëŠ” ì–´ë””ì— ê³µê°œë˜ì–´ë„ ë¬¸ì œê°€ ì—†ìœ¼ë‚˜ ê°œì¸í‚¤ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë…¸ì¶œí•˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ë³´ê´€í•´ì•¼ í•œë‹¤.   SSH í‚¤ ìƒì„±   Githubì—ì„œë„ SSH ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. ê³µê°œí‚¤ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ì „ì— ì´ë¯¸ ìƒì„±ëœ í‚¤ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ”ê²Œ ì¢‹ë‹¤.   1 2 âœ  ~/.ssh âœ  ls      ë””ë ‰í† ë¦¬ì— **.pub(ê³µê°œí‚¤), **(ê°œì¸í‚¤)ê°€ ìˆë‹¤ë©´ ì´ë¯¸ í‚¤ë¥¼ ìƒì„±í•œ ì ì´ ìˆëŠ” ê²ƒì´ë‹¤. í‚¤ê°€ ìˆë‹¤ë©´ ì•„ë˜ í‚¤ ìƒì„±ê³¼ì •ì€ ìƒëµí•´ë„ ì¢‹ë‹¤.   í‚¤ ìƒì„±ì€ ssh-keygenìœ¼ë¡œ ìƒì„±í•œë‹¤.   1 âœ  ssh-keygen -t rsa -b 4096 -C \"yessm621@gmail.com\"   ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì²«ë²ˆì§¸ë¡œ í‚¤ë¥¼ ì–´ë””ì— ìƒì„±í•˜ì§€ ë¬»ëŠ”ë° ê¸°ë³¸ ìœ„ì¹˜ì¸ ~/.ssh ì— ì €ì¥í•˜ëŠ”ê²Œ ì¢‹ë‹¤. ë‹¤ìŒìœ¼ë¡œ SSH í‚¤ì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§€ì •í• ì§€ ë¬»ëŠ”ë° ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§€ì •í•´ë„ ë˜ê³  ìƒëµí•˜ê³  ì‹¶ë‹¤ë©´ ì—”í„°í‚¤ë¥¼ ëˆ„ë¥´ë©´ ëœë‹¤.         ì°¸ê³  Githubì—ì„œëŠ” íŒ¨ìŠ¤ì›Œë“œ ì„¤ì •ì„ ê¶Œì¥í•œë‹¤.     ì´ì œ SSH í‚¤ê°€ ìƒì„±ë˜ì—ˆë‹¤. ê³µê°œí‚¤ëŠ” ***.pub í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœë‹¤.      cat ëª…ë ¹ì–´ë¥¼ í†µí•´ ìƒì„±ëœ ê³µê°œí‚¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   1 âœ  cat id_rsa.pub   ë‹¤ì‹œ í•œë²ˆ ê°•ì¡°í•˜ì§€ë§Œ ê°œì¸í‚¤ëŠ” ì ˆëŒ€ë¡œ ê³µê°œë˜ì–´ì„  ì•ˆëœë‹¤.      ##Githubì— SSH í‚¤ ë“±ë¡   ì´ì œ Githubì— ê³µê°œí‚¤ë¥¼ ë“±ë¡í•´ë³´ì.   Github í˜ì´ì§€ (https://github.com )ì— ì ‘ì† &gt; ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ í”„ë¡œí•„ í´ë¦­ &gt; Settings ë©”ë‰´ &gt; ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œ ë°” &gt; SSH and GPG keys ë©”ë‰´ &gt; SSH keys      New SSH key ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¨ë‹¤.      Title í•„ë“œì— ë“±ë¡í•˜ë ¤ëŠ” í‚¤ì˜ ì´ë¦„(êµ¬ë¶„ ê°’)ì„ ì…ë ¥í•œë‹¤. Key typeì€ Authentication Keyë¥¼ ì‚¬ìš©í•˜ê³  Key í•„ë“œì— ìƒì„±í–ˆë˜ SSH ê³µê°œí‚¤ë¥¼ ì…ë ¥í•œë‹¤.   ì´ì œ ì•„ë˜ì™€ ê°™ì´ ê³µê°œí‚¤ê°€ ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.     ","categories": ["Git"],
        "tags": ["Git"],
        "url": "/git/Git-Github-SSHKeys/",
        "teaser": ""
      },{
        "title": "ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘   ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.   ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ì— ëŒ€í•´ ì–˜ê¸°í•œ ì´ìœ ëŠ” ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ê³¼ ë¹„ìŠ·í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ë„ ì‹œì‘ê³¼ ì•ˆì „í•œ ì¢…ë£Œë¥¼ ìœ„í•œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.   ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ ìƒì„± í›„ì— ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ í•œë‹¤. (ê°ì²´ ìƒì„±ì´ ë¯¸ë¦¬ ì™„ë£Œí•´ì•¼ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆë‹¤. ë‹¨, ìƒì„±ì ì£¼ì…ì€ ì˜ˆì™¸ì´ë‹¤. ìƒì„±ìëŠ” ê°ì²´ë¥¼ ë§Œë“¤ë•Œ ì´ë¯¸ ìŠ¤í”„ë§ ë¹ˆì´ ê°™ì´ ë“¤ì–´ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.)   ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë‹¤ ëë‚œ ë‹¤ìŒì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë£Œëœë‹¤. ë”°ë¼ì„œ, ì´ˆê¸°í™” ì‘ì—…ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëª¨ë‘ ì™„ë£Œë˜ê³  ë‚œ ë‹¤ìŒì— í˜¸ì¶œí•´ì•¼ í•œë‹¤.   ê°œë°œìê°€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëª¨ë‘ ì™„ë£Œëœ ì‹œì ì„ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆë‚˜?   ìŠ¤í”„ë§ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë˜í•œ, ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ ì½œë°±ì„ ì¤€ë‹¤. ë”°ë¼ì„œ, ì•ˆì „í•˜ê²Œ ì¢…ë£Œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.   ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´   1 ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ì½œë°± â†’ ì‚¬ìš© â†’ ì†Œë©¸ì „ ì½œë°± â†’ ìŠ¤í”„ë§ ì¢…ë£Œ      ì´ˆê¸°í™” ì½œë°±: ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ   ì†Œë©¸ì „ ì½œë°±: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ      ì°¸ê³  ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ ìˆ˜ì •ì ì£¼ì…, í•„ë“œ ì£¼ì…ì—ì„œ ë°œìƒí•œë‹¤. ìƒì„±ì ì£¼ì…ì€ ê°ì²´ê°€ ìƒì„±ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ë¹ˆ ìƒì„± ë‹¨ê³„ì—ì„œë„ ì¼ë¶€ ì‹œì‘ëœë‹¤.     ìƒì„±ìë¥¼ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ìˆ˜ì •ì ì£¼ì…í•˜ëŠ” ê²ƒì„ ë¶„ë¦¬í•œ ì´ìœ ëŠ” ìƒì„±ìì—ì„œ ëª¨ë‘ ì²˜ë¦¬í•˜ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)ì— ìœ„ë°°ë˜ê¸° ë•Œë¬¸ì´ë‹¤.   1 2 3 4 5 6 // ê¸°ì¡´ NetworkClient networkClient = new NetworkClient(); networkClient.setUrl(\"http://hello-spring.dev\");  // ìƒì„±ìì— íŒŒë¼ë¯¸í„° ì „ë‹¬: SRP ì›ì¹™ ìœ„ë°° NetworkClient networkClient = new NetworkClient(\"http://hello-spring.dev\");      ì°¸ê³  ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³ , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤. ë°˜ë©´ì—, ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤. ë”°ë¼ì„œ, ì´ ë‘ ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤.        ì°¸ê³  ê°•ì˜ì—ì„œ ë§í•˜ëŠ” ì´ˆê¸°í™”ë€? ê°ì²´ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ë˜ê¸° ì „ì— ì§„í–‰ë˜ì–´ì•¼ í•  ì¼ë ¨ì˜ ê³¼ì •ë“¤ì´ë‹¤. ì´ˆê¸°í™”ëŠ” â€˜ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—…ì´ ì•„ë‹ˆê³  ê°ì²´ì•ˆì— í•„ìš”í•œ ê°’ì´ ë‹¤ ì—°ê²°ë˜ì–´ìˆê³  ì²˜ìŒ ì œëŒ€ë¡œ ì¼ì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ë‹¤.â€™ ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì™œ ë²ˆê±°ë¡­ê²Œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•˜ì§€ ì•Šì„ê¹Œ? ê·¸ ì´ìœ ëŠ” ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ì„œë¡œ ë‹¤ë¥¸ ê´€ì‹¬ì‚¬ë¡œ ë³´ê³  ê° ê³¼ì •ì„ ë¶„ë¦¬í–ˆë‹¤ê³  ì´í•´í•˜ë©´ ì¢‹ë‹¤. (SRP ì›ì¹™) ìŠ¤í”„ë§ ê´€ì ì—ì„œì˜ ì´ˆê¸°í™”ëŠ” ê°ì²´ ìƒì„± ë° ì˜ì¡´ê´€ê³„ ì£¼ì… ì´í›„ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì¶”ê°€ ì‘ì—…ì´ë‹¤.     1 AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(LifeCycleConfig.class);   new AnnotationConfigApplicationContext(LifeCycleConfig.class);ë¥¼ ìƒì„±í•˜ëŠ” ë™ì•ˆ â€˜ì»¨í…Œì´ë„ˆ ìƒì„±, ìŠ¤í”„ë§ ë¹ˆ ìƒì„±, ì˜ì¡´ê´€ê³„ ì£¼ì…, ì´ˆê¸°í™” ì½œë°±â€™ê¹Œì§€ ë‹¤ ëë‚œ ìƒíƒœì´ë‹¤.   ìŠ¤í”„ë§ì€ í¬ê²Œ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.      ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)   ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •   @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ ì§€ì›   ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package com.study.core.lifecycle;  import org.springframework.beans.factory.DisposableBean; import org.springframework.beans.factory.InitializingBean;  public class NetworkClient implements InitializingBean, DisposableBean {      ...      @Override     public void afterPropertiesSet() throws Exception {         System.out.println(\"NetworkClient.afterPropertiesSet\");         connect();         call(\"ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€\");     }      @Override     public void destroy() throws Exception {         System.out.println(\"NetworkClient.destroy\");         disconnect();     } }   1 2 3 4 5 6 ìƒì„±ì í˜¸ì¶œ, url = null NetworkClient.afterPropertiesSet connect: http://hello-spring.dev call: http://hello-spring.devmessage = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€ NetworkClient.destroy close http://hello-spring.dev      InitializingBeanì€ afterPropertiesSet() ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•¨            afterPropertiesSet(): ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚˜ë©´ í˜¸ì¶œ           DisposableBeanì€ destory() ë©”ì„œë“œë¡œ ì†Œë©¸ì„ ì§€ì›í•¨            destroy(): ë¹ˆì´ ì¢…ë£Œë  ë•Œ í˜¸ì¶œ           ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì       ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë‹¤. í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.   ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. (afterPropertiesSet(), destroy()ë¡œ ê³ ì •ëœë‹¤.)   ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.   ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™”, ì¢…ë£Œ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°(2003ë…„)ì— ë‚˜ì˜¨ ë°©ë²•ë“¤ì´ê³ , ì§€ê¸ˆì€ ë‹¤ìŒì˜ ë” ë‚˜ì€ ë°©ë²•ë“¤ì´ ìˆì–´ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.   ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ ì§€ì •   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class NetworkClient {      ...      public void init() throws Exception {         System.out.println(\"NetworkClient.init\");         connect();         call(\"ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€\");     }      public void close() throws Exception {         System.out.println(\"NetworkClient.close\");         disconnect();     } }   1 2 3 4 5 6 7 8 9 @Configuration static class LifeCycleConfig {     @Bean(initMethod = \"init\", destroyMethod = \"close\")     public NetworkClient networkClient() {         NetworkClient networkClient = new NetworkClient();         networkClient.setUrl(\"http://hello-spring.dev\");         return networkClient;     } }   ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•      ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.   ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.   ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. (ê°€ì¥ í° ì¥ì )   ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡       @Beanì˜ destroyMethod ì†ì„±ì—ëŠ” íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆìŒ   ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ close, shutdown ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ”ë° @Beanì˜ destoryMethodëŠ” ê¸°ë³¸ê°’ì´ inferred(ì¶”ë¡ )ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë‹¤.   ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ close, shutdownë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤. (ì¦‰, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œí•´ì¤€ë‹¤.)   ë”°ë¼ì„œ, ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ì¢…ë£Œ ë©”ì„œë“œëŠ” ë”°ë¡œ ì ì–´ì£¼ì§€ ì•Šì•„ë„ ì˜ ë™ì‘í•œë‹¤.   ì¶”ë¡  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì‹«ìœ¼ë©´ destroyMethod=â€â€ì²˜ëŸ¼ ë¹ˆ ê³µë°±ì„ ì§€ì •í•˜ë©´ ëœë‹¤. (êµ³ì´ ê·¸ëŸ´ì¼ì€ ì—†ê² ì§€..;;)   ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy   ê²°ë¡ ë¶€í„° ì–˜ê¸°í•˜ë©´ ì´ ë°©ë²•ì„ ì“°ë©´ ëœë‹¤!   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package hello.core.lifecycle;  import javax.annotation.PostConstruct; import javax.annotation.PreDestroy;  public class NetworkClient {      ...      @PostConstruct     public void init() {         System.out.println(\"NetworkClient.init\");         connect();         call(\"ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€\");     }      @PreDestroy     public void close() {         System.out.println(\"NetworkClient.close\");         disconnect();     } }   @PostConstruct , @PreDestroy ì´ ë‘ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ê°€ì¥ í¸ë¦¬í•˜ê²Œ ì´ˆê¸°í™”ì™€ ì¢…ë£Œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³  javaxë¡œ ì‹œì‘í•˜ëŠ” ì• ë…¸í…Œì´ì…˜ì€ ìë°”ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤. ë”°ë¼ì„œ, ìŠ¤í”„ë§ì´ ì•„ë‹ˆê³  ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆë¥¼ ì“´ë‹¤ê³  í•´ë„ ê·¸ëŒ€ë¡œ ì ìš©ëœë‹¤.     @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ íŠ¹ì§•      ìµœì‹  ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤.   ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´ ë˜ë¯€ë¡œ ë§¤ìš° í¸ë¦¬í•˜ë‹¤.   íŒ¨í‚¤ì§€ë¥¼ ì˜ ë³´ë©´ javax.annotation.PostConstruct ì´ë‹¤. ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ ê¸°ìˆ ì´ ì•„ë‹ˆê³  ìë°” í‘œì¤€ì´ë‹¤. ë”°ë¼ì„œ, ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘í•œë‹¤.   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦°ë‹¤.   ìœ ì¼í•œ ë‹¨ì ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œ í•´ì•¼ í•˜ë©´ @Beanì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì.   ì •ë¦¬   ê¸°ë³¸ì ìœ¼ë¡œëŠ” @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê³  ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œí•´ì•¼ í•˜ë©´ @Beanì˜ initMethod, destroyMethodë¥¼ ì‚¬ìš©í•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-BeanLifeCycle/",
        "teaser": ""
      },{
        "title": "TailwindCSS ì„¤ì •",
        "excerpt":"tailwindCSSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” nodeë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ì•¼ í•œë‹¤.   node ì„¤ì¹˜   node ë²„ì „ì€ 14ë¡œ ì„¤ì¹˜í•˜ì˜€ë‹¤.   1 brew install node@14   ê°ìì˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì • íŒŒì¼ì— ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ëœë‹¤.   1 2 # í™˜ê²½ë³€ìˆ˜ ì„¤ì •í•˜ê¸° ìœ„í•´ zshrc ì—´ê¸° vi ~/.zshrc   1 export PATH=\"/usr/local/opt/node@14/bin:$PATH\"   1 2 # í™˜ê²½ë³€ìˆ˜ ì ìš© source ~/.zshrc   nodeë¥¼ ì„¤ì¹˜í•˜ì˜€ë‹¤. nodeì™€ npm ë²„ì „ì„ í™•ì¸í•˜ì—¬ ì˜ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì.   1 2 node -v npm -v   tailwindCSS ì„¤ì¹˜   ì´ì œ tailwindCSSë¥¼ ì„¤ì¹˜í•  ê±´ë° ì—ëŸ¬ë„ ë§ì´ ë‚˜ê³  ë§ì€ ì‹œë„ ëì— ì„±ê³µí•˜ì˜€ë‹¤.   ì—¬ê¸°ì„œ gulpë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•  ê±´ë° scss íŒŒì¼ì€ ì›¹ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ì—†ëŠ” ì–¸ì–´ë¼ê³  í•œë‹¤. ë”°ë¼ì„œ, ì»´íŒŒì¼ì„ í†µí•´ css íŒŒì¼ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•˜ëŠ”ë° ì´ë•Œ gulpë¥¼ ì‚¬ìš©í•œë‹¤.   í”„ë¡œì íŠ¸ ê²½ë¡œë¡œ ê°€ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.   1 npm init -y   ê·¸ í›„ package.json, gulpfile.js, assets/scss/styles.scss, tailwind.config.js íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì.   package.json   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // devDependencies ë²„ì „ì„ ì£¼ì˜í•˜ì {   \"name\": \"haedal-css\",   \"version\": \"1.0.0\",   \"description\": \"\",   \"scripts\": {     \"css\": \"gulp\"   },   \"devDependencies\": {     \"autoprefixer\": \"^9.8.8\",     \"gulp\": \"^4.0.2\",     \"gulp-concat\": \"^2.6.1\",     \"gulp-csso\": \"^4.0.1\",     \"gulp-postcss\": \"^9.0.0\",     \"gulp-sass\": \"^5.0.0\",     \"node-sass\": \"^4.14.0\",     \"postcss\": \"^8.4.14\",     \"sass\": \"^1.45.0\",     \"tailwindcss\": \"^2.2.19\"   } }      ì£¼ì˜ node ë²„ì „ì— ë”°ë¼ node-sass ë²„ì „ì´ ë‹¬ë¼ì§€ë¯€ë¡œ ì•„ë˜ ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ ì„¤ì¹˜í•œë‹¤.          gulpfile.js   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 const gulp = require('gulp')  const css = () =&gt; {     const postCSS = require('gulp-postcss')     const sass = require('gulp-sass')(require('sass'));     const minify = require('gulp-csso')     sass.compiler = require('node-sass')      return gulp         .src('assets/scss/styles.scss', {allowEmpty: true})         .pipe(sass().on('error', sass.logError))         .pipe(postCSS([             require('tailwindcss'),             require('autoprefixer')         ]))         .pipe(minify())         .pipe(gulp.dest('static/css')) };  exports.default = css   assets/scss/styles.scss   1 2 3 @tailwind base; @tailwind components; @tailwind utilities;   tailwind.config.js   1 2 3 4 5 6 7 module.exports = {   theme: {     extend: {}   },   variants: {},   plugins: [] }   ì´ì œ npm ië¥¼ í†µí•´ devDependenciesë¡œ ì„¤ì •í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•œë‹¤. ë§Œì•½, ì´ë¯¸ ìƒì„±ëœ node_modules, package-lock.json íŒŒì¼ì´ ìˆë‹¤ë©´ ì‚­ì œí•˜ê³  ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤.   1 npm i   ê·¸ëŸ¬ë‚˜, ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤â€¦ğŸ˜¢   1 2 3 4 5 6 7 8 9 10 11 12 13 gyp WARN install got an error, rolling back install gyp ERR! configure error  gyp ERR! stack Error: unable to get local issuer certificate gyp ERR! stack     at TLSSocket.onConnectSecure (_tls_wrap.js:1515:34) gyp ERR! stack     at TLSSocket.emit (events.js:400:28) gyp ERR! stack     at TLSSocket._finishInit (_tls_wrap.js:937:8) gyp ERR! stack     at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:709:12) gyp ERR! System Darwin 22.1.0 gyp ERR! command \"/usr/local/Cellar/node@14/14.21.1/bin/node\" \"/usr/local/Cellar/node@14/14.21.1/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\" gyp ERR! cwd /Users/seungmi/dev/haedal/haedal-css/node_modules/fsevents gyp ERR! node -v v14.21.1 gyp ERR! node-gyp -v v5.1.0 gyp ERR! not ok   êµ¬ê¸€ë§ì„ í†µí•´ í•´ê²°í•˜ì˜€ë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ë©´ ëœë‹¤.   1 2 3 4 5 6 7 8 9 10 11 $ cd ~  $ echo quit | openssl s_client -showcerts -servername www.naver.com -connect www.naver.com:443 &gt; cacert.pem  $ npm config set cafile ~/cacert.pem --global  $ export NODE_EXTRA_CA_CERTS=~/cacert.pem  $ cd ~/workspace/myApp  $ npm i   ì´ì œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì»´íŒŒì¼ í•œë‹¤. ì»´íŒŒì¼ì´ ì™„ë£Œë˜ë©´ static/css/styles.css íŒŒì¼ì´ ìƒì„±ëœë‹¤.   1 npm run css   ì´ì œ tailwindCSSë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆë‹¤. cssê°€ ì˜ ì ìš©ë˜ëŠ”ì§€ ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ í™•ì¸í•´ë³´ì. ê·¸ë¦¼ê³¼ ê°™ì´ ë‚˜ì˜¤ë©´ ì˜ ì ìš©ëœ ê²ƒì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 &lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt;     &lt;meta charset=\"UTF-8\"&gt;     &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;     &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;     &lt;link href=\"./static/css/styles.css\" rel=\"stylesheet\"&gt;     &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt;     &lt;div class=\"block m-4\"&gt;         &lt;button class=\"px-4 py-2 mr-2 text-white bg-red-500 rounded-3xl\"&gt;ë¹¨ê°„ìƒ‰ ë²„íŠ¼&lt;/button&gt;         &lt;button class=\"px-8 py-3 mr-2 font-semibold text-white bg-green-700\"&gt;ë…¹ìƒ‰ ë²„íŠ¼&lt;/button&gt;         &lt;button class=\"px-16 py-5 text-2xl text-white bg-black rounded-2xl\"&gt;ê²€ì€ìƒ‰ ë²„íŠ¼&lt;/button&gt;     &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;     ","categories": ["TailwindCSS"],
        "tags": ["TailwindCSS","CSS"],
        "url": "/tailwindcss/TailwindCSS-settings/",
        "teaser": ""
      },{
        "title": "ë‚´ë¶€ í´ë˜ìŠ¤",
        "excerpt":"ë‚´ë¶€ í´ë˜ìŠ¤ë€?   ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ ë‚´ì— ì„ ì–¸ëœ í´ë˜ìŠ¤ë‹¤. í´ë˜ìŠ¤ì— ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ëŠ” ì´ìœ ëŠ” ë‘ í´ë˜ìŠ¤ê°€ ì„œë¡œ ê¸´ë°€í•œ ê´€ê³„ì— ìˆê¸° ë•Œë¬¸ì´ë‹¤.   ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì¥ì       ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë“¤ì„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.   ì½”ë“œì˜ ë³µì¡ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 class A {     ... }  class B {     ... }   1 2 3 4 5 6 7 8 // ì™¸ë¶€ í´ë˜ìŠ¤(outer class) class A { // Bì˜ ì™¸ë¶€ í´ë˜ìŠ¤      // ë‚´ë¶€ í´ë˜ìŠ¤(inner class)     class B { // Aì˜ ë‚´ë¶€ í´ë˜ìŠ¤         ...     } }   ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì¢…ë¥˜ì™€ íŠ¹ì§•   ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì¢…ë¥˜ëŠ” ë³€ìˆ˜ì˜ ì„ ì–¸ìœ„ì¹˜ì— ë”°ë¥¸ ì¢…ë¥˜ì™€ ê°™ë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ë§ˆì¹˜ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œ ê²ƒê³¼ ê°™ì€ ìœ„ì¹˜ì— ì„ ì–¸í•  ìˆ˜ ìˆìœ¼ë©°, ë³€ìˆ˜ì˜ ì„ ì–¸ìœ„ì¹˜ì— ë”°ë¼ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜, í´ë˜ìŠ¤ ë³€ìˆ˜, ì§€ì—­ ë³€ìˆ˜ë¡œ êµ¬ë¶„ë˜ëŠ” ê²ƒê³¼ ê°™ì´ ë‚´ë¶€ í´ë˜ìŠ¤ë„ ì„ ì–¸ìœ„ì¹˜ì— ë”°ë¼ ì•„ë˜ì™€ ê°™ì´ êµ¬ë¶„ëœë‹¤.                  ë‚´ë¶€ í´ë˜ìŠ¤       íŠ¹ì§•                       ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤       ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë³€ìˆ˜ ì„ ì–¸ìœ„ì¹˜ì— ì„ ì–¸í•˜ë©°, ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì²˜ëŸ¼ ë‹¤ë£¨ì–´ì§„ë‹¤. ì£¼ë¡œ ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë“¤ê³¼ ê´€ë ¨ëœ ì‘ì—…ì— ì‚¬ìš©ë  ëª©ì ìœ¼ë¡œ ì„ ì–¸ëœë‹¤.                 ìŠ¤íƒœí‹± í´ë˜ìŠ¤       ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë³€ìˆ˜ ì„ ì–¸ìœ„ì¹˜ì— ì„ ì–¸í•˜ë©° ì™¸ë¶€ í´ë˜ìŠ¤ì˜ static ë©¤ë²„ì²˜ëŸ¼ ë‹¤ë£¨ì–´ì§„ë‹¤. ì£¼ë¡œ ì™¸ë¶€ í´ë˜ìŠ¤ì˜ static ë©¤ë²„, íŠ¹íˆ static ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ëª©ì ìœ¼ë¡œ ì„ ì–¸ëœë‹¤.                 ì§€ì—­ í´ë˜ìŠ¤       ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë‚˜ ì´ˆê¸°í™” ë¸”ëŸ­ ì•ˆì— ì„ ì–¸í•˜ë©°, ì„ ì–¸ëœ ì˜ì—­ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.                 ìµëª… í´ë˜ìŠ¤       í´ë˜ìŠ¤ì˜ ì„ ì–¸ê³¼ ê°ì²´ì˜ ìƒì„±ì„ ë™ì‹œì— í•˜ëŠ” ì´ë¦„ì—†ëŠ” í´ë˜ìŠ¤(ì¼íšŒìš©)           1 2 3 4 5 6 7 8 9 10 11 12 13 14  class A {      // ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤     class InstanceInner {}      // ìŠ¤íƒœí‹± í´ë˜ìŠ¤     static class StaticInner {}      void methodA() {         // ì§€ì—­ í´ë˜ìŠ¤         class LocalInner {}     }     }      ì°¸ê³  ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì„ ì–¸ê³¼ ë³€ìˆ˜ì˜ ì„ ì–¸     ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ë³€ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì„ ì–¸ëœ ìœ„ì¹˜ì— ë”°ë¼ ì¢…ë¥˜ê°€ ë‹¬ë¼ì§„ë‹¤. ë˜í•œ, ìœ íš¨ë²”ìœ„(scope)ì™€ ì ‘ê·¼ì„±(accessibility)ë„ ë³€ìˆ˜ì™€ ë™ì¼í•˜ë‹¤.     1 2 3 4 5 6 7 8 9 // ë³€ìˆ˜ ì„ ì–¸ ìœ„ì¹˜ì— ë”°ë¥¸ ì¢…ë¥˜ class Outer {     int iv = 0; // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜     static int cv = 0; // í´ë˜ìŠ¤(ìŠ¤íƒœí‹±) ë³€ìˆ˜      void myMethod() {         int lv = 0; // ì§€ì—­ë³€ìˆ˜     } }       ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì œì–´ìì™€ ì ‘ê·¼ì„±   ë‚´ë¶€ í´ë˜ìŠ¤ë„ í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— abstractë‚˜ finalê³¼ ê°™ì€ ì œì–´ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼, ë©¤ë²„ ë³€ìˆ˜ë“¤ì²˜ëŸ¼ private, protectedê³¼ ì ‘ê·¼ì œì–´ìë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class InnerEx1 {     class InstanceInner {         int iv = 100;         //static int cv = 100; // ì˜¤ë¥˜ ë°œìƒ         final static int CONST = 100;     }      static class StaticInner {         int iv = 200;         static int cv = 200;     }      void myMethod() {         class LocalInner {             int iv = 300;             //static int cv = 300; // ì˜¤ë¥˜ ë°œìƒ             final static int CONST = 300;         }     }      public static void main(String args[]) {         System.out.println(InstanceInner.CONST);         System.out.println(StaticInner.cv);     } }   ì‹¤í–‰ê²°ê³¼   1 2 100 200   ë‚´ë¶€ í´ë˜ìŠ¤ ì¤‘ì—ì„œ ìŠ¤íƒœí‹± í´ë˜ìŠ¤ë§Œ static ë©¤ë²„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ì— static ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì•¼ í•œë‹¤ë©´ ìŠ¤íƒœí‹± í´ë˜ìŠ¤ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤. ë‹¤ë§Œ, finalê³¼ staticì´ ë™ì‹œì— ë¶™ì€ ë³€ìˆ˜ëŠ” ìƒìˆ˜ì´ë¯€ë¡œ ëª¨ë“  ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ ì •ì˜ê°€ ê°€ëŠ¥í•˜ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 package hello.core;  class InnerEx2 {     class InstanceInner {     }      static class StaticInner {     }      // ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ ê°„ì—ëŠ” ì„œë¡œ ì§ì ‘ ì ‘ê·¼ê°€ëŠ¥     InstanceInner iv = new InstanceInner();      // static ë©¤ë²„ ê°„ì—ëŠ” ì„œë¡œ ì§ì ‘ ì ‘ê·¼ê°€ëŠ¥     static StaticInner cv = new StaticInner();      static void staticMethod() {         // static ë©¤ë²„ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€         //InstanceInner obj1 = new InstanceInner(); // ì—ëŸ¬ ë°œìƒ         StaticInner obj2 = new StaticInner();          // êµ³ì´ ì ‘ê·¼ì„ í•˜ë ¤ë©´ ì™¸ë¶€ í´ë˜ìŠ¤ë¥¼ ë¨¼ì € ìƒì„±í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ìƒì„±         InnerEx2 outer = new InnerEx2();         InstanceInner obj = outer.new InstanceInner();     }      void instanceMethod() {         // ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì™€ static ë©¤ë²„ ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥         InstanceInner obj1 = new InstanceInner();         StaticInner obj2 = new StaticInner();          // ë©”ì„œë“œ ë‚´ì— ì§€ì—­ì ìœ¼ë¡œ ì„ ì–¸ëœ ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ë¶ˆê°€         //LocalInner lv = new LocalInner(); // ì—ëŸ¬ ë°œìƒ     }      void myMethod() {         class LocalInner {}          LocalInner lv = new LocalInner();     } }   ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë¥¼ ê°ì²´ ìƒì„± ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ìŠ¤íƒœí‹± í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ë¥¼ ê°ì²´ ìƒì„± ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ëŠ” ìŠ¤íƒœí‹± í´ë˜ìŠ¤ì˜ ë©¤ë²„ë“¤ì„ ê°ì²´ ìƒì„± ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ìŠ¤íƒœí‹± í´ë˜ìŠ¤ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë“¤ì„ ê°ì²´ ìƒì„± ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class InnerEx3 {     private int outerIv = 0;     static int outerCv = 0;      class InstanceInner {         int iiv = outerIv;         int icv = outerCv;     }      static class StaticInner {         //int siv = outerIv; // ì—ëŸ¬ ë°œìƒ         int scv = outerCv;     }      void myMethod() {         int lv = 0;         final int LV = 0;          class LocalInner {             int liv = outerIv;             int lcv = outerCv;              int liv3 = lv; // JDK 1.8ë¶€í„° ì—ëŸ¬ ì•ˆë‚¨             int liv4 = LV;         }     } }   ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë³€ìˆ˜ë“¤ì— ëŒ€í•œ ì ‘ê·¼ì„±ì„ ë³´ì—¬ì£¼ëŠ” ì˜ˆì œì´ë‹¤. ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì´ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì™€ static ë³€ìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ìŠ¤íƒœí‹± í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ static ë©¤ë²„ì´ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.   ìµëª… í´ë˜ìŠ¤   ìµëª… í´ë˜ìŠ¤(anonymous class)ëŠ” ë‹¤ë¥¸ ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ë‹¬ë¦¬ ì´ë¦„ì´ ì—†ë‹¤. í´ë˜ìŠ¤ì˜ ì„ ì–¸ê³¼ ê°ì²´ì˜ ìƒì„±ì„ ë™ì‹œì— í•˜ê¸° ë•Œë¬¸ì— ë‹¨ í•œë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ìˆê³  ì˜¤ì§ í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì¼íšŒìš© í´ë˜ìŠ¤ì´ë‹¤.   1 2 3 4 5 6 7 8 9 new ì¡°ìƒí´ë˜ìŠ¤ì´ë¦„() { \t// ë©¤ë²„ ì„ ì–¸ }  new êµ¬í˜„ì¸í„°í˜ì´ìŠ¤ì´ë¦„() { \t// ë©¤ë²„ ì„ ì–¸ }  // new Object {}   ì´ë¦„ì´ ì—†ê¸° ë•Œë¬¸ì— ìƒì„±ìë„ ê°€ì§ˆ ìˆ˜ ì—†ê³ , ì¡°ìƒ í´ë˜ìŠ¤ì˜ ì´ë¦„ì´ë‚˜ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ë™ì‹œì— ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜ ë‘˜ ì´ìƒì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤. ì˜¤ë¡œì§€ ë‹¨ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê±°ë‚˜ ë‹¨ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ë§Œ í•œë‹¤.   ìµëª… í´ë˜ìŠ¤ëŠ” êµ¬ë¬¸ì´ ë‹¤ì†Œ ìƒì†Œí•˜ì§€ë§Œ, ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ìµëª… í´ë˜ìŠ¤ë¡œ ë°”ê¾¸ëŠ” ì—°ìŠµì„ ëª‡ ë²ˆë§Œ í•˜ë©´ ê³§ ìµìˆ™í•´ì§ˆ ê²ƒì´ë‹¤.   ì•„ë˜ ì˜ˆì œëŠ” ìµëª…í´ë˜ìŠ¤ì˜ ì‚¬ìš© ì˜ˆì´ë‹¤.   1 2 3 4 5 6 7 8 class InnerEx4 {     Object iv = new Object() { void method() {} };     static Object cv = new Object() { void method() {} };      void method() {         Object lv = new Object() { void method() {} };     } }   ìœ„ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ë©´ 4ê°œì˜ í´ë˜ìŠ¤íŒŒì¼ì´ ìƒì„±ëœë‹¤.   1 2 3 4 InnerEx4.class InnerEx4$1.class &lt;- ìµëª… í´ë˜ìŠ¤ InnerEx4$2.class &lt;- ìµëª… í´ë˜ìŠ¤ InnerEx4$3.class &lt;- ìµëª… í´ë˜ìŠ¤   ìµëª… í´ë˜ìŠ¤ëŠ” ì´ë¦„ì´ ì—†ê¸° ë•Œë¬¸ì— ì™¸ë¶€ í´ë˜ìŠ¤ëª…$ìˆ«ì.classì˜ í˜•ì‹ìœ¼ë¡œ í´ë˜ìŠ¤ íŒŒì¼ëª…ì´ ê²°ì •ëœë‹¤.   ìµëª… í´ë˜ìŠ¤ ì ìš© ì „   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package hello.core;  import java.awt.*; import java.awt.event.ActionEvent; import java.awt.event.ActionListener;  class InnerEx5 {     public static void main(String[] args) {         Button b = new Button(\"Start\");         b.addActionListener(new EventHandler());     } }  class EventHandler implements ActionListener {     public void actionPerformed(ActionEvent e) {         System.out.println(\"ActionEvent occurred!!!\");     } }   ìµëª… í´ë˜ìŠ¤ ì ìš© í›„   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 package hello.core;  import java.awt.*; import java.awt.event.ActionEvent; import java.awt.event.ActionListener;  public class InnerEx6 {     public static void main(String[] args) {         Button b = new Button(\"Start\");         b.addActionListener(new ActionListener() {             public void actionPerformed(ActionEvent e) {                 System.out.println(\"ActionEvent occurred!!!\");             }         });     } }   InnerEx5ë¥¼ ìµëª… í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ë³€ê²½í•œ ê²ƒì´ InnerEx6ì´ë‹¤. ë¨¼ì € ë‘ ê°œì˜ ë…ë¦½ëœ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œ í›„ ë‹¤ì‹œ ìµëª… í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ë³€ê²½í•˜ë©´ ë³´ë‹¤ ì‰½ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-InnerClass/",
        "teaser": ""
      },{
        "title": "ì§€ë„¤ë¦­ìŠ¤(Generics)",
        "excerpt":"ì§€ë„¤ë¦­ìŠ¤(Generics)   ì§€ë„¤ë¦­ìŠ¤ëŠ” ì»´íŒŒì¼ ì‹œ íƒ€ì…ì„ ì²´í¬í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ í•˜ë©° ê°ì²´ì˜ íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì´ê³  í˜•ë³€í™˜ì˜ ë²ˆê±°ë¡œìš´ì„ ì¤„ì—¬ì¤€ë‹¤.   ì»´íŒŒì¼ ì²´í¬   ì»´íŒŒì¼ ì‹œ íƒ€ì…ì„ ì²´í¬í•´ì£¼ëŠ” ê¸°ëŠ¥ (compile-time type check) - JDK 1.5   ì§€ë„¤ë¦­ìŠ¤ ì ìš© ì „   1 2 3 4 ArrayList tvList = new ArrayList();  tvList.add(new Tv()); // OK tvList.add(new Audio()); // OK   ArrayListëŠ” Object ë°°ì—´ì„ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ ëª¨ë“  ì¢…ë¥˜ì˜ ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, Tv íƒ€ì…ë§Œ ì €ì¥í•˜ê³  ì‹¶ì–´ë„ tvList.add(new Audio());ì²˜ëŸ¼ ë‹¤ë¥¸ íƒ€ì…ì„ ì €ì¥í•´ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.   ì§€ë„¤ë¦­ìŠ¤ ì ìš© í›„   1 2 3 4 ArrayList&lt;Tv&gt; tvList = new ArrayList&lt;Tv&gt;();  tvList.add(new Tv()); // OK tvList.add(new Audio()); // ì»´íŒŒì¼ ì—ëŸ¬. Tv ì™¸ì— ë‹¤ë¥¸ íƒ€ì…ì€ ì €ì¥ ë¶ˆê°€   í•˜ì§€ë§Œ, ì§€ë„¤ë¦­ìŠ¤ê°€ ë„ì…ë˜ë©´ì„œ íƒ€ì…(Tv)ì„ ì§€ì •í•´ì£¼ê³  ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ í•´ë‹¹ íƒ€ì…ì„ ì œì™¸í•œ ë‹¤ë¥¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. ì¦‰, ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì…ì„ ì²´í¬í•´ì¤€ë‹¤.   í˜•ë³€í™˜ ì²´í¬   ê°ì²´ì˜ íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì´ê³  í˜•ë³€í™˜ì˜ ë²ˆê±°ë¡œì›€ì„ ì¤„ì—¬ì¤€ë‹¤.   ì§€ë„¤ë¦­ìŠ¤ ì‚¬ìš© ì „   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class GenericTest {      public static void main(String[] args) {         // JDK 1.5 ì´í›„         ArrayList&lt;Object&gt; list = new ArrayList&lt;Object&gt;(); // ì•„ë˜ì™€ ê°™ì€ ì½”ë“œì´ë‹¤.  //        ArrayList list = new ArrayList(); // JDK 1.5 ì´ì „, ìœ„ì—ì²˜ëŸ¼ ì“´ë‹¤ê³  ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì´ë ‡ê²Œ ì“°ëŠ”ê²Œ ì¢‹ë‹¤.          list.add(10);         list.add(20);         list.add(\"30\");          Integer i = (Integer) list.get(2); // ì»´íŒŒì¼ OK, ì‹¤ì œ ì‹¤í–‰ ì‹œ í˜•ë³€í™˜ ì—ëŸ¬(ClassCastException)ê°€ ë°œìƒí•œë‹¤.         System.out.println(\"list = \" + list);     } }   ArrayListê°€ Object íƒ€ì…ì´ë¯€ë¡œ í˜•ë³€í™˜ì„ í•´ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆë‹¤. í˜•ë³€í™˜ ì—ëŸ¬ëŠ” ì‹¤í–‰ ì‹œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì´ë‹¤. ì‹¤í–‰ ì‹œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë³´ë‹¤ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì¢‹ì€ ì—ëŸ¬ì´ë‹¤.   ì§€ë„¤ë¦­ìŠ¤ ì‚¬ìš© í›„   1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class GenericTest {      public static void main(String[] args) {         ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();         list.add(10);         list.add(20); //        list.add(\"30\"); // ì§€ë„¤ë¦­ìŠ¤ ë•ë¶„ì— íƒ€ì…ì²´í¬ê°€ ê°•í™”ë˜ì–´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•¨         list.add(30);  //        Integer i = (Integer) list.get(2);         Integer i = list.get(2); // í˜•ë³€í™˜ ìƒëµ ê°€ëŠ¥         System.out.println(\"list = \" + list);     } }   ì§€ë„¤ë¦­ìŠ¤ ë•ë¶„ì— íƒ€ì…ì²´í¬ê°€ ê°•í™”ë˜ì–´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ, ê°œë°œìëŠ” ì½”ë“œë¥¼ ì˜ëª» ì‘ì„±í•œ ê²ƒì„ ë°”ë¡œ ì•Œ ìˆ˜ ìˆë‹¤. ë˜í•œ, ì´ë¯¸ íƒ€ì…ì„ ì•Œê³  ìˆê¸° ë•Œë¬¸ì— í˜•ë³€í™˜ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.      ì°¸ê³  í˜•ë³€í™˜ ì—ëŸ¬(ClassCastException)ëŠ” RuntimeExceptionì´ë‹¤. RuntimeExceptionì€ ì‹¤í–‰ ì¤‘ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì´ë‹¤. ì‹¤í–‰ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒë³´ë‹¤ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì¢‹ì€ ì—ëŸ¬ì´ë‹¤.     ì •ë¦¬í•˜ìë©´, ì§€ë„¤ë¦­ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì»´íŒŒì¼ ì—ëŸ¬ë¡œ ëŒì–´ì˜¤ê¸° ë•Œë¬¸ì— ì¢‹ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ë° ìˆì–´ ë” ì í•©í•˜ë‹¤.   íƒ€ì… ë³€ìˆ˜   ì¼ë°˜ í´ë˜ìŠ¤ì—ì„  Object íƒ€ì…ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì§€ë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ë•ŒëŠ” Object íƒ€ì… ëŒ€ì‹  íƒ€ì… ë³€ìˆ˜(E)ë¥¼ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ í´ë˜ìŠ¤(Object íƒ€ì… ì‚¬ìš©)ì—ì„œ ì§€ë„¤ë¦­ í´ë˜ìŠ¤(íƒ€ì… ë³€ìˆ˜ E)ë¡œ ë³€ê²½ë˜ì—ˆë‹¤. (JDK 1.5ë¶€í„° ë³€ê²½)   ì§€ë„¤ë¦­ í´ë˜ìŠ¤ëŠ” íƒ€ì… ë³€ìˆ˜ Eë¥¼ ì„ ì–¸í•œë‹¤.   1 2 3 4 5 6 public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; {     private transient E[] elementData;     public boolean add(E o) {}     public E get(int index) {}     ... }   íƒ€ì… ë³€ìˆ˜ì— ëŒ€ì…í•˜ê¸°   ê°ì²´ë¥¼ ìƒì„± ì‹œ, íƒ€ì… ë³€ìˆ˜(E) ëŒ€ì‹  ì‹¤ì œ íƒ€ì…(Tv)ì„ ì§€ì •(ëŒ€ì…)í•œë‹¤. ì°¸ì¡°ë³€ìˆ˜ì™€ ìƒì„±ìì— ë„£ì–´ì£¼ë©° íƒ€ì…ì´ ì¼ì¹˜ í•´ì•¼ í•œë‹¤.   1 2 // íƒ€ì… ë³€ìˆ˜ E ëŒ€ì‹ ì— ì‹¤ì œ íƒ€ì… Tvë¥¼ ëŒ€ì… ArrayList&lt;Tv&gt; tvList = new ArrayList&lt;Tv&gt;();   E(íƒ€ì… ë³€ìˆ˜) ì—ì„œ Tv(ì‹¤ì œ íƒ€ì…)ë¡œ ë³€ê²½í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ëœë‹¤. (Tvê°€ Eì— ëŒ€ì…ë¨)   1 2 3 4 5 6 public class ArrayList&lt;Tv&gt; extends AbstractList&lt;Tv&gt; {     private transient Tv[] elementData;     public boolean add(Tv o) {}     public Tv get(int index) {}     ... }   íƒ€ì… ë³€ìˆ˜ ëŒ€ì‹  ì‹¤ì œ íƒ€ì…(ì—¬ê¸°ì„  Tv)ì´ ì§€ì •ë˜ë©´, í˜•ë³€í™˜ ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤.   1 2 3 4 5 ArrayList tvList = new ArrayList();  tvList.add(new Tv()); Tv t = (Tv)tvList.get(0); // ì°¸ì¡°ë³€ìˆ˜ëŠ” Tv, tvList.get(0)ëŠ” Objectì´ë¯€ë¡œ íƒ€ì… ë¶ˆì¼ì¹˜. ë”°ë¼ì„œ, í˜•ë³€í™˜ì´ í•„ìš”   1 2 3 4 ArrayList&lt;Tv&gt; tvList = new ArrayList&lt;Tv&gt;();  tvList.add(new Tv()); Tv t = tvList.get(0); // í˜•ë³€í™˜ ë¶ˆí•„ìš”   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Tv { }  class Audio { }  public class GenericTest {      public static void main(String[] args) {         /*ArrayList&lt;Object&gt; list = new ArrayList&lt;&gt;();         list.add(new Tv());         list.add(new Audio());         Tv t = (Tv) list.get(0); // í˜•ë³€í™˜ í•´ì£¼ì–´ì•¼ í•œë‹¤.*/          ArrayList&lt;Tv&gt; list = new ArrayList&lt;Tv&gt;(); // Tv íƒ€ì…ì˜ ê°ì²´ë§Œ ì €ì¥ ê°€ëŠ¥         list.add(new Tv()); //        list.add(new Audio()); // ì—ëŸ¬ ë°œìƒ          Tv t = list.get(0); // í˜•ë³€í™˜ ë¶ˆí•„ìš”     } }   ì§€ë„¤ë¦­ìŠ¤ ìš©ì–´      Box: `ì§€ë„¤ë¦­ í´ë˜ìŠ¤`. Tì˜ Box ë˜ëŠ” T Boxë¼ê³  ì½ëŠ”ë‹¤.   T: íƒ€ì… ë³€ìˆ˜ ë˜ëŠ” íƒ€ì… ë§¤ê°œë³€ìˆ˜(TëŠ” íƒ€ì… ë¬¸ì)   Box: ì›ì‹œ íƒ€ì…(raw type) ì¼ë°˜í´ë˜ìŠ¤   1 2 class Box&lt;T&gt; {} Box&lt;String&gt; b = new Box&lt;String&gt;(); // ìƒì„±í•  ë•Œë§ˆë‹¤ ë‹¤ë¥¸ íƒ€ì…ì„ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤.   ì§€ë„¤ë¦­ íƒ€ì…ê³¼ ë‹¤í˜•ì„±   ì°¸ì¡° ë³€ìˆ˜ì™€ ìƒì„±ìì˜ ëŒ€ì…ëœ íƒ€ì…ì€ ì¼ì¹˜í•´ì•¼ í•œë‹¤.   1 2 ArrayList&lt;Tv&gt; list = new ArrayList&lt;Tv&gt;(); // OK. ì¼ì¹˜ ArrayList&lt;Product&gt; list = new ArrayList&lt;Tv&gt;(); // ì—ëŸ¬. ë¶ˆì¼ì¹˜   ì§€ë„¤ë¦­ í´ë˜ìŠ¤ê°„ì˜ ë‹¤í˜•ì„±ì€ ì„±ë¦½í•œë‹¤. (ì—¬ì „íˆ ëŒ€ì…ëœ íƒ€ì…ì€ ì¼ì¹˜í•´ì•¼ í•¨)   1 2 List&lt;Tv&gt; list = new ArrayList&lt;Tv&gt;(); // OK. ë‹¤í˜•ì„± ArrayListê°€ Listë¥¼ êµ¬í˜„ List&lt;Tv&gt; list = new LinkedList&lt;Tv&gt;(); // OK. ë‹¤í˜•ì„± LinkedListê°€ Listë¥¼ êµ¬í˜„   ë§¤ê°œë³€ìˆ˜ì˜ ë‹¤í˜•ì„±ë„ ì„±ë¦½í•œë‹¤.   1 2 3 4 5 6 7 8 class Product {} class Tv extends Product {} class Audio extends Product {}  ArrayList&lt;Product&gt; list = new ArrayList&lt;Product&gt;(); list.add(new Product()); list.add(new Tv()); // TvëŠ” Productì˜ ìì†. OK list.add(new Audio()); // TvëŠ” Productì˜ ìì†. OK   ì§€ë„¤ë¦­ìŠ¤ í´ë˜ìŠ¤. ë‹¤í˜•ì„±ì— ëŒ€í•œ ì˜ˆì œ ì½”ë“œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class Product {} class Tv extends Product {} class Audio extends Product {}  public class Ex12_1 {     public static void main(String[] args) {         ArrayList&lt;Product&gt; productList = new ArrayList&lt;Product&gt;();         ArrayList&lt;Tv&gt; tvList1 = new ArrayList&lt;Tv&gt;(); //        ArrayList&lt;Product&gt; tvList2 = new ArrayList&lt;Tv&gt;(); // ì—ëŸ¬ //        List&lt;Tv&gt; tvList3 = new ArrayList&lt;Tv&gt;(); // OK. ë‹¤í˜•ì„±          productList.add(new Tv()); // public boolean add(Product e) {} : Productì™€ ê·¸ ìì†ì€ ë‹¤ OK. ì´ê²ƒì´ ë‹¤í˜•ì„±         productList.add(new Audio()); // OK.          tvList1.add(new Tv()); // public boolean add(Tv e) {} : Tv ë˜ëŠ” ê·¸ ìì† ê°ì²´ë§Œ OK. //        tvList1.add(new Audio()); // ì—ëŸ¬          printAll(productList); //        printAll(tvList1); // ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒ     }      private static void printAll(ArrayList&lt;Product&gt; list) {         for (Product p : list) {             System.out.println(\"p = \" + p);         }     } }  ","categories": ["Java"],
        "tags": ["Java"],
        "url": "/java/Java-Generic/",
        "teaser": ""
      },{
        "title": "ë¹ˆ ìŠ¤ì½”í”„",
        "excerpt":"ëª©ì°¨      ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™: SOLID   DIP, OCPì™€ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)   IoCì™€ DI   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ ë¹ˆ   ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”   ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•   ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±   ë¹ˆ ìŠ¤ì½”í”„   ë¹ˆ ìŠ¤ì½”í”„ë€?   ìŠ¤í”„ë§ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ í•¨ê»˜ ìƒì„±ë˜ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ëœë‹¤. ì´ê²ƒì€ ìŠ¤í”„ë§ ë¹ˆì´ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ë¡œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ìŠ¤ì½”í”„ëŠ” ë²ˆì—­ ê·¸ëŒ€ë¡œ ë¹ˆì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ë¥¼ ëœ»í•œë‹¤.   ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ ìŠ¤ì½”í”„ë¥¼ ì§€ì›í•œë‹¤.      ì‹±ê¸€í†¤: ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.   í”„ë¡œí† íƒ€ì…: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.   ì›¹ ê´€ë ¨ ìŠ¤ì½”í”„            request: ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„       session: ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„       application: ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„           ë¹ˆ ìŠ¤ì½”í”„ ì§€ì • ë°©ë²•   ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ìë™ ë“±ë¡   1 2 3 @Scope(\"prototype\") @Component public class HelloBean {}   ìˆ˜ë™ ë“±ë¡   1 2 3 @Scope(\"prototype\") @Bean public class HelloBean {}   ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í•œ ê²ƒì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì´ë‹¤. ì´ì œë¶€í„° í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ë¥¼ í™•ì¸í•´ë³´ì.      ì°¸ê³    ì´ì „ì— ì‚¬ìš©í–ˆë˜ ì˜ˆì œë“¤ì€ ëª¨ë‘ ì‹±ê¸€í†¤ ë¹ˆì´ì—ˆê¸° ë•Œë¬¸ì— new AnnotationConfigApplicationContext()ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ, ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ìœ¼ë¡œ ë¹ˆì´ ìë™ ë“±ë¡ë˜ëŠ” ê³¼ì •ì—ì„œ ìŠ¤í”„ë§ ë¹ˆ ê°ì²´ë„ ëª¨ë‘ ìƒì„±ë˜ì—ˆë‹¤.     í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„   ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ì¡°íšŒí•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ë°˜í™˜í•œë‹¤. ë°˜ë©´, í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì¡°íšŒí•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í•­ìƒ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.   ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì™€ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ì°¨ì´         í”„ë¡œí† íƒ€ì… ë¹ˆ ìš”ì²­ ê³¼ì •      í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìš”ì²­í•˜ëŠ” ì‹œì ì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìƒì„±í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œë‹¤.   ì´í›„ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°™ì€ ìš”ì²­ì´ ì˜¤ë©´ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.   ì •ë¦¬   ì—¬ê¸°ì„œ í•µì‹¬ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…, ì´ˆê¸°í™”ê¹Œì§€ë§Œ ì²˜ë¦¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ì— ë¹ˆì„ ë°˜í™˜í•˜ê³ , ì´í›„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìƒì„±ëœ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. í”„ë¡œí† íƒ€ì… ë¹ˆì„ ê´€ë¦¬í•  ì±…ì„ì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ë°›ì€ í´ë¼ì´ì–¸íŠ¸ì— ìˆë‹¤. ê·¸ë˜ì„œ @PreDestory ê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.   í”„ë¡œí† íƒ€ì… ë¹ˆì˜ íŠ¹ì§•      ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ëœë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™”ê¹Œì§€ë§Œ ê´€ì—¬í•œë‹¤.   ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.   ê·¸ë˜ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì¡°íšŒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ì¢…ë£Œ ë©”ì„œë“œì— ëŒ€í•œ í˜¸ì¶œë„ í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ í•´ì•¼í•œë‹¤.      ì°¸ê³  í”„ë¡œí† íƒ€ì… ë¹ˆì€ ì–¸ì œ ì‚¬ìš©ë ê¹Œ?   ìš”ì²­í•  ë•Œë§ˆë‹¤ ê°ì²´ë¥¼ í•­ìƒ ìƒˆë¡œ ìƒì„±í•´ì•¼ í•˜ëŠ”ë°, ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ í•„ìš”í•˜ë‹¤ë©´ ì´ë•Œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì˜ í™œìš©í•˜ì§„ ì•ŠëŠ”ë‹¤.        ì°¸ê³    ë¹ˆ ë“±ë¡ê³¼ ë¹ˆ ìƒì„± ê°™ì€ ì˜ë¯¸ì´ë‹¤.        ì°¸ê³    ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ë¥¼ ê°€ì§„ ìŠ¤í”„ë§ ë¹ˆì€ ìƒì„±ë˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì €ì¥ë˜ì–´ ê´€ë¦¬ëœë‹¤. ë°˜ë©´, í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ë¥¼ ê°€ì§„ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•˜ê²Œ ë˜ë©´ ìƒì„±ì€ ì»¨í…Œì´ë„ˆì—ì„œ í•´ì£¼ì§€ë§Œ ê´€ë¦¬ëŠ” ì»¨í…Œì´ë„ˆì—ì„œ í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ, getBean()ìœ¼ë¡œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì¡°íšŒí•˜ê²Œ ë˜ë©´ ìƒì„±í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ì°¸ì¡°ê°’ì„ ë°˜í™˜í•œë‹¤.        ì°¸ê³    í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ê²½ìš° ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë„˜ê²¨ì¤€ í´ë˜ìŠ¤ ì •ë³´(PrototypeConfig.class)ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¹ˆ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ë“±ë¡ê¹Œì§€ ì§„í–‰í•œë‹¤. (ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ì§€ ì‹¤ì œ ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤) ë¹ˆ ì¡°íšŒê°€ ë°œìƒí•´ì•¼ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ê³  ê·¸ì— ê´€ë ¨ëœ ì˜ì¡´ê´€ê³„ê°€ ì£¼ì…ëœë‹¤.     í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì™€ ì‹±ê¸€í†¤ ë¹ˆ   í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì™€ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ì‹œ ë¬¸ì œì    ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìš”ì²­í•˜ë©´ í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤. í•˜ì§€ë§Œ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©í•  ë•ŒëŠ” ì˜ë„í•œ ëŒ€ë¡œ ì˜ ë™ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆ ì§ì ‘ ìš”ì²­      í´ë¼ì´ì–¸íŠ¸ AëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒˆë¡œ ìƒì„±í•˜ì—¬ ë°˜í™˜í•œë‹¤. (í”„ë¡œí† íƒ€ì…ì— countë¼ëŠ” í•„ë“œê°€ ìˆë‹¤ë©´ ê·¸ ê°’ì˜ ì´ˆê¸°ê°’ì€ 0ì´ë‹¤.)   í´ë¼ì´ì–¸íŠ¸ëŠ” ì¡°íšŒí•œ í”„ë¡œí† íƒ€ì… ë¹ˆì— addCount()ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ count í•„ë“œë¥¼ +1 í•˜ë©´ í”„ë¡œí† íƒ€ì… ë¹ˆì˜ countëŠ” 1ì´ ëœë‹¤.   í´ë¼ì´ì–¸íŠ¸ Bê°€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­í•˜ê³  ë§ˆì°¬ê°€ì§€ë¡œ count í•„ë“œê°€ ìˆë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ addCount()ë¥¼ í˜¸ì¶œí•˜ë©´ ì´ ê°’ ì—­ì‹œ 1ì´ ëœë‹¤.   ê²°ë¡ : í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ëœë‹¤.      ì‹±ê¸€í†¤ ë¹ˆì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆ ì‚¬ìš©   ë¬¸ì œëŠ” ì‹±ê¸€í†¤ ë¹ˆì—ì„œ í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•  ë•Œ ë°œìƒí•œë‹¤.   ê°€ì • ClientBeanì´ë¼ëŠ” ì‹±ê¸€í†¤ ë¹ˆì´ ìˆë‹¤. ClientBeanì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ í†µí•´ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì£¼ì…ë°›ì•„ì„œ ì‚¬ìš©í•œë‹¤.      clientBeanì€ ì‹±ê¸€í†¤ì´ë¯€ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì ì— í•¨ê»˜ ìƒì„±ë˜ê³  ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ë°œìƒí•œë‹¤.   clientBeanì€ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì„ ì‚¬ìš©í•˜ê³  ì£¼ì… ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìš”ì²­í•œë‹¤.   ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•´ì„œ clientBeanì— ë°˜í™˜í•˜ë©° í”„ë¡œí† íƒ€ì… ë¹ˆì˜ count ê°’ì€ 0ì´ë‹¤.   ì´ì œ clientBeanì€ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ë‚´ë¶€ í•„ë“œì— ë³´ê´€í•œë‹¤. (ì •í™•íˆëŠ” ì°¸ì¡°ê°’ì„ ë³´ê´€í•¨)   í´ë¼ì´ì–¸íŠ¸ AëŠ” clientBeanì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ ë°›ê³  ì‹±ê¸€í†¤ì´ë¯€ë¡œ í•­ìƒ ê°™ì€ clientBeanì´ ë°˜í™˜ëœë‹¤.   í´ë¼ì´ì–¸íŠ¸ AëŠ” í”„ë¡œí† íƒ€ì…ì˜ addCount()ë¥¼ í˜¸ì¶œí•˜ë©° count ê°’ì€ 1ì´ ëœë‹¤.   í´ë¼ì´ì–¸íŠ¸ AëŠ” clientBeanì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ ë°›ê³  í´ë¼ì´ì–¸íŠ¸ Aì—ì„œ ì‚¬ìš©í•œ ê²ƒê³¼ ê°™ì€ clientBeanì´ ë°˜í™˜ëœë‹¤.   í´ë¼ì´ì–¸íŠ¸ BëŠ” í”„ë¡œí† íƒ€ì…ì˜ addCount()ë¥¼ í˜¸ì¶œí•˜ë©° count ê°’ì€ 2ê°€ ëœë‹¤.   ê²°ë¡ : í”„ë¡œí† íƒ€ì… ë¹ˆì€ clientBean ìƒì„± ì‹œì ì— ìƒì„±ë˜ê³  ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì´ë£¨ì–´ì¡Œê¸° ë•Œë¬¸ì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‹±ê¸€í†¤ì—ì„œ ê´€ë¦¬í•œë‹¤.   ìŠ¤í”„ë§ì€ ì¼ë°˜ì ìœ¼ë¡œ ì‹±ê¸€í†¤ ë¹ˆì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì‹±ê¸€í†¤ ë¹ˆì´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. ê·¸ëŸ°ë° ì‹±ê¸€í†¤ ë¹ˆì€ ìƒì„± ì‹œì ì—ë§Œ ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ë°›ìœ¼ë¯€ë¡œ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒˆë¡œ ìƒì„±ë˜ê¸°ëŠ” í•˜ì§€ë§Œ, ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ê³„ì† ìœ ì§€ë˜ëŠ” ê²ƒì´ ë¬¸ì œë‹¤. ì¦‰, í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ëª©ì ì— ë§ê²Œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤. ì‚¬ì‹¤ìƒ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ì‹±ê¸€í†¤ì²˜ëŸ¼ ë™ì‘í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   í”„ë¡œí† íƒ€ì… ë¹ˆì€ ê·¸ ëª©ì ì— ë§ê²Œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì£¼ì… ì‹œì ì—ë§Œ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì›í•  ê²ƒì´ë‹¤.      ì°¸ê³    ì‹±ê¸€í†¤ ê°ì²´ê°€ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ ê°ì²´ë¥¼ ë“¤ê³  ìˆì–´ ìƒê¸°ëŠ” ë¬¸ì œëŠ” ì‹±ê¸€í†¤ ê°ì²´ì˜ íŠ¹ì„± ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤.     ê·¸ë ‡ë‹¤ë©´ ì‹±ê¸€í†¤ ë¹ˆê³¼ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ, í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì´ ë­˜ê¹Œ?      ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­   ObjectFactory, ObjectProvider ì‚¬ìš©   JSR-330 Provider   í•´ê²°1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­   ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ì‹±ê¸€í†¤ ë¹ˆì´ í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìƒˆë¡œ ìš”ì²­í•˜ëŠ” ê²ƒì´ë‹¤.      ì‹¤í–‰í•´ë³´ë©´ ac.getBean()ì„ í†µí•´ì„œ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…(DI) ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼ ì§ì ‘ í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì°¾ëŠ” ê²ƒì„ Dependency Lookup(DL) ì˜ì¡´ê´€ê³„ ì¡°íšŒ(íƒìƒ‰) ì´ë¼ í•œë‹¤.   ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìŠ¤í”„ë§ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ì „ì²´ë¥¼ ì£¼ì…ë°›ê²Œ ë˜ë©´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì¢…ì†ì ì¸ ì½”ë“œê°€ ë˜ê³  ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë„ ì–´ë ¤ì›Œì§„ë‹¤.   ì§€ê¸ˆ í•„ìš”í•œ ê¸°ëŠ¥ì€ ì§€ì •í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì»¨í…Œì´ë„ˆì—ì„œ ëŒ€ì‹  ì°¾ì•„ì£¼ëŠ” DL ì •ë„ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ëŠ” ë¬´ì–¸ê°€ê°€ ìˆìœ¼ë©´ ëœë‹¤.      ì°¸ê³  DL(Dependency Lookup)   DLì€ ì˜ì¡´ì„± ê²€ìƒ‰ì´ë‹¤. ë¹ˆì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆê°€ ì œê³µí•˜ëŠ” APIë¥¼ ì´ìš©í•˜ì—¬ Beanì„ Lookupí•˜ëŠ” ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ì´ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ëŒ€í‘œì ì´ë‹¤.     í•´ê²°2. ObjectFactory, ObjectProvider   ì§€ì •í•œ ë¹ˆì„ ì»¨í…Œì´ë„ˆì—ì„œ ëŒ€ì‹  ì°¾ì•„ì£¼ëŠ” DL ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì´ ObjectProviderì´ë‹¤. ObjectFactoryì— í¸ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•œ ê²ƒì´ ObjectProviderì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 // í…ŒìŠ¤íŠ¸ë‹ˆê¹Œ ê°„í¸í•˜ê²Œ í•„ë“œì£¼ì… ì‚¬ìš© @Autowired private ObjectProvider&lt;PrototypeBean&gt; prototypeBeanProvider;  public int logic() {     PrototypeBean prototypeBean = prototypeBeanProvider.getObject();     prototypeBean.addCount();     int count = prototypeBean.getCount();     return count; }      prototypeBeanProvider.getObject()ë¥¼ í†µí•´ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ObjectProviderì˜ getObject()ë¥¼ í˜¸ì¶œí•˜ë©´ ê·¸ ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í•´ë‹¹ ë¹ˆì„ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (DL)   ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ê¸°ëŠ¥ì´ ë‹¨ìˆœí•˜ë¯€ë¡œ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê±°ë‚˜ mock ì½”ë“œë¥¼ ë§Œë“¤ê¸°ëŠ” í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤.   ObjectProviderëŠ” DL ì •ë„ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•œë‹¤.   íŠ¹ì§•      ObjectFactory: ê¸°ëŠ¥ì´ ë‹¨ìˆœ, ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš” ì—†ìœ¼ë©° ìŠ¤í”„ë§ì— ì˜ì¡´í•œë‹¤.   ObjectProvider: ObjectFactory ìƒì†, ì˜µì…˜, ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë“± í¸ì˜ ê¸°ëŠ¥ì´ ë§ê³ , ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš” ì—†ìœ¼ë©° ìŠ¤í”„ë§ì— ì˜ì¡´í•œë‹¤.   í•´ê²°3. JSR-330 Provider   ë§ˆì§€ë§‰ ë°©ë²•ì€ javax.inject.Providerë¼ëŠ” JSR-330 ìë°” í‘œì¤€ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.   build.gradleì— ì¶”ê°€   1 implementation 'javax.inject:javax.inject:1'   1 2 3 4 5 6 7 8 9 @Autowired private Provider&lt;PrototypeBean&gt; provider;  public int logic() {     PrototypeBean prototypeBean = provider.get();     prototypeBean.addCount();     int count = prototypeBean.getCount();     return count; }      ì‹¤í–‰í•´ë³´ë©´ provider.get()ì„ í†µí•´ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   providerì˜ get()ì„ í˜¸ì¶œí•˜ë©´ ë‚´ë¶€ì—ì„œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í•´ë‹¹ ë¹ˆì„ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (DL)   ìë°” í‘œì¤€, ê¸°ëŠ¥ì´ ë‹¨ìˆœí•˜ì—¬ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê±°ë‚˜ mock ì½”ë“œë¥¼ ë§Œë“¤ê¸° ì‰½ë‹¤.   ProviderëŠ” DL ì •ë„ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•œë‹¤.   íŠ¹ì§•      get() ë©”ì„œë“œ í•˜ë‚˜ë¡œ ê¸°ëŠ¥ì´ ë§¤ìš° ë‹¨ìˆœí•˜ë‹¤.   ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë‹¤.   ìë°” í‘œì¤€ì´ë¯€ë¡œ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì •ë¦¬      ê·¸ëŸ¬ë©´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì–¸ì œ ì‚¬ìš©í• ê¹Œ? ë§¤ë²ˆ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ ìƒˆë¡œìš´ ê°ì²´ê°€ í•„ìš”í•˜ë©´ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ê·¸ëŸ°ë° ì‹¤ë¬´ì—ì„œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•´ë³´ë©´, ì‹±ê¸€í†¤ ë¹ˆìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¼ì€ ë§¤ìš° ë“œë¬¼ë‹¤.   ObjectProvider, JSR330 Provider ë“±ì€ í”„ë¡œí† íƒ€ì… ë¿ë§Œ ì•„ë‹ˆë¼ DLì´ í•„ìš”í•œ ê²½ìš°ëŠ” ì–¸ì œë“ ì§€ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³    ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì„œë“œì— @Lookup ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ, ì´ì „ ë°©ë²•ë“¤ë¡œ ì¶©ë¶„í•˜ê¸° ë•Œë¬¸ì— ìƒëµí•˜ê² ë‹¤.        ì°¸ê³    ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ìë°” í‘œì¤€(JSR-330 Provier)ê³¼ ìŠ¤í”„ë§ì´ ì œê³µ(ObjectProvider)í•˜ëŠ” ê¸°ëŠ¥ì´ ê²¹ì¹ ë•Œê°€ ë§ì´ ìˆë‹¤. ëŒ€ë¶€ë¶„ ìŠ¤í”„ë§ì´ ë” ë‹¤ì–‘í•˜ê³  í¸ë¦¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì—, íŠ¹ë³„íˆ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•  ì¼ì´ ì—†ë‹¤ë©´, ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.     ì›¹ ìŠ¤ì½”í”„   ì›¹ ìŠ¤ì½”í”„ì— ëŒ€í•´ ì•Œì•„ë³´ì.   ì›¹ ìŠ¤ì½”í”„ì˜ íŠ¹ì§•      ì›¹ ìŠ¤ì½”í”„ëŠ” ì›¹ í™˜ê²½ì—ì„œë§Œ ë™ì‘í•œë‹¤.   ì›¹ ìŠ¤ì½”í”„ëŠ” í”„ë¡œí† íƒ€ì…ê³¼ ë‹¤ë¥´ê²Œ ìŠ¤í”„ë§ì´ í•´ë‹¹ ìŠ¤ì½”í”„ì˜ ì¢…ë£Œì‹œì ê¹Œì§€ ê´€ë¦¬í•œë‹¤. ë”°ë¼ì„œ, ì¢…ë£Œ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.   ì›¹ ìŠ¤ì½”í”„ ì¢…ë¥˜      request: HTTP ìš”ì²­í•˜ë‚˜ê°€ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„, ê°ê°ì˜ HTTP ìš”ì²­ë§ˆë‹¤ ë³„ë„ì˜ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³ , ê´€ë¦¬ëœë‹¤.   session: HTTP Sessionê³¼ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„   application: ì„œí”Œë¦¿ ì»¨í…ìŠ¤íŠ¸(ServletContext)ì™€ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„   websocket: ì›¹ ì†Œì¼“ê³¼ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„   ì—¬ê¸°ì„œëŠ” request ìŠ¤ì½”í”„ë¥¼ ì˜ˆì œë¡œ ì„¤ëª…í•˜ê² ë‹¤. ë‚˜ë¨¸ì§€ë„ ë²”ìœ„ë§Œ ë‹¤ë¥´ì§€ ë™ì‘ ë°©ì‹ì€ ë¹„ìŠ·í•˜ë‹¤.   request ìŠ¤ì½”í”„ ì˜ˆì œ ë§Œë“¤ê¸°   ì›¹ ìŠ¤ì½”í”„ëŠ” ì›¹ í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ë¯€ë¡œ web í™˜ê²½ì´ ë™ì‘í•˜ë„ë¡ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ì.   build.gradleì— ì¶”ê°€   1 implementation 'org.springframework.boot:spring-boot-starter-web'      ì°¸ê³    spring-boot-starter-web ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë‚´ì¥ í†°ì¼“ ì„œë²„ë¥¼ í™œìš©í•´ì„œ ì›¹ ì„œë²„ì™€ ìŠ¤í”„ë§ì„ í•¨ê»˜ ì‹¤í–‰ì‹œí‚¨ë‹¤.        ì°¸ê³    ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì›¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ìœ¼ë©´ AnnotationConfigApplicationContextì„ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•œë‹¤. ì›¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¶”ê°€ë˜ë©´ ì›¹ê³¼ ê´€ë ¨ëœ ì¶”ê°€ ì„¤ì •ê³¼ í™˜ê²½ë“¤ì´ í•„ìš”í•˜ë¯€ë¡œ AnnotationConfigServletWebServerApplicationContextë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•œë‹¤.     request ìŠ¤ì½”í”„ ì˜ˆì œ ê°œë°œ   ë™ì‹œì— ì—¬ëŸ¬ HTTP ìš”ì²­ì´ ì˜¤ë©´ ì •í™•íˆ ì–´ë–¤ ìš”ì²­ì´ ë‚¨ê¸´ ë¡œê·¸ì¸ì§€ êµ¬ë¶„í•˜ê¸° ì–´ë µë‹¤. ì´ëŸ´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ request ìŠ¤ì½”í”„ì´ë‹¤.   ê¸°ëŠ¥ì •ì˜ ë‹¤ìŒê³¼ ê°™ì´ ë¡œê·¸ê°€ ë‚¨ë„ë¡ request ìŠ¤ì½”í”„ë¥¼ í™œìš©í•´ì„œ ì¶”ê°€ ê¸°ëŠ¥ì„  ê°œë°œí•œë‹¤.   1 2 3 4 [d06b992f...] request scope bean create [d06b992f...][http://localhost:8080/log-demo] controller test [d06b992f...][http://localhost:8080/log-demo] service id = testId [d06b992f...] request scope bean close      ê¸°ëŒ€í•˜ëŠ” ê³µí†µ í¬ë©§: [UUID][requestURL] {message}   UUIDë¥¼ ì‚¬ìš©í•´ì„œ HTTP ìš”ì²­ì„ êµ¬ë¶„í•˜ì.   requestURL ì •ë³´ë„ ì¶”ê°€ë¡œ ë„£ì–´ì„œ ì–´ë–¤ URLì„ ìš”ì²­í•´ì„œ ë‚¨ì€ ë¡œê·¸ì¸ì§€ í™•ì¸í•˜ì.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @Component @Scope(value = \"request\") public class MyLogger {      private String uuid;     private String requestURL;      public void setRequestURL(String requestURL) {         this.requestURL = requestURL;     }      public void log(String message) {         System.out.println(\"[\" + uuid + \"]\" + \"[\" + requestURL + \"]\" + message);     }      @PostConstruct     public void init() {         uuid = UUID.randomUUID().toString();         System.out.println(\"[\" + uuid + \"] request scope bean create:\" + this);     }      @PreDestroy     public void close() {         System.out.println(\"[\" + uuid + \"] request scope bean close:\" + this);     } }      ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•œ MyLogger í´ë˜ìŠ¤ì´ë‹¤.   @Scope(value = â€œrequestâ€)ë¥¼ ì‚¬ìš©í•´ì„œ request ìŠ¤ì½”í”„ë¡œ ì§€ì •í–ˆë‹¤. ì´ì œ ì´ ë¹ˆì€ HTTP ìš”ì²­ ë‹¹ í•˜ë‚˜ì”© ìƒì„±ë˜ê³ , HTTP ìš”ì²­ì´ ëë‚˜ëŠ” ì‹œì ì— ì†Œë©¸ëœë‹¤.   ì´ ë¹ˆì´ ìƒì„±ë˜ëŠ” ì‹œì ì— ìë™ìœ¼ë¡œ @PostConstruct ì´ˆê¸°í™” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ uuidë¥¼ ìƒì„±í•´ì„œ ì €ì¥í•´ë‘”ë‹¤. ì´ ë¹ˆì€ HTTP ìš”ì²­ ë‹¹ í•˜ë‚˜ì”© ìƒì„±ë˜ë¯€ë¡œ uuidë¥¼ ì €ì¥í•´ë‘ë©´ ë‹¤ë¥¸ HTTP ìš”ì²­ê³¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.   ì´ ë¹ˆì´ ì†Œë©¸ë˜ëŠ” ì‹œì ì— @PreDestroyë¥¼ ì‚¬ìš©í•´ì„œ ì¢…ë£Œ ë©”ì‹œì§€ë¥¼ ë‚¨ê¸´ë‹¤.   requestURLì€ ì´ ë¹ˆì´ ìƒì„±ë˜ëŠ” ì‹œì ì—ëŠ” ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ì™¸ë¶€ì—ì„œ setterë¡œ ì…ë ¥ ë°›ëŠ”ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 @Controller @RequiredArgsConstructor public class LogDemoController {      private final LogDemoService logDemoService;     private final MyLogger myLogger;      @RequestMapping(\"log-demo\")     @ResponseBody     public String logDemo(HttpServletRequest request) {         String requestURL = request.getRequestURL().toString();         myLogger.setRequestURL(requestURL);          myLogger.log(\"controller test\");         logDemoService.logic(\"testId\");         return \"OK\";     } }      ë¡œê±°ê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ìš© ì»¨íŠ¸ë¡¤ëŸ¬ë‹¤.      ì°¸ê³    requestURLì„ MyLoggerì— ì €ì¥í•˜ëŠ” ë¶€ë¶„ì€ ì»¨íŠ¸ë¡¤ëŸ¬ ë³´ë‹¤ëŠ” ê³µí†µ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ë‚˜ ì„œë¸”ë¦¿ í•„í„° ê°™ì€ ê³³ì„ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ì˜ˆì œì—ì„œëŠ” ë‹¨ìˆœí™”í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ìš©í•¨)     1 2 3 4 5 6 7 8 9 10 @Service @RequiredArgsConstructor public class LogDemoService {      private final MyLogger myLogger;      public void logic(String id) {         myLogger.log(\"service id = \" + id);     } }      ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œë„ ë¡œê·¸ë¥¼ ì¶œë ¥í•´ë³´ì.   request scopeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  íŒŒë¼ë¯¸í„°ë¡œ ì´ ëª¨ë“  ì •ë³´ë¥¼ ì„œë¹„ìŠ¤ ê³„ì¸µì— ë„˜ê¸´ë‹¤ë©´ íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ì„œ ì§€ì €ë¶„í•´ì§„ë‹¤. ë” ë¬¸ì œëŠ” requestURL ê°™ì€ ì›¹ê³¼ ê´€ë ¨ëœ ì •ë³´ê°€ ì›¹ê³¼ ê´€ë ¨ì—†ëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µê¹Œì§€ ë„˜ì–´ê°€ê²Œ ëœë‹¤. ì›¹ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì€ ì»¨íŠ¸ë¡¤ëŸ¬ê¹Œì§€ë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì„œë¹„ìŠ¤ ê³„ì¸µì€ ì›¹ ê¸°ìˆ ì— ì¢…ì†ë˜ì§€ ì•Šê³ , ê°€ê¸‰ì  ìˆœìˆ˜í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤.   request scopeì˜ MyLogger ë•ë¶„ì— ì´ëŸ° ë¶€ë¶„ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ì§€ ì•Šê³  MyLoggerì˜ ë©¤ë²„ë³€ìˆ˜ì— ì €ì¥í•´ì„œ ì½”ë“œì™€ ê³„ì¸µì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.   ì´ì œ ì‹¤í–‰í•˜ë©´ ì˜ ë  ê²ƒ ê°™ì§€ë§Œ ê¸°ëŒ€ì™€ëŠ” ë‹¤ë¥´ê²Œ ì‹¤í–‰ ì‹œì ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.   ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ì‹±ê¸€í†¤ ë¹ˆì€ ìƒì„±í•´ì„œ ì£¼ì…ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, request ìŠ¤ì½”í”„ ë¹ˆì€ ì•„ì§ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ ë¹ˆì€ ì‹¤ì œ ê³ ê°ì˜ ìš”ì²­ì´ ì™€ì•¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.   í•´ê²°1. ìŠ¤ì½”í”„ì™€ Provider   ìœ„ì—ì„œ ë°œìƒí•œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ ì²«ë²ˆì§¸ëŠ” ObjectProviderë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @Controller @RequiredArgsConstructor public class LogDemoController {      private final LogDemoService logDemoService;     private final ObjectProvider&lt;MyLogger&gt; myLoggerProvider;      @RequestMapping(\"log-demo\")     @ResponseBody     public String logDemo(HttpServletRequest request) throws InterruptedException {         String requestURL = request.getRequestURL().toString();         MyLogger myLogger = myLoggerProvider.getObject();         myLogger.setRequestURL(requestURL);          myLogger.log(\"controller test\");         Thread.sleep(1000);         logDemoService.logic(\"testId\");         return \"OK\";     } }   1 2 3 4 5 6 7 8 9 10 11 @Service @RequiredArgsConstructor public class LogDemoService {      private final ObjectProvider&lt;MyLogger&gt; myLoggerProvider;      public void logic(String id) {         MyLogger myLogger = myLoggerProvider.getObject();         myLogger.log(\"service id = \" + id);     } }      ObjectProvider ë•ë¶„ì— ObjectProvider.getObject()ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ê¹Œì§€ request scope ë¹ˆì˜ ìƒì„±ì„ ì§€ì—°í•  ìˆ˜ ìˆë‹¤.   ObjectProvider.getObject()ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì—ëŠ” HTTP ìš”ì²­ì´ ì§„í–‰ì¤‘ì´ë¯€ë¡œ request scope ë¹ˆì˜ ìƒì„±ì´ ì •ìƒ ì²˜ë¦¬ëœë‹¤.   ObjectProvider.getObject()ë¥¼ LogDemoController, LogDemoServiceì—ì„œ ê°ê° í•œë²ˆì”© ë”°ë¡œ í˜¸ì¶œí•´ë„ ê°™ì€ HTTP ìš”ì²­ì´ë©´ ê°™ì€ ìŠ¤í”„ë§ ë¹ˆì´ ë°˜í™˜ëœë‹¤.   ì—¬ê¸°ì„œ ë” ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.   í•´ê²°2. ìŠ¤ì½”í”„ì™€ í”„ë¡ì‹œ   í”„ë¡ì‹œ ë°©ë²•ì„ ì•Œì•„ë³´ì.   1 2 3 @Component @Scope(value = \"request\", proxyMode = ScopedProxyMode.TARGET_CLASS) public class MyLogger { ... }      proxyMode = ScopedProxyMode.TARGET_CLASSê°€ í•µì‹¬ì´ë‹¤.            ì ìš© ëŒ€ìƒì´ ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ë©´ TARGET_CLASSë¥¼ ì‚¬ìš©       ì ìš© ëŒ€ìƒì´ ì¸í„°í˜ì´ìŠ¤ë©´ INTERFACES ì‚¬ìš©           ì´ë ‡ê²Œ í•˜ë©´ MyLoggerì˜ ê°€ì§œ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‘ê³  HTTP requestì™€ ìƒê´€ ì—†ì´ ê°€ì§œ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ ë¹ˆì— ë¯¸ë¦¬ ì£¼ì…í•´ ë‘˜ ìˆ˜ ìˆë‹¤.   ì´ì œ ë‚˜ë¨¸ì§€ ì½”ë“œë¥¼ Provider ì‚¬ìš© ì´ì „ìœ¼ë¡œ ëŒë ¤ë‘”ë‹¤. ì‹¤í–‰í•´ë³´ë©´ ì˜ ë™ì‘í•œë‹¤.   ì›¹ ìŠ¤ì½”í”„ì™€ í”„ë¡ì‹œ ë™ì‘ ì›ë¦¬   ë¨¼ì € ì£¼ì…ëœ myLoggerë¥¼ í™•ì¸í•´ë³´ì   1 System.out.println(\"myLogger = \" + myLogger.getClass());   ì¶œë ¥ê²°ê³¼   1 myLogger = class hello.core.common.MyLogger$$EnhancerBySpringCGLIB$$4bb1c28b   CGLIBë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‚´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì£¼ì…í•œë‹¤.      @Scopeì˜ proxyMode = ScopedProxyMode.TARGET_CLASSë¥¼ ì„¤ì •í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” CGLIBë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ, MyLoggerë¥¼ ìƒì†ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.   ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ë©´ ìš°ë¦¬ê°€ ë“±ë¡í•œ ìˆœìˆ˜í•œ MyLogger í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼ MyLogger$$EnhancerBySpringCGLIBì´ë¼ëŠ” í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ ê°ì²´ê°€ ëŒ€ì‹  ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ê·¸ë¦¬ê³  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— myLoggerë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì§„ì§œ ëŒ€ì‹ ì— ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë“±ë¡í•œë‹¤.   ac.getBean(â€myLoggerâ€, MyLogger.class)ë¡œ ì¡°íšŒí•´ë„ í”„ë¡ì‹œ ê°ì²´ê°€ ì¡°íšŒë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.   ê·¸ë˜ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ê°€ ì£¼ì…ëœë‹¤.      ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ìš”ì²­ì´ ì˜¤ë©´ ê·¸ë•Œ ë‚´ë¶€ì—ì„œ ì§„ì§œ ë¹ˆì„ ìš”ì²­í•˜ëŠ” ìœ„ì„ ë¡œì§ì´ ë“¤ì–´ìˆë‹¤.      ì´ ê°€ì§œ í”„ë¡ì‹œ ë¹ˆì€ ë‚´ë¶€ì— ì‹¤ì œ MyLoggerë¥¼ ì°¾ëŠ” ë°©ë²•ì„ ì•Œê³  ìˆë‹¤.   í´ë¼ì´ì–¸íŠ¸ê°€ myLogger.logic()ì„ í˜¸ì¶œí•˜ë©´ ì‚¬ì‹¤ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê²ƒì´ë‹¤.   ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” request ìŠ¤ì½”í”„ì˜ ì§„ì§œ myLogger.logic()ë¥¼ í˜¸ì¶œí•œë‹¤.   ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì„œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— ì´ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œëŠ” ì‚¬ì‹¤ ì›ë³¸ì¸ì§€ ì•„ë‹Œì§€ë„ ëª¨ë¥´ê²Œ, ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ (ë‹¤í˜•ì„±)   ë™ì‘ ì •ë¦¬      CGLIBë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‚´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì£¼ì…í•œë‹¤.   ì´ ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ìš”ì²­ì´ ì˜¤ë©´ ê·¸ë•Œ ë‚´ë¶€ì—ì„œ ì‹¤ì œ ë¹ˆì„ ìš”ì²­í•˜ëŠ” ìœ„ì„ ë¡œì§ì´ ë“¤ì–´ìˆë‹¤.   ê°€ì§œ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ request scopeì™€ëŠ” ê´€ê³„ê°€ ì—†ë‹¤. ê·¸ëƒ¥ ê°€ì§œì´ê³ , ë‚´ë¶€ì— ë‹¨ìˆœí•œ ìœ„ì„ ë¡œì§ë§Œ ìˆê³ , ì‹±ê¸€í†¤ ì²˜ëŸ¼ ë™ì‘í•œë‹¤.   íŠ¹ì§• ì •ë¦¬      í”„ë¡ì‹œ ê°ì²´ ë•ë¶„ì— í´ë¼ì´ì–¸íŠ¸ëŠ” ë§ˆì¹˜ ì‹±ê¸€í†¤ ë¹ˆì„ ì‚¬ìš©í•˜ë“¯ì´ í¸ë¦¬í•˜ê²Œ request scopeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì‚¬ì‹¤ Providerë¥¼ ì‚¬ìš©í•˜ë“ , í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë“  í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ì§„ì§œ ê°ì²´ ì¡°íšŒë¥¼ ê¼­ í•„ìš”í•œ ì‹œì ê¹Œì§€ ì§€ì—°ì²˜ë¦¬ í•œë‹¤ëŠ” ì ì´ë‹¤.   ë‹¨ì§€ ì• ë…¸í…Œì´ì…˜ ì„¤ì • ë³€ê²½ë§Œìœ¼ë¡œ ì›ë³¸ ê°ì²´ë¥¼ í”„ë¡ì‹œ ê°ì²´ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ë‹¤í˜•ì„±ê³¼ DI ì»¨í…Œì´ë„ˆê°€ ê°€ì§„ í° ê°•ì ì´ë‹¤.   ê¼­ ì›¹ ìŠ¤ì½”í”„ê°€ ì•„ë‹ˆì–´ë„ í”„ë¡ì‹œëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   ì£¼ì˜ì       ë§ˆì¹˜ ì‹±ê¸€í†¤ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   ì´ëŸ° íŠ¹ë³„í•œ scopeëŠ” ê¼­ í•„ìš”í•œ ê³³ì—ë§Œ ìµœì†Œí™”í•´ì„œ ì‚¬ìš©í•˜ì. ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-BeanScope/",
        "teaser": ""
      },{
        "title": "í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ",
        "excerpt":"ë“¤ì–´ê°€ê¸° ì „ì—   í‚¤ì›Œë“œ           ì‹¤í–‰ ë‹¨ìœ„: cpu coreì—ì„œ ì‹¤í–‰í•˜ëŠ” í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œë¥¼ í¬ê´„í•˜ëŠ” ê°œë…       â†’ ì‹¤í–‰ë‹¨ìœ„ëŠ” í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ ëª¨ë‘ë¥¼ í¬ê´„í•œ ê°œë…ì´ë‹¤. ë”°ë¼ì„œ, ì‹¤í–‰ë‹¨ìœ„ë¼ê³  í–ˆì„ ë•Œ í”„ë¡œì„¸ìŠ¤ì¼ ìˆ˜ë„ ìˆê³  ìŠ¤ë ˆë“œì¼ ìˆ˜ë„ ìˆë‹¤.            (ë¶€ì—° ì„¤ëª…ì´ ì—†ëŠ”) í”„ë¡œì„¸ìŠ¤: í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ê°€ì§€ê³  ìˆëŠ” ë‹¨ì¼ ìŠ¤ë ˆë“œ í”„ë¡œì„¸ìŠ¤       â†’ í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œê°€ ì™„ì „íˆ ë‹¤ë¥¸ ë¬´ì–¸ê°€ê°€ ì•„ë‹ˆë‹¤.            ë™ì‹œì„±: í•œ ìˆœê°„ì— ì—¬ëŸ¬ê°€ì§€ ì¼ì´ ì•„ë‹ˆë¼, ì§§ì€ ì „í™˜ìœ¼ë¡œ ì—¬ëŸ¬ê°€ì§€ ì¼ì„ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì´ë‹¤.       í”„ë¡œê·¸ë¨ê³¼ í”„ë¡œì„¸ìŠ¤      í”„ë¡œê·¸ë¨: ì½”ë“œ íŒŒì¼, í”„ë¡œê·¸ë¨: ì‹¤í–‰ì‹œí‚¤ê¸° ì „ì—ëŠ” ì½”ë“œê°€ êµ¬í˜„ë˜ì–´ ìˆëŠ” íŒŒì¼ì¼ ë¿ì´ë‹¤.   í”„ë¡œì„¸ìŠ¤: í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ ë˜ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¬´ì–¸ê°€ê°€ ë˜ëŠ”ë° ê·¸ê²Œ í”„ë¡œì„¸ìŠ¤ì´ë‹¤.   ë¯¸ë¦¬ ì•Œë©´ ì¢‹ì€ Process ì§€ì‹   í”„ë¡œê·¸ë¨ì´ í”„ë¡œì„¸ìŠ¤ê°€ ë˜ë©´ì„œ 2ê°€ì§€ ì¼ì´ ì¼ì–´ë‚œë‹¤.   ì¼ë‹¨ í”„ë¡œì„¸ìŠ¤ê°€ í•„ìš”ë¡œ í•˜ëŠ” ì¬ë£Œë“¤ì´ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°„ë‹¤. ë©”ëª¨ë¦¬ ì˜ì—­ì€ 4ê°€ì§€ ì˜ì—­(Code, Data, Heap, Stack)ì´ ìˆë‹¤.      Code: ì‹¤í–‰ ëª…ë ¹ì„ í¬í•¨í•˜ëŠ” ì½”ë“œë“¤   Data: Static ë³€ìˆ˜ í˜¹ì€ Global ë³€ìˆ˜   Head: ë™ì  ë©”ëª¨ë¦¬ ì˜ì—­   Stack: ì§€ì—­ë³€ìˆ˜, ë§¤ê°œë³€ìˆ˜, ë°˜í™˜ ê°’ ë“±ë“± ì¼ì‹œì ì¸ ë°ì´í„°   ë‘ë²ˆì§¸ë¡œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” PCB(Process Control Block) ë¸”ëŸ­ì´ í”„ë¡œì„¸ìŠ¤ ìƒì„± ì‹œ ë§Œë“¤ì–´ì§„ë‹¤.      Pointer: í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì¤‘ì— ì¤€ë¹„ ìƒíƒœë‚˜ ëŒ€ì‹œ ìƒíƒœì˜ íë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ í¬ì¸í„°   Process State: í˜„ì¬ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë¥¼ ë‹´ëŠ”ë‹¤.   Process Number(ID): ê³ ìœ  ë²ˆí˜¸ë¥¼ ë‹´ëŠ” PID   Program Counter: ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ê°€ë¦¬í‚¤ëŠ” í”„ë¡œê·¸ë¨ ì¹´ìš´í„°   ë“±ë“±ì´ ìˆë‹¤.      Process &amp; Thread   í”„ë¡œì„¸ìŠ¤   ê°œë°œìëŠ” ì½”ë”©ì„ í•˜ê¸° ì „ì— ìœ íŠœë¸Œì—ì„œ â€˜ì´ë…¸ë˜ ë­ì§€â€™ íŒì†¡ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ íŠ¼ë‹¤. ê·¸ í›„ ì½”ë”©ì„ í•˜ê¸° ìœ„í•´ Intellijë¥¼ ì—°ë‹¤. ì¤‘ìš”í•œ ì•ŒëŒì´ ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ slackì„ ì¼ ë‹¤. ê·¸ë¦¬ê³  ê°œë°œ í•„ìˆ˜í…œì¸ í¬ë¡¬ì„ í‚¨ë‹¤. ì´ë ‡ê²Œ ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ ì—¬ëŸ¬ê°€ì§€ë¥¼ ë™ì‹œì— ì‚¬ìš©í•œë‹¤.   í•˜ì§€ë§Œ ì›ë˜ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ê¸° ìœ„í•´ì„œ CPUë¥¼ ì ìœ í•˜ê³  ìˆìœ¼ë©´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ ìƒíƒœì— ìˆì„ ìˆ˜ ì—†ë‹¤. ë…¸ë˜ë¥¼ ë“£ë‹¤ê°€ ì½”ë”©ì„ í•˜ê¸° ìœ„í•´ Intellijë¥¼ í‚¤ë©´ ë…¸ë˜ê°€ êº¼ì§€ê²Œ ëœë‹¤. ì¦‰, ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡  ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œë¶„í• , ì¦‰ ì§§ì€ í…€ì„ ë°˜ë³µí•˜ë©´ì„œ ì „í™˜í•´ì„œ ì‹¤í–‰ ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.   ë™ì‹œì— ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì€ í”„ë¡œì„¸ìŠ¤ Aì™€ Bê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì. Aë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ ì‹¤í–‰ ìƒíƒœë¡œ ì „í™˜í•˜ê³  CPUì— ì ì¬ëœë‹¤. BëŠ” ì¤€ë¹„ìƒíƒœì— ìˆë‹¤. ì´ì œ Bë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” Aë¥¼ ë¨¼ì € ì¤€ë¹„ìƒíƒœë¡œ ì „í™˜í•˜ê³  Bê°€ CPUì— ì ì¬ ë˜ì–´ì•¼ í•œë‹¤. ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ê²Œ ë ë•Œ ë°œìƒí•˜ëŠ” ê²ƒì´ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ë‹¤.      ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì€ ë§¤ìš° ë²ˆê±°ë¡œìš´ ì‘ì—…ì´ë‹¤. ì´ ë¶€ë¶„ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ ê²½ëŸ‰í™”ëœ í”„ë¡œì„¸ìŠ¤ ë²„ì „ì¸ ìŠ¤ë ˆë“œì´ë‹¤.      ì°¸ê³  ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ë€ CPUì—ì„œ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ëŒì•„ê°€ë©´ì„œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì„ ë§í•œë‹¤.     ìŠ¤ë ˆë“œ   ìŠ¤ë ˆë“œë¥¼ ê²½ëŸ‰í™”ëœ í”„ë¡œì„¸ìŠ¤ë¼ê³  ë¶€ë¥´ëŠ” ì´ìœ ëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ì•ˆì— ë‹¤ìˆ˜ì˜ ìŠ¤ë ˆë“œê°€ ìˆì„ ë•Œ ê³µìœ ë˜ëŠ” ìì›ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ êµ¬ì¡° ì¤‘ Stackì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ Code, Data, Heapì„ ëª¨ë‘ ê³µìœ í•œë‹¤. ê³µìœ ë˜ëŠ” ìì›ì´ ìˆê¸° ë•Œë¬¸ì— ì´ì „ ì²˜ëŸ¼ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ì¼ì–´ë‚  ë•Œ ìºì‹± ì ì¤‘ë¥ ì´ ì˜¬ë¼ê°„ë‹¤.      í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ ì˜ˆ   ì˜ˆë¥¼ ë“¤ì–´ ê³µìš© íšŒì˜ì‹¤ì´ ìˆê³  ê·¸ ì•ˆì—ëŠ” í‹°ë¹„, ìŠ¤í”¼ì»¤, ë¦¬ëª¨ì»¨ì´ ìˆë‹¤ê³  ê°€ì •í•˜ì. AíŒ€ì´ ë¨¼ì € íšŒì˜ì‹¤ì„ ì˜ˆì•½í•˜ì—¬ ì‚¬ìš©í–ˆë‹¤. ì´ë•Œ í”„ë¡œì„¸ìŠ¤ë¼ë©´ AíŒ€ì´ íšŒì˜ë¥¼ ë§ˆì¹˜ê³  í‹°ë¹„, ìŠ¤í”¼ì»¤, ë¦¬ëª¨ì»¨ì„ ê°€ì§€ê³  ë‚˜ê°„ë‹¤. ê·¸ ë‹¤ìŒ íŒ€ì¸ BíŒ€ì´ íšŒì˜ì‹¤ì„ ì‚¬ìš©í•˜ë ¤ë©´ í‹°ë¹„, ìŠ¤í”¼ì»¤, ë¦¬ëª¨ì»¨ì„ ê°€ì§€ê³  ì™€ì•¼ íšŒì˜ì‹¤ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜, ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë©´ ê³µìš©ìì›ì¸ í‹°ë¹„, ìŠ¤í”¼ì»¤, ë¦¬ëª¨ì»¨ì€ ê·¸ëŒ€ë¡œ ë‘ê³  ìì‹ ë“¤ì˜ ê°œì¸ ë…¸íŠ¸ë¶ë§Œ ê°€ì§€ê³  ì™€ì„œ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤.   Multi-process vs Multi-thread   ë©€í‹° í”„ë¡œì„¸ìŠ¤ì™€ ë©€í‹° ìŠ¤ë ˆë“œëŠ” ë‘ê°€ì§€ ê°œë…ì´ ëª¨ë‘ ì²˜ë¦¬ ë°©ì‹ì˜ ì¼ì¢…ì´ë‹¤. í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì²˜ë¦¬ ë°©ì‹ì´ë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤.   í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì—¬ëŸ¬ê°€ì§€ ì¼ì„ ì²˜ë¦¬í•  ë•Œê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ ìš”ì²­í•˜ëŠ” ìƒí™©ì´ ìˆë‹¤ê³  ê°€ì •í•œë‹¤. í•œ í”„ë¡œì„¸ìŠ¤ëŠ” ë§¤ë²ˆ í•˜ë‚˜ì˜ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ê°€ ì—†ë‹¤. ê·¸ë˜ì„œ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ fork()í•´ì„œ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì¼ì„ ì²˜ë¦¬í•œë‹¤. ì´ë•Œ ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨ì™€ ë³„ê°œì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì„ í™•ë³´í•˜ê²Œ ëœë‹¤.   ë°˜ë©´, ìŠ¤ë ˆë“œëŠ” í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ êµ¬ë¶„ì´ ì§€ì–´ì§„ ì‹¤í–‰ ë‹¨ìœ„ì´ë‹¤. í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì‘ì—…ì˜ ë‹¨ìœ„ê°€ ë‚˜ëˆ ì§ˆ ë•Œê°€ ë§ë‹¤. (Intellijë¥¼ ì‚¬ìš©í•˜ëŠ”ë° í…ŒìŠ¤íŠ¸ë„ ì‹¤í–‰í•˜ë©´ì„œ ë™ì‹œì— ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²½ìš°) ì´ë•Œ ê°ê°ì˜ ìŠ¤ë ˆë“œê°€ ê·¸ ì‘ì—…ë“¤ì„ ë‹´ë‹¹í•œë‹¤.   ì°¨ì´ì    ë©€í‹° í”„ë¡œì„¸ìŠ¤ëŠ” ê° í”„ë¡œì„¸ìŠ¤ì— ë…ë¦½ì ì´ë¯€ë¡œ IPCë¥¼ ì‚¬ìš©í•´ í†µì‹ í•´ì•¼ í•œë‹¤. ìì› ì†Œëª¨ì ì´ë©° ê°œë³„ ë©”ëª¨ë¦¬ ì°¨ì§€í•œë‹¤. ë”°ë¼ì„œ, ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ì´ í¬ë‹¤. í•˜ì§€ë§Œ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ë™ê¸°í™” ì‘ì—…ì´ í•„ìš”ì—†ë‹¤.   ë°˜ë©´, ë©€í‹° ìŠ¤ë ˆë“œëŠ” ìŠ¤ë ˆë“œë¼ë¦¬ ê¸´ë°€í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ, ê³µìœ ëœ ìì›ìœ¼ë¡œ í†µì‹  ë¹„ìš©ì´ ì ˆê°ë˜ê³  ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš©ì´ ì ë‹¤. ë‹¨, ê³µìœ  ìì› ê´€ë¦¬ë¥¼ í•´ì•¼í•œë‹¤. (ë™ê¸°í™” ì‘ì—…)      ì´ë ‡ê²Œ ë³´ë©´ ë©€í‹° í”„ë¡œì„¸ìŠ¤ë³´ë‹¤ ë©€í‹° ìŠ¤ë ˆë“œê°€ í›¨ì”¬ ì¢‹ì•„ë³´ì´ëŠ”ë° ì™œ ë©€í‹° í”„ë¡œì„¸ìŠ¤ë¥¼ ì´ìš©í• ê¹Œ?   ê·¸ ì´ìœ ì— ëŒ€í•œ ì˜ˆì‹œëŠ” í¬ë¡¬ê³¼ IEë¥¼ ì–˜ê¸°í•  ìˆ˜ ìˆë‹¤.   í¬ë¡¬ì€ ë©€í‹° í”„ë¡œì„¸ìŠ¤ ì‚¬ìš©, IEëŠ” ë©€í‹° ìŠ¤ë ˆë“œ ì‚¬ìš©í•œë‹¤.   IEë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë‹¤ìˆ˜ì˜ íƒ­ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê°€ ê²½ê³  ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ë©° ì°½ ì „ì²´ê°€ êº¼ì§€ëŠ” ê²½í—˜ì„ í•œì ì´ ìˆì„ ê²ƒì´ë‹¤. ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì´ìš©í–ˆê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤. ê¸´ë°€í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— í•œ ìŠ¤ë ˆë“œ(1ê°œì˜ íƒ­)ì— ë¬¸ì œê°€ ìƒê¸°ë©´ ì „ì²´ í”„ë¡œì„¸ìŠ¤ì— ì˜í–¥ì´ ìˆë‹¤. ë°˜ë©´, êµ¬ê¸€ í¬ë¡¬ì€ ë‹¤ì†Œ ë¹„íš¨ìœ¨ì ì¸ ë¶€ë¶„ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ë©€í‹° í”„ë¡œì„¸ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë©€í‹°íƒ­ ê°„ì— ì˜í–¥ì„ ëœ ë°›ëŠ”ë‹¤.   Multi-core   ë©€í‹° í”„ë¡œì„¸ìŠ¤ì™€ ë©€í‹° ìŠ¤ë ˆë“œëŠ” ì²˜ë¦¬ë°©ì‹ì˜ ì¼ì¢…ì´ê¸° ë•Œë¬¸ì— ì†Œí”„íŠ¸ì›¨ì–´ ë¶„ì•¼ì— ê°€ê¹ê³  ë©€í‹° ì½”ì–´ëŠ” í•˜ë“œì›¨ì–´ ì¸¡ë©´ì— ê°€ê¹ë‹¤. ë©€í‹° ì½”ì–´ì™€ ê´€ë ¨ëœ í‚¤ì›Œë“œëŠ” ë™ì‹œì„±ê³¼ ë³‘ë ¬ì²˜ë¦¬ì´ë‹¤.   ë™ì‹œì„±ì´ë€ í•˜ë‚˜ì˜ ì½”ì–´ì—ì„œ í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤(í˜¹ì€ ìŠ¤ë ˆë“œ)ê°€ ë²ˆê°ˆì•„ê°€ë©´ì„œ ì§„í–‰ë˜ì§€ë§Œ ë™ì‹œì— ì§„í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì´ë‹¤. (ë™ì‹œì„±ì€ ì§§ì€ ìˆœê°„ì— CPUì˜ ì‹œê°„ì„ ë¶„í• í•´ì„œ ë™ì‹œì— í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ í•œë‹¤.)   í•˜ì§€ë§Œ ë©€í‹°ì½”ì–´ëŠ” ë³‘ë ¬ì²˜ë¦¬ ì¦‰, ë¬¼ë¦¬ì ìœ¼ë¡œ ì—¬ëŸ¬ ì½”ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ìˆ˜ì˜ ì‹¤í–‰ ë‹¨ìœ„ë¥¼ í•œ ìˆœê°„ì— ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. (ë³‘ë ¬ì²˜ë¦¬ë€ ë‘˜ ì´ìƒì˜ ì½”ì–´ì—ì„œ ë™ì‹œì— í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤(í˜¹ì€ ìŠ¤ë ˆë“œ)ê°€ í•œêº¼ë²ˆì— ì§„í–‰ë˜ëŠ” ê²ƒ)      ì°¸ê³  ë¦¬ëˆ…ìŠ¤ì—ì„œ í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ     ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì—ì„œëŠ” í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œë¥¼ ë™ì¼í•˜ê²Œ ë³¸ë‹¤.     ìŠ¤ë ˆë“œëŠ” ì‚¬ìš©ì ìŠ¤ë ˆë“œì™€ ì»¤ë„ ìŠ¤ë ˆë“œë¡œ ë‚˜ë‰œë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ê° ìŠ¤ë ˆë“œë¥¼ ë‹´ë‹¹í•˜ëŠ” ë ˆë²¨ì´ í•˜ë‚˜ëŠ” ì‚¬ìš©ì ë ˆë²¨ì´ê³  í•˜ë‚˜ëŠ” ì»¤ë„ ë ˆë²¨ì´ë‹¤. ì‚¬ìš©ì ìŠ¤ë ˆë“œì™€ ì»¤ë„ ìŠ¤ë ˆë“œëŠ” ì–´ë– í•œ ì—°ê´€ê´€ê³„ê°€ ìˆë‹¤.     ë¦¬ëˆ…ìŠ¤ëŠ” ì¼ëŒ€ì¼ ëª¨ë¸ì´ë‹¤. í•˜ë‚˜ì˜ ì‚¬ìš©ì ìŠ¤ë ˆë“œë‹¹ ì»¤ë„ ìŠ¤ë ˆë“œ í•˜ë‚˜ê°€ ë§¤ì¹­ëœë‹¤. ê·¸ë˜ì„œ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ ì…ì¥ì—ì„œ ë³´ë©´ â€˜ê°ê°ì˜ ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë‹¤â€™ ë¼ê³  í‘œí˜„í•œë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì„œì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ì´ì „ì— ì„¤ëª…í–ˆë˜ í”„ë¡œì„¸ìŠ¤ê°€ ê°ê° ë‹¤ë¥¸ ë©”ëª¨ë¦¬ë¥¼ ê°€ì§„ ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•œë‹¤. ê·¸ë˜ì„œ ì´ê²ƒë“¤ì„ light weight processë¼ê³  êµ¬ë¶„í•´ì„œ ë¶€ë¥¸ë‹¤. ì´ì „ì— ì„¤ëª…í–ˆë˜ í”„ë¡œì„¸ìŠ¤ëŠ” í”„ë¡œì„¸ìŠ¤ ê³ ìœ ë²ˆí˜¸(PID)ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ë¦¬ëˆ…ìŠ¤ëŠ” ìŠ¤ë ˆë“œê°€ ê°ê° ë‹¤ë¥¸ PIDë¥¼ ê°€ì§€ê³  ìˆì„ê¹Œ? ê·¸ê±´ ì•„ë‹ˆë‹¤. í™•ì¸í•´ë³´ë©´ í•œ í”„ë¡œì„¸ìŠ¤ì˜ ìƒì„±ëœ ìŠ¤ë ˆë“œëŠ” ëª¨ë‘ ê°™ì€ PIDë¥¼ ê°€ì§€ê³  ìˆë‹¤.     ë” ìì„¸íˆ ë³´ë©´ TGIDë¼ëŠ” ìŠ¤ë ˆë“œ ê·¸ë£¹ ì•„ì´ë””ë¥¼ ê°€ì§€ê³  ìˆê³  TIDë¼ëŠ” ìŠ¤ë ˆë“œ ì•„ì´ë””ë„ ìˆë‹¤. ê·¸ë˜ì„œ ì‚¬ìš©ì ë ˆë²¨ì…ì¥ì—ì„œ ë³´ë©´ ìŠ¤ë ˆë“œ ê·¸ë£¹ ì•„ì´ë””ê°€ PIDë¡œ ë³´ì—¬ì§€ê³  ì»¤ë„ ì…ì¥ì—ì„œ ë³´ë©´ TIDê°€ PIDë¡œ ì¸ì‹ì´ ëœë‹¤. ê·¸ë˜ì„œ ê´€ì ì„ ë‹¤ë¥´ê²Œ í•´ì„œ ì´í•´ í•´ì•¼ í•œë‹¤. ê·¸ë˜ì„œ ì»¤ë„ ì…ì¥ì—ì„œëŠ” ê°ê°ì´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë³´ì´ê²Œ ëœë‹¤.          [ì°¸ì¡°] ì´ ê¸€ì€ í•´ë‹¹ ì˜ìƒ(ë§í¬)ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.  ","categories": ["CS"],
        "tags": ["CS"],
        "url": "/cs/CS-ProcessandThread/",
        "teaser": ""
      },{
        "title": "@BeforeEach, @BeforeAll ì°¨ì´",
        "excerpt":"@BeforeEach, @BeforeAll ì• ë…¸í…Œì´ì…˜ì€ JUnit5ì—ì„œ ë‚˜ì˜¨ ì• ë…¸í…Œì´ì…˜ë“¤ì´ë‹¤.   @BeforeEach, @BeforeAll ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë ¤ë©´ dependencyì— ì•„ë˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.   build.gradle   1 testImplementation('org.junit.jupiter:junit-jupiter:5.5.0')   1 import static org.junit.jupiter.api.Assertions.*;   @BeforeEach   @BeforeEachëŠ” ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œê°€ ì‹¤í–‰ë  ë•Œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œì´ë‹¤. ê°ê°ì˜ ë©”ì†Œë“œê°€ ì‹¤í–‰ ì „ì— í˜¸ì¶œë˜ì–´ ì²˜ë¦¬ëœë‹¤.      ë¦¬í„´ íƒ€ì…ìœ¼ë¡œëŠ” ë°˜ë“œì‹œ void   ì ‘ê·¼ ì œí•œìë¡œ pirvate ì‚¬ìš© ê¸ˆì§€   staticìœ¼ë¡œ ì„ ì–¸ ê¸ˆì§€      ì°¸ê³  @AfterEach ì• ë…¸í…Œì´ì…˜ ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œê°€ ì‹¤í–‰ëœ í›„ ì¢…ë£Œë˜ì–´ì•¼ í•  ë¦¬ì†ŒìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.     @BeforeAll   @BeforeAllì€ ëª¨ë“  í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— í•œ ë²ˆ ì‹¤í–‰ëœë‹¤.      ë¦¬í„´ íƒ€ì…ìœ¼ë¡œëŠ” ë°˜ë“œì‹œ void   ì ‘ê·¼ ì œí•œìë¡œ pirvate ì‚¬ìš© ê¸ˆì§€   ë°˜ë“œì‹œ staticìœ¼ë¡œ ì„ ì–¸      ì°¸ê³  @AfterAll ì• ë…¸í…Œì´ì…˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œê°€ ì‹¤í–‰ëœ í›„ í•œ ë²ˆ ì‹¤í–‰ëœë‹¤.     @BeforeEach, @BeforeAll ì˜ˆì œ   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 import org.junit.jupiter.api.*;  public class LifecycleTest {      @BeforeAll     static void init() {         System.out.println(\"LifecycleTest.init\");     }      public LifecycleTest() {         System.out.println(\"new LifecycleTest\");     }      @BeforeEach     void setUp() {         System.out.println(\"setUp\");     }      @Test     void a() {         System.out.println(\"A\");     }      @AfterEach     void tearDown() {         System.out.println(\"tearDown\");     }      @AfterAll     static void close() {         System.out.println(\"LifecycleTest.close\");     } }   1 2 3 4 5 6 7 8 9 10 11 # ì‹¤í–‰ ê²°ê³¼ LifecycleTest.init new LifecycleTest setUp A tearDown new LifecycleTest setUp B tearDown LifecycleTest.close  ","categories": ["TestCode"],
        "tags": ["TestCode","JAVA"],
        "url": "/testcode/TESTCODE-BeforeAll-BeforeEach/",
        "teaser": ""
      },{
        "title": "JUnit Assertions, AssertJ",
        "excerpt":"JUnit Assertionsì™€ AssertJ   í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” AssertionsëŠ” JUnitì´ êµ¬í˜„í•œ í´ë˜ìŠ¤ë„ ìˆê³  AssertJì˜ Assertionsê°€ ìˆë‹¤.   JUnitì—ì„œ ì œê³µí•˜ëŠ” ê³µì‹ ê¸°ëŠ¥ì¸ Jupiterë³´ë‹¤ AssertJë¥¼ ì„ í˜¸í•˜ëŠ”ë° ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?   Jupiterì˜ ë‹¨ì    ê³µì‹ ê°€ì´ë“œì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ ë³´ë©´ ë‹¨ìˆœí•˜ë‹¤. ê¸°ëŒ€ê°’ê³¼ ì‹¤ì œê°’ì„ ë„£ê³  ì¼ì¹˜í•˜ëŠ”ì§€, ì•„ë‹ˆë©´ ì¡°ê±´ì´ True ì¸ì§€ False ë§Œ íŒë‹¨í•˜ëŠ” ê¸°ëŠ¥ë§Œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ë¬´ì—‡ì„ ê²€ì‚¬í•˜ëŠ”ì§€ íŒŒì•…í•˜ê¸° í˜ë“¤ë‹¤.   ë˜í•œ, ë©”ì„œë“œ ì²´ì´ë‹ì´ ì—†ì–´ì„œ AssertJì— ë¹„í•´ ì‚¬ìš©í•˜ê¸° ë¶ˆí¸í•˜ë‹¤.   1 2 3 4 // JUnit assertEquals(expected, actual); // AssertJ (ë©”ì„œë“œ ì²´ì´ë‹) assertThat(actual).isEqualTo(expected);   AssertJ ë€?   í…ŒìŠ¤íŠ¸ì— ê´€ë ¨ëœ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ê°€ë…ì„±ì´ ë†’ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì„ ì§€ì›í•˜ëŠ” ì˜¤í”ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.   JUnitì˜ Assertionsì™€ ê°™ì€ í´ë˜ìŠ¤ ëª…ì„ ê°€ì§€ë¯€ë¡œ ì£¼ì˜í•´ì„œ import í•´ì•¼ í•œë‹¤.      JUnit Assertions â†’ import org.junit.jupiter.api.Assertions;   AssertJ â†’ import org.assertj.core.api.Assertions;   assertThat(ê²€ì¦ ëŒ€ìƒ)ë¡œ ì‹œì‘í•˜ë©° ë©”ì„œë“œ ì²´ì´ë‹ì„ ì´ìš©í•˜ì—¬ ê²€ì¦ ë©”ì„œë“œë¥¼ ì—°ì‡„ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³  ë©”ì„œë“œ ì²´ì´ë‹   ë§ ê·¸ëŒ€ë¡œ ë©”ì†Œë“œë¥¼ ê³ ë¦¬ì²˜ëŸ¼ ì—®ì–´ì„œ ë©”ì†Œë“œë¥¼ ê³„ì†í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í•˜ëŠ” ë°©ë²•ì´ë‹¤.    ","categories": ["TestCode"],
        "tags": ["TestCode","JAVA"],
        "url": "/testcode/TESTCODE-Junit-AssertJ/",
        "teaser": ""
      },{
        "title": "ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ",
        "excerpt":"ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œëŠ” ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì¼ ê²½ìš°ì— í•´ë‹¹ëœë‹¤.   ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œì— ì„¤ëª…í•˜ê¸° ìœ„í•´ Member ê°ì²´ì™€ Order ê°ì²´ê°€ ìˆê³  ì´ ë‘˜ì€ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¼ê³  ê°€ì •í•˜ì. Order ì…ì¥ì—ì„  ë‹¤ëŒ€ì¼ ê´€ê³„ì´ê³  Member ì…ì¥ì—ì„  ì¼ëŒ€ë‹¤ ê´€ê³„ì´ë‹¤.   ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ ê²½ìš° ê°ê° ê°ì²´ì— ë‹¤ë¥¸ ê°ì²´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì°¸ì¡°ìš© í•„ë“œë¥¼ ì •ì˜í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 // Member ì—”í‹°í‹° public class Member {      @Id     @GeneratedValue     @Column(name = \"member_id\")     private Long id;      ...      @OneToMany(mappedBy = \"member\")     private List&lt;Order&gt; orders = new ArrayList&lt;&gt;(); }  // Order ì—”í‹°í‹° public class Order {      @Id     @GeneratedValue     @Column(name = \"order_id\")     private Long id;      @ManyToOne(fetch = LAZY)     @JoinColumn(name = \"member_id\")     private Member member;      ... }   ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” ì–‘ ìª½ ê°ì²´ë¥¼ ëª¨ë‘ ì‹ ê²½ì¨ì•¼ í•œë‹¤. ë§Œì•½, Member ê°ì²´ì™€ Order ê°ì²´ë¥¼ ì €ì¥í•œë‹¤ê³  í•˜ë©´ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ì…ë ¥í•´ì•¼ í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13  Order order = new Order(); order.setName(\"order\") em.persist(order);  Member member = new Member(); member.setName(\"memberA\");  // ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì‹œ ì–‘ìª½ì— ì—°ê´€ê´€ê³„ ì„¤ì • member.getOrders().add(order); order.setMember(member);  em.persist(member);   JPA ì…ì¥ì—ì„œëŠ” ì—°ê´€ê´€ê³„ ì„¤ì •ì„ ìœ„í•´ ì£¼ì¸ ìª½ì—ë§Œ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ, ê°ì²´ ì…ì¥ì—ì„œ ë³´ë©´ ì–‘ìª½ì— ì—°ê´€ê´€ê³„ë¥¼ ëª¨ë‘ ë„£ì–´ì£¼ëŠ”ê²Œ ì¢‹ë‹¤. ë”°ë¼ì„œ, ìˆœìˆ˜ ê°ì²´ ìƒíƒœë¥¼ ê³ ë ¤í•˜ì—¬ í•­ìƒ ì–‘ìª½ì— ê°’ì„ ë„£ì–´ì£¼ì.   í•˜ì§€ë§Œ, ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ê¹Œë¨¹ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ë°–ì— ì—†ë‹¤. ë”°ë¼ì„œ, ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ(createMember())ë¥¼ ìƒˆë¡œ ì •ì˜í•˜ì—¬ í•œë²ˆë§Œ í˜¸ì¶œí•´ë„ ë‘ ì¤„ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë§Œë“ ë‹¤.   1 2 3 4 5 public void createMember(Member member) {     this.member = member;     member.getOrders().add(this); } // ì—¬ê¸°ì„œ thisëŠ” í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.      ì°¸ê³   ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ê³³ì€ í•µì‹¬ ë¡œì§ì„ ê°€ì§„ ìª½ì— ì •ì˜í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.        ì°¸ê³  ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ ì‚­ì œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì¸ ê²½ìš° ì‚­ì œí•  ë•Œë„ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì•¼ í• ê¹Œ? ì´ë¡ ì ì¸ ê´€ì ì—ì„œ ë³´ë©´ ì‚­ì œë¥¼ ìœ„í•œ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì´ ë§ìœ¼ë‚˜ ì‹¤ìš©ì ì¸ ê´€ì ì—ì„œ ìƒê°í•˜ë©´ ì‚­ì œí•œ ì´í›„ ì‚­ì œí•œ ê°ì²´ë¥¼ í™œìš©í•˜ëŠ” ë¡œì§ì´ ëŒ€ë¶€ë¶„ ì—†ê¸° ë•Œë¬¸ì— í¸ì˜ ë©”ì„œë“œëŠ” ìƒëµí•´ë„ ìƒê´€ì—†ë‹¤. ë˜í•œ, ì‹¤ë¬´ì—ì„  ì‚­ì œë¥¼ í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³  ì‚­ì œ yn í•„ë“œë¥¼ ë³€ê²½í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ê³ ë¯¼ì„ í¬ê²Œ í•˜ì§€ ì•ŠëŠ”ë‹¤.    ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-Convenience-Method/",
        "teaser": ""
      },{
        "title": "ì—°ê´€ ê´€ê³„ ë§¤í•‘",
        "excerpt":"ì—°ê´€ ê´€ê³„ë¥¼ ë§¤í•‘í•  ë•Œ ìƒê°í•´ì•¼ í•  ê²ƒ 3ê°€ì§€      ë°©í–¥: ë‹¨ë°©í–¥, ì–‘ë°©í–¥   ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸: ì–‘ë°©í–¥ì¼ ë•Œ, ì—°ê´€ ê´€ê³„ì—ì„œ ê´€ë¦¬ ì£¼ì²´   ë‹¤ì¤‘ì„±: ë‹¤ëŒ€ì¼(N:1), ì¼ëŒ€ë‹¤(1:N), ì¼ëŒ€ì¼(1:1), ë‹¤ëŒ€ë‹¤(N:M)   ë‹¨ë°©í–¥, ì–‘ë°©í–¥   DB í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ ìª½ í…Œì´ë¸” ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, DBëŠ” ë‹¨ë°©í–¥, ì–‘ë°©í–¥ì„ ë‚˜ëˆŒ í•„ìš”ê°€ ì—†ë‹¤.   ê·¸ëŸ¬ë‚˜, ê°ì²´ëŠ” ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ê°ì²´ë§Œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥ ê´€ê³„, ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥ ê´€ê³„ì´ë‹¤. ì—„ë°€í•˜ê²Œ ë§í•˜ë©´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì—†ê³  ë‘ ê°ì²´ê°€ ë‹¨ë°©í–¥ ì°¸ì¡°ë¥¼ ê°ê° ê°€ì ¸ì„œ ì–‘ë°©í–¥ ê´€ê³„ì²˜ëŸ¼ ì‚¬ìš©í•˜ê³  ë§í•˜ëŠ” ê²ƒì´ë‹¤.   JPAë¥¼ ì‚¬ìš©í•´ì„œ DBì™€ì˜ íŒ¨ëŸ¬ë‹¤ì„ì„ ë§ì¶”ê¸° ìœ„í•´ì„œ ê°ì²´ëŠ” ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§ˆì§€, ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§ˆì§€ ì„ íƒí•´ì•¼ í•œë‹¤.   ì„ íƒì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ë‘ ê°ì²´ê°€ ì°¸ì¡°ê°€ í•„ìš”í•œì§€ ì—¬ë¶€ë¥¼ ê³ ë¯¼í•˜ë©´ ëœë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë§ê²Œ ì„ íƒí–ˆì„ ë•Œ ë‘ ê°ì²´ê°€ ì„œë¡œ ë‹¨ë°©í–¥ ì°¸ì¡°ë¥¼ í–ˆë‹¤ë©´ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ê°€ ëœë‹¤.   ë¬´ì¡°ê±´ ì–‘ë°©í–¥ ê´€ê³„ë¡œ í•˜ë©´ ì¢‹ì„ê¹Œ?   ê°ì²´ ì…ì¥ì—ì„œ ì–‘ë°©í–¥ ë§¤ì¹­ì„ í–ˆì„ ë•Œ ì˜¤íˆë ¤ ë³µì¡í•´ì§„ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¼ë°˜ì ì¸ ë¹„ìŠ¤ë‹ˆìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ User ì—”í‹°í‹°ëŠ” ë‹¤ì–‘í•œ ì—”í‹°í‹°ì™€ ì—°ê´€ ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤. ì´ëŸ° ê²½ìš° ëª¨ë“  ì—”í‹°í‹°ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì„¤ì •í•˜ë©´ User í´ë˜ìŠ¤ê°€ ë³µì¡í•´ì§€ê³ , ë¶ˆí•„ìš”í•œ ì—°ê´€ ê´€ê³„ ë§¤í•‘ìœ¼ë¡œ ì¸í•´ ë³µì¡ì„±ì´ ì¦ê°€í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì–‘ë°©í–¥ìœ¼ë¡œ í• ì§€ ë‹¨ë°©í–¥ìœ¼ë¡œ í• ì§€ êµ¬ë¶„í•´ì¤˜ì•¼ í•œë‹¤.   ê¸°ë³¸ì ìœ¼ë¡œ ë‹¨ë°©í–¥ ë§¤í•‘ìœ¼ë¡œ ì„¤ê³„í•˜ê³  ì¶”í›„ì— ì—­ë°©í–¥ ê°ì²´ íƒìƒ‰ì´ í•„ìš”í•˜ë©´ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.   ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸(ìì„¸í•œ ë‚´ìš©)   ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ì˜ ê²½ìš° ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•´ì•¼ í•œë‹¤. ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì„ ì§€ì •í•˜ëŠ” ê²ƒì€ ë‘ ë‹¨ë°©í–¥ ê´€ê³„ ì¤‘ ì œì–´ì˜ ê¶Œí•œì„ ê°–ëŠ” ì‹¤ì§ˆì ì¸ ê´€ê³„ê°€ ì–´ë–¤ ê²ƒì¸ì§€ JPAì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.   ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì€ ì—°ê´€ ê´€ê³„ë¥¼ ê°–ëŠ” ë‘ ê°ì²´ ì‚¬ì´ì—ì„œ ì¡°íšŒ, ì €ì¥, ìˆ˜ì •, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ, ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë©´ ì¡°íšŒë§Œ ê°€ëŠ¥í•˜ë‹¤. ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹Œ ê°ì²´ì—ì„œ mappedBy ì†ì„±ì„ ì‚¬ìš©í•´ì„œ ì£¼ì¸ì„ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤. ë³´í†µ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•œë‹¤.   ì™œ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•´ì•¼í• ê¹Œ?   ì˜ˆë¥¼ ë“¤ì–´ Member ê°ì²´ì™€ Order ê°ì²´ê°€ ìˆê³  ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ë¼ê³  ê°€ì •í•˜ì.   ì‚¬ìš©ìì˜ ì£¼ë¬¸ì„ ìˆ˜ì •í•˜ë ¤ê³  í•  ë•Œ Member ê°ì²´ì—ì„œ setOrder() ê°™ì€ ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìˆ˜ì •í•˜ëŠ”ê²Œ ì¢‹ì„ì§€ Order ê°ì²´ì—ì„œ getMember() ê°™ì€ ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìˆ˜ì •í•˜ëŠ”ê²Œ ì¢‹ì€ì§€ í—·ê°ˆë¦´ ìˆ˜ ìˆë‹¤.   ë‘ ê°ì²´ ì…ì¥ì—ì„œëŠ” ë‘ ë°©ë²• ë‹¤ ë§ëŠ” ë°©ë²•ì´ì§€ë§Œ, JPA ì…ì¥ì—ì„œëŠ” í˜¼ë€ì´ ì˜¨ë‹¤. ì¦‰, Memberì—ì„œ Orderë¥¼ ìˆ˜ì •í• ë•Œ FKë¥¼ ìˆ˜ì •í•  ì§€, Orderì—ì„œ Memberë¥¼ ìˆ˜ì •í•  ë•Œ FKë¥¼ ìˆ˜ì •í•  ì§€ë¥¼ ê²°ì •í•˜ê¸° ì–´ë µë‹¤. ë•Œë¬¸ì— ë‘ ê°ì²´ ì‚¬ì´ì˜ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•´ì„œ ëª…í™•í•˜ê²Œ ì •í•˜ëŠ” ê²ƒì´ë‹¤.   ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ë§Œ ì œì–´í•˜ë©´ ë˜ë‚˜?   DBì— ì™¸ë˜ í‚¤ê°€ ìˆëŠ” í…Œì´ë¸”ì„ ìˆ˜ì •í•˜ë ¤ë©´ ì—°ê´€ ê´€ê³„ì˜ ì£¼ì¸ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. ê·¸ëŸ¬ë‚˜, ê°ì²´ë¥¼ ìƒê°í–ˆì„ ë•ŒëŠ” ë‘ êµ°ë°ì—ì„œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ì´ ë¶€ë¶„ì€ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ë‹¤.)   ë‹¤ì¤‘ì„±   DBë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì¤‘ì„±ì„ ê²°ì •í•œë‹¤.   ë‹¤ëŒ€ì¼   ê²Œì‹œíŒ(Post)ê³¼ ê²Œì‹œê¸€(Board)ì„ ì˜ˆë¡œ ë“¤ë©´, ê²Œì‹œê¸€ì´ Nì´ê³  ê²Œì‹œíŒì´ 1ì´ë‹¤. ì™¸ë˜ í‚¤ë¥¼ ê²Œì‹œê¸€ì´ ê´€ë¦¬í•˜ëŠ” ì¼ë°˜ì ì¸ í˜•íƒœì´ë‹¤.   ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„   ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ì—ì„  ë‹¤ ìª½ì¸ Postì—ì„œ @ManyToOneë§Œ ì¶”ê°€í•´ì¤¬ë‹¤. ë°˜ëŒ€ë¡œ Boardì—ì„œëŠ” ì°¸ì¡°í•˜ì§€ ì•Šì•˜ë‹¤. (ë‹¨ë°©í–¥)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Entity public class Post {     @Id @GeneratedValue     @Column(name = \"POST_ID\")     private Long id;      @Column(name = \"TITLE\")     private String title;      @ManyToOne     @JoinColumn(name = \"BOARD_ID\")     private Board board;     //... getter, setter }  @Entity public class Board {     @Id @GeneratedValue     private Long id;     private String title;     //... getter, setter }   ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„   ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì€ 1 ìª½ì— @OneToManyë¥¼ ì¶”ê°€í•˜ê³  ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì— mappedByë¥¼ ì§€ì •í•œë‹¤. mappedByë¡œ ì§€ì •í•  ë•Œ ê°’ì€ ëŒ€ìƒì´ ë˜ëŠ” ë³€ìˆ˜ëª…ì„ ë”°ë¼ ì§€ì •í•˜ë©´ ëœë‹¤. ì—¬ê¸°ì„œëŠ” Post ê°ì²´ì˜ boardë¼ëŠ” ì´ë¦„ì˜ ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— ë˜‘ê°™ì´ boardë¡œ ì§€ì •í–ˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @Entity public class Post {     @Id @GeneratedValue     @Column(name = \"POST_ID\")     private Long id;      @Column(name = \"TITLE\")     private String title;      @ManyToOne     @JoinColumn(name = \"BOARD_ID\")     private Board board;     //... getter, setter }  @Entity public class Board {     @Id @GeneratedValue     private Long id;     private String title;      @OneToMany(mappedBy = \"board\")     List&lt;Post&gt; posts = new ArrayList&lt;&gt;();     //... getter, setter }   ì¼ëŒ€ë‹¤   ì¼ëŒ€ë‹¤ì™€ ë‹¤ëŒ€ì¼ì€ ë‹¤ë¥´ë‹¤. ë‹¤ëŒ€ì¼ì˜ ê¸°ì¤€ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ ë‹¤(N)ìª½ì— ë‘” ê²ƒì´ê³  ì´ë²ˆì— ì–¸ê¸‰í•  ì¼ëŒ€ë‹¤ì˜ ê¸°ì¤€ì€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ 1 ìª½ì— ë‘” ê²ƒì´ë‹¤.   ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ì—°ê´€ ê´€ê³„      ì°¸ê³  ì‹¤ë¬´ì—ì„œëŠ” ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ì€ ê±°ì˜ ì“°ì§€ ì•ŠëŠ”ë‹¤.     DB ì…ì¥ì—ì„œëŠ” ë¬´ì¡°ê±´ ë‹¤ìª½ì—ì„œ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•œë‹¤. í•˜ì§€ë§Œ ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ì€ 1ìª½ ê°ì²´ì—ì„œ ë‹¤ìª½ ê°ì²´ë¥¼ ì¡°ì‘(ìƒì„±, ìˆ˜ì •, ì‚­ì œ)í•˜ëŠ” ë°©ë²•ì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @Entity public class Post {     @Id @GeneratedValue     @Column(name = \"POST_ID\")     private Long id;      @Column(name = \"TITLE\")     private String title;     //... getter, setter }  @Entity public class Board {     @Id @GeneratedValue     private Long id;     private String title;      @OneToMany(mappedBy = \"board\")     List&lt;Post&gt; posts = new ArrayList&lt;&gt;();     //... getter, setter }   1 2 3 4 5 6 7 8 Post post = new Post(); post.setTitle(\"hello\"); em.persist(post);  Board board = new Board(); board.setTitle(\"Free Board\"); board.getPosts().add(post); em.persist(board);   postë¥¼ ì €ì¥í•  ë•Œ insert ì¿¼ë¦¬ê°€ ì‹¤í–‰ëœë‹¤. ê·¸ í›„ boardë¥¼ ì €ì¥í•  ë•Œ boardë¥¼ insertí•˜ëŠ” ì¿¼ë¦¬ê°€ ë‚˜ê°„ í›„ì— postë¥¼ updateí•˜ëŠ” ì¿¼ë¦¬ê°€ ì‹¤í–‰ëœë‹¤. board.getPosts().add(post); ë¶€ë¶„ ë•Œë¬¸ì´ë‹¤.   Board ì—”í‹°í‹°ëŠ” Board í…Œì´ë¸”ì— ë§¤í•‘ë˜ê¸° ë•Œë¬¸ì— Board í…Œì´ë¸”ì— ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë‚˜ Post í…Œì´ë¸”ì˜ FKë¥¼ ì €ì¥í•  ë°©ë²•ì´ ì—†ìœ¼ë¯€ë¡œ ì¡°ì¸ ë° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ë¥¼ ë‚ ë ¤ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.   ë”°ë¼ì„œ, ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ì€ ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ë¡œ ë§¤í•‘í•˜ëŠ” ê²ƒì´ ì¶”í›„ì— ìœ ì§€ë³´ìˆ˜ì— í›¨ì”¬ ìˆ˜ì›”í•˜ë‹¤.   ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ëŠ” ê³µì‹ì ìœ¼ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ê²°ë¡ ì€ ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥, ì–‘ë°©í–¥ì„ ì‚¬ìš©í•  ê±°ë©´ ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë§ë‹¤.   ì¼ëŒ€ì¼   ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¥¼ ë„£ì„ ìˆ˜ë„ ìˆê³  ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¥¼ ë„£ì„ ìˆ˜ë„ ìˆë‹¤. (ì¼ëŒ€ì¼ì´ê¸° ë•Œë¬¸ì— í…Œì´ë¸” A, Bê°€ ìˆì„ë•Œ ì£¼ í…Œì´ë¸”ì´ Aë©´ ëŒ€ìƒ í…Œì´ë¸”ì´ Bì´ë‹¤.)   ì•„ë˜ ì˜ˆì œëŠ” Postê°€ í•˜ë‚˜ì˜ Attachë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•œë‹¤.   ì¼ëŒ€ì¼ ë‹¨ë°©í–¥           ì™¸ë˜ í‚¤ë¥¼ ì£¼ í…Œì´ë¸”ì´ ê°–ê³  ìˆì„ ë•Œ (Post: ì£¼ í…Œì´ë¸”, Attach: ëŒ€ìƒ í…Œì´ë¸”)       1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  @Entity  public class Post {      @Id @GeneratedValue      @Column(name = \"POST_ID\")      private Long id;           @Column(name = \"TITLE\")      private String title;      @OneToOne      @JoinColumn(name = \"ATTACH_ID\")      private Attach attach;      //... getter,setter  }  @Entity  public class Attach {      @Id @GeneratedValue      @Column(name = \"ATTACH_ID\")      private Long id;      private String name;    //... getter, setter  }                ì™¸ë˜ í‚¤ë¥¼ ëŒ€ìƒ í…Œì´ë¸”ì´ ê°–ê³  ìˆì„ ë•Œ: JPAì—ì„œëŠ” ì§€ì›ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.       ì¼ëŒ€ì¼ ì–‘ë°©í–¥           ì™¸ë˜í‚¤ë¥¼ ì£¼ í…Œì´ë¸”ì´ ê°–ê³  ìˆì„ ë•Œ       ë‹¨ìˆœí•˜ê²Œ ë˜‘ê°™ì´ @OneToOne ì„¤ì • í›„ mappedBy ì„¤ì •ë§Œ í•´ì„œ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ë©´ ì–‘ë°©í–¥ë„ ê°„ë‹¨í•˜ë‹¤.       1 2 3 4 5 6 7 8 9 10 11  @Entity  public class Attach {      @Id @GeneratedValue      @Column(name = \"ATTACH_ID\")      private Long id;      private String name;           @OneToOne(mappedBy = \"attach\")      private Post post;    //... getter, setter  }                ì™¸ë˜í‚¤ë¥¼ ëŒ€ìƒ í…Œì´ë¸”ì´ ê°–ê³  ìˆì„ ë•Œ       ì´ëŸ´ë•ŒëŠ” ì–´ì°¨í”¼ ì–‘ ìª½ì´ ì¼ëŒ€ì¼ì´ê¸° ë•Œë¬¸ì— ìœ„ì—ì„œ ì •ì˜í•œ ëŒ€ë¡œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ ë…¼ë€ì˜ ì—¬ì§€ê°€ ìˆë‹¤. ì™¸ë˜í‚¤ë¥¼ Postì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì§€ Attachì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ì§€ ìƒê°í•´ë´ì•¼ í•œë‹¤.       ë¹„ì¦ˆë‹ˆìŠ¤ê°€ ë³€ê²½ë˜ì–´ í•˜ë‚˜ì˜ Postê°€ Attachë¥¼ ì—¬ëŸ¬ê°œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•˜ì. ê·¸ë ‡ë‹¤ë©´ ì™¸ë˜ í‚¤ëŠ” ë‹¤ìª½ì¸ Attachì— ìˆëŠ”ê²Œ ë¹„ì¦ˆë‹ˆìŠ¤ ë³€ê²½ì— ìœ ë¦¬í•˜ë‹¤. ê·¸ë ‡ë‹¤ê³  ë¬´ì¡°ê±´ ë‹¤ê°€ ë  í™•ë¥ ì´ ë†’ì€ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤ë¥¼ ë†“ëŠ” ê²ƒì´ ì¢‹ì€ê²Œ ì•„ë‹ˆë‹¤. Post ìª½ì— ì™¸ë˜ í‚¤ë¥¼ ë‘ë©´ ì„±ëŠ¥ìƒ ì´ë“ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.       ê²°ë¡ ì€ ì¢…í•©ì ìœ¼ë¡œ íŒë‹¨í•˜ê³  ê²°ì •í•´ì•¼ í•œë‹¤.       ë‹¤ëŒ€ë‹¤   ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. ë‹¤ëŒ€ë‹¤ëŠ” ì¼ëŒ€ë‹¤ - ë‹¤ëŒ€ì¼ë¡œ í’€ì–´ì„œ ë§Œë“œëŠ” ê²ƒ (ì¤‘ê°„ í…Œì´ë¸”ì„ Entityë¡œ ë§Œë“œëŠ” ê²ƒ)ì´ ì¶”í›„ ë³€ê²½ì—ë„ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA"],
        "url": "/jpa/JPA-JPA-Mapping/",
        "teaser": ""
      },{
        "title": "ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ",
        "excerpt":"ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë€?   ì •ì (static), íŒ©í† ë¦¬(factory), ë©”ì„œë“œ(method)   ì—¬ê¸°ì„œ íŒ©í† ë¦¬ë¼ëŠ” ìš©ì–´ê°€ ì¡°ê¸ˆ ìƒì†Œí•  ìˆ˜ ìˆë‹¤. GoF ë””ìì¸ íŒ¨í„´ ì¤‘ íŒ©í† ë¦¬ íŒ¨í„´ì—ì„œ ìœ ë˜í•œ ì´ ë‹¨ì–´ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ ë¶„ë¦¬í•˜ê² ë‹¤ëŠ” ì·¨ì§€ê°€ ë‹´ê²¨ìˆë‹¤.   ë‹¤ì‹œ ë§í•´, ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë€ ê°ì²´ ìƒì„±ì˜ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ ë©”ì„œë“œë¼ëŠ” ì˜ë¯¸ë¡œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.   ìë°”ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œëŠ” newë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì„ ë¿, ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¼ëŠ” í´ë˜ìŠ¤ ë‚´ì— ì„ ì–¸ë˜ì–´ìˆëŠ” ë©”ì„œë“œë¥¼ ë‚´ë¶€ì˜ newë¥¼ ì´ìš©í•´ ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ newë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.   ìƒì„±ìë¥¼ í†µí•œ ê°ì²´ ìƒì„±(new ì‚¬ìš©)   1 String str1 = new String(\"hello\");   ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•œ ê°ì²´ ìƒì„±   1 String str2 = String.valueOf(\"hello\");   ë‘ ê²½ìš° ëª¨ë‘ String íƒ€ì… ê°ì²´ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.   ìƒì„±ìì™€ ì •ì  íŒ¨í† ë¦¬ ë©”ì„œë“œ   ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ê³¼ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ì‹ì´ í•˜ëŠ” ì¼ì€ ë¹„ìŠ·í•´ë³´ì¸ë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ ì ì´ ìˆë‹¤.   ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì¥ì       ì´ë¦„ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.            ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©”ì„œë“œ ë„¤ì´ë°ì— ë”°ë¼ ë°˜í™˜ë  ê°ì²´ì˜ íŠ¹ì„±ì„ ë¬˜ì‚¬í•  ìˆ˜ ìˆë‹¤. ì¦‰, ì½”ë“œì˜ ê°€ë…ì„±ì´ ìƒìŠ¹í•œë‹¤.           í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ë‹¤.            enumì´ ëŒ€í‘œì ì¸ ì˜ˆì‹œì´ë‹¤.       ì‚¬ìš©ë˜ëŠ” ê°’ë“¤ì˜ ê°œìˆ˜ê°€ ì •í•´ì ¸ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ì„ ë¯¸ë¦¬ ìƒì„±í•´ë†“ê³  ì¡°íšŒ(ìºì‹±) í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.           1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  public class Day {           private static final Map&lt;String, Day&gt; days = new HashMap&lt;&gt;();           static {          days.put(\"mon\", new Day(\"Monday\"));          days.put(\"tue\", new Day(\"Tuesday\"));          days.put(\"wen\", new Day(\"Wednesday\"));          days.put(\"thu\", new Day(\"Thursday\"));          days.put(\"fri\", new Day(\"Friday\"));          days.put(\"sat\", new Day(\"Saturday\"));          days.put(\"sun\", new Day(\"Sunday\"));      }           public static Day from(String day) {          return days.get(day);      }           private final String day;           private Day(String day) {          this.day = day;      }           public String getDay() {          return day;      }  }       public static void main(String[] args) {      Day day = Day.from(\"mon\");      System.out.println(day.getDay());  }                  ê° ìš”ì¼ì„ staticì„ í†µí•´ ë¯¸ë¦¬ ìƒì„±. ë¯¸ë¦¬ ìƒì„±ëœ Day ê°ì²´ë¥¼ ì°¾ì•„ ë°˜í™˜ë§Œ í•˜ë©´ ëœë‹¤.           í•˜ìœ„ ìë£Œí˜• ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.            ìƒì†ì„ ì‚¬ìš© í•  ë•Œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œê°€ ë°˜í™˜ê°’ì„ ë°˜í™˜í•  ë•Œ, ìƒí™©ì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜ í•´ì¤„ ìˆ˜ ìˆë‹¤.           ì…ë ¥ ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë§¤ë²ˆ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.            ë°˜í™˜ íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì´ê¸°ë§Œ í•˜ë©´ ì–´ëŠ íƒ€ì…ì´ë“  ê°ì²´ë¥¼ ë°˜í™˜í•´ë„ ìƒê´€ì—†ë‹¤.       ë§Œì•½, íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ìƒì† ë°›ì€ êµ¬í˜„ì²´ë“¤ì´ ìˆì„ ë•Œ, ê°ì²´ ìƒì„± ì‹œ ìƒí™©ì— ë”°ë¼ì„œ ìœ ë™ì ìœ¼ë¡œ í•´ë‹¹í•˜ëŠ” êµ¬í˜„ì²´ íƒ€ì…ìœ¼ë¡œ ë°˜í™˜ í•œë‹¤ê³  ìƒê° ë¨           ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œì ì—ëŠ” ë°˜í™˜í•  ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.   ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œì˜ ë‹¨ì       ìƒì†ì—ëŠ” public í˜¹ì€ protected ìƒì„±ìê°€ í•„ìš”í•˜ë¯€ë¡œ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë§Œ ì œê³µí•  ê²½ìš°, ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.   ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì°¾ê¸° ì–´ë µë‹¤. â†’ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì»¨ë²¤ì…˜, API ë¬¸ì„œë¥¼ ì˜ ì‘ì„±í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.   Lombokìœ¼ë¡œ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì •ì˜   Lombokì˜ RequiredArgsConstructorë¥¼ ì‚¬ìš©í•˜ë©´ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 @RequiredArgsConstructor(staticName = \"of\") public class Order {     private final Long id;     private final String name;      public static void main(String[] args) {         Order order = Order.of(1L, \"hello\");     } }  ","categories": ["DesignPattern"],
        "tags": ["DesignPattern","Java"],
        "url": "/designpattern/DesignPattern-StaticFactoryMethod/",
        "teaser": ""
      },{
        "title": "Mock ì´ë€?",
        "excerpt":"Mock ì´ë€?   ê°€ì§œë¥¼ ëœ»í•œë‹¤. ì§„ì§œ ê°ì²´ì™€ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ê·¸ ê°ì²´ì˜ í–‰ë™ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì´ë‹¤.   ë©”ì†Œë“œê°€ returnì„ í•˜ê¸°ê¹Œì§€ ì–´ë– í•œ ë¡œì§ì„ ê±¸ì¹˜ëŠ”ë° ê·¸ ë¡œì§ì„ ì „ë¶€ êµ¬í˜„í•˜ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆì„ ë•Œ, ë©”ì†Œë“œê°€ return í•˜ëŠ” íƒ€ì…ì˜ ì–´ë–¤ ì˜ˆì¸¡í•œ ê°’ì´ ë‚˜ì˜¨ë‹¤ê³  ê°€ì •í•´ì„œ ì „ì²´ì ì¸ íë¦„ì„ í…ŒìŠ¤íŠ¸ í•  ë•Œ, mockì´ ì‚¬ìš©ëœë‹¤.   Mockito ë€?   Mockì„ ë‹¤ë£¨ëŠ” í”„ë ˆì„ì›Œí¬ì˜ ì¢…ë¥˜ë¡œ Mock ê°ì²´ë¥¼ ì‰½ê²Œ ë§Œë“¤ê³  ê²€ì¦í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.   ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Java Mocking Framework. Mockitoë¥¼ ì‚¬ìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë¡œì§ì„ ê²€ì¦ í•  ìˆ˜ ìˆë‹¤.      ì°¸ê³  Unit í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼í•˜ëŠ”ê°€? controller í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ìœ„í•´ ë‚˜ë¨¸ì§€ service ì™€ repository ë¥¼ ëª©(mock)ìœ¼ë¡œ ë§Œë“¤ê³  ìœ ë‹›í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì•¼í•˜ëŠ”ê°€ì— ëŒ€í•´ ì˜ê²¬ì´ ì„œë¡œ ë‹¤ë¥´ë‹¤. ê·¸ëƒ¥ ê°™ì´ ì¼í•˜ëŠ” íŒ€ì— ë§ì¶”ë©´ ëœë‹¤.     dependency ì¶”ê°€   ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” í”„ë¡œì íŠ¸ ìƒì„± ì‹œ spring-boot-starter-testì—ì„œ ìë™ìœ¼ë¡œ mockitoë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤. ë§Œì•½, ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ì“°ì§€ ì•Šìœ¼ë©´ ì˜ì¡´ì„± ì§ì ‘ ì¶”ê°€í•˜ì.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-core --&gt; &lt;dependency&gt;     &lt;groupId&gt;org.mockito&lt;/groupId&gt;     &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;     &lt;version&gt;3.12.4&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-junit-jupiter --&gt; &lt;dependency&gt;     &lt;groupId&gt;org.mockito&lt;/groupId&gt;     &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;     &lt;version&gt;3.12.4&lt;/version&gt;     &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;   Mockì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ    Mockì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ StudyServiceë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ê³  ê°€ì •í•˜ì.      StudyServiceì—ëŠ” MemberServiceì™€ StudyRepositoryê°€ ì£¼ì…ë˜ì–´ ìˆë‹¤.   MemberServiceì™€ StudyRepositoryëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³  êµ¬í˜„ì²´ê°€ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤.   1 2 3 4 public interface MemberService {      Optional&lt;Member&gt; findById(Long memberId); }   1 2 public interface StudyRepository extends JpaRepository&lt;Study, Long&gt; { }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public class StudyService {      private final MemberService memberService;      private final StudyRepository repository;      public StudyService(MemberService memberService, StudyRepository repository) {         assert memberService != null;         assert repository != null;         this.memberService = memberService;         this.repository = repository;     }      public Study createNewStudy(Long memberId, Study study) {         Optional&lt;Member&gt; member = memberService.findById(memberId);         study.setOwner(member.orElseThrow(()                 -&gt; new IllegalArgumentException(\"Member doesn't exist for id: '\" + memberId + \"'\")));         return repository.save(study);     } }   ì´ì œ StudyServiceì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê² ë‹¤. ê·¸ëŸ°ë°, StudyServiceë¥¼ ì •ì˜í•˜ëŠ” ìˆœê°„ë¶€í„° ë§‰íŒë‹¤. StudyServiceëŠ” MemberService, StudyRepositoryê°€ ìˆì–´ì•¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.   í•˜ì§€ë§Œ, MemberService, StudyRepositoryëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— Mock ì—†ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ë©´ ì˜¤ë²„ë¼ì´ë“œëœ ëª¨ë“  ë©”ì„œë“œë“¤ì„ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•´ì•¼ í•œë‹¤.   Mock ì—†ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @Test void createStudyService() {     MemberService memberService = new MemberService() {         @Override         public Optional&lt;Member&gt; findById(Long memberId) {             return Optional.empty();         }     };              StudyRepository studyRepository = new StudyRepository() {         @Override         public List&lt;Study&gt; findAll() {             return null;         }          @Override         public List&lt;Study&gt; findAll(Sort sort) {             return null;         }          ... // ì´í•˜ ìƒëµ.     };              StudyService studyService = new StudyService(memberService, studyRepository); }   Mockì„ ì‚¬ìš©í•˜ë©´ êµ¬í˜„ì²´ê°€ ì—†ì–´ë„ ëª© ê°ì²´ë¥¼ ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   Mockì„ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @ExtendWith(MockitoExtension.class) class StudyServiceTest {      @Mock     MemberService memberService;      @Mock     StudyRepository studyRepository;      @Test     void createStudyService() {         // ìƒì„±ì ì£¼ì…         StudyService studyService = new StudyService(memberService, studyRepository);         assertNotNull(studyService);     } }   Mock ê°ì²´ ë§Œë“¤ê¸°   êµ¬í˜„ì²´ëŠ” ì—†ì§€ë§Œ ì¸í„°í˜ì´ìŠ¤ëŠ” ìˆì„ë•Œ ëª©(Mock)ì„ ì‘ì„±í•˜ê¸° ë§¤ìš° ì¢‹ë‹¤. ì½”ë“œê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ëª©í‚¹ì„ í•˜ë©´ ëœë‹¤.   [ë°©ë²•1] Mockito.mock() ë©”ì†Œë“œ ì‚¬ìš©   1 2 3 4 5 6 7 class StudyServiceTest {      MemberService memberService = mock(MemberService.class);     StudyRepository studyRepository = mock(StudyRepository.class);      ... }   [ë°©ë²•2] ëª© ì• ë…¸í…Œì´ì…˜ ì‚¬ìš©      JUnit5 extensionìœ¼ë¡œ MockitoExtensionì„ ì‚¬ìš©í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 @ExtendWith(MockitoExtension.class) class StudyServiceTest {      @Mock     MemberService memberService;      @Mock     StudyRepository studyRepository;      ... }   Mock ê°ì²´ Stubbing   Stubbingì´ë€ í–‰ë™ì„ ì¡°ì‘í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. Mock ì¸ìŠ¤í„´ìŠ¤ì—ê²Œ ì‹¤ì œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê²ƒê³¼ ê°™ì€ ê°€ì§œ ë™ì‘ì„ ë„£ì–´ì¤„  ìˆ˜ ìˆë‹¤.   Mock ê°ì²´ ì¡°ì‘ (Stubbing)      íŠ¹ì •í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì€ ê²½ìš° íŠ¹ì •í•œ ê°’ì„ ë¦¬í„´í•˜ê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë˜ì§€ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆë‹¤.   void ë©”ì†Œë“œ íŠ¹ì • ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ê±°ë‚˜ í˜¸ì¶œëœ ê²½ìš° ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.   ë©”ì†Œë“œê°€ ë™ì¼í•œ ë§¤ê°œë³€ìˆ˜ë¡œ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë  ë•Œ ê°ê¸° ë‹¤ë¥´ê²Œ í–‰ë™í•˜ë„ë¡ ì¡°ì‘í•  ìˆ˜ë„ ìˆë‹¤.   when().thenReturn()   Aë¥¼ í˜¸ì¶œí•˜ë©´ Bë¥¼ ë°˜í™˜í•˜ê² ë‹¤ê³  í–‰ë™ì„ ì¡°ì‘í•œ ê²ƒì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @ExtendWith(MockitoExtension.class) class StudyServiceTest {      @Mock     MemberService memberService;      @Mock     StudyRepository studyRepository;      @Test     void createNewStudy() {         StudyService studyService = new StudyService(memberService, studyRepository);         assertNotNull(studyService);          Member member = new Member();         member.setId(1L);         member.setEmail(\"yessm621@gmail.com\");          // stubbing (ì¡°ì‘)         when(memberService.findById(1L)).thenReturn(Optional.of(member)); //        when(memberService.findById(2L)).thenReturn(Optional.of(member));          Optional&lt;Member&gt; findById = memberService.findById(1L);         assertEquals(\"yessm621@gmail.com\", findById.get().getEmail());     } }   when(memberService.findById(1L)).thenReturn(Optional.of(member)); ì´ ì½”ë“œëŠ” 1Lì— ëŒ€í•´ì„œë§Œ ìœ íš¨í•˜ë‹¤. ë§Œì•½ ë‹¤ë¥¸ íŒŒë¼ë¯¸í„° ê°’ì„ ë„£ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê²ƒì´ë‹¤. ì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ any() ì´ë‹¤.   any()   any()ëŠ” ì–´ë– í•œ ê°’ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ë„ ë¬´ì¡°ê±´ Optional.of(member)ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤. ì¦‰, any()ë¡œ ì •ì˜í•˜ë©´ íŒŒë¼ë¯¸í„° 1Lìœ¼ë¡œ í˜¸ì¶œí•˜ë˜, 2Lìœ¼ë¡œ í˜¸ì¶œí•˜ë˜ ê°™ì€ ê°ì²´ë¥¼ ë°›ê²Œ ëœë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 @Test void createNewStudy() {     StudyService studyService = new StudyService(memberService, studyRepository);     assertNotNull(studyService);      Member member = new Member();     member.setId(1L);     member.setEmail(\"yessm621@gmail.com\");      when(memberService.findById(any())).thenReturn(Optional.of(member));      assertEquals(\"yessm621@gmail.com\", memberService.findById(1L).get().getEmail());     assertEquals(\"yessm621@gmail.com\", memberService.findById(2L).get().getEmail()); }   any()ì™€ ê°™ì´ ì´ëŸ¬í•œ ì‘ì—…ì„ í•˜ëŠ” ìš”ì†Œë¥¼ Argument matchersë¼ í•œë‹¤.   doThrow().when()   ì˜ˆì™¸ë¥¼ ë˜ì§€ê³  ì‹¶ì„ë•Œ doThrow() ë©”ì†Œë“œë¥¼ í™œìš©í•œë‹¤.           ë°˜í™˜í˜•ì´ ìˆëŠ” ê²½ìš°       1  when(memberService.findById(1L)).thenThrow(new RuntimeException());                ë°˜í™˜í˜•ì´ void ì¸ ê²½ìš°       1 2 3 4 5  // memberServiceì˜ validate()ê°€ í˜¸ì¶œë˜ë©´ IllegalArgumentException ì˜ˆì™¸ë¥¼ ë˜ì§€ê² ë‹¤.  doThrow(new IllegalArgumentException()).when(memberService).validate(1L);  assertThrows(IllegalArgumentException.class, () -&gt; {      memberService.validate(1L);  });           ì—¬ëŸ¬ë²ˆ stubbing í•  ë•Œ, ë‹¤ë¥´ê²Œ ì¡°ì‘   í˜¸ì¶œë˜ëŠ” ìˆœì„œê°€ ì§€ì •ë˜ì–´ ìˆì–´ ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¼ë„ ë§¤ë²ˆ ë‹¤ë¥¸ ê°’ì„ í–‰ë™í•˜ë„ë¡ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤. ì²´ì´ë‹ ê¸°ë²•ì„ ì´ìš©í•œë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 @Test void createNewStudyException2() {     StudyService studyService = new StudyService(memberService, studyRepository);     assertNotNull(studyService);      Member member = new Member();     member.setId(1L);     member.setEmail(\"yessm621@gmail.com\");      when(memberService.findById(any()))             .thenReturn(Optional.of(member)) // ì²«ë²ˆì§¸ ì¡°ì‘             .thenThrow(new RuntimeException()) // ë‘ë²ˆì§¸ ì¡°ì‘             .thenReturn(Optional.empty()); // ì„¸ë²ˆì§¸ ì¡°ì‘      // ì²«ë²ˆì§¸ ì¡°ì‘ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸     Optional&lt;Member&gt; byId = memberService.findById(1L);     assertEquals(\"yessm621@gmail.com\", byId.get().getEmail());      // ë‘ë²ˆì§¸ ì¡°ì‘ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸     assertThrows(RuntimeException.class, () -&gt; {         memberService.findById(1L);     });      // ì„¸ë²ˆì§¸ ì¡°ì‘ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸     assertEquals(Optional.empty(), memberService.findById(1L)); }   Mock ê°ì²´ ê²€ì¦   createNewStudyì—ì„œ studyê°€ ì €ì¥ë˜ë©´ memberService.notify()ë¥¼ í˜¸ì¶œí•œë‹¤ê³  ê°€ì •í•˜ì.   1 2 3 4 5 public interface MemberService {     Optional&lt;Member&gt; findById(Long memberId);     void validate(Long memberId);     void notify(Study newStudy); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class StudyService {      private final MemberService memberService;     private final StudyRepository repository;      ...      public Study createNewStudy(Long memberId, Study study) {         Optional&lt;Member&gt; member = memberService.findById(memberId);          study.setOwner(member.orElseThrow(()                 -&gt; new IllegalArgumentException(\"Member doesn't exist for id: '\" + memberId + \"'\")));          Study newStudy = repository.save(study);          // studyê°€ ì €ì¥ë˜ë©´ ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •         memberService.notify(newStudy);          return newStudy;     } }   ì‚¬ì‹¤ notifyì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì• ë§¤í•˜ë‹¤. ì´ëŸ´ ë•Œ verify()ë¥¼ ì‚¬ìš©í•œë‹¤.   verify()   verify()ëŠ” Mock ê°ì²´ì˜ ë©”ì„œë“œ í˜¸ì¶œì— ëŒ€í•´ì„œ í™•ì¸ ë° ê²€ì¦ í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 @Test void createNewStudyTest() {     StudyService studyService = new StudyService(memberService, studyRepository);     assertNotNull(studyService);      Member member = new Member();     member.setId(1L);     member.setEmail(\"yessm621@gmail.com\");      Study study = new Study(10, \"í…ŒìŠ¤íŠ¸\");      when(memberService.findById(1L)).thenReturn(Optional.of(member));     when(studyRepository.save(study)).thenReturn(study);      studyService.createNewStudy(1L, study);      assertEquals(member, study.getOwner());      // memberServiceì˜ notifyê°€ 1ë²ˆ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤.     verify(memberService, times(1)).notify(any());     // memberServiceì˜ validateê°€ í˜¸ì¶œë˜ë©´ ì•ˆëœë‹¤.     verify(memberService, never()).validate(any()); }   InOrder   ìˆœì„œëŒ€ë¡œ í˜¸ì¶œë˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.   1 2 3 4 5 6 public interface MemberService {     Optional&lt;Member&gt; findById(Long memberId);     void validate(Long memberId);     void notify(Study newStudy);     void notify(Member member); }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 public class StudyService {      private final MemberService memberService;     private final StudyRepository repository;      ...      public Study createNewStudy(Long memberId, Study study) {         Optional&lt;Member&gt; member = memberService.findById(memberId);          study.setOwner(member.orElseThrow(()                 -&gt; new IllegalArgumentException(\"Member doesn't exist for id: '\" + memberId + \"'\")));          Study newStudy = repository.save(study);          // studyê°€ ì €ì¥ë˜ë©´ ì•Œë¦¼ì´ ì˜¤ë„ë¡ ì„¤ì •         memberService.notify(newStudy);         memberService.notify(member.get());          return newStudy;     } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 @Test void createNewStudyTest() {     StudyService studyService = new StudyService(memberService, studyRepository);     assertNotNull(studyService);      Member member = new Member();     member.setId(1L);     member.setEmail(\"yessm621@gmail.com\");      Study study = new Study(10, \"í…ŒìŠ¤íŠ¸\");      when(memberService.findById(1L)).thenReturn(Optional.of(member));     when(studyRepository.save(study)).thenReturn(study);      studyService.createNewStudy(1L, study);      assertEquals(member, study.getOwner());      verify(memberService, times(1)).notify(study);     verify(memberService, times(1)).notify(member);     verify(memberService, never()).validate(any());      // ìˆœì„œ í™•ì¸     InOrder inOrder = inOrder(memberService);     inOrder.verify(memberService).notify(study);     inOrder.verify(memberService).notify(member); }   memberService.notify(study)ê°€ ë¨¼ì € í˜¸ì¶œëœ í›„, memberService.notify(member)ê°€ í˜¸ì¶œë˜ëŠ” ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì´ë‹¤.   íŠ¹ì • ì‹œê°„ ì´ë‚´ì— í˜¸ì¶œëëŠ”ì§€   ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ..   100sì•ˆì— memberServiceì˜ notify()ê°€ 1ë²ˆ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤.   1 verify(memberService, timeout(100).times(1)).notify();   verifyNoMoreInteractions   ëª¨ë“  verify() ê²€ì¦ì´ ëë‚¬ë‹¤ë©´ ì•ˆì •ì„±ì„ ìœ„í•´ verifyNoMoreInteractions()ì„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.   verifyNoMoreInteractions()ëŠ” Mock ì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ë” ì´ìƒ verify() ê²€ì¦í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤. ë” ì´ìƒ ê²€ì¦í•  ê²ƒì´ ë‚¨ì•„ìˆì§€ ì•Šì„ ë•Œ ì„±ê³µì„ ë¦¬í„´í•˜ê³  ê²€ì¦í•  ë‚´ìš©ì´ ìˆë‹¤ë©´ í…ŒìŠ¤íŠ¸ì— ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤.   1 verifyNoMoreInteractions(memberService);   BDD ìŠ¤íƒ€ì¼ Mockito API   BDD   ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ í–‰ë™í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ê³µí†µëœ ì´í•´ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, TDDì—ì„œ ì°½ì•ˆí–ˆë‹¤.      Given / When / Then   ì•ì„œ ì‘ì„±í–ˆë˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìŠ¤íƒ€ì¼ë„ Given / When / Thenì„ ì‚¬ìš©í–ˆë‹¤. ê·¸ëŸ°ë°, mockì„ ì‚¬ìš©í•˜ë©´ì„œ ì•½ê°„ì€ ì• ë§¤í•œ ë¶€ë¶„ì´ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 @ExtendWith(MockitoExtension.class) class StudyServiceTest {      @Mock MemberService memberService;     @Mock StudyRepository studyRepository;      @Test     void createNewStudy() {         // Given         StudyService studyService = new StudyService(memberService, studyRepository);         assertNotNull(studyService);          Member member = new Member();         member.setId(1L);         member.setEmail(\"yessm621@gmail.com\");          Study study = new Study(10, \"í…ŒìŠ¤íŠ¸\");          // 1         when(memberService.findById(1L)).thenReturn(Optional.of(member));         when(studyRepository.save(study)).thenReturn(study);          // When         studyService.createNewStudy(1L, study);          // Then         assertEquals(member, study.getOwner());         // 2         verify(memberService, times(1)).notify(study);         verifyNoMoreInteractions(memberService);     } }   1, 2 ë²ˆì€ ë©”ì„œë“œ ì´ë¦„ ë•Œë¬¸ì¸ì§€ given, when, thenê³¼ ë§ì§€ ì•Šì•„ë³´ì¸ë‹¤. ì´ë•Œ MockitoëŠ” BddMockitoë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í†µí•´ BDD ìŠ¤íƒ€ì¼ì˜ APIë¥¼ ì œê³µí•œë‹¤.      when().thenReturn() â†’ given().willReturn()   verify() â†’ then().should()   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import static org.mockito.BDDMockito.given; import static org.mockito.BDDMockito.then;  @ExtendWith(MockitoExtension.class) class StudyServiceTest {      @Mock MemberService memberService;      @Mock StudyRepository studyRepository;      @Test     void createNewStudy() {         // Given         StudyService studyService = new StudyService(memberService, studyRepository);         assertNotNull(studyService);          ...          // 1         given(memberService.findById(1L)).willReturn(Optional.of(member));         given(studyRepository.save(study)).willReturn(study);          // When         studyService.createNewStudy(1L, study);          // Then         assertEquals(member, study.getOwner());         // 2         then(memberService).should(times(1)).notify(study);         then(memberService).shouldHaveNoMoreInteractions();     } }   Mockito ë ˆí¼ëŸ°ìŠ¤   Mockito - mockito-core 4.4.0 javadoc  ","categories": ["TestCode"],
        "tags": ["TestCode","JAVA"],
        "url": "/testcode/TESTCODE-Mock/",
        "teaser": ""
      },{
        "title": "@Valid, @Validated",
        "excerpt":"@Valid   @ValidëŠ” JSR-303 í‘œì¤€ ìŠ¤í™(ìë°” í‘œì¤€)ìœ¼ë¡œ ë¹ˆ ê²€ì¦ê¸°(Bean Validator)ë¥¼ ì´ìš©í•´ ê°ì²´ì˜ ì œì•½ ì¡°ê±´ì„ ê²€ì¦í•˜ë„ë¡ ì§€ì‹œí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.   Springì—ì„œëŠ” ì¼ì¡°ì˜ ì–´ëŒ‘í„°ì¸ LocalValidatorFactoryBeanê°€ ì œì•½ ì¡°ê±´ ê²€ì¦ì„ ì²˜ë¦¬í•œë‹¤. ì´ë¥¼ ì´ìš©í•˜ë ¤ë©´ LocalValidatorFactoryBeanì„ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•˜ëŠ”ë°, ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ê´€ë ¨ëœ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.   build.gradleì— ì˜ì¡´ì„± ì¶”ê°€   1 implementation 'org.springframework.boot:spring-boot-starter-validation'   ì˜ˆë¥¼ ë“¤ì–´ name í•„ë“œê°€ null ë˜ëŠ” â€™â€™ ì´ ì•„ë‹Œì§€ í™•ì¸í•˜ë©° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì„œë“œì— @Validë¥¼ ë¶™ì´ë©´ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•œë‹¤.   1 2 3 4 5 6 7 8 @Getter @Setter public class MemberForm {      @NotEmpty(message = \"íšŒì› ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤.\")     private String name;      ... }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import javax.validation.Valid;  @Controller @RequiredArgsConstructor public class MemberController {     ...      @PostMapping(\"members/new\")     public String create(@Valid MemberForm form, BindingResult result) {         if (result.hasErrors()) {             return \"members/createMemberForm\";         }         ...     } }   @Validì˜ ë™ì‘ì›ë¦¬   ëª¨ë“  ìš”ì²­ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì„ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì „ë‹¬ëœë‹¤. ì „ë‹¬ ê³¼ì •ì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ArgumentResolverê°€ ë™ì‘í•˜ëŠ”ë° @Valid ì—­ì‹œ ArgumentResolverì— ì˜í•´ ì²˜ë¦¬ê°€ ëœë‹¤.   ëŒ€í‘œì ìœ¼ë¡œ @RequestBodyëŠ” Json ë©”ì‹œì§€ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì´ ArgumentResolverì˜ êµ¬í˜„ì²´ì¸ RequestResponseBodyMethodProcessorê°€ ì²˜ë¦¬ë˜ë©°, ì´ ë‚´ë¶€ì—ì„œ @Validë¡œ ì‹œì‘í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ ìˆì„ ê²½ìš°ì— ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤. ë§Œì•½ @ModelAttributeë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ ModelAttributeMethodProcessorì— ì˜í•´ @Validê°€ ì²˜ë¦¬ëœë‹¤.   ê·¸ë¦¬ê³  ê²€ì¦ì— ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ MethodArgumentNotValidException ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë˜ê³ , ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì— ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡ëœ ì˜ˆì™¸ ë¦¬ì¡¸ë²„ì¸ DefalutHandlerExceptionResolverì— ì˜í•´ 400 BadRequest ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.   ì´ëŸ¬í•œ ì´ìœ ë¡œ @ValidëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ë™ì‘í•˜ë©° ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ ê³„ì¸µì—ì„œëŠ” ê²€ì¦ë˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ë¥¸ ê³„ì¸µì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” @Validatedì™€ ê²°í•©ë˜ì–´ì•¼ í•œë‹¤.   @Validated   ì…ë ¥ íŒŒë¼ë¯¸í„°ì˜ ìœ íš¨ì„± ê²€ì¦ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìµœëŒ€í•œ ì²˜ë¦¬í•˜ê³  ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. í•˜ì§€ë§Œ, ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ë¶ˆê°€í”¼í•˜ê²Œ ë‹¤ë¥¸ ê³³ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•´ì•¼ í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì€ ì´ë¥¼ ìœ„í•´ AOP ê¸°ë°˜ìœ¼ë¡œ ë©”ì†Œë“œì˜ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•´ì£¼ëŠ” @Validatedë¥¼ ì œê³µí•œë‹¤. @ValidatedëŠ” JSR í‘œì¤€ ê¸°ìˆ ì€ ì•„ë‹ˆê³  ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ë° ê¸°ëŠ¥ì´ë‹¤.   ë‹¤ìŒê³¼ ê°™ì´ í´ë˜ìŠ¤ì— @Validatedë¥¼ ë¶™ì—¬ì£¼ê³ , ìœ íš¨ì„±ì„ ê²€ì¦í•  ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ì— @Validë¥¼ ë¶™ì—¬ì£¼ë©´ ìœ íš¨ì„± ê²€ì¦ì´ ì§„í–‰ëœë‹¤.   1 2 3 4 5 6 7 @Service @Validated public class MemberService {     public void signup(@Valid MemberForm memberForm) {         ...     } }   ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ë° ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ @Validì—ì„œ ë°œìƒí•œ MethodArgumentNotValidException ì˜ˆì™¸ê°€ ì•„ë‹Œ ConstraintViolationException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. ì´ëŠ” @Validì™€ @Validatedì˜ ë™ì‘ì›ë¦¬ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.   @Validatedì˜ ë™ì‘ì›ë¦¬   @ValidëŠ” íŠ¹ì • ArgumentResolverì— ì˜í•´ ìœ íš¨ì„± ê²€ì‚¬ê°€ ì§„í–‰ë˜ì—ˆë‹¤ë©´ @ValidatedëŠ” AOP ê¸°ë°˜ìœ¼ë¡œ ë©”ì†Œë“œ ìš”ì²­ì„ ì¸í„°ì…‰í„°í•˜ì—¬ ì²˜ë¦¬ëœë‹¤. @Validatedë¥¼ í´ë˜ìŠ¤ ë ˆë²¨ì— ì„ ì–¸í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì— ìœ íš¨ì„± ê²€ì¦ì„ ìœ„í•œ AOPì˜ ì–´ë“œë°”ì´ìŠ¤ ë˜ëŠ” ì¸í„°ì…‰í„°ê°€ ë“±ë¡ëœë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë“¤ì´ í˜¸ì¶œë  ë•Œ AOPì˜ í¬ì¸íŠ¸ ì»·ìœ¼ë¡œì¨ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•œë‹¤.   ì´ëŸ¬í•œ ì´ìœ ë¡œ @Validatedë¥¼ ì‚¬ìš©í•˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬ ë“± ê³„ì¸µì— ë¬´ê´€í•˜ê²Œ ìŠ¤í”„ë§ ë¹ˆì´ë¼ë©´ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. ìœ íš¨ì„± ê²€ì¦ AOPê°€ ì ìš©ë˜ë„ë¡ í´ë˜ìŠ¤ì—ëŠ” @Validatedë¥¼ ê²€ì¦ì„ ì§„í–‰í•œ ë©”ì†Œë“œì—ëŠ” @Validë¥¼ ì„ ì–¸í•˜ë©´ ëœë‹¤.   @Validì™€ @ValidatedëŠ” ë™ì‘ì›ë¦¬ì˜ ì°¨ì´ë¡œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ê°€ ë‹¬ë¼ì§„ë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì.   @Validatedì˜ ë˜ ë‹¤ë¥¸ ê¸°ëŠ¥   @Validatedì˜ ë˜ ë‹¤ë¥¸ ê¸°ëŠ¥ì€ ê·¸ë£¹ ì§€ì • ê¸°ëŠ¥ì´ë‹¤. (ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ°ê²Œ ìˆë‹¤ ì •ë„ë¡œ ì´í•´í•˜ì.)   ì˜ˆë¥¼ ë“¤ì–´ ì¼ë°˜ ì‚¬ìš©ìì˜ ìš”ì²­ê³¼ ê´€ë¦¬ìì˜ ìš”ì²­ì´ 1ê°œì˜ í´ë˜ìŠ¤ë¡œ ì²˜ë¦¬ë  ë•Œ, ë‹¤ë¥¸ ì œì•½ ì¡°ê±´ì´ ì ìš©ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ë™ì¼í•œ í´ë˜ìŠ¤ì— ëŒ€í•œ ì œì•½ì¡°ê±´ì´ ìš”ì²­ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ”ë° ì´ì²˜ëŸ¼ ì œì•½ ì¡°ê±´ì´ ì ìš©ë  ê²€ì¦ ê·¸ë£¹ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ @Validatedê°€ ì œê³µí•œë‹¤.   ê²€ì¦ ê·¸ë£¹ì„ ì§€ì •í•˜ê¸° ìœ„í•´ì„œ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤. ì•ì„  ì˜ˆë¥¼ ì½”ë“œë¡œ ì ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.   1 2 public interface UserValidationGroup {} public interface AdminValidationGroup {}      ì°¸ê³  ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ ì¼ë°˜ì ì¸ ì¸í„°í˜ì´ìŠ¤ì™€ ë™ì¼í•˜ì§€ë§Œ ì‚¬ì‹¤ìƒ ì•„ë¬´ ë©”ì†Œë“œë„ ì„ ì–¸í•˜ì§€ ì•Šì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§í•œë‹¤.     ê·¸ë¦¬ê³  í•´ë‹¹ ì œì•½ ì¡°ê±´ì´ ì ìš©ë  ê·¸ë£¹ì„ groupsë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 /* DTOì˜ ê²½ìš° */ // ì œì•½ ì¡°ê±´ì´ ì ìš©ë  ê·¸ë£¹ì´ ì—¬ëŸ¬ ê°œì¼ ê²½ìš° @NotEmpty(groups = {UserValidationGroup.class, AdminValidationGroup.class} )  private String name;   @NotEmpty(groups = UserValidationGroup.class)  private String userId;   @NotEmpty(groups = AdminValidationGroup.class)  private String adminId;  /* Controllerì˜ ê²½ìš° */ @PostMapping(\"members/new\") public String create(@Validated(UserValidationGroup.class) MemberForm form) {     ... }   ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜   JSR í‘œì¤€ ìŠ¤í™ì€ ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì„ ì œê³µí•œë‹¤.      @NotNull: nullì´ ì•„ë‹Œì§€ ê²€ì¦í•œë‹¤.   @NotEmpty: null, ë¹ˆ ìŠ¤íŠ¸ë§(â€â€)ì´ ì•„ë‹Œì§€ ê²€ì¦í•œë‹¤.   @NotBlank: null, ë¹ˆ ìŠ¤íŠ¸ë§(â€â€), ê³µë°±(â€ â€œ)ì´ ì•„ë‹Œì§€ ê²€ì¦í•œë‹¤.   @AssertTrue: trueì¸ì§€ ê²€ì¦í•œë‹¤.   @Size: ê°’ì´ ì£¼ì–´ì§„ ê°’ ì‚¬ì´ì— í•´ë‹¹í•˜ëŠ”ì§€ ê²€ì¦í•œë‹¤.   @Min: ê°’ì´ ì£¼ì–´ì§„ ê°’ë³´ë‹¤ ì‘ì€ì§€ ê²€ì¦í•œë‹¤.   @Max: ê°’ì´ ì£¼ì–´ì§„ ê°’ë³´ë‹¤ í°ì§€ ê²€ì¦í•œë‹¤.   @Pattern: ê°’ì´ ì£¼ì–´ì§„ íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•œë‹¤.   ì´ê²ƒ ì™¸ì—ë„ ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•˜ë¯€ë¡œ ê³µì‹ ë¬¸ì„œ(ë§í¬)ë¥¼ ì°¸ê³ í•˜ì.   @Valid, @Validated ì°¨ì´   @ValidëŠ” ìë°” í‘œì¤€ ìŠ¤í™ì´ë©° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ìœ íš¨ì„± ê²€ì¦ì´ ê°€ëŠ¥í•˜ë‹¤. ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ MethodArgumentNotValidExceptionì´ ë°œìƒí•œë‹¤.   @ValidatedëŠ” ìë°” í‘œì¤€ ìŠ¤í™ì´ ì•„ë‹Œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ê³„ì¸µì— ë¬´ê´€í•˜ê²Œ ìŠ¤í”„ë§ ë¹ˆì´ë¼ë©´ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. í´ë˜ìŠ¤ì—ëŠ” @Validatedë¥¼ ë©”ì„œë“œì—ëŠ” @Validë¥¼ ë¶™ì—¬ì¤€ë‹¤. ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ConstraintViolationExceptionì´ ë°œìƒí•œë‹¤.  ","categories": ["Spring"],
        "tags": ["Spring"],
        "url": "/spring/Spring-Valid-Validated/",
        "teaser": ""
      },{
        "title": "ë³€ê²½ ê°ì§€ì™€ ë³‘í•©",
        "excerpt":" âœ¨ ê²°ë¡ ë¶€í„° ë§í•˜ë©´ ë³‘í•©(merge)ì€ ì‚¬ìš©í•˜ì§€ ë§ê³  ë³€ê²½ ê°ì§€(Dirth Checking)ë¥¼ ì‚¬ìš©í•˜ì.    ë³€ê²½ ê°ì§€ì™€ ë³‘í•©ì— ëŒ€í•´ ì•Œì•„ë³´ê¸° ì „ì— ë¨¼ì € ì¤€ì˜ì† ì—”í‹°í‹°ì— ëŒ€í•´ ì•Œì•„ë³´ì.   ì¤€ì˜ì† ì—”í‹°í‹°   ì¤€ì˜ì† ì—”í‹°í‹°ë€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ì—”í‹°í‹°ë¥¼ ë§í•œë‹¤. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬(detached)ëœ ì—”í‹°í‹°ì´ë‹¤.   ì—¬ê¸°ì„œëŠ” itemService.saveItem(book)ì—ì„œ ìˆ˜ì •ì„ ì‹œë„í•˜ëŠ” Book ê°ì²´ì´ë‹¤. Book ê°ì²´ëŠ” ì´ë¯¸ DBì— í•œë²ˆ ì €ì¥ë˜ì–´ì„œ ì‹ë³„ìê°€ ì¡´ì¬í•œë‹¤. ì´ë ‡ê²Œ ì„ì˜ë¡œ ë§Œë“¤ì–´ë‚¸ ì—”í‹°í‹°ë„ ê¸°ì¡´ ì‹ë³„ìë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ ì¤€ì˜ì† ì—”í‹°í‹°ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.   ì¤€ì˜ì†ì´ë¼ëŠ” ë‹¨ì–´ëŠ” ê°ì²´ë¥¼ new í–ˆê±°ë‚˜, ì•ˆí–ˆê±°ë‚˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. í•µì‹¬ì€ ì‹ë³„ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì˜ì†ìƒíƒœê°€ ë˜ì–´ì„œ DBì— ì €ì¥ëœ ì ì´ ìˆëŠ”ê°€ ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒê°í•´ì•¼ í•œë‹¤. ê·¸ë˜ì„œ ì‹ë³„ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì´ë¯¸ í•œë²ˆ ì˜ì†ìƒíƒœê°€ ë˜ì–´ë²„ë¦° ì—”í‹°í‹°ê°€ ìˆëŠ”ë°, ë”ì´ìƒ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ëª¨ë‘ ì¤€ì˜ì† ìƒíƒœì´ë‹¤.   1 2 3 4 5 6 7 8 9 10 11 @PostMapping(\"/items/{itemId}/edit\") public String updateItem(@PathVariable Long itemId, @ModelAttribute(\"form\") BookForm form) {     Book book = new Book();     book.setId(form.getId());     book.setName(form.getName());     book.setPrice(form.getPrice());     ...      itemService.saveItem(book);     return \"redirect:/items\"; }   ìœ„ì˜ Bookì€ ìƒˆë¡œìš´ ê°ì²´ì´ë‹¤. í•˜ì§€ë§Œ, Bookì— ë“¤ì–´ê°€ëŠ” ë°ì´í„°ëŠ” ì´ë¯¸ DBì— í•œë²ˆ ì €ì¥ë˜ì–´ì„œ ì‹ë³„ìê°€ ì¡´ì¬í•œë‹¤. ì„ì˜ë¡œ ë§Œë“¤ì–´ë‚¸ ì—”í‹°í‹°ë„ ê¸°ì¡´ ì‹ë³„ìë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ ì¤€ì˜ì† ì—”í‹°í‹°ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.   ì¤€ì˜ì† ì—”í‹°í‹°ì˜ ë¬¸ì œì ì€ JPAê°€ ê´€ë¦¬ë¥¼ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³€ê²½ ê°ì§€ê°€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì¤€ì˜ì† ì—”í‹°í‹°ë¥¼ ì–´ë–»ê²Œ ìˆ˜ì •í•´ì•¼ í• ê¹Œ?   ì¤€ì˜ì† ì—”í‹°í‹°ë¥¼ ìˆ˜ì •í•˜ëŠ” ë°©ë²•   ì¤€ì˜ì† ì—”í‹°í‹°ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë³€ê²½ ê°ì§€(Dirty Checking) ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³‘í•©(merge)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.      ì°¸ê³  ì—”í‹°í‹°ëŠ” ì˜ì† ìƒíƒœë¡œ ê´€ë¦¬ëœë‹¤. ì˜ì† ìƒíƒœì— ìˆëŠ” ì—”í‹°í‹°ëŠ” ê°’ë§Œ ë°”ê¿”ë„ JPAê°€ íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì— ë³€ê²½ëœ ë‚´ìš©ì„ ì•Œì•„ì„œ ë³€ê²½í•´ì¤€ë‹¤.     ë³€ê²½ ê°ì§€ì™€ ë³‘í•©(merge)   ë³€ê²½ ê°ì§€ ê¸°ëŠ¥ ì‚¬ìš©   ë³€ê²½ ê°ì§€ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹°ë¥¼ ë‹¤ì‹œ ì¡°íšŒí•œ í›„ì— ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤.   íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ì‹ë³„ìë¥¼ í†µí•´ ì—”í‹°í‹°ë¥¼ ë‹¤ì‹œ ì¡°íšŒí•œ í›„, íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì (flush())ì— JPAê°€ ë³€ê²½ëœ ë‚´ìš©ì„ ì°¾ì•„ì„œ DBì— UPDATE SQL ì‹¤í–‰í•œë‹¤. ì´ê²ƒì´ ë³€ê²½ ê°ì§€(Dirty Checking)ì´ë‹¤.   1 2 3 4 5 6 7 @Transactional public void updateItem(Long itemId, Book param){     Item findItem = itemRepository.findOne(itemId);     findItem.setPrice(param.getPrice());     findItem.setName(param.getName());     findItem.setStockQuantity(param.getStockQuantity()); }      íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ itemRepository.findOne(itemId)ì„ ì¡°íšŒí•˜ë¯€ë¡œ ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ë¥¼ ì°¾ì•„ì˜¨ë‹¤.            íŠ¸ëœì­ì…˜ ë°”ê¹¥ì—ì„œ ì¡°íšŒí•˜ë©´ ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.           ì˜ì† ìƒíƒœì˜ ë°ì´í„°ë¥¼ setter()ë¡œ ìˆ˜ì •í•œë‹¤.   @Transactional ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì¸í•´ ì»¤ë°‹ì´ ë˜ë©´ì„œ flush()ë¥¼ ë‚ ë¦¬ë©´, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ë³€ê²½ì´ ì¼ì–´ë‚œ ì—”í‹°í‹°ë¥¼ ì°¾ì•„ DBì— update ì¿¼ë¦¬ë¥¼ ë‚ ë ¤ì¤€ë‹¤.   ë³‘í•©(merge)   ë³‘í•©ì€ ì¤€ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ë¥¼ ì˜ì† ìƒíƒœë¡œ ë³€ê²½í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.   1 2 3 4 @Transactional void update(Item itemParam) { //itemParam: íŒŒë¦¬ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ì¤€ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°     Item mergeItem = em.merge(itemParam); }   ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ ë³‘í•©ì€ ë³€ê²½ ê°ì§€ì—ì„œ ì‚¬ìš©í–ˆë˜ ì½”ë“œë¥¼ JPAê°€ ì½”ë“œ í•œì¤„ë¡œ ì²˜ë¦¬í•œ ê²ƒì´ë‹¤. merge()ê°€ í˜¸ì¶œë˜ë©´ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ itemì˜ ì‹ë³„ì ê°’ìœ¼ë¡œ 1ì°¨ ìºì‹œì—ì„œ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œë‹¤. ë§Œì•½, 1ì°¨ ìºì‹œì— ì—”í‹°í‹°ê°€ ì—†ìœ¼ë©´ DBë¥¼ ì¡°íšŒí•˜ê³  1ì°¨ ìºì‹œì— ì €ì¥í•œë‹¤. ì¡°íšŒí•œ ì—”í‹°í‹°ëŠ” ì˜ì† ìƒíƒœì´ë‹¤. JPAê°€ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ ê°’(ì¤€ì˜ì† ì—”í‹°í‹°)ì„ ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ì˜ ê°’ê³¼ ëª¨ë‘ ë°”ê¿”ì¹˜ê¸°(êµì²´, merge) í•œë‹¤. (findItem.setPrice(param.getPrice())ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤.)   ê²°ê³¼ì ìœ¼ë¡œ, ìœ„ì˜ ì½”ë“œì—ì„œ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ itemParamì€ ì¤€ì˜ì† ìƒíƒœì´ê³  mergeItemì€ ì˜ì† ìƒíƒœì´ë‹¤.   ì™œ ë³€ê²½ ê°ì§€ë¥¼ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?   ë³€ê²½ ê°ì§€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ì›í•˜ëŠ” ì†ì„±ë§Œ ì„ íƒí•´ì„œ ë³€ê²½í•  ìˆ˜ ìˆì§€ë§Œ, ë³‘í•©ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ì†ì„±ì´ ë³€ê²½ëœë‹¤. ë³‘í•© ì‹œ ê°’ì´ ì—†ìœ¼ë©´ nullë¡œ ì—…ë°ì´íŠ¸ í•  ìœ„í—˜ì´ ìˆë‹¤. (ë³‘í•©ì€ ëª¨ë“  í•„ë“œë¥¼ êµì²´í•œë‹¤.)   ì‹¤ë¬´ì—ì„œ ë°ì´í„° ìˆ˜ì •ì€ ë§¤ìš° ì œí•œì ì´ë‹¤. ëª¨ë“  í•„ë“œë¥¼ ë³€ê²½í•˜ëŠ” ê²½ìš°ê°€ ê±°ì˜ ì—†ë‹¤. ë”°ë¼ì„œ, ì‹¤ë¬´ì—ì„  ê°€ê¸‰ì  ë³‘í•©(merge)ì„ ì“°ì§€ ë§ê³  ë³€ê²½ ê°ì§€ë¥¼ ì‚¬ìš©í•˜ì.      ì°¸ê³  ì˜ì†ìƒíƒœì˜ ì—”í‹°í‹° ìˆ˜ì • ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ëŠ” ë³€ê²½ ê°ì§€ ê¸°ëŠ¥ì´ ë™ì‘í•´ì„œ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ ìë™ìœ¼ë¡œ ìˆ˜ì •ëœë‹¤. ë”°ë¼ì„œ, ë³„ë„ì˜ ìˆ˜ì • ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤.     ì •ë¦¬   ì—”í‹°í‹°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” í•­ìƒ ë³€ê²½ ê°ì§€ë¥¼ ì‚¬ìš©í•˜ì.           ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì–´ì„¤í”„ê²Œ ì—”í‹°í‹°ë¥¼ ìƒì„±í•˜ì§€ ë§ì.       1 2 3 4 5 6 7 8 9 10 11 12  /* ItemController */  @PostMapping(\"/items/{itemId}/edit\")  public String updateItem(@PathVariable Long itemId, @ModelAttribute(\"form\") BookForm form){      // ì—”í‹°í‹° ìƒì„±í•˜ëŠ” ì½”ë“œ      /*Book book = new Book();      book.setId(form.getId());      book.setName(form.getName());      book.setPrice(form.getPrice());      book.setStockQuantity(form.getStockQuantity());*/      itemService.updateItem(itemId, form.getName(), form.getPrice(), form.getStockQuantity());      return \"redirect:/items\";  }           1 2 3 4 5 6 7 8 9 10  /* ItemService */  @Transactional  public void updateItem(Long itemId, String name, int price, int stockQuantity) {      Item findItem = itemRepository.findOne(itemId);      // setter() ì‚¬ìš© í”¼í•˜ì.      /*findItem.setName(name);      findItem.setPrice(price);      findItem.setStockQuantity(stockQuantity);*/      findItem.update(itemId, name, price, stockQuantity);  }           íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•  ë°ì´í„°ê°€ ë§ë‹¤ë©´ DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ë‹¤.       1 2 3 4 5 6  /* ItemService */  @Transactional  public void updateItem(Long itemId, UpdateItemDto item) {      Item findItem = itemRepository.findOne(itemId);      ...  }           ì°¸ê³ ë¡œ setter()ë¥¼ ì—´ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë³€ê²½ê³¼ ê´€ë ¨ëœ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.       íŠ¸ëœì­ì…˜ì´ ìˆëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µì— ì‹ë³„ì( id )ì™€ ë³€ê²½í•  ë°ì´í„°ë¥¼ ëª…í™•í•˜ê²Œ ì „ë‹¬ (íŒŒë¼ë¯¸í„° or dto)   íŠ¸ëœì­ì…˜ì´ ìˆëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ê³ , ì—”í‹°í‹°ì˜ ë°ì´í„°ë¥¼ ì§ì ‘ ë³€ê²½   íŠ¸ëœì­ì…˜ ì»¤ë°‹ ì‹œì ì— ë³€ê²½ ê°ì§€ê°€ ì‹¤í–‰ë¨  ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-DirtyChecking-Merge/",
        "teaser": ""
      },{
        "title": "ì˜ì†ì„± ì „ì´, Cascade",
        "excerpt":"ì˜ì†ì„± ì „ì´ë€?   Cascadeë¼ê³ ë„ í•œë‹¤. ì—”í‹°í‹°ì˜ ìƒíƒœ ë³€í™”ë¥¼ ì „íŒŒì‹œí‚¤ëŠ” ì˜µì…˜ìœ¼ë¡œ ë§Œì•½ ì—”í‹°í‹°ì— ìƒíƒœ ë³€í™”ê°€ ìˆìœ¼ë©´ ì—°ê´€ë˜ì–´ ìˆëŠ” ì—”í‹°í‹°ì—ë„ ìƒíƒœ ë³€í™”ë¥¼ ì „ì´ì‹œí‚¤ëŠ” ì˜µì…˜ì´ë‹¤.   ì‚¬ìš©í•˜ëŠ” ì´ìœ ?   Cascadeë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì˜ˆë¥¼ ë“¤ê² ë‹¤. OrderItemê³¼ OrderëŠ” ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì´ë‹¤.   Cascadeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ OrderItemì„ ì €ì¥í•  ë•Œ ëª¨ë“  ì—”í‹°í‹°ë¥¼ ê°ê° persist() í•´ì£¼ì–´ì•¼ í•œë‹¤. ê°ê° ì—”í‹°í‹°ë§ˆë‹¤ ì ìš©í•´ì•¼ í•˜ë¯€ë¡œ ë²ˆê±°ë¡­ê³  ê·€ì°®ë‹¤.   1 2 3 4 5 6 //@OneToMany(mappedBy = \"order\") //private List&lt;OrderItem&gt; orderItems = new ArrayList&lt;&gt;(); em.persist(orderItemA); em.persist(orderItemB); em.persist(orderItemC); em.persist(order);   Cascadeë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ ê°„ë‹¨í•´ì§„ë‹¤. orderë§Œ persist() í•´ì£¼ë©´ ëœë‹¤.   1 2 3 //@OneToMany(mappedBy = \"order\", cascade = CascadeType.ALL) //private List&lt;OrderItem&gt; orderItems = new ArrayList&lt;&gt;(); em.persist(order);   Cascade ì˜µì…˜   Cascadeì—” 6ê°€ì§€ ì˜µì…˜ì´ ìˆë‹¤.      ALL   PERSIST   REMOVE   MERGE   REFERESH   DETACH   ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ì€ ALLê³¼ PERSISTì´ë‹¤. Allì˜ ê²½ìš° ëª¨ë“  ì˜ì†ì„±ì´ ì „ì´ë˜ëŠ” ê²½ìš°ì´ê³  Persistì˜ ê²½ìš° ì—”í‹°í‹°ê°€ ì €ì¥ë  ë•Œë§Œ ì—°ì‡„ì ìœ¼ë¡œ ì €ì¥ë˜ê²Œ í•˜ëŠ” ì˜µì…˜ì´ë‹¤.   ì–´ë””ì— ì¨ì•¼ í• ê¹Œ?   ì¼ëŒ€ë‹¤ ì—°ê´€ê´€ê³„ ê¸°ì¤€ìœ¼ë¡œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ë‹¤ ìª½ì— ìˆë‹¤. ê·¸ ë°˜ëŒ€ìª½ ì—”í‹°í‹°ì— ì‚¬ìš©í•˜ë©´ ëœë‹¤.   ì–¸ì œ ì¨ì•¼ í• ê¹Œ?      Cascade ë˜ëŠ” ì—”í‹°í‹°ì™€ Cascadeë¥¼ ì„¤ì •í•˜ëŠ” ì—”í‹°í‹°ì˜ ë¼ì´í”„ì‚¬ì´í´ì´ ë™ì¼í•˜ê±°ë‚˜ ë¹„ìŠ·í•´ì•¼ í•œë‹¤.   Cascade ë˜ëŠ” ì—”í‹°í‹°ê°€ Cascadeë¥¼ ì„¤ì •í•˜ëŠ” ì—”í‹°í‹°ì—ì„œë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤.   ì˜ˆë¥¼ ë“¤ì–´, Postì™€ Imageê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì. ImageëŠ” Postì—ì„œë§Œ ì‚¬ìš©ë˜ê³  Postê°€ ì‚­ì œë˜ë©´ Imageë„ ì‚­ì œë˜ì–´ì•¼ í•œë‹¤. ê²°ë¡ ì ìœ¼ë¡œ, Imageì™€ Postê°€ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì¼ ê²½ìš° Post ì—”í‹°í‹°ì— ì •ì˜ëœ List imagesì— Cascade.ALL ì˜µì…˜ì„ ì¤„ ìˆ˜ ìˆë‹¤.   1 2 3 4 public class Post {     @OneToMany(mappedBy = \"post\", cascade = Cascade.ALL)     List&lt;Image&gt; images = new ArrayList&lt;&gt;(); }   1 2 3 4 5 public class Image {     @ManyToOne(fetch = FetchType.LAZY)     @JoinColumn(name = \"post_id\")     private Post post; }   cascadeë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ì‚´í´ë³´ì. ì˜ˆë¥¼ ë“¤ì–´ Post, Comment, Memberê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì.      Postì™€ Comment: ì¼ëŒ€ë‹¤ ì—°ê´€ê´€ê³„, Cascade ì ìš©   Memberì™€ Comment: ì¼ëŒ€ë‹¤ ì—°ê´€ê´€ê³„   ë§Œì•½, ê²Œì‹œê¸€ì´ ì‚­ì œë˜ë©´ í•´ë‹¹ ê²Œì‹œë¬¼ì— ë‹¬ë¦° ëŒ“ê¸€ë„ ì‚­ì œëœë‹¤. ì´ì œ ì‚¬ìš©ìëŠ” ë” ì´ìƒ ìì‹ ì´ ì‘ì„±í•œ ëŒ“ê¸€ì„ í™•ì¸í•  ìˆ˜ ì—†ë‹¤. ì„¤ê³„ ìƒ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•œ ê²ƒì´ë©´ ìƒê´€ì—†ì§€ë§Œ ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ì—” í° ë¬¸ì œê°€ ìƒê¸´ë‹¤.   ê²°ë¡ ì€ ëª¨ë“  @OneToManyì— cascade ì˜µì…˜ì„ ê±¸ì–´ ë²„ë¦¬ë©´ ì•ˆëœë‹¤.   ê³ ì•„ ê°ì²´ (orphanRemoval)   cascadeì™€ ë¹„ìŠ·í•œ orphanRemovalì— ëŒ€í•´ ì•Œì•„ë³´ê² ë‹¤.   ë¶€ëª¨ì™€ ì—°ê´€ê´€ê³„ê°€ ëŠì–´ì§„ ì—”í‹°í‹°ë¥¼ ê³ ì•„ê°ì²´ë¼ê³  í•˜ë©° ì´ëŸ¬í•œ ê³ ì•„ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì‚­ì œí•´ì£¼ëŠ” ì˜µì…˜ì„ í™œì„±í™” ì‹œí‚¤ëŠ” ê²ƒì´ orphanRemoval = true ì˜µì…˜ì„ @OneToManyì— ì£¼ëŠ” ê²ƒì´ë‹¤.   orphanRemoval=true ì˜µì…˜ì€ ë¼ì´í”„ ì‚¬ì´í´ì´ ë™ì¼í•˜ê³  í•´ë‹¹ ì—”í‹°í‹°ì—ì„œë§Œ ì“°ì´ëŠ” ì—”í‹°í‹°ì¼ ê²½ìš° ì‚¬ìš©í•´ì£¼ë©´ ëœë‹¤. (Cascadeì™€ ë™ì¼í•œ ë§¥ë½)   orphanRemoval=trueì™€ Cascade.REMOVE   ì°¨ì´ì    Cascade.REMOVEì˜ ê²½ìš° ì¼(Post)ì— í•´ë‹¹í•˜ëŠ” ì—”í‹°í‹°ë¥¼ em.remove()ë¥¼ í†µí•´ ì§ì ‘ ì‚­ì œí•  ë•Œ ë‹¤(Image)ì— í•´ë‹¹í•˜ëŠ” ì—”í‹°í‹°ë“¤ì´ ì‚­ì œë˜ëŠ” ê²ƒì´ë‹¤.   orphanRemoval=trueëŠ” ìœ„ì˜ ê²½ìš°ëŠ” ë¬¼ë¡ ì´ê³  ì—”í‹°í‹°ì˜ ë¦¬ìŠ¤íŠ¸ì—ì„œ ìš”ì†Œë¥¼ ì‚­ì œí•˜ê¸°ë§Œ í•´ë„ í•´ë‹¹ ì—”í‹°í‹°ê°€ deleteë˜ëŠ” ê¸°ëŠ¥ê¹Œì§€ í¬í•¨í•˜ê³  ìˆë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.   í•¨ê»˜ ì‚¬ìš©í•˜ë©´?   orphanRemoval=trueì™€ Cascade.ALLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë‹¤(Image)ì— í•´ë‹¹í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ í˜•íƒœì˜ ì—”í‹°í‹°ëŠ” ì¼(Post)ì— í•´ë‹¹í•˜ëŠ” ì—”í‹°í‹°ì™€ ë¼ì´í”„ ì‚¬ì´í´ì´ ì™„ì „íˆ ë˜‘ê°™ì•„ì§„ë‹¤. ë˜í•œ, ë‹¤ë¥¸ ì—”í‹°í‹°ì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì—”í‹°í‹°ì¼ ê²ƒì´ë‹¤. ì¦‰, ë¶€ëª¨ ì—”í‹°í‹°ë¥¼ í†µí•´ ìì‹ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.  ","categories": ["JPA"],
        "tags": ["JPA","Spring"],
        "url": "/jpa/JPA-cascade/",
        "teaser": ""
      }]
