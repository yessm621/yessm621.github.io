---
title: "Spring Boot3, Swagger (feat. API ë¬¸ì„œ ìë™ ìƒì„±)"
categories:
  - Spring
tags:
  - RestAPI
  - Swagger
toc: true
toc_sticky: true
---

ì‚¼ì©œì‚¼ ê³¼ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì²˜ìŒ ì•Œê²Œ ëœ Swaggerì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤. ê¸°ì¡´ì— API ë¬¸ì„œë¥¼ ìƒì„±í•  ë• Spring REST Docsë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì„±í•œ ê²½í—˜ì´ ìˆë‹¤. Spring REST Docsì™€ Swaggerì— ëŒ€í•´ ì•Œì•„ë³´ê³  Swagger ì‚¬ìš©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

## Spring REST Docs

Spring REST DocsëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ API ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œ APIë§Œ ë¬¸ì„œí™”ë˜ê¸° ë•Œë¬¸ì— ì•ˆì •ì„±ì„ ë³´ì¥í•œë‹¤. í•˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ ì½”ë“œ ì•„ë˜ì— ì´ì–´ ë¶™ì´ëŠ” í˜•ì‹ìœ¼ë¡œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì–‘ì´ ë§ì•„ì§„ë‹¤.

## Swagger

SwaggerëŠ” API ë¬¸ì„œ ì‘ì—…ì„ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ë“± Production ì½”ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ API ë¬¸ì„œë¥¼ ì‘ì„±í•´ì¤€ë‹¤. í•˜ì§€ë§Œ, Production ì½”ë“œì— Swagger ê´€ë ¨ ì½”ë“œê°€ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

SwaggerëŠ” springdocì™€ springfox ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆëŠ”ë° springfoxëŠ” 2.7.x ë²„ì „ê¹Œì§€ë§Œ ì ìš©í•  ìˆ˜ ìˆê³  Spring Boot 3 ë¶€í„°ëŠ” springdocì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ê³  í•œë‹¤.

### dependency ì¶”ê°€

ë¨¼ì € Swaggerë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ Dependencyë¥¼ ì¶”ê°€í•œë‹¤.

```
// build.gradle
implementation 'org.springframework.boot:spring-boot-starter-validation'
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'
implementation 'org.springdoc:springdoc-openapi-ui:1.6.9'
```

```yaml
springdoc:
  swagger-ui:
    # path: /swagger-ui.html # Swagger API ë¬¸ì„œ ì£¼ì†Œ ì„¤ì •
    operationsSorter: method
    disable-swagger-default-url: true
    display-request-duration: true
  show-actuator: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
```

### Swagger ì„¤ì • íŒŒì¼

JWT í† í°ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ì™€ ê´€ë ¨ëœ ì„¤ì •ë„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

```java
package com.szs.config;

import io.swagger.v3.oas.annotations.OpenAPIDefinition;
import io.swagger.v3.oas.annotations.info.Info;
import io.swagger.v3.oas.models.Components;
import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.security.SecurityRequirement;
import io.swagger.v3.oas.models.security.SecurityScheme;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@OpenAPIDefinition(info = @Info(title = "API ëª…ì„¸ì„œ", version = "v1"))
@RequiredArgsConstructor
@Configuration
public class SwaggerConfig {

    @Bean
    public OpenAPI openAPI() {
        String jwtSchemeName = "JWT Token";

        SecurityRequirement securityRequirement = new SecurityRequirement().addList(jwtSchemeName);

        Components components = new Components()
                .addSecuritySchemes(jwtSchemeName, new SecurityScheme()
                        .name(jwtSchemeName)
                        .type(SecurityScheme.Type.HTTP)
                        .scheme("bearer")
                        .bearerFormat("JWT"));

        return new OpenAPI()
                .components(components)
                .addSecurityItem(securityRequirement);
    }
}
```

JWT Token ì‚¬ìš© ì˜ˆì‹œ 

```markdown
curl -X 'GET' \
  'http://localhost:8080/szs/me' \
  -H 'accept: application/json' \
  -H 'Authorization: Bearer xxxx' // JWT Token ì„¤ì •
```


### ì»¨íŠ¸ë¡¤ëŸ¬

```java
package com.szs.controller;

import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.media.Content;
import io.swagger.v3.oas.annotations.media.Schema;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.responses.ApiResponses;
import io.swagger.v3.oas.annotations.tags.Tag;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.core.Authentication;
import org.springframework.web.bind.annotation.*;

@RestController
@RequiredArgsConstructor
@Slf4j
@RequestMapping("/szs")
public class UserController {

    private final UserService userService;

    @Tag(name = "íšŒì›ê°€ì…, ë¡œê·¸ì¸")
    @Operation(summary = "ë¡œê·¸ì¸", description = "ë¡œê·¸ì¸ì„ ì„±ê³µí•˜ë©´ í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤.")
    @ApiResponses({
            @ApiResponse(responseCode = "200", description = "OK"),
            @ApiResponse(responseCode = "404", description = "NOT FOUND",
                    content = @Content(schema = @Schema(implementation = Response.class))),
            @ApiResponse(responseCode = "409", description = "UNAUTHORIZED",
                    content = @Content(schema = @Schema(implementation = Response.class))),
            @ApiResponse(responseCode = "500", description = "INTERNAL SERVER ERROR",
                    content = @Content(schema = @Schema(implementation = Response.class)))
    })
    @PostMapping("/login")
    public Response<UserLoginResponse> login(
            @Parameter(description = "ë¡œê·¸ì¸ ì‹œ í•„ìš”í•œ ìš”ì²­ ì •ë³´", required = true, content = @Content(schema = @Schema(implementation = UserLoginRequest.class)))
            @RequestBody UserLoginRequest request) {
        String token = userService.login(request.toDto(request));
        return Response.success(new UserLoginResponse(token));
    }
}
```

- @Tag: Tagì— ì„¤ì •ëœ nameì´ ê°™ì€ ê²ƒ ë¼ë¦¬ í•˜ë‚˜ì˜ API ê·¸ë£¹ìœ¼ë¡œ ë¬¶ëŠ”ë‹¤.
- @Operation: í•´ë‹¹ APIê°€ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ì§€ ê°„ëµí•œ ì„¤ëª…ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
- @ApiResponses, @ApiResponse: APIì˜ Response ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤. @ApiResponsesëŠ” ì—¬ëŸ¬ Response ë“¤ì„ ë¬¶ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , @ApiResponseëŠ” ë‹¨ì¼ Responseì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

![1](https://github.com/yessm621/yessm621.github.io/assets/79130276/965a2c54-c03c-43b2-acc4-6437a7e3d7f3)

![2](https://github.com/yessm621/yessm621.github.io/assets/79130276/a57f6938-a4b0-403b-9936-0296316e7698)

![3](https://github.com/yessm621/yessm621.github.io/assets/79130276/382bc370-5281-4a4a-bf11-746a584bfd95)

### Request Body ì •ë³´ ëª…ì„¸

```java
package com.szs.controller.request;

import io.swagger.v3.oas.annotations.media.Schema;

@Schema(description = "ë¡œê·¸ì¸ ìš”ì²­ ì •ë³´")
public record UserLoginRequest(
        @Schema(description = "ì•„ì´ë””", example = "hong12")
        String userId,
        @Schema(description = "íŒ¨ìŠ¤ì›Œë“œ", example = "password1213")
        String password) {
}
```

- @Schema: í´ë˜ìŠ¤ ë ˆë²¨ì— ì‚¬ìš©í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì–´ë–¤ í´ë˜ìŠ¤ì¸ì§€ ì„¤ëª…ì„ ì‘ì„±í•  ìˆ˜ ìˆê³ , í•„ë“œì— ì‚¬ìš©í•˜ë©´ ê° í•„ë“œì— ëŒ€í•œ ì„¤ëª…, ì˜ˆì‹œ, í•„ìˆ˜ ê°’ ì—¬ë¶€ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

![4](https://github.com/yessm621/yessm621.github.io/assets/79130276/1be5fffe-52a1-47ce-86d1-c49ac2ddae60)

### JWT í† í°

JWT í† í°ì´ í•„ìš”í•œ ê²½ìš° ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì´ˆë¡ìƒ‰ ë²„íŠ¼ì„ í´ë¦­ í›„ í† í°ì„ ì…ë ¥í•œ í›„ ìš”ì²­ì„ ì§„í–‰í•˜ë©´ ëœë‹¤.

![5](https://github.com/yessm621/yessm621.github.io/assets/79130276/8929aa7d-9665-45e8-8fe7-115833023c51)

### Swagger ê¸°ë³¸ ì£¼ì†Œ

Swaggerì˜ ê¸°ë³¸ ì£¼ì†ŒëŠ” http://localhost:8080/swagger-ui/index.html ì´ë‹¤.

ë§Œì•½ ì£¼ì†Œë¥¼ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ yml ì„¤ì • íŒŒì¼ì—ì„œ ë³€ê²½í•˜ë©´ ëœë‹¤.

```yaml
springdoc.swagger-ui.path: /swagger-ui.html
```

## ë§ˆì¹˜ë©°

Spring REST Docsì™€ Swaggerë¥¼ ëª¨ë‘ ì‚¬ìš©í•´ë³¸ ê²½í—˜ìœ¼ë¡œëŠ” Swaggerë³´ë‹¨ Spring REST Docsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ê²ƒ ê°™ë‹¤. ì¼ë‹¨, ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œì— Swagger ê´€ë ¨ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë„ˆë¬´ ì§€ì €ë¶„í•˜ë‹¤..ğŸ¥²Â Spring REST Docsë¥¼ ì‚¬ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²¸.. ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì¥ì ì´ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ìƒê°ì„ í•œë‹¤.